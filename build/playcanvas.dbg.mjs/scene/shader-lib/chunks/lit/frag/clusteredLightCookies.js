var clusteredLightCookiesPS = /* glsl */`
vec3 _getCookieClustered(TEXTURE_ACCEPT(tex), vec2 uv, float intensity, bool isRgb, vec4 cookieChannel) {
    vec4 pixel = mix(vec4(1.0), texture2DLodEXT(tex, uv, 0.0), intensity);
    return isRgb == true ? pixel.rgb : vec3(dot(pixel, cookieChannel));
}

// getCookie2D for clustered lighting including channel selector
vec3 getCookie2DClustered(TEXTURE_ACCEPT(tex), mat4 transform, vec3 worldPosition, float intensity, bool isRgb, vec4 cookieChannel) {
    vec4 projPos = transform * vec4(worldPosition, 1.0);
    return _getCookieClustered(TEXTURE_PASS(tex), projPos.xy / projPos.w, intensity, isRgb, cookieChannel);
}

// getCookie for clustered omni light with the cookie texture being stored in the cookie atlas
vec3 getCookieCubeClustered(TEXTURE_ACCEPT(tex), vec3 dir, float intensity, bool isRgb, vec4 cookieChannel, float shadowTextureResolution, float shadowEdgePixels, vec3 omniAtlasViewport) {
    vec2 uv = getCubemapAtlasCoordinates(omniAtlasViewport, shadowEdgePixels, shadowTextureResolution, dir);
    return _getCookieClustered(TEXTURE_PASS(tex), uv, intensity, isRgb, cookieChannel);
}
`;

export { clusteredLightCookiesPS as default };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2x1c3RlcmVkTGlnaHRDb29raWVzLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvc2NlbmUvc2hhZGVyLWxpYi9jaHVua3MvbGl0L2ZyYWcvY2x1c3RlcmVkTGlnaHRDb29raWVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IC8qIGdsc2wgKi9gXG52ZWMzIF9nZXRDb29raWVDbHVzdGVyZWQoVEVYVFVSRV9BQ0NFUFQodGV4KSwgdmVjMiB1diwgZmxvYXQgaW50ZW5zaXR5LCBib29sIGlzUmdiLCB2ZWM0IGNvb2tpZUNoYW5uZWwpIHtcbiAgICB2ZWM0IHBpeGVsID0gbWl4KHZlYzQoMS4wKSwgdGV4dHVyZTJETG9kRVhUKHRleCwgdXYsIDAuMCksIGludGVuc2l0eSk7XG4gICAgcmV0dXJuIGlzUmdiID09IHRydWUgPyBwaXhlbC5yZ2IgOiB2ZWMzKGRvdChwaXhlbCwgY29va2llQ2hhbm5lbCkpO1xufVxuXG4vLyBnZXRDb29raWUyRCBmb3IgY2x1c3RlcmVkIGxpZ2h0aW5nIGluY2x1ZGluZyBjaGFubmVsIHNlbGVjdG9yXG52ZWMzIGdldENvb2tpZTJEQ2x1c3RlcmVkKFRFWFRVUkVfQUNDRVBUKHRleCksIG1hdDQgdHJhbnNmb3JtLCB2ZWMzIHdvcmxkUG9zaXRpb24sIGZsb2F0IGludGVuc2l0eSwgYm9vbCBpc1JnYiwgdmVjNCBjb29raWVDaGFubmVsKSB7XG4gICAgdmVjNCBwcm9qUG9zID0gdHJhbnNmb3JtICogdmVjNCh3b3JsZFBvc2l0aW9uLCAxLjApO1xuICAgIHJldHVybiBfZ2V0Q29va2llQ2x1c3RlcmVkKFRFWFRVUkVfUEFTUyh0ZXgpLCBwcm9qUG9zLnh5IC8gcHJvalBvcy53LCBpbnRlbnNpdHksIGlzUmdiLCBjb29raWVDaGFubmVsKTtcbn1cblxuLy8gZ2V0Q29va2llIGZvciBjbHVzdGVyZWQgb21uaSBsaWdodCB3aXRoIHRoZSBjb29raWUgdGV4dHVyZSBiZWluZyBzdG9yZWQgaW4gdGhlIGNvb2tpZSBhdGxhc1xudmVjMyBnZXRDb29raWVDdWJlQ2x1c3RlcmVkKFRFWFRVUkVfQUNDRVBUKHRleCksIHZlYzMgZGlyLCBmbG9hdCBpbnRlbnNpdHksIGJvb2wgaXNSZ2IsIHZlYzQgY29va2llQ2hhbm5lbCwgZmxvYXQgc2hhZG93VGV4dHVyZVJlc29sdXRpb24sIGZsb2F0IHNoYWRvd0VkZ2VQaXhlbHMsIHZlYzMgb21uaUF0bGFzVmlld3BvcnQpIHtcbiAgICB2ZWMyIHV2ID0gZ2V0Q3ViZW1hcEF0bGFzQ29vcmRpbmF0ZXMob21uaUF0bGFzVmlld3BvcnQsIHNoYWRvd0VkZ2VQaXhlbHMsIHNoYWRvd1RleHR1cmVSZXNvbHV0aW9uLCBkaXIpO1xuICAgIHJldHVybiBfZ2V0Q29va2llQ2x1c3RlcmVkKFRFWFRVUkVfUEFTUyh0ZXgpLCB1diwgaW50ZW5zaXR5LCBpc1JnYiwgY29va2llQ2hhbm5lbCk7XG59XG5gO1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDhCQUFlLFVBQVcsQ0FBQTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7In0=
