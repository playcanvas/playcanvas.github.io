/**
 * @license
 * PlayCanvas Engine v1.58.0-preview revision 1fec26519 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { LAYERID_UI, LAYERID_DEPTH, ASPECT_AUTO } from '../../../scene/constants.js';
import { Camera } from '../../../scene/camera.js';
import { Component } from '../component.js';
import { PostEffectQueue } from './post-effect-queue.js';
import { Debug } from '../../../core/debug.js';

const properties = [{
  name: 'aspectRatio',
  readonly: false
}, {
  name: 'aspectRatioMode',
  readonly: false
}, {
  name: 'calculateProjection',
  readonly: false
}, {
  name: 'calculateTransform',
  readonly: false
}, {
  name: 'clearColor',
  readonly: false
}, {
  name: 'cullFaces',
  readonly: false
}, {
  name: 'farClip',
  readonly: false
}, {
  name: 'flipFaces',
  readonly: false
}, {
  name: 'fov',
  readonly: false
}, {
  name: 'frustumCulling',
  readonly: false
}, {
  name: 'horizontalFov',
  readonly: false
}, {
  name: 'nearClip',
  readonly: false
}, {
  name: 'orthoHeight',
  readonly: false
}, {
  name: 'projection',
  readonly: false
}, {
  name: 'scissorRect',
  readonly: false
}, {
  name: 'aperture',
  readonly: false
}, {
  name: 'shutter',
  readonly: false
}, {
  name: 'sensitivity',
  readonly: false
}];

class CameraComponent extends Component {

  constructor(system, entity) {
    super(system, entity);
    this.onPostprocessing = null;
    this.onPreRender = null;
    this.onPostRender = null;
    this._renderSceneDepthMap = 0;
    this._renderSceneColorMap = 0;
    this._camera = new Camera();
    this._camera.node = entity;
    this._priority = 0;

    this._disablePostEffectsLayer = LAYERID_UI;

    this._postEffects = new PostEffectQueue(system.app, this);
    this._sceneDepthMapRequested = false;
    this._sceneColorMapRequested = false;
  }

  get camera() {
    return this._camera;
  }

  set clearColorBuffer(value) {
    this._camera.clearColorBuffer = value;
    this.dirtyLayerCompositionCameras();
  }
  get clearColorBuffer() {
    return this._camera.clearColorBuffer;
  }

  set clearDepthBuffer(value) {
    this._camera.clearDepthBuffer = value;
    this.dirtyLayerCompositionCameras();
  }
  get clearDepthBuffer() {
    return this._camera.clearDepthBuffer;
  }

  set clearStencilBuffer(value) {
    this._camera.clearStencilBuffer = value;
    this.dirtyLayerCompositionCameras();
  }
  get clearStencilBuffer() {
    return this._camera.clearStencilBuffer;
  }

  set disablePostEffectsLayer(layer) {
    this._disablePostEffectsLayer = layer;
    this.dirtyLayerCompositionCameras();
  }
  get disablePostEffectsLayer() {
    return this._disablePostEffectsLayer;
  }

  _enableDepthLayer(value) {
    const hasDepthLayer = this.layers.find(layerId => layerId === LAYERID_DEPTH);
    if (hasDepthLayer) {
      const depthLayer = this.system.app.scene.layers.getLayerById(LAYERID_DEPTH);
      if (value) {
        depthLayer == null ? void 0 : depthLayer.incrementCounter();
      } else {
        depthLayer == null ? void 0 : depthLayer.decrementCounter();
      }
    } else if (value) {
      return false;
    }
    return true;
  }

  requestSceneColorMap(enabled) {
    this._renderSceneColorMap += enabled ? 1 : -1;
    Debug.assert(this._renderSceneColorMap >= 0);
    const ok = this._enableDepthLayer(enabled);
    if (!ok) {
      Debug.warnOnce('CameraComponent.requestSceneColorMap was called, but the camera does not have a Depth layer, ignoring.');
    }
  }
  set renderSceneColorMap(value) {
    if (value && !this._sceneColorMapRequested) {
      this.requestSceneColorMap(true);
      this._sceneColorMapRequested = true;
    } else if (this._sceneColorMapRequested) {
      this.requestSceneColorMap(false);
      this._sceneColorMapRequested = false;
    }
  }
  get renderSceneColorMap() {
    return this._renderSceneColorMap > 0;
  }

  requestSceneDepthMap(enabled) {
    this._renderSceneDepthMap += enabled ? 1 : -1;
    Debug.assert(this._renderSceneDepthMap >= 0);
    const ok = this._enableDepthLayer(enabled);
    if (!ok) {
      Debug.warnOnce('CameraComponent.requestSceneDepthMap was called, but the camera does not have a Depth layer, ignoring.');
    }
  }
  set renderSceneDepthMap(value) {
    if (value && !this._sceneDepthMapRequested) {
      this.requestSceneDepthMap(true);
      this._sceneDepthMapRequested = true;
    } else if (this._sceneDepthMapRequested) {
      this.requestSceneDepthMap(false);
      this._sceneDepthMapRequested = false;
    }
  }
  get renderSceneDepthMap() {
    return this._renderSceneDepthMap > 0;
  }

  get frustum() {
    return this._camera.frustum;
  }

  set layers(newValue) {
    const layers = this._camera.layers;
    for (let i = 0; i < layers.length; i++) {
      const layer = this.system.app.scene.layers.getLayerById(layers[i]);
      if (!layer) continue;
      layer.removeCamera(this);
    }
    this._camera.layers = newValue;
    if (!this.enabled || !this.entity.enabled) return;
    for (let i = 0; i < newValue.length; i++) {
      const layer = this.system.app.scene.layers.getLayerById(newValue[i]);
      if (!layer) continue;
      layer.addCamera(this);
    }
  }
  get layers() {
    return this._camera.layers;
  }
  get layersSet() {
    return this._camera.layersSet;
  }

  get postEffectsEnabled() {
    return this._postEffects.enabled;
  }
  get postEffects() {
    return this._postEffects;
  }

  set priority(newValue) {
    this._priority = newValue;
    this.dirtyLayerCompositionCameras();
  }
  get priority() {
    return this._priority;
  }

  get projectionMatrix() {
    return this._camera.projectionMatrix;
  }

  set aperture(newValue) {
    this._camera.aperture = newValue;
  }
  get aperture() {
    return this._camera.aperture;
  }

  set sensitivity(newValue) {
    this._camera.sensitivity = newValue;
  }
  get sensitivity() {
    return this._camera.sensitivity;
  }

  set shutter(newValue) {
    this._camera.shutter = newValue;
  }
  get shutter() {
    return this._camera.shutter;
  }

  set rect(value) {
    this._camera.rect = value;
    this.fire('set:rect', this._camera.rect);
  }
  get rect() {
    return this._camera.rect;
  }

  set renderTarget(value) {
    this._camera.renderTarget = value;
    this.dirtyLayerCompositionCameras();
  }
  get renderTarget() {
    return this._camera.renderTarget;
  }

  get viewMatrix() {
    return this._camera.viewMatrix;
  }
  dirtyLayerCompositionCameras() {
    const layerComp = this.system.app.scene.layers;
    layerComp._dirtyCameras = true;
  }

  screenToWorld(screenx, screeny, cameraz, worldCoord) {
    const device = this.system.app.graphicsDevice;
    const w = device.clientRect.width;
    const h = device.clientRect.height;
    return this._camera.screenToWorld(screenx, screeny, cameraz, w, h, worldCoord);
  }

  worldToScreen(worldCoord, screenCoord) {
    const device = this.system.app.graphicsDevice;
    const w = device.clientRect.width;
    const h = device.clientRect.height;
    return this._camera.worldToScreen(worldCoord, w, h, screenCoord);
  }

  onAppPrerender() {
    this._camera._viewMatDirty = true;
    this._camera._viewProjMatDirty = true;
  }
  addCameraToLayers() {
    const layers = this.layers;
    for (let i = 0; i < layers.length; i++) {
      const layer = this.system.app.scene.layers.getLayerById(layers[i]);
      if (layer) {
        layer.addCamera(this);
      }
    }
  }
  removeCameraFromLayers() {
    const layers = this.layers;
    for (let i = 0; i < layers.length; i++) {
      const layer = this.system.app.scene.layers.getLayerById(layers[i]);
      if (layer) {
        layer.removeCamera(this);
      }
    }
  }
  onLayersChanged(oldComp, newComp) {
    this.addCameraToLayers();
    oldComp.off('add', this.onLayerAdded, this);
    oldComp.off('remove', this.onLayerRemoved, this);
    newComp.on('add', this.onLayerAdded, this);
    newComp.on('remove', this.onLayerRemoved, this);
  }
  onLayerAdded(layer) {
    const index = this.layers.indexOf(layer.id);
    if (index < 0) return;
    layer.addCamera(this);
  }
  onLayerRemoved(layer) {
    const index = this.layers.indexOf(layer.id);
    if (index < 0) return;
    layer.removeCamera(this);
  }
  onEnable() {
    const system = this.system;
    const scene = system.app.scene;
    const layers = scene.layers;
    system.addCamera(this);
    scene.on('set:layers', this.onLayersChanged, this);
    if (layers) {
      layers.on('add', this.onLayerAdded, this);
      layers.on('remove', this.onLayerRemoved, this);
    }
    if (this.enabled && this.entity.enabled) {
      this.addCameraToLayers();
    }
    this.postEffects.enable();
  }
  onDisable() {
    const system = this.system;
    const scene = system.app.scene;
    const layers = scene.layers;
    this.postEffects.disable();
    this.removeCameraFromLayers();
    scene.off('set:layers', this.onLayersChanged, this);
    if (layers) {
      layers.off('add', this.onLayerAdded, this);
      layers.off('remove', this.onLayerRemoved, this);
    }
    system.removeCamera(this);
  }
  onRemove() {
    this.onDisable();
    this.off();
  }

  calculateAspectRatio(rt) {
    const device = this.system.app.graphicsDevice;
    const width = rt ? rt.width : device.width;
    const height = rt ? rt.height : device.height;
    return width * this.rect.z / (height * this.rect.w);
  }

  frameUpdate(rt) {
    if (this.aspectRatioMode === ASPECT_AUTO) {
      this.aspectRatio = this.calculateAspectRatio(rt);
    }
  }

  startXr(type, spaceType, options) {
    this.system.app.xr.start(this, type, spaceType, options);
  }

  endXr(callback) {
    if (!this._camera.xr) {
      if (callback) callback(new Error('Camera is not in XR'));
      return;
    }
    this._camera.xr.end(callback);
  }

  copy(source) {
    properties.forEach(property => {
      if (!property.readonly) {
        const name = property.name;
        this[name] = source[name];
      }
    });

    this.clearColorBuffer = source.clearColorBuffer;
    this.clearDepthBuffer = source.clearDepthBuffer;
    this.clearStencilBuffer = source.clearStencilBuffer;
    this.disablePostEffectsLayer = source.disablePostEffectsLayer;
    this.layers = source.layers;
    this.priority = source.priority;
    this.renderTarget = source.renderTarget;
    this.rect = source.rect;
    this.aperture = source.aperture;
    this.sensitivity = source.sensitivity;
    this.shutter = source.shutter;
  }
}

properties.forEach(function (property) {
  const name = property.name;
  const options = {};

  options.get = function () {
    return this._camera[name];
  };

  if (!property.readonly) {
    options.set = function (newValue) {
      this._camera[name] = newValue;
    };
  }
  Object.defineProperty(CameraComponent.prototype, name, options);
});

export { CameraComponent };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvY2FtZXJhL2NvbXBvbmVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBU1BFQ1RfQVVUTywgTEFZRVJJRF9VSSwgTEFZRVJJRF9ERVBUSCB9IGZyb20gJy4uLy4uLy4uL3NjZW5lL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBDYW1lcmEgfSBmcm9tICcuLi8uLi8uLi9zY2VuZS9jYW1lcmEuanMnO1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnQuanMnO1xuXG5pbXBvcnQgeyBQb3N0RWZmZWN0UXVldWUgfSBmcm9tICcuL3Bvc3QtZWZmZWN0LXF1ZXVlLmpzJztcbmltcG9ydCB7IERlYnVnIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9kZWJ1Zy5qcyc7XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9yZW5kZXItdGFyZ2V0LmpzJykuUmVuZGVyVGFyZ2V0fSBSZW5kZXJUYXJnZXQgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi8uLi9jb3JlL21hdGgvY29sb3IuanMnKS5Db2xvcn0gQ29sb3IgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi8uLi9jb3JlL21hdGgvbWF0NC5qcycpLk1hdDR9IE1hdDQgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi8uLi9jb3JlL21hdGgvdmVjMy5qcycpLlZlYzN9IFZlYzMgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi8uLi9jb3JlL21hdGgvdmVjNC5qcycpLlZlYzR9IFZlYzQgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi8uLi9zY2VuZS9sYXllci5qcycpLkxheWVyfSBMYXllciAqL1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uLy4uLy4uL2NvcmUvc2hhcGUvZnJ1c3R1bS5qcycpLkZydXN0dW19IEZydXN0dW0gKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi94ci94ci1tYW5hZ2VyLmpzJykuWHJFcnJvckNhbGxiYWNrfSBYckVycm9yQ2FsbGJhY2sgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi9lbnRpdHkuanMnKS5FbnRpdHl9IEVudGl0eSAqL1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vc3lzdGVtLmpzJykuQ2FtZXJhQ29tcG9uZW50U3lzdGVtfSBDYW1lcmFDb21wb25lbnRTeXN0ZW0gKi9cblxuLy8gbm90ZTogd2hlbiB0aGlzIGxpc3QgaXMgbW9kaWZpZWQsIHRoZSBjb3B5KCkgZnVuY3Rpb24gbmVlZHMgdG8gYmUgYWRqdXN0ZWRcbmNvbnN0IHByb3BlcnRpZXMgPSBbXG4gICAgeyBuYW1lOiAnYXNwZWN0UmF0aW8nLCByZWFkb25seTogZmFsc2UgfSxcbiAgICB7IG5hbWU6ICdhc3BlY3RSYXRpb01vZGUnLCByZWFkb25seTogZmFsc2UgfSxcbiAgICB7IG5hbWU6ICdjYWxjdWxhdGVQcm9qZWN0aW9uJywgcmVhZG9ubHk6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiAnY2FsY3VsYXRlVHJhbnNmb3JtJywgcmVhZG9ubHk6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiAnY2xlYXJDb2xvcicsIHJlYWRvbmx5OiBmYWxzZSB9LFxuICAgIHsgbmFtZTogJ2N1bGxGYWNlcycsIHJlYWRvbmx5OiBmYWxzZSB9LFxuICAgIHsgbmFtZTogJ2ZhckNsaXAnLCByZWFkb25seTogZmFsc2UgfSxcbiAgICB7IG5hbWU6ICdmbGlwRmFjZXMnLCByZWFkb25seTogZmFsc2UgfSxcbiAgICB7IG5hbWU6ICdmb3YnLCByZWFkb25seTogZmFsc2UgfSxcbiAgICB7IG5hbWU6ICdmcnVzdHVtQ3VsbGluZycsIHJlYWRvbmx5OiBmYWxzZSB9LFxuICAgIHsgbmFtZTogJ2hvcml6b250YWxGb3YnLCByZWFkb25seTogZmFsc2UgfSxcbiAgICB7IG5hbWU6ICduZWFyQ2xpcCcsIHJlYWRvbmx5OiBmYWxzZSB9LFxuICAgIHsgbmFtZTogJ29ydGhvSGVpZ2h0JywgcmVhZG9ubHk6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiAncHJvamVjdGlvbicsIHJlYWRvbmx5OiBmYWxzZSB9LFxuICAgIHsgbmFtZTogJ3NjaXNzb3JSZWN0JywgcmVhZG9ubHk6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiAnYXBlcnR1cmUnLCByZWFkb25seTogZmFsc2UgfSxcbiAgICB7IG5hbWU6ICdzaHV0dGVyJywgcmVhZG9ubHk6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiAnc2Vuc2l0aXZpdHknLCByZWFkb25seTogZmFsc2UgfVxuXTtcblxuLyoqXG4gKiBDYWxsYmFjayB1c2VkIGJ5IHtAbGluayBDYW1lcmFDb21wb25lbnQjY2FsY3VsYXRlVHJhbnNmb3JtfSBhbmQge0BsaW5rIENhbWVyYUNvbXBvbmVudCNjYWxjdWxhdGVQcm9qZWN0aW9ufS5cbiAqXG4gKiBAY2FsbGJhY2sgQ2FsY3VsYXRlTWF0cml4Q2FsbGJhY2tcbiAqIEBwYXJhbSB7TWF0NH0gdHJhbnNmb3JtTWF0cml4IC0gT3V0cHV0IG9mIHRoZSBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2aWV3IC0gVHlwZSBvZiB2aWV3LiBDYW4gYmUge0BsaW5rIFZJRVdfQ0VOVEVSfSwge0BsaW5rIFZJRVdfTEVGVH0gb3Ige0BsaW5rIFZJRVdfUklHSFR9LiBMZWZ0IGFuZCByaWdodCBhcmUgb25seSB1c2VkIGluIHN0ZXJlbyByZW5kZXJpbmcuXG4gKi9cblxuLyoqXG4gKiBUaGUgQ2FtZXJhIENvbXBvbmVudCBlbmFibGVzIGFuIEVudGl0eSB0byByZW5kZXIgdGhlIHNjZW5lLiBBIHNjZW5lIHJlcXVpcmVzIGF0IGxlYXN0IG9uZVxuICogZW5hYmxlZCBjYW1lcmEgY29tcG9uZW50IHRvIGJlIHJlbmRlcmVkLiBOb3RlIHRoYXQgbXVsdGlwbGUgY2FtZXJhIGNvbXBvbmVudHMgY2FuIGJlIGVuYWJsZWRcbiAqIHNpbXVsdGFuZW91c2x5IChmb3Igc3BsaXQtc2NyZWVuIG9yIG9mZnNjcmVlbiByZW5kZXJpbmcsIGZvciBleGFtcGxlKS5cbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiAvLyBBZGQgYSBwYy5DYW1lcmFDb21wb25lbnQgdG8gYW4gZW50aXR5XG4gKiB2YXIgZW50aXR5ID0gbmV3IHBjLkVudGl0eSgpO1xuICogZW50aXR5LmFkZENvbXBvbmVudCgnY2FtZXJhJywge1xuICogICAgIG5lYXJDbGlwOiAxLFxuICogICAgIGZhckNsaXA6IDEwMCxcbiAqICAgICBmb3Y6IDU1XG4gKiB9KTtcbiAqXG4gKiAvLyBHZXQgdGhlIHBjLkNhbWVyYUNvbXBvbmVudCBvbiBhbiBlbnRpdHlcbiAqIHZhciBjYW1lcmFDb21wb25lbnQgPSBlbnRpdHkuY2FtZXJhO1xuICpcbiAqIC8vIFVwZGF0ZSBhIHByb3BlcnR5IG9uIGEgY2FtZXJhIGNvbXBvbmVudFxuICogZW50aXR5LmNhbWVyYS5uZWFyQ2xpcCA9IDI7XG4gKiBgYGBcbiAqXG4gKiBAcHJvcGVydHkge251bWJlcn0gcHJvamVjdGlvbiBUaGUgdHlwZSBvZiBwcm9qZWN0aW9uIHVzZWQgdG8gcmVuZGVyIHRoZSBjYW1lcmEuIENhbiBiZTpcbiAqXG4gKiAtIHtAbGluayBQUk9KRUNUSU9OX1BFUlNQRUNUSVZFfTogQSBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uLiBUaGUgY2FtZXJhIGZydXN0dW1cbiAqIHJlc2VtYmxlcyBhIHRydW5jYXRlZCBweXJhbWlkLlxuICogLSB7QGxpbmsgUFJPSkVDVElPTl9PUlRIT0dSQVBISUN9OiBBbiBvcnRob2dyYXBoaWMgcHJvamVjdGlvbi4gVGhlIGNhbWVyYVxuICogZnJ1c3R1bSBpcyBhIGN1Ym9pZC5cbiAqXG4gKiBEZWZhdWx0cyB0byB7QGxpbmsgUFJPSkVDVElPTl9QRVJTUEVDVElWRX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gYXNwZWN0UmF0aW8gVGhlIGFzcGVjdCByYXRpbyAod2lkdGggZGl2aWRlZCBieSBoZWlnaHQpIG9mIHRoZSBjYW1lcmEuIElmXG4gKiBhc3BlY3RSYXRpb01vZGUgaXMge0BsaW5rIEFTUEVDVF9BVVRPfSwgdGhlbiB0aGlzIHZhbHVlIHdpbGwgYmUgYXV0b21hdGljYWxseSBjYWxjdWxhdGVkIGV2ZXJ5XG4gKiBmcmFtZSwgYW5kIHlvdSBjYW4gb25seSByZWFkIGl0LiBJZiBpdCdzIEFTUEVDVF9NQU5VQUwsIHlvdSBjYW4gc2V0IHRoZSB2YWx1ZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBhc3BlY3RSYXRpb01vZGUgVGhlIGFzcGVjdCByYXRpbyBtb2RlIG9mIHRoZSBjYW1lcmEuIENhbiBiZTpcbiAqXG4gKiAtIHtAbGluayBBU1BFQ1RfQVVUT306IGFzcGVjdCByYXRpbyB3aWxsIGJlIGNhbGN1bGF0ZWQgZnJvbSB0aGUgY3VycmVudCByZW5kZXJcbiAqIHRhcmdldCdzIHdpZHRoIGRpdmlkZWQgYnkgaGVpZ2h0LlxuICogLSB7QGxpbmsgQVNQRUNUX01BTlVBTH06IHVzZSB0aGUgYXNwZWN0UmF0aW8gdmFsdWUuXG4gKlxuICogRGVmYXVsdHMgdG8ge0BsaW5rIEFTUEVDVF9BVVRPfS5cbiAqIEBwcm9wZXJ0eSB7Q29sb3J9IGNsZWFyQ29sb3IgVGhlIGNvbG9yIHVzZWQgdG8gY2xlYXIgdGhlIGNhbnZhcyB0byBiZWZvcmUgdGhlIGNhbWVyYSBzdGFydHMgdG9cbiAqIHJlbmRlci4gRGVmYXVsdHMgdG8gWzAuNzUsIDAuNzUsIDAuNzUsIDFdLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGZhckNsaXAgVGhlIGRpc3RhbmNlIGZyb20gdGhlIGNhbWVyYSBhZnRlciB3aGljaCBubyByZW5kZXJpbmcgd2lsbCB0YWtlXG4gKiBwbGFjZS4gRGVmYXVsdHMgdG8gMTAwMC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBmb3YgVGhlIGZpZWxkIG9mIHZpZXcgb2YgdGhlIGNhbWVyYSBpbiBkZWdyZWVzLiBVc3VhbGx5IHRoaXMgaXMgdGhlIFktYXhpc1xuICogZmllbGQgb2Ygdmlldywgc2VlIHtAbGluayBDYW1lcmFDb21wb25lbnQjaG9yaXpvbnRhbEZvdn0uIFVzZWQgZm9yXG4gKiB7QGxpbmsgUFJPSkVDVElPTl9QRVJTUEVDVElWRX0gY2FtZXJhcyBvbmx5LiBEZWZhdWx0cyB0byA0NS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gaG9yaXpvbnRhbEZvdiBTZXQgd2hpY2ggYXhpcyB0byB1c2UgZm9yIHRoZSBGaWVsZCBvZiBWaWV3IGNhbGN1bGF0aW9uLlxuICogRGVmYXVsdHMgdG8gZmFsc2UuXG4gKiBAcHJvcGVydHkge251bWJlcn0gbmVhckNsaXAgVGhlIGRpc3RhbmNlIGZyb20gdGhlIGNhbWVyYSBiZWZvcmUgd2hpY2ggbm8gcmVuZGVyaW5nIHdpbGwgdGFrZVxuICogcGxhY2UuIERlZmF1bHRzIHRvIDAuMS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBvcnRob0hlaWdodCBUaGUgaGFsZi1oZWlnaHQgb2YgdGhlIG9ydGhvZ3JhcGhpYyB2aWV3IHdpbmRvdyAoaW4gdGhlIFktYXhpcykuXG4gKiBVc2VkIGZvciB7QGxpbmsgUFJPSkVDVElPTl9PUlRIT0dSQVBISUN9IGNhbWVyYXMgb25seS4gRGVmYXVsdHMgdG8gMTAuXG4gKiBAcHJvcGVydHkge1ZlYzR9IHNjaXNzb3JSZWN0IENsaXBzIGFsbCBwaXhlbHMgd2hpY2ggYXJlIG5vdCBpbiB0aGUgcmVjdGFuZ2xlLiBUaGUgb3JkZXIgb2YgdGhlXG4gKiB2YWx1ZXMgaXMgW3gsIHksIHdpZHRoLCBoZWlnaHRdLiBEZWZhdWx0cyB0byBbMCwgMCwgMSwgMV0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGZydXN0dW1DdWxsaW5nIENvbnRyb2xzIHRoZSBjdWxsaW5nIG9mIG1lc2ggaW5zdGFuY2VzIGFnYWluc3QgdGhlIGNhbWVyYVxuICogZnJ1c3R1bSwgaS5lLiBpZiBvYmplY3RzIG91dHNpZGUgb2YgY2FtZXJhIHNob3VsZCBiZSBvbWl0dGVkIGZyb20gcmVuZGVyaW5nLiBJZiBmYWxzZSwgYWxsIG1lc2hcbiAqIGluc3RhbmNlcyBpbiB0aGUgc2NlbmUgYXJlIHJlbmRlcmVkIGJ5IHRoZSBjYW1lcmEsIHJlZ2FyZGxlc3Mgb2YgdmlzaWJpbGl0eS4gRGVmYXVsdHMgdG8gZmFsc2UuXG4gKiBAcHJvcGVydHkge0NhbGN1bGF0ZU1hdHJpeENhbGxiYWNrfSBjYWxjdWxhdGVUcmFuc2Zvcm0gQ3VzdG9tIGZ1bmN0aW9uIHlvdSBjYW4gcHJvdmlkZSB0b1xuICogY2FsY3VsYXRlIHRoZSBjYW1lcmEgdHJhbnNmb3JtYXRpb24gbWF0cml4IG1hbnVhbGx5LiBDYW4gYmUgdXNlZCBmb3IgY29tcGxleCBlZmZlY3RzIGxpa2VcbiAqIHJlZmxlY3Rpb25zLiBGdW5jdGlvbiBpcyBjYWxsZWQgdXNpbmcgY29tcG9uZW50J3Mgc2NvcGUuIEFyZ3VtZW50czpcbiAqXG4gKiAtIHtAbGluayBNYXQ0fSB0cmFuc2Zvcm1NYXRyaXg6IG91dHB1dCBvZiB0aGUgZnVuY3Rpb24uXG4gKiAtIHZpZXc6IFR5cGUgb2Ygdmlldy4gQ2FuIGJlIHtAbGluayBWSUVXX0NFTlRFUn0sIHtAbGluayBWSUVXX0xFRlR9IG9yIHtAbGluayBWSUVXX1JJR0hUfS5cbiAqXG4gKiBMZWZ0IGFuZCByaWdodCBhcmUgb25seSB1c2VkIGluIHN0ZXJlbyByZW5kZXJpbmcuXG4gKiBAcHJvcGVydHkge0NhbGN1bGF0ZU1hdHJpeENhbGxiYWNrfSBjYWxjdWxhdGVQcm9qZWN0aW9uIEN1c3RvbSBmdW5jdGlvbiB5b3UgY2FuIHByb3ZpZGUgdG9cbiAqIGNhbGN1bGF0ZSB0aGUgY2FtZXJhIHByb2plY3Rpb24gbWF0cml4IG1hbnVhbGx5LiBDYW4gYmUgdXNlZCBmb3IgY29tcGxleCBlZmZlY3RzIGxpa2UgZG9pbmdcbiAqIG9ibGlxdWUgcHJvamVjdGlvbi4gRnVuY3Rpb24gaXMgY2FsbGVkIHVzaW5nIGNvbXBvbmVudCdzIHNjb3BlLiBBcmd1bWVudHM6XG4gKlxuICogLSB7QGxpbmsgTWF0NH0gdHJhbnNmb3JtTWF0cml4OiBvdXRwdXQgb2YgdGhlIGZ1bmN0aW9uXG4gKiAtIHZpZXc6IFR5cGUgb2Ygdmlldy4gQ2FuIGJlIHtAbGluayBWSUVXX0NFTlRFUn0sIHtAbGluayBWSUVXX0xFRlR9IG9yIHtAbGluayBWSUVXX1JJR0hUfS5cbiAqXG4gKiBMZWZ0IGFuZCByaWdodCBhcmUgb25seSB1c2VkIGluIHN0ZXJlbyByZW5kZXJpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGN1bGxGYWNlcyBJZiB0cnVlIHRoZSBjYW1lcmEgd2lsbCB0YWtlIG1hdGVyaWFsLmN1bGwgaW50byBhY2NvdW50LiBPdGhlcndpc2VcbiAqIGJvdGggZnJvbnQgYW5kIGJhY2sgZmFjZXMgd2lsbCBiZSByZW5kZXJlZC4gRGVmYXVsdHMgdG8gdHJ1ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gZmxpcEZhY2VzIElmIHRydWUgdGhlIGNhbWVyYSB3aWxsIGludmVydCBmcm9udCBhbmQgYmFjayBmYWNlcy4gQ2FuIGJlIHVzZWZ1bFxuICogZm9yIHJlZmxlY3Rpb24gcmVuZGVyaW5nLiBEZWZhdWx0cyB0byBmYWxzZS5cbiAqIEBhdWdtZW50cyBDb21wb25lbnRcbiAqL1xuY2xhc3MgQ2FtZXJhQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAvKipcbiAgICAgKiBDdXN0b20gZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBwb3N0cHJvY2Vzc2luZyBzaG91bGQgZXhlY3V0ZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgb25Qb3N0cHJvY2Vzc2luZyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBDdXN0b20gZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgYmVmb3JlIHRoZSBjYW1lcmEgcmVuZGVycyB0aGUgc2NlbmUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgb25QcmVSZW5kZXIgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQ3VzdG9tIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIGFmdGVyIHRoZSBjYW1lcmEgcmVuZGVycyB0aGUgc2NlbmUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgb25Qb3N0UmVuZGVyID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEEgY291bnRlciBvZiByZXF1ZXN0cyBvZiBkZXB0aCBtYXAgcmVuZGVyaW5nLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9yZW5kZXJTY2VuZURlcHRoTWFwID0gMDtcblxuICAgIC8qKlxuICAgICAqIEEgY291bnRlciBvZiByZXF1ZXN0cyBvZiBjb2xvciBtYXAgcmVuZGVyaW5nLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9yZW5kZXJTY2VuZUNvbG9yTWFwID0gMDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBDYW1lcmFDb21wb25lbnQgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NhbWVyYUNvbXBvbmVudFN5c3RlbX0gc3lzdGVtIC0gVGhlIENvbXBvbmVudFN5c3RlbSB0aGF0IGNyZWF0ZWQgdGhpcyBDb21wb25lbnQuXG4gICAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eSAtIFRoZSBFbnRpdHkgdGhhdCB0aGlzIENvbXBvbmVudCBpcyBhdHRhY2hlZCB0by5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzeXN0ZW0sIGVudGl0eSkge1xuICAgICAgICBzdXBlcihzeXN0ZW0sIGVudGl0eSk7XG5cbiAgICAgICAgdGhpcy5fY2FtZXJhID0gbmV3IENhbWVyYSgpO1xuICAgICAgICB0aGlzLl9jYW1lcmEubm9kZSA9IGVudGl0eTtcblxuICAgICAgICB0aGlzLl9wcmlvcml0eSA9IDA7XG5cbiAgICAgICAgLy8gbGF5ZXIgaWQgYXQgd2hpY2ggdGhlIHBvc3Rwcm9jZXNzaW5nIHN0b3BzIGZvciB0aGUgY2FtZXJhXG4gICAgICAgIHRoaXMuX2Rpc2FibGVQb3N0RWZmZWN0c0xheWVyID0gTEFZRVJJRF9VSTtcblxuICAgICAgICAvLyBwb3N0cHJvY2Vzc2luZyBtYW5hZ2VtZW50XG4gICAgICAgIHRoaXMuX3Bvc3RFZmZlY3RzID0gbmV3IFBvc3RFZmZlY3RRdWV1ZShzeXN0ZW0uYXBwLCB0aGlzKTtcblxuICAgICAgICB0aGlzLl9zY2VuZURlcHRoTWFwUmVxdWVzdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3NjZW5lQ29sb3JNYXBSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBRdWVyaWVzIHRoZSBjYW1lcmEgY29tcG9uZW50J3MgdW5kZXJseWluZyBDYW1lcmEgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Q2FtZXJhfVxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICBnZXQgY2FtZXJhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FtZXJhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIHRydWUgdGhlIGNhbWVyYSB3aWxsIGNsZWFyIHRoZSBjb2xvciBidWZmZXIgdG8gdGhlIGNvbG9yIHNldCBpbiBjbGVhckNvbG9yLiBEZWZhdWx0cyB0byB0cnVlLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgc2V0IGNsZWFyQ29sb3JCdWZmZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fY2FtZXJhLmNsZWFyQ29sb3JCdWZmZXIgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5kaXJ0eUxheWVyQ29tcG9zaXRpb25DYW1lcmFzKCk7XG4gICAgfVxuXG4gICAgZ2V0IGNsZWFyQ29sb3JCdWZmZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW1lcmEuY2xlYXJDb2xvckJ1ZmZlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZiB0cnVlIHRoZSBjYW1lcmEgd2lsbCBjbGVhciB0aGUgZGVwdGggYnVmZmVyLiBEZWZhdWx0cyB0byB0cnVlLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgc2V0IGNsZWFyRGVwdGhCdWZmZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fY2FtZXJhLmNsZWFyRGVwdGhCdWZmZXIgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5kaXJ0eUxheWVyQ29tcG9zaXRpb25DYW1lcmFzKCk7XG4gICAgfVxuXG4gICAgZ2V0IGNsZWFyRGVwdGhCdWZmZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW1lcmEuY2xlYXJEZXB0aEJ1ZmZlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZiB0cnVlIHRoZSBjYW1lcmEgd2lsbCBjbGVhciB0aGUgc3RlbmNpbCBidWZmZXIuIERlZmF1bHRzIHRvIHRydWUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBzZXQgY2xlYXJTdGVuY2lsQnVmZmVyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NhbWVyYS5jbGVhclN0ZW5jaWxCdWZmZXIgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5kaXJ0eUxheWVyQ29tcG9zaXRpb25DYW1lcmFzKCk7XG4gICAgfVxuXG4gICAgZ2V0IGNsZWFyU3RlbmNpbEJ1ZmZlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYS5jbGVhclN0ZW5jaWxCdWZmZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGF5ZXIgSUQgb2YgYSBsYXllciBvbiB3aGljaCB0aGUgcG9zdHByb2Nlc3Npbmcgb2YgdGhlIGNhbWVyYSBzdG9wcyBiZWluZyBhcHBsaWVkIHRvLlxuICAgICAqIERlZmF1bHRzIHRvIExBWUVSSURfVUksIHdoaWNoIGNhdXNlcyBwb3N0IHByb2Nlc3NpbmcgdG8gbm90IGJlIGFwcGxpZWQgdG8gVUkgbGF5ZXIgYW5kIGFueVxuICAgICAqIGZvbGxvd2luZyBsYXllcnMgZm9yIHRoZSBjYW1lcmEuIFNldCB0byB1bmRlZmluZWQgZm9yIHBvc3QtcHJvY2Vzc2luZyB0byBiZSBhcHBsaWVkIHRvIGFsbFxuICAgICAqIGxheWVycyBvZiB0aGUgY2FtZXJhLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBzZXQgZGlzYWJsZVBvc3RFZmZlY3RzTGF5ZXIobGF5ZXIpIHtcbiAgICAgICAgdGhpcy5fZGlzYWJsZVBvc3RFZmZlY3RzTGF5ZXIgPSBsYXllcjtcbiAgICAgICAgdGhpcy5kaXJ0eUxheWVyQ29tcG9zaXRpb25DYW1lcmFzKCk7XG4gICAgfVxuXG4gICAgZ2V0IGRpc2FibGVQb3N0RWZmZWN0c0xheWVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGlzYWJsZVBvc3RFZmZlY3RzTGF5ZXI7XG4gICAgfVxuXG4gICAgLy8gYmFzZWQgb24gdGhlIHZhbHVlLCB0aGUgZGVwdGggbGF5ZXIncyBlbmFibGUgY291bnRlciBpcyBpbmNyZW1lbnRlZCBvciBkZWNyZW1lbnRlZFxuICAgIF9lbmFibGVEZXB0aExheWVyKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGhhc0RlcHRoTGF5ZXIgPSB0aGlzLmxheWVycy5maW5kKGxheWVySWQgPT4gbGF5ZXJJZCA9PT0gTEFZRVJJRF9ERVBUSCk7XG4gICAgICAgIGlmIChoYXNEZXB0aExheWVyKSB7XG5cbiAgICAgICAgICAgIC8qKiBAdHlwZSB7TGF5ZXJ9ICovXG4gICAgICAgICAgICBjb25zdCBkZXB0aExheWVyID0gdGhpcy5zeXN0ZW0uYXBwLnNjZW5lLmxheWVycy5nZXRMYXllckJ5SWQoTEFZRVJJRF9ERVBUSCk7XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGRlcHRoTGF5ZXI/LmluY3JlbWVudENvdW50ZXIoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVwdGhMYXllcj8uZGVjcmVtZW50Q291bnRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0IHRoZSBzY2VuZSB0byBnZW5lcmF0ZSBhIHRleHR1cmUgY29udGFpbmluZyB0aGUgc2NlbmUgY29sb3IgbWFwLiBOb3RlIHRoYXQgdGhpcyBjYWxsXG4gICAgICogaXMgYWNjdW1tdWxhdGl2ZSwgYW5kIGZvciBlYWNoIGVuYWJsZSByZXF1ZXN0LCBhIGRpc2FibGUgcmVxdWVzdCBuZWVkIHRvIGJlIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCAtIFRydWUgdG8gcmVxdWVzdCB0aGUgZ2VuZXJhdGlvbiwgZmFsc2UgdG8gZGlzYWJsZSBpdC5cbiAgICAgKi9cbiAgICByZXF1ZXN0U2NlbmVDb2xvck1hcChlbmFibGVkKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlclNjZW5lQ29sb3JNYXAgKz0gZW5hYmxlZCA/IDEgOiAtMTtcbiAgICAgICAgRGVidWcuYXNzZXJ0KHRoaXMuX3JlbmRlclNjZW5lQ29sb3JNYXAgPj0gMCk7XG4gICAgICAgIGNvbnN0IG9rID0gdGhpcy5fZW5hYmxlRGVwdGhMYXllcihlbmFibGVkKTtcbiAgICAgICAgaWYgKCFvaykge1xuICAgICAgICAgICAgRGVidWcud2Fybk9uY2UoJ0NhbWVyYUNvbXBvbmVudC5yZXF1ZXN0U2NlbmVDb2xvck1hcCB3YXMgY2FsbGVkLCBidXQgdGhlIGNhbWVyYSBkb2VzIG5vdCBoYXZlIGEgRGVwdGggbGF5ZXIsIGlnbm9yaW5nLicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0IHJlbmRlclNjZW5lQ29sb3JNYXAodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlICYmICF0aGlzLl9zY2VuZUNvbG9yTWFwUmVxdWVzdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RTY2VuZUNvbG9yTWFwKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5fc2NlbmVDb2xvck1hcFJlcXVlc3RlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fc2NlbmVDb2xvck1hcFJlcXVlc3RlZCkge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0U2NlbmVDb2xvck1hcChmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLl9zY2VuZUNvbG9yTWFwUmVxdWVzdGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgcmVuZGVyU2NlbmVDb2xvck1hcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlclNjZW5lQ29sb3JNYXAgPiAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlcXVlc3QgdGhlIHNjZW5lIHRvIGdlbmVyYXRlIGEgdGV4dHVyZSBjb250YWluaW5nIHRoZSBzY2VuZSBkZXB0aCBtYXAuIE5vdGUgdGhhdCB0aGlzIGNhbGxcbiAgICAgKiBpcyBhY2N1bW11bGF0aXZlLCBhbmQgZm9yIGVhY2ggZW5hYmxlIHJlcXVlc3QsIGEgZGlzYWJsZSByZXF1ZXN0IG5lZWQgdG8gYmUgY2FsbGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBlbmFibGVkIC0gVHJ1ZSB0byByZXF1ZXN0IHRoZSBnZW5lcmF0aW9uLCBmYWxzZSB0byBkaXNhYmxlIGl0LlxuICAgICAqL1xuICAgIHJlcXVlc3RTY2VuZURlcHRoTWFwKGVuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyU2NlbmVEZXB0aE1hcCArPSBlbmFibGVkID8gMSA6IC0xO1xuICAgICAgICBEZWJ1Zy5hc3NlcnQodGhpcy5fcmVuZGVyU2NlbmVEZXB0aE1hcCA+PSAwKTtcbiAgICAgICAgY29uc3Qgb2sgPSB0aGlzLl9lbmFibGVEZXB0aExheWVyKGVuYWJsZWQpO1xuICAgICAgICBpZiAoIW9rKSB7XG4gICAgICAgICAgICBEZWJ1Zy53YXJuT25jZSgnQ2FtZXJhQ29tcG9uZW50LnJlcXVlc3RTY2VuZURlcHRoTWFwIHdhcyBjYWxsZWQsIGJ1dCB0aGUgY2FtZXJhIGRvZXMgbm90IGhhdmUgYSBEZXB0aCBsYXllciwgaWdub3JpbmcuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXQgcmVuZGVyU2NlbmVEZXB0aE1hcCh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgJiYgIXRoaXMuX3NjZW5lRGVwdGhNYXBSZXF1ZXN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFNjZW5lRGVwdGhNYXAodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLl9zY2VuZURlcHRoTWFwUmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9zY2VuZURlcHRoTWFwUmVxdWVzdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RTY2VuZURlcHRoTWFwKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuX3NjZW5lRGVwdGhNYXBSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCByZW5kZXJTY2VuZURlcHRoTWFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyU2NlbmVEZXB0aE1hcCA+IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUXVlcmllcyB0aGUgY2FtZXJhJ3MgZnJ1c3R1bSBzaGFwZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtGcnVzdHVtfVxuICAgICAqL1xuICAgIGdldCBmcnVzdHVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FtZXJhLmZydXN0dW07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQW4gYXJyYXkgb2YgbGF5ZXIgSURzICh7QGxpbmsgTGF5ZXIjaWR9KSB0byB3aGljaCB0aGlzIGNhbWVyYSBzaG91bGQgYmVsb25nLiBEb24ndCBwdXNoLFxuICAgICAqIHBvcCwgc3BsaWNlIG9yIG1vZGlmeSB0aGlzIGFycmF5LCBpZiB5b3Ugd2FudCB0byBjaGFuZ2UgaXQsIHNldCBhIG5ldyBvbmUgaW5zdGVhZC4gRGVmYXVsdHNcbiAgICAgKiB0byBbTEFZRVJJRF9XT1JMRCwgTEFZRVJJRF9ERVBUSCwgTEFZRVJJRF9TS1lCT1gsIExBWUVSSURfVUksIExBWUVSSURfSU1NRURJQVRFXS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJbXX1cbiAgICAgKi9cbiAgICBzZXQgbGF5ZXJzKG5ld1ZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGxheWVycyA9IHRoaXMuX2NhbWVyYS5sYXllcnM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBsYXllciA9IHRoaXMuc3lzdGVtLmFwcC5zY2VuZS5sYXllcnMuZ2V0TGF5ZXJCeUlkKGxheWVyc1tpXSk7XG4gICAgICAgICAgICBpZiAoIWxheWVyKSBjb250aW51ZTtcbiAgICAgICAgICAgIGxheWVyLnJlbW92ZUNhbWVyYSh0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2NhbWVyYS5sYXllcnMgPSBuZXdWYWx1ZTtcblxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCB8fCAhdGhpcy5lbnRpdHkuZW5hYmxlZCkgcmV0dXJuO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3VmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGxheWVyID0gdGhpcy5zeXN0ZW0uYXBwLnNjZW5lLmxheWVycy5nZXRMYXllckJ5SWQobmV3VmFsdWVbaV0pO1xuICAgICAgICAgICAgaWYgKCFsYXllcikgY29udGludWU7XG4gICAgICAgICAgICBsYXllci5hZGRDYW1lcmEodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgbGF5ZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FtZXJhLmxheWVycztcbiAgICB9XG5cbiAgICBnZXQgbGF5ZXJzU2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FtZXJhLmxheWVyc1NldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcG9zdCBlZmZlY3RzIHF1ZXVlIGZvciB0aGlzIGNhbWVyYS4gVXNlIHRoaXMgdG8gYWRkIG9yIHJlbW92ZSBwb3N0IGVmZmVjdHMgZnJvbSB0aGUgY2FtZXJhLlxuICAgICAqXG4gICAgICogQHR5cGUge1Bvc3RFZmZlY3RRdWV1ZX1cbiAgICAgKi9cbiAgICBnZXQgcG9zdEVmZmVjdHNFbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9zdEVmZmVjdHMuZW5hYmxlZDtcbiAgICB9XG5cbiAgICBnZXQgcG9zdEVmZmVjdHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wb3N0RWZmZWN0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250cm9scyB0aGUgb3JkZXIgaW4gd2hpY2ggY2FtZXJhcyBhcmUgcmVuZGVyZWQuIENhbWVyYXMgd2l0aCBzbWFsbGVyIHZhbHVlcyBmb3IgcHJpb3JpdHlcbiAgICAgKiBhcmUgcmVuZGVyZWQgZmlyc3QuIERlZmF1bHRzIHRvIDAuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNldCBwcmlvcml0eShuZXdWYWx1ZSkge1xuICAgICAgICB0aGlzLl9wcmlvcml0eSA9IG5ld1ZhbHVlO1xuICAgICAgICB0aGlzLmRpcnR5TGF5ZXJDb21wb3NpdGlvbkNhbWVyYXMoKTtcbiAgICB9XG5cbiAgICBnZXQgcHJpb3JpdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcmlvcml0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBRdWVyaWVzIHRoZSBjYW1lcmEncyBwcm9qZWN0aW9uIG1hdHJpeC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtNYXQ0fVxuICAgICAqL1xuICAgIGdldCBwcm9qZWN0aW9uTWF0cml4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FtZXJhLnByb2plY3Rpb25NYXRyaXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGNhbWVyYSBhcGVydHVyZSBpbiBmLXN0b3BzLCB0aGUgZGVmYXVsdCB2YWx1ZSBpcyAxNi4wLiBIaWdoZXIgdmFsdWUgbWVhbnMgbGVzcyBleHBvc3VyZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IGFwZXJ0dXJlKG5ld1ZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NhbWVyYS5hcGVydHVyZSA9IG5ld1ZhbHVlO1xuICAgIH1cblxuICAgIGdldCBhcGVydHVyZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYS5hcGVydHVyZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgY2FtZXJhIHNlbnNpdGl2aXR5IGluIElTTywgdGhlIGRlZmF1bHQgdmFsdWUgaXMgMTAwMC4gSGlnaGVyIHZhbHVlIG1lYW5zIG1vcmUgZXhwb3N1cmUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNldCBzZW5zaXRpdml0eShuZXdWYWx1ZSkge1xuICAgICAgICB0aGlzLl9jYW1lcmEuc2Vuc2l0aXZpdHkgPSBuZXdWYWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgc2Vuc2l0aXZpdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW1lcmEuc2Vuc2l0aXZpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGNhbWVyYSBzaHV0dGVyIHNwZWVkIGluIHNlY29uZHMsIHRoZSBkZWZhdWx0IHZhbHVlIGlzIDEvMTAwMHMuIExvbmdlciBzaHV0dGVyIG1lYW5zIG1vcmUgZXhwb3N1cmUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNldCBzaHV0dGVyKG5ld1ZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NhbWVyYS5zaHV0dGVyID0gbmV3VmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IHNodXR0ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW1lcmEuc2h1dHRlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250cm9scyB3aGVyZSBvbiB0aGUgc2NyZWVuIHRoZSBjYW1lcmEgd2lsbCBiZSByZW5kZXJlZCBpbiBub3JtYWxpemVkIHNjcmVlbiBjb29yZGluYXRlcy5cbiAgICAgKiBEZWZhdWx0cyB0byBbMCwgMCwgMSwgMV0uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7VmVjNH1cbiAgICAgKi9cbiAgICBzZXQgcmVjdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9jYW1lcmEucmVjdCA9IHZhbHVlO1xuICAgICAgICB0aGlzLmZpcmUoJ3NldDpyZWN0JywgdGhpcy5fY2FtZXJhLnJlY3QpO1xuICAgIH1cblxuICAgIGdldCByZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FtZXJhLnJlY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRhcmdldCB0byB3aGljaCByZW5kZXJpbmcgb2YgdGhlIGNhbWVyYXMgaXMgcGVyZm9ybWVkLiBJZiBub3Qgc2V0LCBpdCB3aWxsIHJlbmRlclxuICAgICAqIHNpbXBseSB0byB0aGUgc2NyZWVuLlxuICAgICAqXG4gICAgICogQHR5cGUge1JlbmRlclRhcmdldH1cbiAgICAgKi9cbiAgICBzZXQgcmVuZGVyVGFyZ2V0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NhbWVyYS5yZW5kZXJUYXJnZXQgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5kaXJ0eUxheWVyQ29tcG9zaXRpb25DYW1lcmFzKCk7XG4gICAgfVxuXG4gICAgZ2V0IHJlbmRlclRhcmdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYS5yZW5kZXJUYXJnZXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUXVlcmllcyB0aGUgY2FtZXJhJ3MgdmlldyBtYXRyaXguXG4gICAgICpcbiAgICAgKiBAdHlwZSB7TWF0NH1cbiAgICAgKi9cbiAgICBnZXQgdmlld01hdHJpeCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYS52aWV3TWF0cml4O1xuICAgIH1cblxuICAgIGRpcnR5TGF5ZXJDb21wb3NpdGlvbkNhbWVyYXMoKSB7XG4gICAgICAgIC8vIGxheWVyIGNvbXBvc2l0aW9uIG5lZWRzIHRvIHVwZGF0ZSBvcmRlclxuICAgICAgICBjb25zdCBsYXllckNvbXAgPSB0aGlzLnN5c3RlbS5hcHAuc2NlbmUubGF5ZXJzO1xuICAgICAgICBsYXllckNvbXAuX2RpcnR5Q2FtZXJhcyA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydCBhIHBvaW50IGZyb20gMkQgc2NyZWVuIHNwYWNlIHRvIDNEIHdvcmxkIHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNjcmVlbnggLSBYIGNvb3JkaW5hdGUgb24gUGxheUNhbnZhcycgY2FudmFzIGVsZW1lbnQuIFNob3VsZCBiZSBpbiB0aGUgcmFuZ2VcbiAgICAgKiAwIHRvIGBjYW52YXMub2Zmc2V0V2lkdGhgIG9mIHRoZSBhcHBsaWNhdGlvbidzIGNhbnZhcyBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzY3JlZW55IC0gWSBjb29yZGluYXRlIG9uIFBsYXlDYW52YXMnIGNhbnZhcyBlbGVtZW50LiBTaG91bGQgYmUgaW4gdGhlIHJhbmdlXG4gICAgICogMCB0byBgY2FudmFzLm9mZnNldEhlaWdodGAgb2YgdGhlIGFwcGxpY2F0aW9uJ3MgY2FudmFzIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNhbWVyYXogLSBUaGUgZGlzdGFuY2UgZnJvbSB0aGUgY2FtZXJhIGluIHdvcmxkIHNwYWNlIHRvIGNyZWF0ZSB0aGUgbmV3XG4gICAgICogcG9pbnQuXG4gICAgICogQHBhcmFtIHtWZWMzfSBbd29ybGRDb29yZF0gLSAzRCB2ZWN0b3IgdG8gcmVjZWl2ZSB3b3JsZCBjb29yZGluYXRlIHJlc3VsdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIC8vIEdldCB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludHMgb2YgYSAzRCByYXkgZmlyZWQgZnJvbSBhIHNjcmVlbiBjbGljayBwb3NpdGlvblxuICAgICAqIHZhciBzdGFydCA9IGVudGl0eS5jYW1lcmEuc2NyZWVuVG9Xb3JsZChjbGlja1gsIGNsaWNrWSwgZW50aXR5LmNhbWVyYS5uZWFyQ2xpcCk7XG4gICAgICogdmFyIGVuZCA9IGVudGl0eS5jYW1lcmEuc2NyZWVuVG9Xb3JsZChjbGlja1gsIGNsaWNrWSwgZW50aXR5LmNhbWVyYS5mYXJDbGlwKTtcbiAgICAgKlxuICAgICAqIC8vIFVzZSB0aGUgcmF5IGNvb3JkaW5hdGVzIHRvIHBlcmZvcm0gYSByYXljYXN0XG4gICAgICogYXBwLnN5c3RlbXMucmlnaWRib2R5LnJheWNhc3RGaXJzdChzdGFydCwgZW5kLCBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKFwiRW50aXR5IFwiICsgcmVzdWx0LmVudGl0eS5uYW1lICsgXCIgd2FzIHNlbGVjdGVkXCIpO1xuICAgICAqIH0pO1xuICAgICAqIEByZXR1cm5zIHtWZWMzfSBUaGUgd29ybGQgc3BhY2UgY29vcmRpbmF0ZS5cbiAgICAgKi9cbiAgICBzY3JlZW5Ub1dvcmxkKHNjcmVlbngsIHNjcmVlbnksIGNhbWVyYXosIHdvcmxkQ29vcmQpIHtcbiAgICAgICAgY29uc3QgZGV2aWNlID0gdGhpcy5zeXN0ZW0uYXBwLmdyYXBoaWNzRGV2aWNlO1xuICAgICAgICBjb25zdCB3ID0gZGV2aWNlLmNsaWVudFJlY3Qud2lkdGg7XG4gICAgICAgIGNvbnN0IGggPSBkZXZpY2UuY2xpZW50UmVjdC5oZWlnaHQ7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW1lcmEuc2NyZWVuVG9Xb3JsZChzY3JlZW54LCBzY3JlZW55LCBjYW1lcmF6LCB3LCBoLCB3b3JsZENvb3JkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IGEgcG9pbnQgZnJvbSAzRCB3b3JsZCBzcGFjZSB0byAyRCBzY3JlZW4gc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1ZlYzN9IHdvcmxkQ29vcmQgLSBUaGUgd29ybGQgc3BhY2UgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge1ZlYzN9IFtzY3JlZW5Db29yZF0gLSAzRCB2ZWN0b3IgdG8gcmVjZWl2ZSBzY3JlZW4gY29vcmRpbmF0ZSByZXN1bHQuXG4gICAgICogQHJldHVybnMge1ZlYzN9IFRoZSBzY3JlZW4gc3BhY2UgY29vcmRpbmF0ZS5cbiAgICAgKi9cbiAgICB3b3JsZFRvU2NyZWVuKHdvcmxkQ29vcmQsIHNjcmVlbkNvb3JkKSB7XG4gICAgICAgIGNvbnN0IGRldmljZSA9IHRoaXMuc3lzdGVtLmFwcC5ncmFwaGljc0RldmljZTtcbiAgICAgICAgY29uc3QgdyA9IGRldmljZS5jbGllbnRSZWN0LndpZHRoO1xuICAgICAgICBjb25zdCBoID0gZGV2aWNlLmNsaWVudFJlY3QuaGVpZ2h0O1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FtZXJhLndvcmxkVG9TY3JlZW4od29ybGRDb29yZCwgdywgaCwgc2NyZWVuQ29vcmQpO1xuICAgIH1cblxuICAgIC8vIGNhbGxlZCBiZWZvcmUgYXBwbGljYXRpb24gcmVuZGVycyB0aGUgc2NlbmVcbiAgICBvbkFwcFByZXJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5fY2FtZXJhLl92aWV3TWF0RGlydHkgPSB0cnVlO1xuICAgICAgICB0aGlzLl9jYW1lcmEuX3ZpZXdQcm9qTWF0RGlydHkgPSB0cnVlO1xuICAgIH1cblxuICAgIGFkZENhbWVyYVRvTGF5ZXJzKCkge1xuICAgICAgICBjb25zdCBsYXllcnMgPSB0aGlzLmxheWVycztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGxheWVyID0gdGhpcy5zeXN0ZW0uYXBwLnNjZW5lLmxheWVycy5nZXRMYXllckJ5SWQobGF5ZXJzW2ldKTtcbiAgICAgICAgICAgIGlmIChsYXllcikge1xuICAgICAgICAgICAgICAgIGxheWVyLmFkZENhbWVyYSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbW92ZUNhbWVyYUZyb21MYXllcnMoKSB7XG4gICAgICAgIGNvbnN0IGxheWVycyA9IHRoaXMubGF5ZXJzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbGF5ZXIgPSB0aGlzLnN5c3RlbS5hcHAuc2NlbmUubGF5ZXJzLmdldExheWVyQnlJZChsYXllcnNbaV0pO1xuICAgICAgICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXIucmVtb3ZlQ2FtZXJhKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25MYXllcnNDaGFuZ2VkKG9sZENvbXAsIG5ld0NvbXApIHtcbiAgICAgICAgdGhpcy5hZGRDYW1lcmFUb0xheWVycygpO1xuICAgICAgICBvbGRDb21wLm9mZignYWRkJywgdGhpcy5vbkxheWVyQWRkZWQsIHRoaXMpO1xuICAgICAgICBvbGRDb21wLm9mZigncmVtb3ZlJywgdGhpcy5vbkxheWVyUmVtb3ZlZCwgdGhpcyk7XG4gICAgICAgIG5ld0NvbXAub24oJ2FkZCcsIHRoaXMub25MYXllckFkZGVkLCB0aGlzKTtcbiAgICAgICAgbmV3Q29tcC5vbigncmVtb3ZlJywgdGhpcy5vbkxheWVyUmVtb3ZlZCwgdGhpcyk7XG4gICAgfVxuXG4gICAgb25MYXllckFkZGVkKGxheWVyKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5sYXllcnMuaW5kZXhPZihsYXllci5pZCk7XG4gICAgICAgIGlmIChpbmRleCA8IDApIHJldHVybjtcbiAgICAgICAgbGF5ZXIuYWRkQ2FtZXJhKHRoaXMpO1xuICAgIH1cblxuICAgIG9uTGF5ZXJSZW1vdmVkKGxheWVyKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5sYXllcnMuaW5kZXhPZihsYXllci5pZCk7XG4gICAgICAgIGlmIChpbmRleCA8IDApIHJldHVybjtcbiAgICAgICAgbGF5ZXIucmVtb3ZlQ2FtZXJhKHRoaXMpO1xuICAgIH1cblxuICAgIG9uRW5hYmxlKCkge1xuICAgICAgICBjb25zdCBzeXN0ZW0gPSB0aGlzLnN5c3RlbTtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBzeXN0ZW0uYXBwLnNjZW5lO1xuICAgICAgICBjb25zdCBsYXllcnMgPSBzY2VuZS5sYXllcnM7XG5cbiAgICAgICAgc3lzdGVtLmFkZENhbWVyYSh0aGlzKTtcblxuICAgICAgICBzY2VuZS5vbignc2V0OmxheWVycycsIHRoaXMub25MYXllcnNDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgaWYgKGxheWVycykge1xuICAgICAgICAgICAgbGF5ZXJzLm9uKCdhZGQnLCB0aGlzLm9uTGF5ZXJBZGRlZCwgdGhpcyk7XG4gICAgICAgICAgICBsYXllcnMub24oJ3JlbW92ZScsIHRoaXMub25MYXllclJlbW92ZWQsIHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCAmJiB0aGlzLmVudGl0eS5lbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLmFkZENhbWVyYVRvTGF5ZXJzKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBvc3RFZmZlY3RzLmVuYWJsZSgpO1xuICAgIH1cblxuICAgIG9uRGlzYWJsZSgpIHtcbiAgICAgICAgY29uc3Qgc3lzdGVtID0gdGhpcy5zeXN0ZW07XG4gICAgICAgIGNvbnN0IHNjZW5lID0gc3lzdGVtLmFwcC5zY2VuZTtcbiAgICAgICAgY29uc3QgbGF5ZXJzID0gc2NlbmUubGF5ZXJzO1xuXG4gICAgICAgIHRoaXMucG9zdEVmZmVjdHMuZGlzYWJsZSgpO1xuXG4gICAgICAgIHRoaXMucmVtb3ZlQ2FtZXJhRnJvbUxheWVycygpO1xuXG4gICAgICAgIHNjZW5lLm9mZignc2V0OmxheWVycycsIHRoaXMub25MYXllcnNDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgaWYgKGxheWVycykge1xuICAgICAgICAgICAgbGF5ZXJzLm9mZignYWRkJywgdGhpcy5vbkxheWVyQWRkZWQsIHRoaXMpO1xuICAgICAgICAgICAgbGF5ZXJzLm9mZigncmVtb3ZlJywgdGhpcy5vbkxheWVyUmVtb3ZlZCwgdGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICBzeXN0ZW0ucmVtb3ZlQ2FtZXJhKHRoaXMpO1xuICAgIH1cblxuICAgIG9uUmVtb3ZlKCkge1xuICAgICAgICB0aGlzLm9uRGlzYWJsZSgpO1xuICAgICAgICB0aGlzLm9mZigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgYXNwZWN0IHJhdGlvIHZhbHVlIGZvciBhIGdpdmVuIHJlbmRlciB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlbmRlclRhcmdldH0gW3J0XSAtIE9wdGlvbmFsIHJlbmRlciB0YXJnZXQuIElmIHVuc3BlY2lmaWVkLCB0aGUgYmFja2J1ZmZlciBpcyB1c2VkLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSBhc3BlY3QgcmF0aW8gb2YgdGhlIHJlbmRlciB0YXJnZXQgKG9yIGJhY2tidWZmZXIpLlxuICAgICAqL1xuICAgIGNhbGN1bGF0ZUFzcGVjdFJhdGlvKHJ0KSB7XG4gICAgICAgIGNvbnN0IGRldmljZSA9IHRoaXMuc3lzdGVtLmFwcC5ncmFwaGljc0RldmljZTtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBydCA/IHJ0LndpZHRoIDogZGV2aWNlLndpZHRoO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBydCA/IHJ0LmhlaWdodCA6IGRldmljZS5oZWlnaHQ7XG4gICAgICAgIHJldHVybiAod2lkdGggKiB0aGlzLnJlY3QueikgLyAoaGVpZ2h0ICogdGhpcy5yZWN0LncpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByZXBhcmUgdGhlIGNhbWVyYSBmb3IgZnJhbWUgcmVuZGVyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZW5kZXJUYXJnZXR9IHJ0IC0gUmVuZGVyIHRhcmdldCB0byB3aGljaCByZW5kZXJpbmcgd2lsbCBiZSBwZXJmb3JtZWQuIFdpbGwgYWZmZWN0XG4gICAgICogY2FtZXJhJ3MgYXNwZWN0IHJhdGlvLCBpZiBhc3BlY3RSYXRpb01vZGUgaXMge0BsaW5rIEFTUEVDVF9BVVRPfS5cbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgZnJhbWVVcGRhdGUocnQpIHtcbiAgICAgICAgaWYgKHRoaXMuYXNwZWN0UmF0aW9Nb2RlID09PSBBU1BFQ1RfQVVUTykge1xuICAgICAgICAgICAgdGhpcy5hc3BlY3RSYXRpbyA9IHRoaXMuY2FsY3VsYXRlQXNwZWN0UmF0aW8ocnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBzdGFydCBYUiBzZXNzaW9uIHdpdGggdGhpcyBjYW1lcmEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIFRoZSB0eXBlIG9mIHNlc3Npb24uIENhbiBiZSBvbmUgb2YgdGhlIGZvbGxvd2luZzpcbiAgICAgKlxuICAgICAqIC0ge0BsaW5rIFhSVFlQRV9JTkxJTkV9OiBJbmxpbmUgLSBhbHdheXMgYXZhaWxhYmxlIHR5cGUgb2Ygc2Vzc2lvbi4gSXQgaGFzIGxpbWl0ZWQgZmVhdHVyZVxuICAgICAqIGF2YWlsYWJpbGl0eSBhbmQgaXMgcmVuZGVyZWQgaW50byBIVE1MIGVsZW1lbnQuXG4gICAgICogLSB7QGxpbmsgWFJUWVBFX1ZSfTogSW1tZXJzaXZlIFZSIC0gc2Vzc2lvbiB0aGF0IHByb3ZpZGVzIGV4Y2x1c2l2ZSBhY2Nlc3MgdG8gdGhlIFZSIGRldmljZVxuICAgICAqIHdpdGggdGhlIGJlc3QgYXZhaWxhYmxlIHRyYWNraW5nIGZlYXR1cmVzLlxuICAgICAqIC0ge0BsaW5rIFhSVFlQRV9BUn06IEltbWVyc2l2ZSBBUiAtIHNlc3Npb24gdGhhdCBwcm92aWRlcyBleGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBWUi9BUlxuICAgICAqIGRldmljZSB0aGF0IGlzIGludGVuZGVkIHRvIGJlIGJsZW5kZWQgd2l0aCB0aGUgcmVhbC13b3JsZCBlbnZpcm9ubWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcGFjZVR5cGUgLSBSZWZlcmVuY2Ugc3BhY2UgdHlwZS4gQ2FuIGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nOlxuICAgICAqXG4gICAgICogLSB7QGxpbmsgWFJTUEFDRV9WSUVXRVJ9OiBWaWV3ZXIgLSBhbHdheXMgc3VwcG9ydGVkIHNwYWNlIHdpdGggc29tZSBiYXNpYyB0cmFja2luZ1xuICAgICAqIGNhcGFiaWxpdGllcy5cbiAgICAgKiAtIHtAbGluayBYUlNQQUNFX0xPQ0FMfTogTG9jYWwgLSByZXByZXNlbnRzIGEgdHJhY2tpbmcgc3BhY2Ugd2l0aCBhIG5hdGl2ZSBvcmlnaW4gbmVhciB0aGVcbiAgICAgKiB2aWV3ZXIgYXQgdGhlIHRpbWUgb2YgY3JlYXRpb24uIEl0IGlzIG1lYW50IGZvciBzZWF0ZWQgb3IgYmFzaWMgbG9jYWwgWFIgc2Vzc2lvbnMuXG4gICAgICogLSB7QGxpbmsgWFJTUEFDRV9MT0NBTEZMT09SfTogTG9jYWwgRmxvb3IgLSByZXByZXNlbnRzIGEgdHJhY2tpbmcgc3BhY2Ugd2l0aCBhIG5hdGl2ZSBvcmlnaW5cbiAgICAgKiBhdCB0aGUgZmxvb3IgaW4gYSBzYWZlIHBvc2l0aW9uIGZvciB0aGUgdXNlciB0byBzdGFuZC4gVGhlIHktYXhpcyBlcXVhbHMgMCBhdCBmbG9vciBsZXZlbC5cbiAgICAgKiBGbG9vciBsZXZlbCB2YWx1ZSBtaWdodCBiZSBlc3RpbWF0ZWQgYnkgdGhlIHVuZGVybHlpbmcgcGxhdGZvcm0uIEl0IGlzIG1lYW50IGZvciBzZWF0ZWQgb3JcbiAgICAgKiBiYXNpYyBsb2NhbCBYUiBzZXNzaW9ucy5cbiAgICAgKiAtIHtAbGluayBYUlNQQUNFX0JPVU5ERURGTE9PUn06IEJvdW5kZWQgRmxvb3IgLSByZXByZXNlbnRzIGEgdHJhY2tpbmcgc3BhY2Ugd2l0aCBpdHMgbmF0aXZlXG4gICAgICogb3JpZ2luIGF0IHRoZSBmbG9vciwgd2hlcmUgdGhlIHVzZXIgaXMgZXhwZWN0ZWQgdG8gbW92ZSB3aXRoaW4gYSBwcmUtZXN0YWJsaXNoZWQgYm91bmRhcnkuXG4gICAgICogLSB7QGxpbmsgWFJTUEFDRV9VTkJPVU5ERUR9OiBVbmJvdW5kZWQgLSByZXByZXNlbnRzIGEgdHJhY2tpbmcgc3BhY2Ugd2hlcmUgdGhlIHVzZXIgaXNcbiAgICAgKiBleHBlY3RlZCB0byBtb3ZlIGZyZWVseSBhcm91bmQgdGhlaXIgZW52aXJvbm1lbnQsIHBvdGVudGlhbGx5IGxvbmcgZGlzdGFuY2VzIGZyb20gdGhlaXJcbiAgICAgKiBzdGFydGluZyBwb2ludC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBPYmplY3Qgd2l0aCBvcHRpb25zIGZvciBYUiBzZXNzaW9uIGluaXRpYWxpemF0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IFtvcHRpb25zLm9wdGlvbmFsRmVhdHVyZXNdIC0gT3B0aW9uYWwgZmVhdHVyZXMgZm9yIFhSU2Vzc2lvbiBzdGFydC4gSXQgaXNcbiAgICAgKiB1c2VkIGZvciBnZXR0aW5nIGFjY2VzcyB0byBhZGRpdGlvbmFsIFdlYlhSIHNwZWMgZXh0ZW5zaW9ucy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmltYWdlVHJhY2tpbmddIC0gU2V0IHRvIHRydWUgdG8gYXR0ZW1wdCB0byBlbmFibGUge0BsaW5rIFhySW1hZ2VUcmFja2luZ30uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5wbGFuZURldGVjdGlvbl0gLSBTZXQgdG8gdHJ1ZSB0byBhdHRlbXB0IHRvIGVuYWJsZSB7QGxpbmsgWHJQbGFuZURldGVjdGlvbn0uXG4gICAgICogQHBhcmFtIHtYckVycm9yQ2FsbGJhY2t9IFtvcHRpb25zLmNhbGxiYWNrXSAtIE9wdGlvbmFsIGNhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBvbmNlIHRoZVxuICAgICAqIHNlc3Npb24gaXMgc3RhcnRlZC4gVGhlIGNhbGxiYWNrIGhhcyBvbmUgYXJndW1lbnQgRXJyb3IgLSBpdCBpcyBudWxsIGlmIHRoZSBYUiBzZXNzaW9uXG4gICAgICogc3RhcnRlZCBzdWNjZXNzZnVsbHkuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLmRlcHRoU2Vuc2luZ10gLSBPcHRpb25hbCBvYmplY3Qgd2l0aCBkZXB0aCBzZW5zaW5nIHBhcmFtZXRlcnMgdG9cbiAgICAgKiBhdHRlbXB0IHRvIGVuYWJsZSB7QGxpbmsgWHJEZXB0aFNlbnNpbmd9LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5kZXB0aFNlbnNpbmcudXNhZ2VQcmVmZXJlbmNlXSAtIE9wdGlvbmFsIHVzYWdlIHByZWZlcmVuY2UgZm9yIGRlcHRoXG4gICAgICogc2Vuc2luZywgY2FuIGJlICdjcHUtb3B0aW1pemVkJyBvciAnZ3B1LW9wdGltaXplZCcgKFhSREVQVEhTRU5TSU5HVVNBR0VfKiksIGRlZmF1bHRzIHRvXG4gICAgICogJ2NwdS1vcHRpbWl6ZWQnLiBNb3N0IHByZWZlcnJlZCBhbmQgc3VwcG9ydGVkIHdpbGwgYmUgY2hvc2VuIGJ5IHRoZSB1bmRlcmx5aW5nIGRlcHRoIHNlbnNpbmdcbiAgICAgKiBzeXN0ZW0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmRlcHRoU2Vuc2luZy5kYXRhRm9ybWF0UHJlZmVyZW5jZV0gLSBPcHRpb25hbCBkYXRhIGZvcm1hdFxuICAgICAqIHByZWZlcmVuY2UgZm9yIGRlcHRoIHNlbnNpbmcuIENhbiBiZSAnbHVtaW5hbmNlLWFscGhhJyBvciAnZmxvYXQzMicgKFhSREVQVEhTRU5TSU5HRk9STUFUXyopLFxuICAgICAqIGRlZmF1bHRzIHRvICdsdW1pbmFuY2UtYWxwaGEnLiBNb3N0IHByZWZlcnJlZCBhbmQgc3VwcG9ydGVkIHdpbGwgYmUgY2hvc2VuIGJ5IHRoZSB1bmRlcmx5aW5nXG4gICAgICogZGVwdGggc2Vuc2luZyBzeXN0ZW0uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBPbiBhbiBlbnRpdHkgd2l0aCBhIGNhbWVyYSBjb21wb25lbnRcbiAgICAgKiB0aGlzLmVudGl0eS5jYW1lcmEuc3RhcnRYcihwYy5YUlRZUEVfVlIsIHBjLlhSU1BBQ0VfTE9DQUwsIHtcbiAgICAgKiAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgKiAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgKiAgICAgICAgICAgICAvLyBmYWlsZWQgdG8gc3RhcnQgWFIgc2Vzc2lvblxuICAgICAqICAgICAgICAgfSBlbHNlIHtcbiAgICAgKiAgICAgICAgICAgICAvLyBpbiBYUlxuICAgICAqICAgICAgICAgfVxuICAgICAqICAgICB9XG4gICAgICogfSk7XG4gICAgICovXG4gICAgc3RhcnRYcih0eXBlLCBzcGFjZVR5cGUsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0uYXBwLnhyLnN0YXJ0KHRoaXMsIHR5cGUsIHNwYWNlVHlwZSwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBlbmQgWFIgc2Vzc2lvbiBvZiB0aGlzIGNhbWVyYS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7WHJFcnJvckNhbGxiYWNrfSBbY2FsbGJhY2tdIC0gT3B0aW9uYWwgY2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIG9uY2Ugc2Vzc2lvbiBpc1xuICAgICAqIGVuZGVkLiBUaGUgY2FsbGJhY2sgaGFzIG9uZSBhcmd1bWVudCBFcnJvciAtIGl0IGlzIG51bGwgaWYgc3VjY2Vzc2Z1bGx5IGVuZGVkIFhSIHNlc3Npb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBPbiBhbiBlbnRpdHkgd2l0aCBhIGNhbWVyYSBjb21wb25lbnRcbiAgICAgKiB0aGlzLmVudGl0eS5jYW1lcmEuZW5kWHIoZnVuY3Rpb24gKGVycikge1xuICAgICAqICAgICAvLyBub3QgYW55bW9yZSBpbiBYUlxuICAgICAqIH0pO1xuICAgICAqL1xuICAgIGVuZFhyKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2FtZXJhLnhyKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKG5ldyBFcnJvcignQ2FtZXJhIGlzIG5vdCBpbiBYUicpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2NhbWVyYS54ci5lbmQoY2FsbGJhY2spO1xuICAgIH1cblxuICAgIC8vIGZ1bmN0aW9uIHRvIGNvcHkgcHJvcGVydGllcyBmcm9tIHRoZSBzb3VyY2UgQ2FtZXJhQ29tcG9uZW50LlxuICAgIC8vIHByb3BlcnRpZXMgbm90IGNvcGllZDogcG9zdEVmZmVjdHNcbiAgICAvLyBpbmhlcml0ZWQgcHJvcGVydGllcyBub3QgY29waWVkIChhbGwpOiBzeXN0ZW0sIGVudGl0eSwgZW5hYmxlZClcbiAgICBjb3B5KHNvdXJjZSkge1xuXG4gICAgICAgIC8vIGNvcHkgZGF0YSBkcml2ZW4gcHJvcGVydGllc1xuICAgICAgICBwcm9wZXJ0aWVzLmZvckVhY2goKHByb3BlcnR5KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXByb3BlcnR5LnJlYWRvbmx5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHByb3BlcnR5Lm5hbWU7XG4gICAgICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHNvdXJjZVtuYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gb3RoZXIgcHJvcGVydGllc1xuICAgICAgICB0aGlzLmNsZWFyQ29sb3JCdWZmZXIgPSBzb3VyY2UuY2xlYXJDb2xvckJ1ZmZlcjtcbiAgICAgICAgdGhpcy5jbGVhckRlcHRoQnVmZmVyID0gc291cmNlLmNsZWFyRGVwdGhCdWZmZXI7XG4gICAgICAgIHRoaXMuY2xlYXJTdGVuY2lsQnVmZmVyID0gc291cmNlLmNsZWFyU3RlbmNpbEJ1ZmZlcjtcbiAgICAgICAgdGhpcy5kaXNhYmxlUG9zdEVmZmVjdHNMYXllciA9IHNvdXJjZS5kaXNhYmxlUG9zdEVmZmVjdHNMYXllcjtcbiAgICAgICAgdGhpcy5sYXllcnMgPSBzb3VyY2UubGF5ZXJzO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gc291cmNlLnByaW9yaXR5O1xuICAgICAgICB0aGlzLnJlbmRlclRhcmdldCA9IHNvdXJjZS5yZW5kZXJUYXJnZXQ7XG4gICAgICAgIHRoaXMucmVjdCA9IHNvdXJjZS5yZWN0O1xuICAgICAgICB0aGlzLmFwZXJ0dXJlID0gc291cmNlLmFwZXJ0dXJlO1xuICAgICAgICB0aGlzLnNlbnNpdGl2aXR5ID0gc291cmNlLnNlbnNpdGl2aXR5O1xuICAgICAgICB0aGlzLnNodXR0ZXIgPSBzb3VyY2Uuc2h1dHRlcjtcbiAgICB9XG59XG5cbi8vIGZvciBjb21tb24gcHJvcGVydGllcywgY3JlYXRlIGdldHRlcnMgYW5kIHNldHRlcnMgd2hpY2ggdXNlIHRoaXMuX2NhbWVyYSBhcyBhIHN0b3JhZ2UgZm9yIHRoZWlyIHZhbHVlc1xucHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgIGNvbnN0IG5hbWUgPSBwcm9wZXJ0eS5uYW1lO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcblxuICAgIC8vIGdldHRlclxuICAgIG9wdGlvbnMuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FtZXJhW25hbWVdO1xuICAgIH07XG5cbiAgICAvLyBzZXR0ZXJcbiAgICBpZiAoIXByb3BlcnR5LnJlYWRvbmx5KSB7XG4gICAgICAgIG9wdGlvbnMuc2V0ID0gZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYW1lcmFbbmFtZV0gPSBuZXdWYWx1ZTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FtZXJhQ29tcG9uZW50LnByb3RvdHlwZSwgbmFtZSwgb3B0aW9ucyk7XG59KTtcblxuZXhwb3J0IHsgQ2FtZXJhQ29tcG9uZW50IH07XG4iXSwibmFtZXMiOlsicHJvcGVydGllcyIsIm5hbWUiLCJyZWFkb25seSIsIkNhbWVyYUNvbXBvbmVudCIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwic3lzdGVtIiwiZW50aXR5Iiwib25Qb3N0cHJvY2Vzc2luZyIsIm9uUHJlUmVuZGVyIiwib25Qb3N0UmVuZGVyIiwiX3JlbmRlclNjZW5lRGVwdGhNYXAiLCJfcmVuZGVyU2NlbmVDb2xvck1hcCIsIl9jYW1lcmEiLCJDYW1lcmEiLCJub2RlIiwiX3ByaW9yaXR5IiwiX2Rpc2FibGVQb3N0RWZmZWN0c0xheWVyIiwiTEFZRVJJRF9VSSIsIl9wb3N0RWZmZWN0cyIsIlBvc3RFZmZlY3RRdWV1ZSIsImFwcCIsIl9zY2VuZURlcHRoTWFwUmVxdWVzdGVkIiwiX3NjZW5lQ29sb3JNYXBSZXF1ZXN0ZWQiLCJjYW1lcmEiLCJjbGVhckNvbG9yQnVmZmVyIiwidmFsdWUiLCJkaXJ0eUxheWVyQ29tcG9zaXRpb25DYW1lcmFzIiwiY2xlYXJEZXB0aEJ1ZmZlciIsImNsZWFyU3RlbmNpbEJ1ZmZlciIsImRpc2FibGVQb3N0RWZmZWN0c0xheWVyIiwibGF5ZXIiLCJfZW5hYmxlRGVwdGhMYXllciIsImhhc0RlcHRoTGF5ZXIiLCJsYXllcnMiLCJmaW5kIiwibGF5ZXJJZCIsIkxBWUVSSURfREVQVEgiLCJkZXB0aExheWVyIiwic2NlbmUiLCJnZXRMYXllckJ5SWQiLCJpbmNyZW1lbnRDb3VudGVyIiwiZGVjcmVtZW50Q291bnRlciIsInJlcXVlc3RTY2VuZUNvbG9yTWFwIiwiZW5hYmxlZCIsIkRlYnVnIiwiYXNzZXJ0Iiwib2siLCJ3YXJuT25jZSIsInJlbmRlclNjZW5lQ29sb3JNYXAiLCJyZXF1ZXN0U2NlbmVEZXB0aE1hcCIsInJlbmRlclNjZW5lRGVwdGhNYXAiLCJmcnVzdHVtIiwibmV3VmFsdWUiLCJpIiwibGVuZ3RoIiwicmVtb3ZlQ2FtZXJhIiwiYWRkQ2FtZXJhIiwibGF5ZXJzU2V0IiwicG9zdEVmZmVjdHNFbmFibGVkIiwicG9zdEVmZmVjdHMiLCJwcmlvcml0eSIsInByb2plY3Rpb25NYXRyaXgiLCJhcGVydHVyZSIsInNlbnNpdGl2aXR5Iiwic2h1dHRlciIsInJlY3QiLCJmaXJlIiwicmVuZGVyVGFyZ2V0Iiwidmlld01hdHJpeCIsImxheWVyQ29tcCIsIl9kaXJ0eUNhbWVyYXMiLCJzY3JlZW5Ub1dvcmxkIiwic2NyZWVueCIsInNjcmVlbnkiLCJjYW1lcmF6Iiwid29ybGRDb29yZCIsImRldmljZSIsImdyYXBoaWNzRGV2aWNlIiwidyIsImNsaWVudFJlY3QiLCJ3aWR0aCIsImgiLCJoZWlnaHQiLCJ3b3JsZFRvU2NyZWVuIiwic2NyZWVuQ29vcmQiLCJvbkFwcFByZXJlbmRlciIsIl92aWV3TWF0RGlydHkiLCJfdmlld1Byb2pNYXREaXJ0eSIsImFkZENhbWVyYVRvTGF5ZXJzIiwicmVtb3ZlQ2FtZXJhRnJvbUxheWVycyIsIm9uTGF5ZXJzQ2hhbmdlZCIsIm9sZENvbXAiLCJuZXdDb21wIiwib2ZmIiwib25MYXllckFkZGVkIiwib25MYXllclJlbW92ZWQiLCJvbiIsImluZGV4IiwiaW5kZXhPZiIsImlkIiwib25FbmFibGUiLCJlbmFibGUiLCJvbkRpc2FibGUiLCJkaXNhYmxlIiwib25SZW1vdmUiLCJjYWxjdWxhdGVBc3BlY3RSYXRpbyIsInJ0IiwieiIsImZyYW1lVXBkYXRlIiwiYXNwZWN0UmF0aW9Nb2RlIiwiQVNQRUNUX0FVVE8iLCJhc3BlY3RSYXRpbyIsInN0YXJ0WHIiLCJ0eXBlIiwic3BhY2VUeXBlIiwib3B0aW9ucyIsInhyIiwic3RhcnQiLCJlbmRYciIsImNhbGxiYWNrIiwiRXJyb3IiLCJlbmQiLCJjb3B5Iiwic291cmNlIiwiZm9yRWFjaCIsInByb3BlcnR5IiwiZ2V0Iiwic2V0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJwcm90b3R5cGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBb0JBLE1BQU1BLFVBQVUs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
