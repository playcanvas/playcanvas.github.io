import{SEMANTIC_POSITION as e}from"../../../platform/graphics/constants.js";import{shaderChunks as n}from"../chunks/chunks.js";import{ChunkUtils as t}from"../chunk-utils.js";import{gammaCode as o,tonemapCode as i}from"./common.js";import{ShaderUtils as a}from"../../../platform/graphics/shader-utils.js";const s={generateKey:function(e){return"cubemap"===e.type?`skybox-${e.type}-${e.encoding}-${e.useIntensity}-${e.gamma}-${e.toneMapping}-${e.fixSeams}-${e.mip}`:`skybox-${e.type}-${e.encoding}-${e.useIntensity}-${e.gamma}-${e.toneMapping}`},createShaderDefinition:function(s,p){let m="";if("cubemap"===p.type){const e=[128,64,16,8,4,2];m+=p.mip?n.fixCubemapSeamsStretchPS:n.fixCubemapSeamsNonePS,m+=p.useIntensity?n.envMultiplyPS:n.envConstPS,m+=n.decodePS,m+=o(p.gamma),m+=i(p.toneMapping),m+=n.skyboxHDRPS.replace(/\$DECODE/g,t.decodeFunc(p.encoding)).replace(/\$FIXCONST/g,1-1/e[p.mip]+"")}else m+=p.useIntensity?n.envMultiplyPS:n.envConstPS,m+=n.decodePS,m+=o(p.gamma),m+=i(p.toneMapping),m+=n.sphericalPS,m+=n.envAtlasPS,m+=n.skyboxEnvPS.replace(/\$DECODE/g,t.decodeFunc(p.encoding));return a.createDefinition(s,{name:"SkyboxShader",attributes:{aPosition:e},vertexCode:n.skyboxVS,fragmentCode:m})}};export{s as skybox};
