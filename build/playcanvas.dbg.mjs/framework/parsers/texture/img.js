/**
 * @license
 * PlayCanvas Engine v1.62.0 revision 818511d2b (DEBUG PROFILER)
 * Copyright 2011-2023 PlayCanvas Ltd. All rights reserved.
 */
import { path } from '../../../core/path.js';
import { TEXHINT_ASSET, PIXELFORMAT_RGB8, PIXELFORMAT_RGBA8 } from '../../../platform/graphics/constants.js';
import { Texture } from '../../../platform/graphics/texture.js';
import { http } from '../../../platform/net/http.js';
import { ABSOLUTE_URL } from '../../asset/constants.js';

/** @typedef {import('../../handlers/texture.js').TextureParser} TextureParser */

/**
 * Parser for browser-supported image formats.
 *
 * @implements {TextureParser}
 * @ignore
 */
class ImgParser {
  constructor(registry, device) {
    // by default don't try cross-origin, because some browsers send different cookies (e.g. safari) if this is set.
    this.crossOrigin = registry.prefix ? 'anonymous' : null;
    this.maxRetries = 0;
    this.device = device;
  }
  load(url, callback, asset) {
    var _asset$file;
    const hasContents = !!(asset != null && (_asset$file = asset.file) != null && _asset$file.contents);
    if (hasContents) {
      // ImageBitmap interface can load iage
      if (this.device.supportsImageBitmap) {
        this._loadImageBitmapFromData(asset.file.contents, callback);
        return;
      }
      url = {
        load: URL.createObjectURL(new Blob([asset.file.contents])),
        original: url.original
      };
    }
    const handler = (err, result) => {
      if (hasContents) {
        URL.revokeObjectURL(url.load);
      }
      callback(err, result);
    };
    let crossOrigin;
    if (asset && asset.options && asset.options.hasOwnProperty('crossOrigin')) {
      crossOrigin = asset.options.crossOrigin;
    } else if (ABSOLUTE_URL.test(url.load)) {
      crossOrigin = this.crossOrigin;
    }
    if (this.device.supportsImageBitmap) {
      this._loadImageBitmap(url.load, url.original, crossOrigin, handler);
    } else {
      this._loadImage(url.load, url.original, crossOrigin, handler);
    }
  }
  open(url, data, device) {
    const ext = path.getExtension(url).toLowerCase();
    const format = ext === '.jpg' || ext === '.jpeg' ? PIXELFORMAT_RGB8 : PIXELFORMAT_RGBA8;
    const texture = new Texture(device, {
      name: url,
      profilerHint: TEXHINT_ASSET,
      width: data.width,
      height: data.height,
      format: format
    });
    texture.setSource(data);
    return texture;
  }
  _loadImage(url, originalUrl, crossOrigin, callback) {
    const image = new Image();
    if (crossOrigin) {
      image.crossOrigin = crossOrigin;
    }
    let retries = 0;
    const maxRetries = this.maxRetries;
    let retryTimeout;

    // Call success callback after opening Texture
    image.onload = function () {
      callback(null, image);
    };
    image.onerror = function () {
      // Retry a few times before failing
      if (retryTimeout) return;
      if (maxRetries > 0 && ++retries <= maxRetries) {
        const retryDelay = Math.pow(2, retries) * 100;
        console.log(`Error loading Texture from: '${originalUrl}' - Retrying in ${retryDelay}ms...`);
        const idx = url.indexOf('?');
        const separator = idx >= 0 ? '&' : '?';
        retryTimeout = setTimeout(function () {
          // we need to add a cache busting argument if we are trying to re-load an image element
          // with the same URL
          image.src = url + separator + 'retry=' + Date.now();
          retryTimeout = null;
        }, retryDelay);
      } else {
        // Call error callback with details.
        callback(`Error loading Texture from: '${originalUrl}'`);
      }
    };
    image.src = url;
  }
  _loadImageBitmap(url, originalUrl, crossOrigin, callback) {
    const options = {
      cache: true,
      responseType: 'blob',
      retry: this.maxRetries > 0,
      maxRetries: this.maxRetries
    };
    http.get(url, options, function (err, blob) {
      if (err) {
        callback(err);
      } else {
        createImageBitmap(blob, {
          premultiplyAlpha: 'none'
        }).then(imageBitmap => callback(null, imageBitmap)).catch(e => callback(e));
      }
    });
  }
  _loadImageBitmapFromData(data, callback) {
    createImageBitmap(new Blob([data]), {
      premultiplyAlpha: 'none'
    }).then(imageBitmap => callback(null, imageBitmap)).catch(e => callback(e));
  }
}

export { ImgParser };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1nLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL3BhcnNlcnMvdGV4dHVyZS9pbWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGF0aCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvcGF0aC5qcyc7XG5cbmltcG9ydCB7XG4gICAgUElYRUxGT1JNQVRfUkdCOCwgUElYRUxGT1JNQVRfUkdCQTgsIFRFWEhJTlRfQVNTRVRcbn0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IFRleHR1cmUgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy90ZXh0dXJlLmpzJztcbmltcG9ydCB7IGh0dHAgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9uZXQvaHR0cC5qcyc7XG5cbmltcG9ydCB7IEFCU09MVVRFX1VSTCB9IGZyb20gJy4uLy4uL2Fzc2V0L2NvbnN0YW50cy5qcyc7XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi9oYW5kbGVycy90ZXh0dXJlLmpzJykuVGV4dHVyZVBhcnNlcn0gVGV4dHVyZVBhcnNlciAqL1xuXG4vKipcbiAqIFBhcnNlciBmb3IgYnJvd3Nlci1zdXBwb3J0ZWQgaW1hZ2UgZm9ybWF0cy5cbiAqXG4gKiBAaW1wbGVtZW50cyB7VGV4dHVyZVBhcnNlcn1cbiAqIEBpZ25vcmVcbiAqL1xuY2xhc3MgSW1nUGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcihyZWdpc3RyeSwgZGV2aWNlKSB7XG4gICAgICAgIC8vIGJ5IGRlZmF1bHQgZG9uJ3QgdHJ5IGNyb3NzLW9yaWdpbiwgYmVjYXVzZSBzb21lIGJyb3dzZXJzIHNlbmQgZGlmZmVyZW50IGNvb2tpZXMgKGUuZy4gc2FmYXJpKSBpZiB0aGlzIGlzIHNldC5cbiAgICAgICAgdGhpcy5jcm9zc09yaWdpbiA9IHJlZ2lzdHJ5LnByZWZpeCA/ICdhbm9ueW1vdXMnIDogbnVsbDtcbiAgICAgICAgdGhpcy5tYXhSZXRyaWVzID0gMDtcbiAgICAgICAgdGhpcy5kZXZpY2UgPSBkZXZpY2U7XG4gICAgfVxuXG4gICAgbG9hZCh1cmwsIGNhbGxiYWNrLCBhc3NldCkge1xuICAgICAgICBjb25zdCBoYXNDb250ZW50cyA9ICEhYXNzZXQ/LmZpbGU/LmNvbnRlbnRzO1xuXG4gICAgICAgIGlmIChoYXNDb250ZW50cykge1xuICAgICAgICAgICAgLy8gSW1hZ2VCaXRtYXAgaW50ZXJmYWNlIGNhbiBsb2FkIGlhZ2VcbiAgICAgICAgICAgIGlmICh0aGlzLmRldmljZS5zdXBwb3J0c0ltYWdlQml0bWFwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9hZEltYWdlQml0bWFwRnJvbURhdGEoYXNzZXQuZmlsZS5jb250ZW50cywgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVybCA9IHtcbiAgICAgICAgICAgICAgICBsb2FkOiBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFthc3NldC5maWxlLmNvbnRlbnRzXSkpLFxuICAgICAgICAgICAgICAgIG9yaWdpbmFsOiB1cmwub3JpZ2luYWxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBoYW5kbGVyID0gKGVyciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZiAoaGFzQ29udGVudHMpIHtcbiAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybC5sb2FkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKGVyciwgcmVzdWx0KTtcbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgY3Jvc3NPcmlnaW47XG4gICAgICAgIGlmIChhc3NldCAmJiBhc3NldC5vcHRpb25zICYmIGFzc2V0Lm9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2Nyb3NzT3JpZ2luJykpIHtcbiAgICAgICAgICAgIGNyb3NzT3JpZ2luID0gYXNzZXQub3B0aW9ucy5jcm9zc09yaWdpbjtcbiAgICAgICAgfSBlbHNlIGlmIChBQlNPTFVURV9VUkwudGVzdCh1cmwubG9hZCkpIHtcbiAgICAgICAgICAgIGNyb3NzT3JpZ2luID0gdGhpcy5jcm9zc09yaWdpbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRldmljZS5zdXBwb3J0c0ltYWdlQml0bWFwKSB7XG4gICAgICAgICAgICB0aGlzLl9sb2FkSW1hZ2VCaXRtYXAodXJsLmxvYWQsIHVybC5vcmlnaW5hbCwgY3Jvc3NPcmlnaW4sIGhhbmRsZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbG9hZEltYWdlKHVybC5sb2FkLCB1cmwub3JpZ2luYWwsIGNyb3NzT3JpZ2luLCBoYW5kbGVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9wZW4odXJsLCBkYXRhLCBkZXZpY2UpIHtcbiAgICAgICAgY29uc3QgZXh0ID0gcGF0aC5nZXRFeHRlbnNpb24odXJsKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBmb3JtYXQgPSAoZXh0ID09PSAnLmpwZycgfHwgZXh0ID09PSAnLmpwZWcnKSA/IFBJWEVMRk9STUFUX1JHQjggOiBQSVhFTEZPUk1BVF9SR0JBODtcbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IG5ldyBUZXh0dXJlKGRldmljZSwge1xuICAgICAgICAgICAgbmFtZTogdXJsLFxuICAgICAgICAgICAgLy8gI2lmIF9QUk9GSUxFUlxuICAgICAgICAgICAgcHJvZmlsZXJIaW50OiBURVhISU5UX0FTU0VULFxuICAgICAgICAgICAgLy8gI2VuZGlmXG4gICAgICAgICAgICB3aWR0aDogZGF0YS53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogZGF0YS5oZWlnaHQsXG4gICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdFxuICAgICAgICB9KTtcbiAgICAgICAgdGV4dHVyZS5zZXRTb3VyY2UoZGF0YSk7XG4gICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIH1cblxuICAgIF9sb2FkSW1hZ2UodXJsLCBvcmlnaW5hbFVybCwgY3Jvc3NPcmlnaW4sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGlmIChjcm9zc09yaWdpbikge1xuICAgICAgICAgICAgaW1hZ2UuY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXRyaWVzID0gMDtcbiAgICAgICAgY29uc3QgbWF4UmV0cmllcyA9IHRoaXMubWF4UmV0cmllcztcbiAgICAgICAgbGV0IHJldHJ5VGltZW91dDtcblxuICAgICAgICAvLyBDYWxsIHN1Y2Nlc3MgY2FsbGJhY2sgYWZ0ZXIgb3BlbmluZyBUZXh0dXJlXG4gICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGltYWdlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gUmV0cnkgYSBmZXcgdGltZXMgYmVmb3JlIGZhaWxpbmdcbiAgICAgICAgICAgIGlmIChyZXRyeVRpbWVvdXQpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKG1heFJldHJpZXMgPiAwICYmICsrcmV0cmllcyA8PSBtYXhSZXRyaWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmV0cnlEZWxheSA9IE1hdGgucG93KDIsIHJldHJpZXMpICogMTAwO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBsb2FkaW5nIFRleHR1cmUgZnJvbTogJyR7b3JpZ2luYWxVcmx9JyAtIFJldHJ5aW5nIGluICR7cmV0cnlEZWxheX1tcy4uLmApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgaWR4ID0gdXJsLmluZGV4T2YoJz8nKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXBhcmF0b3IgPSBpZHggPj0gMCA/ICcmJyA6ICc/JztcblxuICAgICAgICAgICAgICAgIHJldHJ5VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGFkZCBhIGNhY2hlIGJ1c3RpbmcgYXJndW1lbnQgaWYgd2UgYXJlIHRyeWluZyB0byByZS1sb2FkIGFuIGltYWdlIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCB0aGUgc2FtZSBVUkxcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc3JjID0gdXJsICsgc2VwYXJhdG9yICsgJ3JldHJ5PScgKyBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICByZXRyeVRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH0sIHJldHJ5RGVsYXkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBDYWxsIGVycm9yIGNhbGxiYWNrIHdpdGggZGV0YWlscy5cbiAgICAgICAgICAgICAgICBjYWxsYmFjayhgRXJyb3IgbG9hZGluZyBUZXh0dXJlIGZyb206ICcke29yaWdpbmFsVXJsfSdgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpbWFnZS5zcmMgPSB1cmw7XG4gICAgfVxuXG4gICAgX2xvYWRJbWFnZUJpdG1hcCh1cmwsIG9yaWdpbmFsVXJsLCBjcm9zc09yaWdpbiwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNhY2hlOiB0cnVlLFxuICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsXG4gICAgICAgICAgICByZXRyeTogdGhpcy5tYXhSZXRyaWVzID4gMCxcbiAgICAgICAgICAgIG1heFJldHJpZXM6IHRoaXMubWF4UmV0cmllc1xuICAgICAgICB9O1xuICAgICAgICBodHRwLmdldCh1cmwsIG9wdGlvbnMsIGZ1bmN0aW9uIChlcnIsIGJsb2IpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVJbWFnZUJpdG1hcChibG9iLCB7XG4gICAgICAgICAgICAgICAgICAgIHByZW11bHRpcGx5QWxwaGE6ICdub25lJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGltYWdlQml0bWFwID0+IGNhbGxiYWNrKG51bGwsIGltYWdlQml0bWFwKSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gY2FsbGJhY2soZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfbG9hZEltYWdlQml0bWFwRnJvbURhdGEoZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgICAgY3JlYXRlSW1hZ2VCaXRtYXAobmV3IEJsb2IoW2RhdGFdKSwgeyBwcmVtdWx0aXBseUFscGhhOiAnbm9uZScgfSlcbiAgICAgICAgICAgIC50aGVuKGltYWdlQml0bWFwID0+IGNhbGxiYWNrKG51bGwsIGltYWdlQml0bWFwKSlcbiAgICAgICAgICAgIC5jYXRjaChlID0+IGNhbGxiYWNrKGUpKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IEltZ1BhcnNlciB9O1xuIl0sIm5hbWVzIjpbIkltZ1BhcnNlciIsImNvbnN0cnVjdG9yIiwicmVnaXN0cnkiLCJkZXZpY2UiLCJjcm9zc09yaWdpbiIsInByZWZpeCIsIm1heFJldHJpZXMiLCJsb2FkIiwidXJsIiwiY2FsbGJhY2siLCJhc3NldCIsImhhc0NvbnRlbnRzIiwiZmlsZSIsImNvbnRlbnRzIiwic3VwcG9ydHNJbWFnZUJpdG1hcCIsIl9sb2FkSW1hZ2VCaXRtYXBGcm9tRGF0YSIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIkJsb2IiLCJvcmlnaW5hbCIsImhhbmRsZXIiLCJlcnIiLCJyZXN1bHQiLCJyZXZva2VPYmplY3RVUkwiLCJvcHRpb25zIiwiaGFzT3duUHJvcGVydHkiLCJBQlNPTFVURV9VUkwiLCJ0ZXN0IiwiX2xvYWRJbWFnZUJpdG1hcCIsIl9sb2FkSW1hZ2UiLCJvcGVuIiwiZGF0YSIsImV4dCIsInBhdGgiLCJnZXRFeHRlbnNpb24iLCJ0b0xvd2VyQ2FzZSIsImZvcm1hdCIsIlBJWEVMRk9STUFUX1JHQjgiLCJQSVhFTEZPUk1BVF9SR0JBOCIsInRleHR1cmUiLCJUZXh0dXJlIiwibmFtZSIsInByb2ZpbGVySGludCIsIlRFWEhJTlRfQVNTRVQiLCJ3aWR0aCIsImhlaWdodCIsInNldFNvdXJjZSIsIm9yaWdpbmFsVXJsIiwiaW1hZ2UiLCJJbWFnZSIsInJldHJpZXMiLCJyZXRyeVRpbWVvdXQiLCJvbmxvYWQiLCJvbmVycm9yIiwicmV0cnlEZWxheSIsIk1hdGgiLCJwb3ciLCJjb25zb2xlIiwibG9nIiwiaWR4IiwiaW5kZXhPZiIsInNlcGFyYXRvciIsInNldFRpbWVvdXQiLCJzcmMiLCJEYXRlIiwibm93IiwiY2FjaGUiLCJyZXNwb25zZVR5cGUiLCJyZXRyeSIsImh0dHAiLCJnZXQiLCJibG9iIiwiY3JlYXRlSW1hZ2VCaXRtYXAiLCJwcmVtdWx0aXBseUFscGhhIiwidGhlbiIsImltYWdlQml0bWFwIiwiY2F0Y2giLCJlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQVVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1BLFNBQVMsQ0FBQztBQUNaQyxFQUFBQSxXQUFXLENBQUNDLFFBQVEsRUFBRUMsTUFBTSxFQUFFO0FBQzFCO0lBQ0EsSUFBSSxDQUFDQyxXQUFXLEdBQUdGLFFBQVEsQ0FBQ0csTUFBTSxHQUFHLFdBQVcsR0FBRyxJQUFJLENBQUE7SUFDdkQsSUFBSSxDQUFDQyxVQUFVLEdBQUcsQ0FBQyxDQUFBO0lBQ25CLElBQUksQ0FBQ0gsTUFBTSxHQUFHQSxNQUFNLENBQUE7QUFDeEIsR0FBQTtBQUVBSSxFQUFBQSxJQUFJLENBQUNDLEdBQUcsRUFBRUMsUUFBUSxFQUFFQyxLQUFLLEVBQUU7QUFBQSxJ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
