/**
 * @license
 * PlayCanvas Engine v1.58.0-preview revision 1fec26519 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { path } from '../../core/path.js';
import { GlbParser } from '../parsers/glb-parser.js';

class ContainerResource {
  instantiateModelEntity(options) {
    return null;
  }

  instantiateRenderEntity(options) {
    return null;
  }

  getMaterialVariants() {
    return null;
  }

  applyMaterialVariant(entity, name) {}

  applyMaterialVariantInstances(instances, name) {}
}

class ContainerHandler {

  constructor(app) {
    this.handlerType = "container";
    this.glbParser = new GlbParser(app.graphicsDevice, app.assets, 0);
    this.parsers = {};
  }
  set maxRetries(value) {
    this.glbParser.maxRetries = value;
    for (const parser in this.parsers) {
      if (this.parsers.hasOwnProperty(parser)) {
        this.parsers[parser].maxRetries = value;
      }
    }
  }
  get maxRetries() {
    return this.glbParser.maxRetries;
  }

  _getUrlWithoutParams(url) {
    return url.indexOf('?') >= 0 ? url.split('?')[0] : url;
  }

  _getParser(url) {
    const ext = url ? path.getExtension(this._getUrlWithoutParams(url)).toLowerCase().replace('.', '') : null;
    return this.parsers[ext] || this.glbParser;
  }

  load(url, callback, asset) {
    if (typeof url === 'string') {
      url = {
        load: url,
        original: url
      };
    }
    this._getParser(url.original).load(url, callback, asset);
  }

  open(url, data, asset) {
    return this._getParser(url).open(url, data, asset);
  }

  patch(asset, assets) {}
}

export { ContainerHandler, ContainerResource };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGFpbmVyLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2hhbmRsZXJzL2NvbnRhaW5lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXRoIH0gZnJvbSAnLi4vLi4vY29yZS9wYXRoLmpzJztcbmltcG9ydCB7IEdsYlBhcnNlciB9IGZyb20gJy4uL3BhcnNlcnMvZ2xiLXBhcnNlci5qcyc7XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi9mcmFtZXdvcmsvZW50aXR5LmpzJykuRW50aXR5fSBFbnRpdHkgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi9zY2VuZS9tZXNoLWluc3RhbmNlJykuTWVzaEluc3RhbmNlfSBNZXNoSW5zdGFuY2UgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi9mcmFtZXdvcmsvYXBwLWJhc2UuanMnKS5BcHBCYXNlfSBBcHBCYXNlICovXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9oYW5kbGVyLmpzJykuUmVzb3VyY2VIYW5kbGVyfSBSZXNvdXJjZUhhbmRsZXIgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL2hhbmRsZXIuanMnKS5SZXNvdXJjZUhhbmRsZXJDYWxsYmFja30gUmVzb3VyY2VIYW5kbGVyQ2FsbGJhY2sgKi9cblxuLyoqXG4gKiBAaW50ZXJmYWNlXG4gKiBAbmFtZSBDb250YWluZXJSZXNvdXJjZVxuICogQGRlc2NyaXB0aW9uIENvbnRhaW5lciBmb3IgYSBsaXN0IG9mIGFuaW1hdGlvbnMsIHRleHR1cmVzLCBtYXRlcmlhbHMsIHJlbmRlcnMgYW5kIGEgbW9kZWwuXG4gKi9cbmNsYXNzIENvbnRhaW5lclJlc291cmNlIHtcbiAgICAvKipcbiAgICAgKiBJbnN0YW50aWF0ZXMgYW4gZW50aXR5IHdpdGggYSBtb2RlbCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gVGhlIGluaXRpYWxpemF0aW9uIGRhdGEgZm9yIHRoZSBtb2RlbCBjb21wb25lbnQgdHlwZVxuICAgICAqIHtAbGluayBNb2RlbENvbXBvbmVudH0uXG4gICAgICogQHJldHVybnMge0VudGl0eX0gQSBzaW5nbGUgZW50aXR5IHdpdGggYSBtb2RlbCBjb21wb25lbnQuIE1vZGVsIGNvbXBvbmVudCBpbnRlcm5hbGx5XG4gICAgICogY29udGFpbnMgYSBoaWVyYXJjaHkgYmFzZWQgb24ge0BsaW5rIEdyYXBoTm9kZX0uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyBsb2FkIGEgZ2xiIGZpbGUgYW5kIGluc3RhbnRpYXRlIGFuIGVudGl0eSB3aXRoIGEgbW9kZWwgY29tcG9uZW50IGJhc2VkIG9uIGl0XG4gICAgICogYXBwLmFzc2V0cy5sb2FkRnJvbVVybChcInN0YXR1ZS5nbGJcIiwgXCJjb250YWluZXJcIiwgZnVuY3Rpb24gKGVyciwgYXNzZXQpIHtcbiAgICAgKiAgICAgdmFyIGVudGl0eSA9IGFzc2V0LnJlc291cmNlLmluc3RhbnRpYXRlTW9kZWxFbnRpdHkoe1xuICAgICAqICAgICAgICAgY2FzdFNoYWRvd3M6IHRydWVcbiAgICAgKiAgICAgfSk7XG4gICAgICogICAgIGFwcC5yb290LmFkZENoaWxkKGVudGl0eSk7XG4gICAgICogfSk7XG4gICAgICovXG4gICAgaW5zdGFudGlhdGVNb2RlbEVudGl0eShvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluc3RhbnRpYXRlcyBhbiBlbnRpdHkgd2l0aCBhIHJlbmRlciBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gVGhlIGluaXRpYWxpemF0aW9uIGRhdGEgZm9yIHRoZSByZW5kZXIgY29tcG9uZW50IHR5cGVcbiAgICAgKiB7QGxpbmsgUmVuZGVyQ29tcG9uZW50fS5cbiAgICAgKiBAcmV0dXJucyB7RW50aXR5fSBBIGhpZXJhcmNoeSBvZiBlbnRpdGllcyB3aXRoIHJlbmRlciBjb21wb25lbnRzIG9uIGVudGl0aWVzIGNvbnRhaW5pbmdcbiAgICAgKiByZW5kZXJhYmxlIGdlb21ldHJ5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICogLy8gbG9hZCBhIGdsYiBmaWxlIGFuZCBpbnN0YW50aWF0ZSBhbiBlbnRpdHkgd2l0aCBhIHJlbmRlciBjb21wb25lbnQgYmFzZWQgb24gaXRcbiAgICAgKiBhcHAuYXNzZXRzLmxvYWRGcm9tVXJsKFwic3RhdHVlLmdsYlwiLCBcImNvbnRhaW5lclwiLCBmdW5jdGlvbiAoZXJyLCBhc3NldCkge1xuICAgICAqICAgICB2YXIgZW50aXR5ID0gYXNzZXQucmVzb3VyY2UuaW5zdGFudGlhdGVSZW5kZXJFbnRpdHkoe1xuICAgICAqICAgICAgICAgY2FzdFNoYWRvd3M6IHRydWVcbiAgICAgKiAgICAgfSk7XG4gICAgICogICAgIGFwcC5yb290LmFkZENoaWxkKGVudGl0eSk7XG4gICAgICpcbiAgICAgKiAgICAgLy8gZmluZCBhbGwgcmVuZGVyIGNvbXBvbmVudHMgY29udGFpbmluZyBtZXNoIGluc3RhbmNlcywgYW5kIGNoYW5nZSBibGVuZCBtb2RlIG9uIHRoZWlyIG1hdGVyaWFsc1xuICAgICAqICAgICB2YXIgcmVuZGVycyA9IGVudGl0eS5maW5kQ29tcG9uZW50cyhcInJlbmRlclwiKTtcbiAgICAgKiAgICAgcmVuZGVycy5mb3JFYWNoKGZ1bmN0aW9uIChyZW5kZXIpIHtcbiAgICAgKiAgICAgICAgIHJlbmRlci5tZXNoSW5zdGFuY2VzLmZvckVhY2goZnVuY3Rpb24gKG1lc2hJbnN0YW5jZSkge1xuICAgICAqICAgICAgICAgICAgIG1lc2hJbnN0YW5jZS5tYXRlcmlhbC5ibGVuZFR5cGUgPSBwYy5CTEVORF9NVUxUSVBMSUNBVElWRTtcbiAgICAgKiAgICAgICAgICAgICBtZXNoSW5zdGFuY2UubWF0ZXJpYWwudXBkYXRlKCk7XG4gICAgICogICAgICAgICB9KTtcbiAgICAgKiAgICAgfSk7XG4gICAgICogfSk7XG4gICAgICovXG4gICAgaW5zdGFudGlhdGVSZW5kZXJFbnRpdHkob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBRdWVyaWVzIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBtYXRlcmlhbCB2YXJpYW50cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmdbXX0gQW4gYXJyYXkgb2YgdmFyaWFudCBuYW1lcy5cbiAgICAgKi9cbiAgICBnZXRNYXRlcmlhbFZhcmlhbnRzKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGEgbWF0ZXJpYWwgdmFyaWFudCB0byBhbiBlbnRpdHkgaGllcmFyY2h5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eSAtIFRoZSBlbnRpdHkgcm9vdCB0byB3aGljaCBtYXRlcmlhbCB2YXJpYW50cyB3aWxsIGJlIGFwcGxpZWRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW25hbWVdIC0gVGhlIG5hbWUgb2YgdGhlIHZhcmlhbnQsIGFzIHF1ZXJpZWQgZnJvbSBnZXRNYXRlcmlhbFZhcmlhbnRzLFxuICAgICAqIGlmIG51bGwgdGhlIHZhcmlhbnQgd2lsbCBiZSByZXNldCB0byB0aGUgZGVmYXVsdFxuICAgICAqIEBleGFtcGxlXG4gICAgICogLy8gbG9hZCBhIGdsYiBmaWxlIGFuZCBpbnN0YW50aWF0ZSBhbiBlbnRpdHkgd2l0aCBhIHJlbmRlciBjb21wb25lbnQgYmFzZWQgb24gaXRcbiAgICAgKiBhcHAuYXNzZXRzLmxvYWRGcm9tVXJsKFwic3RhdHVlLmdsYlwiLCBcImNvbnRhaW5lclwiLCBmdW5jdGlvbiAoZXJyLCBhc3NldCkge1xuICAgICAqICAgICB2YXIgZW50aXR5ID0gYXNzZXQucmVzb3VyY2UuaW5zdGFudGlhdGVSZW5kZXJFbnRpdHkoe1xuICAgICAqICAgICAgICAgY2FzdFNoYWRvd3M6IHRydWVcbiAgICAgKiAgICAgfSk7XG4gICAgICogICAgIGFwcC5yb290LmFkZENoaWxkKGVudGl0eSk7XG4gICAgICogICAgIHZhciBtYXRlcmlhbFZhcmlhbnRzID0gYXNzZXQucmVzb3VyY2UuZ2V0TWF0ZXJpYWxWYXJpYW50cygpO1xuICAgICAqICAgICBhc3NldC5yZXNvdXJjZS5hcHBseU1hdGVyaWFsVmFyaWFudChlbnRpdHksIG1hdGVyaWFsVmFyaWFudHNbMF0pO1xuICAgICAqL1xuICAgIGFwcGx5TWF0ZXJpYWxWYXJpYW50KGVudGl0eSwgbmFtZSkge31cblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYSBtYXRlcmlhbCB2YXJpYW50IHRvIGEgc2V0IG9mIG1lc2ggaW5zdGFuY2VzLiBDb21wYXJlZCB0byB0aGUgYXBwbHlNYXRlcmlhbFZhcmlhbnQsXG4gICAgICogdGhpcyBtZXRob2QgYWxsb3dzIGZvciBzZXR0aW5nIHRoZSB2YXJpYW50IG9uIGEgc3BlY2lmaWMgc2V0IG9mIG1lc2ggaW5zdGFuY2VzIGluc3RlYWQgb2YgdGhlXG4gICAgICogd2hvbGUgZW50aXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtNZXNoSW5zdGFuY2VbXX0gaW5zdGFuY2VzIC0gQW4gYXJyYXkgb2YgbWVzaCBpbnN0YW5jZXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW25hbWVdIC0gVGhlIHRoZSBuYW1lIG9mIHRoZSB2YXJpYW50LCBhcyBxdWVyZWQgZnJvbSBnZXRNYXRlcmlhbFZhcmlhbnRzLFxuICAgICAqIGlmIG51bGwgdGhlIHZhcmlhbnQgd2lsbCBiZSByZXNldCB0byB0aGUgZGVmYXVsdFxuICAgICAqIEBleGFtcGxlXG4gICAgICogLy8gbG9hZCBhIGdsYiBmaWxlIGFuZCBpbnN0YW50aWF0ZSBhbiBlbnRpdHkgd2l0aCBhIHJlbmRlciBjb21wb25lbnQgYmFzZWQgb24gaXRcbiAgICAgKiBhcHAuYXNzZXRzLmxvYWRGcm9tVXJsKFwic3RhdHVlLmdsYlwiLCBcImNvbnRhaW5lclwiLCBmdW5jdGlvbiAoZXJyLCBhc3NldCkge1xuICAgICAqICAgICB2YXIgZW50aXR5ID0gYXNzZXQucmVzb3VyY2UuaW5zdGFudGlhdGVSZW5kZXJFbnRpdHkoe1xuICAgICAqICAgICAgICAgY2FzdFNoYWRvd3M6IHRydWVcbiAgICAgKiAgICAgfSk7XG4gICAgICogICAgIGFwcC5yb290LmFkZENoaWxkKGVudGl0eSk7XG4gICAgICogICAgIHZhciBtYXRlcmlhbFZhcmlhbnRzID0gYXNzZXQucmVzb3VyY2UuZ2V0TWF0ZXJpYWxWYXJpYW50cygpO1xuICAgICAqICAgICB2YXIgcmVuZGVycyA9IGVudGl0eS5maW5kQ29tcG9uZW50cyhcInJlbmRlclwiKTtcbiAgICAgKiAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW5kZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICogICAgICAgICB2YXIgcmVuZGVyQ29tcG9uZW50ID0gcmVuZGVyc1tpXTtcbiAgICAgKiAgICAgICAgIGFzc2V0LnJlc291cmNlLmFwcGx5TWF0ZXJpYWxWYXJpYW50SW5zdGFuY2VzKHJlbmRlckNvbXBvbmVudC5tZXNoSW5zdGFuY2VzLCBtYXRlcmlhbFZhcmlhbnRzWzBdKTtcbiAgICAgKiAgICAgfVxuICAgICAqL1xuICAgIGFwcGx5TWF0ZXJpYWxWYXJpYW50SW5zdGFuY2VzKGluc3RhbmNlcywgbmFtZSkge31cbn1cblxuLyoqXG4gKiBMb2FkcyBmaWxlcyB0aGF0IGNvbnRhaW4gbXVsdGlwbGUgcmVzb3VyY2VzLiBGb3IgZXhhbXBsZSBnbFRGIGZpbGVzIGNhbiBjb250YWluIHRleHR1cmVzLCBtb2RlbHNcbiAqIGFuZCBhbmltYXRpb25zLlxuICpcbiAqIEZvciBnbFRGIGZpbGVzLCB0aGUgYXNzZXQgb3B0aW9ucyBvYmplY3QgY2FuIGJlIHVzZWQgdG8gcGFzcyBsb2FkIHRpbWUgY2FsbGJhY2tzIGZvciBoYW5kbGluZ1xuICogdGhlIHZhcmlvdXMgcmVzb3VyY2VzIGF0IGRpZmZlcmVudCBzdGFnZXMgb2YgbG9hZGluZy4gVGhlIHRhYmxlIGJlbG93IGxpc3RzIHRoZSByZXNvdXJjZSB0eXBlc1xuICogYW5kIHRoZSBjb3JyZXNwb25kaW5nIHN1cHBvcnRlZCBwcm9jZXNzIGZ1bmN0aW9ucy5cbiAqXG4gKiBgYGBcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8ICByZXNvdXJjZSAgIHwgIHByZXByb2Nlc3MgfCAgIHByb2Nlc3MgICB8cHJvY2Vzc0FzeW5jIHwgcG9zdHByb2Nlc3MgfFxuICogfC0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS0tLXxcbiAqIHwgZ2xvYmFsICAgICAgfCAgICAgIHggICAgICB8ICAgICAgICAgICAgIHwgICAgICAgICAgICAgfCAgICAgIHggICAgICB8XG4gKiB8IG5vZGUgICAgICAgIHwgICAgICB4ICAgICAgfCAgICAgIHggICAgICB8ICAgICAgICAgICAgIHwgICAgICB4ICAgICAgfFxuICogfCBsaWdodCAgICAgICB8ICAgICAgeCAgICAgIHwgICAgICB4ICAgICAgfCAgICAgICAgICAgICB8ICAgICAgeCAgICAgIHxcbiAqIHwgY2FtZXJhICAgICAgfCAgICAgIHggICAgICB8ICAgICAgeCAgICAgIHwgICAgICAgICAgICAgfCAgICAgIHggICAgICB8XG4gKiB8IGFuaW1hdGlvbiAgIHwgICAgICB4ICAgICAgfCAgICAgICAgICAgICB8ICAgICAgICAgICAgIHwgICAgICB4ICAgICAgfFxuICogfCBtYXRlcmlhbCAgICB8ICAgICAgeCAgICAgIHwgICAgICB4ICAgICAgfCAgICAgICAgICAgICB8ICAgICAgeCAgICAgIHxcbiAqIHwgaW1hZ2UgICAgICAgfCAgICAgIHggICAgICB8ICAgICAgICAgICAgIHwgICAgICB4ICAgICAgfCAgICAgIHggICAgICB8XG4gKiB8IHRleHR1cmUgICAgIHwgICAgICB4ICAgICAgfCAgICAgICAgICAgICB8ICAgICAgeCAgICAgIHwgICAgICB4ICAgICAgfFxuICogfCBidWZmZXIgICAgICB8ICAgICAgeCAgICAgIHwgICAgICAgICAgICAgfCAgICAgIHggICAgICB8ICAgICAgeCAgICAgIHxcbiAqIHwgYnVmZmVyVmlldyAgfCAgICAgIHggICAgICB8ICAgICAgICAgICAgIHwgICAgICB4ICAgICAgfCAgICAgIHggICAgICB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogYGBgXG4gKlxuICogQWRkaXRpb25hbCBvcHRpb25zIHRoYXQgY2FuIGJlIHBhc3NlZCBmb3IgZ2xURiBmaWxlczpcbiAqIFtvcHRpb25zLm1vcnBoUHJlc2VydmVEYXRhXSAtIFdoZW4gdHJ1ZSwgdGhlIG1vcnBoIHRhcmdldCBrZWVwcyBpdHMgZGF0YSBwYXNzZWQgdXNpbmcgdGhlIG9wdGlvbnMsXG4gKiBhbGxvd2luZyB0aGUgY2xvbmUgb3BlcmF0aW9uLlxuICpcbiAqIEZvciBleGFtcGxlLCB0byByZWNlaXZlIGEgdGV4dHVyZSBwcmVwcm9jZXNzIGNhbGxiYWNrOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIHZhciBjb250YWluZXJBc3NldCA9IG5ldyBwYy5Bc3NldChmaWxlbmFtZSwgJ2NvbnRhaW5lcicsIHsgdXJsOiB1cmwsIGZpbGVuYW1lOiBmaWxlbmFtZSB9LCBudWxsLCB7XG4gKiAgICAgdGV4dHVyZToge1xuICogICAgICAgICBwcmVwcm9jZXNzKGdsdGZUZXh0dXJlKSB7IGNvbnNvbGUubG9nKFwidGV4dHVyZSBwcmVwcm9jZXNzXCIpOyB9XG4gKiAgICAgfSxcbiAqIH0pO1xuICogYGBgXG4gKlxuICogQGltcGxlbWVudHMge1Jlc291cmNlSGFuZGxlcn1cbiAqL1xuY2xhc3MgQ29udGFpbmVySGFuZGxlciB7XG4gICAgLyoqXG4gICAgICogVHlwZSBvZiB0aGUgcmVzb3VyY2UgdGhlIGhhbmRsZXIgaGFuZGxlcy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgaGFuZGxlclR5cGUgPSBcImNvbnRhaW5lclwiO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IENvbnRhaW5lclJlc291cmNlIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcHBCYXNlfSBhcHAgLSBUaGUgcnVubmluZyB7QGxpbmsgQXBwQmFzZX0uXG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgICAgICB0aGlzLmdsYlBhcnNlciA9IG5ldyBHbGJQYXJzZXIoYXBwLmdyYXBoaWNzRGV2aWNlLCBhcHAuYXNzZXRzLCAwKTtcbiAgICAgICAgdGhpcy5wYXJzZXJzID0geyB9O1xuICAgIH1cblxuICAgIHNldCBtYXhSZXRyaWVzKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZ2xiUGFyc2VyLm1heFJldHJpZXMgPSB2YWx1ZTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJzZXIgaW4gdGhpcy5wYXJzZXJzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJzZXJzLmhhc093blByb3BlcnR5KHBhcnNlcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlcnNbcGFyc2VyXS5tYXhSZXRyaWVzID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgbWF4UmV0cmllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2xiUGFyc2VyLm1heFJldHJpZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFRoZSByZXNvdXJjZSBVUkwuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIFVSTCB3aXRoIHF1ZXJ5IHBhcmFtZXRlcnMgcmVtb3ZlZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9nZXRVcmxXaXRob3V0UGFyYW1zKHVybCkge1xuICAgICAgICByZXR1cm4gdXJsLmluZGV4T2YoJz8nKSA+PSAwID8gdXJsLnNwbGl0KCc/JylbMF0gOiB1cmw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFRoZSByZXNvdXJjZSBVUkwuXG4gICAgICogQHJldHVybnMgeyp9IEEgc3VpdGFibGUgcGFyc2VyIHRvIHBhcnNlIHRoZSByZXNvdXJjZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9nZXRQYXJzZXIodXJsKSB7XG4gICAgICAgIGNvbnN0IGV4dCA9IHVybCA/IHBhdGguZ2V0RXh0ZW5zaW9uKHRoaXMuX2dldFVybFdpdGhvdXRQYXJhbXModXJsKSkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCcuJywgJycpIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2Vyc1tleHRdIHx8IHRoaXMuZ2xiUGFyc2VyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gdXJsIC0gRWl0aGVyIHRoZSBVUkwgb2YgdGhlIHJlc291cmNlIHRvIGxvYWQgb3IgYSBzdHJ1Y3R1cmVcbiAgICAgKiBjb250YWluaW5nIHRoZSBsb2FkIGFuZCBvcmlnaW5hbCBVUkwuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt1cmwubG9hZF0gLSBUaGUgVVJMIHRvIGJlIHVzZWQgZm9yIGxvYWRpbmcgdGhlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdXJsLm9yaWdpbmFsXSAtIFRoZSBvcmlnaW5hbCBVUkwgdG8gYmUgdXNlZCBmb3IgaWRlbnRpZnlpbmcgdGhlIHJlc291cmNlXG4gICAgICogZm9ybWF0LiBUaGlzIGlzIG5lY2Vzc2FyeSB3aGVuIGxvYWRpbmcsIGZvciBleGFtcGxlIGZyb20gYmxvYi5cbiAgICAgKiBAcGFyYW0ge1Jlc291cmNlSGFuZGxlckNhbGxiYWNrfSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayB1c2VkIHdoZW4gdGhlIHJlc291cmNlIGlzIGxvYWRlZCBvclxuICAgICAqIGFuIGVycm9yIG9jY3Vycy5cbiAgICAgKiBAcGFyYW0ge0Fzc2V0fSBbYXNzZXRdIC0gT3B0aW9uYWwgYXNzZXQgdGhhdCBpcyBwYXNzZWQgYnkgUmVzb3VyY2VMb2FkZXIuXG4gICAgICovXG4gICAgbG9hZCh1cmwsIGNhbGxiYWNrLCBhc3NldCkge1xuICAgICAgICBpZiAodHlwZW9mIHVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHVybCA9IHtcbiAgICAgICAgICAgICAgICBsb2FkOiB1cmwsXG4gICAgICAgICAgICAgICAgb3JpZ2luYWw6IHVybFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2dldFBhcnNlcih1cmwub3JpZ2luYWwpLmxvYWQodXJsLCBjYWxsYmFjaywgYXNzZXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBUaGUgVVJMIG9mIHRoZSByZXNvdXJjZSB0byBvcGVuLlxuICAgICAqIEBwYXJhbSB7Kn0gZGF0YSAtIFRoZSByYXcgcmVzb3VyY2UgZGF0YSBwYXNzZWQgYnkgY2FsbGJhY2sgZnJvbSB7QGxpbmsgUmVzb3VyY2VIYW5kbGVyI2xvYWR9LlxuICAgICAqIEBwYXJhbSB7QXNzZXR9IFthc3NldF0gLSBPcHRpb25hbCBhc3NldCB0aGF0IGlzIHBhc3NlZCBieSBSZXNvdXJjZUxvYWRlci5cbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHBhcnNlZCByZXNvdXJjZSBkYXRhLlxuICAgICAqL1xuICAgIG9wZW4odXJsLCBkYXRhLCBhc3NldCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UGFyc2VyKHVybCkub3Blbih1cmwsIGRhdGEsIGFzc2V0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0Fzc2V0fSBhc3NldCAtIFRoZSBhc3NldCB0byBwYXRjaC5cbiAgICAgKiBAcGFyYW0ge0Fzc2V0UmVnaXN0cnl9IGFzc2V0cyAtIFRoZSBhc3NldCByZWdpc3RyeS5cbiAgICAgKi9cbiAgICBwYXRjaChhc3NldCwgYXNzZXRzKSB7XG5cbiAgICB9XG59XG5cbmV4cG9ydCB7IENvbnRhaW5lclJlc291cmNlLCBDb250YWluZXJIYW5kbGVyIH07XG4iXSwibmFtZXMiOlsiQ29udGFpbmVyUmVzb3VyY2UiLCJpbnN0YW50aWF0ZU1vZGVsRW50aXR5Iiwib3B0aW9ucyIsImluc3RhbnRpYXRlUmVuZGVyRW50aXR5IiwiZ2V0TWF0ZXJpYWxWYXJpYW50cyIsImFwcGx5TWF0ZXJpYWxWYXJpYW50IiwiZW50aXR5IiwibmFtZSIsImFwcGx5TWF0ZXJpYWxWYXJpYW50SW5zdGFuY2VzIiwiaW5zdGFuY2VzIiwiQ29udGFpbmVySGFuZGxlciIsImNvbnN0cnVjdG9yIiwiYXBwIiwiaGFuZGxlclR5cGUiLCJnbGJQYXJzZXIiLCJHbGJQYXJzZXIiLCJncmFwaGljc0RldmljZSIsImFzc2V0cyIsInBhcnNlcnMiLCJtYXhSZXRyaWVzIiwidmFsdWUiLCJwYXJzZXIiLCJoYXNPd25Qcm9wZXJ0eSIsIl9nZXRVcmxXaXRob3V0UGFyYW1zIiwidXJsIiwiaW5kZXhPZiIsInNwbGl0IiwiX2dldFBhcnNlciIsImV4dCIsInBhdGgiLCJnZXRFeHRlbnNpb24iLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJsb2FkIiwiY2FsbGJhY2siLCJhc3NldCIsIm9yaWdpbmFsIiwib3BlbiIsImRhdGEiLCJwYXRjaCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFjQSxNQUFNQSxpQkFBaUIsQ0FBQztFQWlCcEJDLHNCQUFzQixDQUFDQyxPQUFPLEVBQUU7QUFDNUIsSUFBQSxPQUFPLElBQUksQ0FBQTtBQUNmLEdBQUE7O0VBMkJBQyx1QkFBdUIsQ0FBQ0QsT0FBTyxFQUFFO0FBQzdCLElBQUEsT0FBTyxJQUFJLENBQUE7QUFDZixHQUFBOztBQU9BRSxFQUFBQSxtQkFBbUIsR0FBRztBQUNsQixJQUFBLE9BQU8sSUFBSSxDQUFBO0FBQ2YsR0FB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
