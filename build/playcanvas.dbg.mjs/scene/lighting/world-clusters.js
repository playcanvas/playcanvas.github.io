/**
 * @license
 * PlayCanvas Engine v1.58.0-preview revision 1fec26519 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Vec3 } from '../../core/math/vec3.js';
import { math } from '../../core/math/math.js';
import { BoundingBox } from '../../core/shape/bounding-box.js';
import { PIXELFORMAT_R8_G8_B8_A8 } from '../../platform/graphics/constants.js';
import { MASK_AFFECT_DYNAMIC, MASK_AFFECT_LIGHTMAPPED, LIGHTTYPE_DIRECTIONAL } from '../constants.js';
import { LightsBuffer } from './lights-buffer.js';
import { Debug } from '../../core/debug.js';

const tempVec3 = new Vec3();
const tempMin3 = new Vec3();
const tempMax3 = new Vec3();
const tempBox = new BoundingBox();
const epsilon = 0.000001;
const maxTextureSize = 4096;

class ClusterLight {
  constructor() {
    this.light = null;

    this.min = new Vec3();
    this.max = new Vec3();
  }
}

class WorldClusters {
  constructor(device) {
    this.device = device;
    this.name = 'Untitled';

    this.reportCount = 0;

    this.boundsMin = new Vec3();
    this.boundsMax = new Vec3();
    this.boundsDelta = new Vec3();

    this._cells = new Vec3(1, 1, 1);
    this._cellsLimit = new Vec3();
    this.cells = this._cells;

    this._maxCellLightCount = 0;
    this._pixelsPerCellCount = 0;
    this.maxCellLightCount = 4;

    this._maxAttenuation = 0;
    this._maxColorValue = 0;

    this._usedLights = [];

    this._usedLights.push(new ClusterLight());

    this.lightsBuffer = new LightsBuffer(device);

    this.registerUniforms(device);
  }
  set maxCellLightCount(count) {
    const maxCellLightCount = math.roundUp(count, 4);
    if (maxCellLightCount !== this._maxCellLightCount) {
      this._maxCellLightCount = maxCellLightCount;
      this._pixelsPerCellCount = this._maxCellLightCount / 4;
      this._cellsDirty = true;
    }
  }
  get maxCellLightCount() {
    return this._maxCellLightCount;
  }
  set cells(value) {
    tempVec3.copy(value).floor();
    if (!this._cells.equals(tempVec3)) {
      this._cells.copy(tempVec3);
      this._cellsLimit.copy(tempVec3).sub(Vec3.ONE);
      this._cellsDirty = true;
    }
  }
  get cells() {
    return this._cells;
  }
  destroy() {
    this.lightsBuffer.destroy();
    this.releaseClusterTexture();
  }
  releaseClusterTexture() {
    if (this.clusterTexture) {
      this.clusterTexture.destroy();
      this.clusterTexture = null;
    }
  }
  registerUniforms(device) {
    this._clusterWorldTextureId = device.scope.resolve('clusterWorldTexture');
    this._clusterPixelsPerCellId = device.scope.resolve('clusterPixelsPerCell');
    this._clusterTextureSizeId = device.scope.resolve('clusterTextureSize');
    this._clusterTextureSizeData = new Float32Array(3);
    this._clusterBoundsMinId = device.scope.resolve('clusterBoundsMin');
    this._clusterBoundsMinData = new Float32Array(3);
    this._clusterBoundsDeltaId = device.scope.resolve('clusterBoundsDelta');
    this._clusterBoundsDeltaData = new Float32Array(3);
    this._clusterCellsCountByBoundsSizeId = device.scope.resolve('clusterCellsCountByBoundsSize');
    this._clusterCellsCountByBoundsSizeData = new Float32Array(3);
    this._clusterCellsDotId = device.scope.resolve('clusterCellsDot');
    this._clusterCellsDotData = new Float32Array(3);

    this._clusterCellsMaxId = device.scope.resolve('clusterCellsMax');
    this._clusterCellsMaxData = new Float32Array(3);

    this._clusterCompressionLimit0Id = device.scope.resolve('clusterCompressionLimit0');
    this._clusterCompressionLimit0Data = new Float32Array(2);
  }

  updateParams(lightingParams) {
    if (lightingParams) {
      this.cells = lightingParams.cells;
      this.maxCellLightCount = lightingParams.maxLightsPerCell;
      this.lightsBuffer.cookiesEnabled = lightingParams.cookiesEnabled;
      this.lightsBuffer.shadowsEnabled = lightingParams.shadowsEnabled;
      this.lightsBuffer.areaLightsEnabled = lightingParams.areaLightsEnabled;
    }
  }
  updateCells() {
    if (this._cellsDirty) {
      this._cellsDirty = false;
      const cx = this._cells.x;
      const cy = this._cells.y;
      const cz = this._cells.z;

      const numCells = cx * cy * cz;
      const totalPixels = this._pixelsPerCellCount * numCells;

      let width = Math.ceil(Math.sqrt(totalPixels));
      width = math.roundUp(width, this._pixelsPerCellCount);
      const height = Math.ceil(totalPixels / width);

      Debug.assert(width <= maxTextureSize && height <= maxTextureSize, 'Clustered lights parameters cause the texture size to be over the limit, please adjust them.');

      this._clusterCellsMaxData[0] = cx;
      this._clusterCellsMaxData[1] = cy;
      this._clusterCellsMaxData[2] = cz;

      this._clusterCellsDotData[0] = this._pixelsPerCellCount;
      this._clusterCellsDotData[1] = cx * cz * this._pixelsPerCellCount;
      this._clusterCellsDotData[2] = cx * this._pixelsPerCellCount;

      this.clusters = new Uint8ClampedArray(4 * totalPixels);
      this.counts = new Int32Array(numCells);
      this._clusterTextureSizeData[0] = width;
      this._clusterTextureSizeData[1] = 1.0 / width;
      this._clusterTextureSizeData[2] = 1.0 / height;
      this.releaseClusterTexture();
      this.clusterTexture = LightsBuffer.createTexture(this.device, width, height, PIXELFORMAT_R8_G8_B8_A8, 'ClusterTexture');
    }
  }
  uploadTextures() {
    this.clusterTexture.lock().set(this.clusters);
    this.clusterTexture.unlock();
    this.lightsBuffer.uploadTextures();
  }
  updateUniforms() {
    this.lightsBuffer.updateUniforms();

    this._clusterWorldTextureId.setValue(this.clusterTexture);

    const boundsDelta = this.boundsDelta;
    this._clusterCellsCountByBoundsSizeData[0] = this._cells.x / boundsDelta.x;
    this._clusterCellsCountByBoundsSizeData[1] = this._cells.y / boundsDelta.y;
    this._clusterCellsCountByBoundsSizeData[2] = this._cells.z / boundsDelta.z;
    this._clusterCellsCountByBoundsSizeId.setValue(this._clusterCellsCountByBoundsSizeData);
    this._clusterBoundsMinData[0] = this.boundsMin.x;
    this._clusterBoundsMinData[1] = this.boundsMin.y;
    this._clusterBoundsMinData[2] = this.boundsMin.z;
    this._clusterBoundsDeltaData[0] = boundsDelta.x;
    this._clusterBoundsDeltaData[1] = boundsDelta.y;
    this._clusterBoundsDeltaData[2] = boundsDelta.z;
    this._clusterCompressionLimit0Data[0] = this._maxAttenuation;
    this._clusterCompressionLimit0Data[1] = this._maxColorValue;

    this._clusterPixelsPerCellId.setValue(this._pixelsPerCellCount);
    this._clusterTextureSizeId.setValue(this._clusterTextureSizeData);
    this._clusterBoundsMinId.setValue(this._clusterBoundsMinData);
    this._clusterBoundsDeltaId.setValue(this._clusterBoundsDeltaData);
    this._clusterCellsDotId.setValue(this._clusterCellsDotData);
    this._clusterCellsMaxId.setValue(this._clusterCellsMaxData);
    this._clusterCompressionLimit0Id.setValue(this._clusterCompressionLimit0Data);
  }

  evalLightCellMinMax(clusteredLight, min, max) {
    min.copy(clusteredLight.min);
    min.sub(this.boundsMin);
    min.div(this.boundsDelta);
    min.mul2(min, this.cells);
    min.floor();

    max.copy(clusteredLight.max);
    max.sub(this.boundsMin);
    max.div(this.boundsDelta);
    max.mul2(max, this.cells);
    max.ceil();

    min.max(Vec3.ZERO);
    max.min(this._cellsLimit);
  }
  collectLights(lights) {
    const maxLights = this.lightsBuffer.maxLights;

    const usedLights = this._usedLights;
    let lightIndex = 1;
    lights.forEach(light => {
      const runtimeLight = !!(light.mask & (MASK_AFFECT_DYNAMIC | MASK_AFFECT_LIGHTMAPPED));
      if (light.enabled && light.type !== LIGHTTYPE_DIRECTIONAL && light.visibleThisFrame && light.intensity > 0 && runtimeLight) {
        if (lightIndex < maxLights) {
          let clusteredLight;
          if (lightIndex < usedLights.length) {
            clusteredLight = usedLights[lightIndex];
          } else {
            clusteredLight = new ClusterLight();
            usedLights.push(clusteredLight);
          }

          clusteredLight.light = light;
          light.getBoundingBox(tempBox);
          clusteredLight.min.copy(tempBox.getMin());
          clusteredLight.max.copy(tempBox.getMax());
          lightIndex++;
        } else {
          Debug.warnOnce(`Clustered lighting: more than ${maxLights - 1} lights in the frame, ignoring some.`);
        }
      }
    });
    usedLights.length = lightIndex;
  }

  evaluateBounds() {
    const usedLights = this._usedLights;

    const min = this.boundsMin;
    const max = this.boundsMax;

    if (usedLights.length > 1) {
      min.copy(usedLights[1].min);
      max.copy(usedLights[1].max);
      for (let i = 2; i < usedLights.length; i++) {
        min.min(usedLights[i].min);
        max.max(usedLights[i].max);
      }
    } else {
      min.set(0, 0, 0);
      max.set(1, 1, 1);
    }

    this.boundsDelta.sub2(max, min);
    this.lightsBuffer.setBounds(min, this.boundsDelta);
  }

  evaluateCompressionLimits(gammaCorrection) {
    let maxAttenuation = 0;
    let maxColorValue = 0;
    const usedLights = this._usedLights;
    for (let i = 1; i < usedLights.length; i++) {
      const light = usedLights[i].light;
      maxAttenuation = Math.max(light.attenuationEnd, maxAttenuation);
      const color = gammaCorrection ? light._linearFinalColor : light._finalColor;
      maxColorValue = Math.max(color[0], maxColorValue);
      maxColorValue = Math.max(color[1], maxColorValue);
      maxColorValue = Math.max(color[2], maxColorValue);
    }

    this._maxAttenuation = maxAttenuation + epsilon;
    this._maxColorValue = maxColorValue + epsilon;
    this.lightsBuffer.setCompressionRanges(this._maxAttenuation, this._maxColorValue);
  }
  updateClusters(gammaCorrection) {
    this.counts.fill(0);
    this.clusters.fill(0);

    const divX = this._cells.x;
    const divZ = this._cells.z;
    const counts = this.counts;
    const limit = this._maxCellLightCount;
    const clusters = this.clusters;
    const pixelsPerCellCount = this._pixelsPerCellCount;
    let tooManyLights = false;

    const usedLights = this._usedLights;
    for (let i = 1; i < usedLights.length; i++) {
      const clusteredLight = usedLights[i];
      const light = clusteredLight.light;

      this.lightsBuffer.addLightData(light, i, gammaCorrection);

      this.evalLightCellMinMax(clusteredLight, tempMin3, tempMax3);
      const xStart = tempMin3.x;
      const xEnd = tempMax3.x;
      const yStart = tempMin3.y;
      const yEnd = tempMax3.y;
      const zStart = tempMin3.z;
      const zEnd = tempMax3.z;

      for (let x = xStart; x <= xEnd; x++) {
        for (let z = zStart; z <= zEnd; z++) {
          for (let y = yStart; y <= yEnd; y++) {
            const clusterIndex = x + divX * (z + y * divZ);
            const count = counts[clusterIndex];
            if (count < limit) {
              clusters[pixelsPerCellCount * clusterIndex * 4 + count] = i;
              counts[clusterIndex] = count + 1;
            } else {
              tooManyLights = true;
            }
          }
        }
      }
    }
    if (tooManyLights) {
      const reportLimit = 5;
      if (this.reportCount < reportLimit) {
        console.warn('Too many lights in light cluster ' + this.name + ', please adjust parameters.' + (this.reportCount === reportLimit - 1 ? ' Giving up on reporting it.' : ''));
        this.reportCount++;
      }
    }
  }

  update(lights, gammaCorrection, lightingParams) {
    this.updateParams(lightingParams);
    this.updateCells();
    this.collectLights(lights);
    this.evaluateBounds();
    this.evaluateCompressionLimits(gammaCorrection);
    this.updateClusters(gammaCorrection);
    this.uploadTextures();
  }

  activate() {
    this.updateUniforms();
  }
}

export { WorldClusters };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ybGQtY2x1c3RlcnMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9zY2VuZS9saWdodGluZy93b3JsZC1jbHVzdGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWMzIH0gZnJvbSAnLi4vLi4vY29yZS9tYXRoL3ZlYzMuanMnO1xuaW1wb3J0IHsgbWF0aCB9IGZyb20gJy4uLy4uL2NvcmUvbWF0aC9tYXRoLmpzJztcbmltcG9ydCB7IEJvdW5kaW5nQm94IH0gZnJvbSAnLi4vLi4vY29yZS9zaGFwZS9ib3VuZGluZy1ib3guanMnO1xuaW1wb3J0IHsgUElYRUxGT1JNQVRfUjhfRzhfQjhfQTggfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgTElHSFRUWVBFX0RJUkVDVElPTkFMLCBNQVNLX0FGRkVDVF9EWU5BTUlDLCBNQVNLX0FGRkVDVF9MSUdIVE1BUFBFRCB9IGZyb20gJy4uL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBMaWdodHNCdWZmZXIgfSBmcm9tICcuL2xpZ2h0cy1idWZmZXIuanMnO1xuaW1wb3J0IHsgRGVidWcgfSBmcm9tICcuLi8uLi9jb3JlL2RlYnVnLmpzJztcblxuY29uc3QgdGVtcFZlYzMgPSBuZXcgVmVjMygpO1xuY29uc3QgdGVtcE1pbjMgPSBuZXcgVmVjMygpO1xuY29uc3QgdGVtcE1heDMgPSBuZXcgVmVjMygpO1xuY29uc3QgdGVtcEJveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuXG5jb25zdCBlcHNpbG9uID0gMC4wMDAwMDE7XG5jb25zdCBtYXhUZXh0dXJlU2l6ZSA9IDQwOTY7ICAgIC8vIG1heGltdW0gdGV4dHVyZSBzaXplIGFsbG93ZWQgdG8gd29yayBvbiBhbGwgZGV2aWNlc1xuXG4vLyBoZWxwZXIgY2xhc3MgdG8gc3RvcmUgcHJvcGVydGllcyBvZiBhIGxpZ2h0IHVzZWQgYnkgY2x1c3RlcmluZ1xuY2xhc3MgQ2x1c3RlckxpZ2h0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gdGhlIGxpZ2h0IGl0c2VsZlxuICAgICAgICB0aGlzLmxpZ2h0ID0gbnVsbDtcblxuICAgICAgICAvLyBib3VuZGluZyBib3hcbiAgICAgICAgdGhpcy5taW4gPSBuZXcgVmVjMygpO1xuICAgICAgICB0aGlzLm1heCA9IG5ldyBWZWMzKCk7XG4gICAgfVxufVxuXG4vLyBNYWluIGNsYXNzIGltcGxlbWVudGluZyBjbHVzdGVyZWQgbGlnaHRpbmcuIEludGVybmFsbHkgaXQgb3JnYW5pemVzIHRoZSBvbW5pIC8gc3BvdCBsaWdodHMgcGxhY2VtZW50IGluIHdvcmxkIHNwYWNlIDNkIGNlbGwgc3RydWN0dXJlLFxuLy8gYW5kIGFsc28gdXNlcyBMaWdodHNCdWZmZXIgY2xhc3MgdG8gc3RvcmUgbGlnaHQgcHJvcGVydGllcyBpbiB0ZXh0dXJlc1xuY2xhc3MgV29ybGRDbHVzdGVycyB7XG4gICAgY29uc3RydWN0b3IoZGV2aWNlKSB7XG4gICAgICAgIHRoaXMuZGV2aWNlID0gZGV2aWNlO1xuICAgICAgICB0aGlzLm5hbWUgPSAnVW50aXRsZWQnO1xuXG4gICAgICAgIC8vIG51bWJlciBvZiB0aW1lcyBhIHdhcm5pbmcgd2FzIHJlcG9ydGVkXG4gICAgICAgIHRoaXMucmVwb3J0Q291bnQgPSAwO1xuXG4gICAgICAgIC8vIGJvdW5kcyBvZiBhbGwgbGlnaHQgdm9sdW1lcyAodm9sdW1lIGNvdmVyZWQgYnkgdGhlIGNsdXN0ZXJzKVxuICAgICAgICB0aGlzLmJvdW5kc01pbiA9IG5ldyBWZWMzKCk7XG4gICAgICAgIHRoaXMuYm91bmRzTWF4ID0gbmV3IFZlYzMoKTtcbiAgICAgICAgdGhpcy5ib3VuZHNEZWx0YSA9IG5ldyBWZWMzKCk7XG5cbiAgICAgICAgLy8gbnVtYmVyIG9mIGNlbGxzIGFsb25nIDMgYXhlc1xuICAgICAgICB0aGlzLl9jZWxscyA9IG5ldyBWZWMzKDEsIDEsIDEpOyAgICAgICAvLyBudW1iZXIgb2YgY2VsbHNcbiAgICAgICAgdGhpcy5fY2VsbHNMaW1pdCA9IG5ldyBWZWMzKCk7ICAvLyBudW1iZXIgb2YgY2VsbHMgbWludXMgb25lXG4gICAgICAgIHRoaXMuY2VsbHMgPSB0aGlzLl9jZWxscztcblxuICAgICAgICAvLyBudW1iZXIgb2YgbGlnaHRzIGVhY2ggY2VsbCBjYW4gc3RvcmUsIGFuZCBudW1iZXIgb2YgcGl4ZWxzIHRoaXMgdGFrZXMgKDQgbGlnaHRzIHBlciBwaXhlbClcbiAgICAgICAgdGhpcy5fbWF4Q2VsbExpZ2h0Q291bnQgPSAwO1xuICAgICAgICB0aGlzLl9waXhlbHNQZXJDZWxsQ291bnQgPSAwO1xuICAgICAgICB0aGlzLm1heENlbGxMaWdodENvdW50ID0gNDtcblxuICAgICAgICAvLyBsaW1pdHMgb24gc29tZSBsaWdodCBwcm9wZXJ0aWVzLCB1c2VkIGZvciBjb21wcmVzc2lvbiB0byA4Yml0IHRleHR1cmVcbiAgICAgICAgdGhpcy5fbWF4QXR0ZW51YXRpb24gPSAwO1xuICAgICAgICB0aGlzLl9tYXhDb2xvclZhbHVlID0gMDtcblxuICAgICAgICAvLyBpbnRlcm5hbCBsaXN0IG9mIGxpZ2h0cyAob2YgdHlwZSBDbHVzdGVyTGlnaHQpXG4gICAgICAgIHRoaXMuX3VzZWRMaWdodHMgPSBbXTtcblxuICAgICAgICAvLyBsaWdodCAwIGlzIGFsd2F5cyByZXNlcnZlZCBmb3IgJ25vIGxpZ2h0JyBpbmRleFxuICAgICAgICB0aGlzLl91c2VkTGlnaHRzLnB1c2gobmV3IENsdXN0ZXJMaWdodCgpKTtcblxuICAgICAgICAvLyBhbGxvY2F0ZSB0ZXh0dXJlcyB0byBzdG9yZSBsaWdodHNcbiAgICAgICAgdGhpcy5saWdodHNCdWZmZXIgPSBuZXcgTGlnaHRzQnVmZmVyKGRldmljZSk7XG5cbiAgICAgICAgLy8gcmVnaXN0ZXIgc2hhZGVyIHVuaWZvcm1zXG4gICAgICAgIHRoaXMucmVnaXN0ZXJVbmlmb3JtcyhkZXZpY2UpO1xuICAgIH1cblxuICAgIHNldCBtYXhDZWxsTGlnaHRDb3VudChjb3VudCkge1xuXG4gICAgICAgIC8vIGVhY2ggY2VsbCBzdG9yZXMgNCBsaWdodHMgKHh5encpLCBzbyByb3VuZCB1cCB0aGUgY291bnRcbiAgICAgICAgY29uc3QgbWF4Q2VsbExpZ2h0Q291bnQgPSBtYXRoLnJvdW5kVXAoY291bnQsIDQpO1xuICAgICAgICBpZiAobWF4Q2VsbExpZ2h0Q291bnQgIT09IHRoaXMuX21heENlbGxMaWdodENvdW50KSB7XG4gICAgICAgICAgICB0aGlzLl9tYXhDZWxsTGlnaHRDb3VudCA9IG1heENlbGxMaWdodENvdW50O1xuICAgICAgICAgICAgdGhpcy5fcGl4ZWxzUGVyQ2VsbENvdW50ID0gdGhpcy5fbWF4Q2VsbExpZ2h0Q291bnQgLyA0O1xuICAgICAgICAgICAgdGhpcy5fY2VsbHNEaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgbWF4Q2VsbExpZ2h0Q291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXhDZWxsTGlnaHRDb3VudDtcbiAgICB9XG5cbiAgICBzZXQgY2VsbHModmFsdWUpIHtcblxuICAgICAgICAvLyBtYWtlIHN1cmUgd2UgaGF2ZSB3aG9sZSBudW1iZXJzXG4gICAgICAgIHRlbXBWZWMzLmNvcHkodmFsdWUpLmZsb29yKCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLl9jZWxscy5lcXVhbHModGVtcFZlYzMpKSB7XG4gICAgICAgICAgICB0aGlzLl9jZWxscy5jb3B5KHRlbXBWZWMzKTtcbiAgICAgICAgICAgIHRoaXMuX2NlbGxzTGltaXQuY29weSh0ZW1wVmVjMykuc3ViKFZlYzMuT05FKTtcbiAgICAgICAgICAgIHRoaXMuX2NlbGxzRGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGNlbGxzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2VsbHM7XG4gICAgfVxuXG4gICAgZGVzdHJveSgpIHtcblxuICAgICAgICB0aGlzLmxpZ2h0c0J1ZmZlci5kZXN0cm95KCk7XG5cbiAgICAgICAgdGhpcy5yZWxlYXNlQ2x1c3RlclRleHR1cmUoKTtcbiAgICB9XG5cbiAgICByZWxlYXNlQ2x1c3RlclRleHR1cmUoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsdXN0ZXJUZXh0dXJlKSB7XG4gICAgICAgICAgICB0aGlzLmNsdXN0ZXJUZXh0dXJlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuY2x1c3RlclRleHR1cmUgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJVbmlmb3JtcyhkZXZpY2UpIHtcblxuICAgICAgICB0aGlzLl9jbHVzdGVyV29ybGRUZXh0dXJlSWQgPSBkZXZpY2Uuc2NvcGUucmVzb2x2ZSgnY2x1c3RlcldvcmxkVGV4dHVyZScpO1xuICAgICAgICB0aGlzLl9jbHVzdGVyUGl4ZWxzUGVyQ2VsbElkID0gZGV2aWNlLnNjb3BlLnJlc29sdmUoJ2NsdXN0ZXJQaXhlbHNQZXJDZWxsJyk7XG5cbiAgICAgICAgdGhpcy5fY2x1c3RlclRleHR1cmVTaXplSWQgPSBkZXZpY2Uuc2NvcGUucmVzb2x2ZSgnY2x1c3RlclRleHR1cmVTaXplJyk7XG4gICAgICAgIHRoaXMuX2NsdXN0ZXJUZXh0dXJlU2l6ZURhdGEgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuXG4gICAgICAgIHRoaXMuX2NsdXN0ZXJCb3VuZHNNaW5JZCA9IGRldmljZS5zY29wZS5yZXNvbHZlKCdjbHVzdGVyQm91bmRzTWluJyk7XG4gICAgICAgIHRoaXMuX2NsdXN0ZXJCb3VuZHNNaW5EYXRhID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcblxuICAgICAgICB0aGlzLl9jbHVzdGVyQm91bmRzRGVsdGFJZCA9IGRldmljZS5zY29wZS5yZXNvbHZlKCdjbHVzdGVyQm91bmRzRGVsdGEnKTtcbiAgICAgICAgdGhpcy5fY2x1c3RlckJvdW5kc0RlbHRhRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG5cbiAgICAgICAgdGhpcy5fY2x1c3RlckNlbGxzQ291bnRCeUJvdW5kc1NpemVJZCA9IGRldmljZS5zY29wZS5yZXNvbHZlKCdjbHVzdGVyQ2VsbHNDb3VudEJ5Qm91bmRzU2l6ZScpO1xuICAgICAgICB0aGlzLl9jbHVzdGVyQ2VsbHNDb3VudEJ5Qm91bmRzU2l6ZURhdGEgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuXG4gICAgICAgIHRoaXMuX2NsdXN0ZXJDZWxsc0RvdElkID0gZGV2aWNlLnNjb3BlLnJlc29sdmUoJ2NsdXN0ZXJDZWxsc0RvdCcpO1xuICAgICAgICB0aGlzLl9jbHVzdGVyQ2VsbHNEb3REYXRhID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcblxuICAgICAgICAvLyBudW1iZXIgb2YgY2VsbHMgaW4gZWFjaCBkaXJlY3Rpb24gKHZlYzMpXG4gICAgICAgIHRoaXMuX2NsdXN0ZXJDZWxsc01heElkID0gZGV2aWNlLnNjb3BlLnJlc29sdmUoJ2NsdXN0ZXJDZWxsc01heCcpO1xuICAgICAgICB0aGlzLl9jbHVzdGVyQ2VsbHNNYXhEYXRhID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcblxuICAgICAgICAvLyBjb21wcmVzc2lvbiBsaW1pdCAwXG4gICAgICAgIHRoaXMuX2NsdXN0ZXJDb21wcmVzc2lvbkxpbWl0MElkID0gZGV2aWNlLnNjb3BlLnJlc29sdmUoJ2NsdXN0ZXJDb21wcmVzc2lvbkxpbWl0MCcpO1xuICAgICAgICB0aGlzLl9jbHVzdGVyQ29tcHJlc3Npb25MaW1pdDBEYXRhID0gbmV3IEZsb2F0MzJBcnJheSgyKTtcbiAgICB9XG5cbiAgICAvLyB1cGRhdGVzIGl0c2VsZiBiYXNlZCBvbiBwYXJhbWV0ZXJzIHN0b3JlZCBpbiB0aGUgc2NlbmVcbiAgICB1cGRhdGVQYXJhbXMobGlnaHRpbmdQYXJhbXMpIHtcbiAgICAgICAgaWYgKGxpZ2h0aW5nUGFyYW1zKSB7XG4gICAgICAgICAgICB0aGlzLmNlbGxzID0gbGlnaHRpbmdQYXJhbXMuY2VsbHM7XG4gICAgICAgICAgICB0aGlzLm1heENlbGxMaWdodENvdW50ID0gbGlnaHRpbmdQYXJhbXMubWF4TGlnaHRzUGVyQ2VsbDtcblxuICAgICAgICAgICAgdGhpcy5saWdodHNCdWZmZXIuY29va2llc0VuYWJsZWQgPSBsaWdodGluZ1BhcmFtcy5jb29raWVzRW5hYmxlZDtcbiAgICAgICAgICAgIHRoaXMubGlnaHRzQnVmZmVyLnNoYWRvd3NFbmFibGVkID0gbGlnaHRpbmdQYXJhbXMuc2hhZG93c0VuYWJsZWQ7XG5cbiAgICAgICAgICAgIHRoaXMubGlnaHRzQnVmZmVyLmFyZWFMaWdodHNFbmFibGVkID0gbGlnaHRpbmdQYXJhbXMuYXJlYUxpZ2h0c0VuYWJsZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVDZWxscygpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NlbGxzRGlydHkpIHtcbiAgICAgICAgICAgIHRoaXMuX2NlbGxzRGlydHkgPSBmYWxzZTtcblxuICAgICAgICAgICAgY29uc3QgY3ggPSB0aGlzLl9jZWxscy54O1xuICAgICAgICAgICAgY29uc3QgY3kgPSB0aGlzLl9jZWxscy55O1xuICAgICAgICAgICAgY29uc3QgY3ogPSB0aGlzLl9jZWxscy56O1xuXG4gICAgICAgICAgICAvLyBzdG9yaW5nIDQgbGlnaHRzIHBlciBwaXhlbHNcbiAgICAgICAgICAgIGNvbnN0IG51bUNlbGxzID0gY3ggKiBjeSAqIGN6O1xuICAgICAgICAgICAgY29uc3QgdG90YWxQaXhlbHMgPSB0aGlzLl9waXhlbHNQZXJDZWxsQ291bnQgKiBudW1DZWxscztcblxuICAgICAgICAgICAgLy8gY2x1c3RlciB0ZXh0dXJlIHNpemUgLSByb3VnaGx5IHNxdWFyZSB0aGF0IGZpdHMgYWxsIGNlbGxzLiBUaGUgd2lkdGggaXMgbXVsdGlwbHkgb2YgbnVtUGl4ZWxzIHRvIHNpbXBsaWZ5IHNoYWRlciBtYXRoXG4gICAgICAgICAgICBsZXQgd2lkdGggPSBNYXRoLmNlaWwoTWF0aC5zcXJ0KHRvdGFsUGl4ZWxzKSk7XG4gICAgICAgICAgICB3aWR0aCA9IG1hdGgucm91bmRVcCh3aWR0aCwgdGhpcy5fcGl4ZWxzUGVyQ2VsbENvdW50KTtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGguY2VpbCh0b3RhbFBpeGVscyAvIHdpZHRoKTtcblxuICAgICAgICAgICAgLy8gaWYgdGhlIHRleHR1cmUgaXMgYWxsb3dlZCBzaXplXG4gICAgICAgICAgICBEZWJ1Zy5hc3NlcnQod2lkdGggPD0gbWF4VGV4dHVyZVNpemUgJiYgaGVpZ2h0IDw9IG1heFRleHR1cmVTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICdDbHVzdGVyZWQgbGlnaHRzIHBhcmFtZXRlcnMgY2F1c2UgdGhlIHRleHR1cmUgc2l6ZSB0byBiZSBvdmVyIHRoZSBsaW1pdCwgcGxlYXNlIGFkanVzdCB0aGVtLicpO1xuXG4gICAgICAgICAgICAvLyBtYXhpbXVtIHJhbmdlIG9mIGNlbGxzXG4gICAgICAgICAgICB0aGlzLl9jbHVzdGVyQ2VsbHNNYXhEYXRhWzBdID0gY3g7XG4gICAgICAgICAgICB0aGlzLl9jbHVzdGVyQ2VsbHNNYXhEYXRhWzFdID0gY3k7XG4gICAgICAgICAgICB0aGlzLl9jbHVzdGVyQ2VsbHNNYXhEYXRhWzJdID0gY3o7XG5cbiAgICAgICAgICAgIC8vIHZlY3RvciB0byBhbGxvdyBzaW5nbGUgZG90IHByb2R1Y3QgdG8gY29udmVydCBmcm9tIHdvcmxkIGNvb3JkaW5hdGVzIHRvIGNsdXN0ZXIgaW5kZXhcbiAgICAgICAgICAgIHRoaXMuX2NsdXN0ZXJDZWxsc0RvdERhdGFbMF0gPSB0aGlzLl9waXhlbHNQZXJDZWxsQ291bnQ7XG4gICAgICAgICAgICB0aGlzLl9jbHVzdGVyQ2VsbHNEb3REYXRhWzFdID0gY3ggKiBjeiAqIHRoaXMuX3BpeGVsc1BlckNlbGxDb3VudDtcbiAgICAgICAgICAgIHRoaXMuX2NsdXN0ZXJDZWxsc0RvdERhdGFbMl0gPSBjeCAqIHRoaXMuX3BpeGVsc1BlckNlbGxDb3VudDtcblxuICAgICAgICAgICAgLy8gY2x1c3RlciBkYXRhIGFuZCBudW1iZXIgb2YgbGlnaHRzIHBlciBjZWxsXG4gICAgICAgICAgICB0aGlzLmNsdXN0ZXJzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KDQgKiB0b3RhbFBpeGVscyk7XG4gICAgICAgICAgICB0aGlzLmNvdW50cyA9IG5ldyBJbnQzMkFycmF5KG51bUNlbGxzKTtcblxuICAgICAgICAgICAgdGhpcy5fY2x1c3RlclRleHR1cmVTaXplRGF0YVswXSA9IHdpZHRoO1xuICAgICAgICAgICAgdGhpcy5fY2x1c3RlclRleHR1cmVTaXplRGF0YVsxXSA9IDEuMCAvIHdpZHRoO1xuICAgICAgICAgICAgdGhpcy5fY2x1c3RlclRleHR1cmVTaXplRGF0YVsyXSA9IDEuMCAvIGhlaWdodDtcblxuICAgICAgICAgICAgdGhpcy5yZWxlYXNlQ2x1c3RlclRleHR1cmUoKTtcbiAgICAgICAgICAgIHRoaXMuY2x1c3RlclRleHR1cmUgPSBMaWdodHNCdWZmZXIuY3JlYXRlVGV4dHVyZSh0aGlzLmRldmljZSwgd2lkdGgsIGhlaWdodCwgUElYRUxGT1JNQVRfUjhfRzhfQjhfQTgsICdDbHVzdGVyVGV4dHVyZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBsb2FkVGV4dHVyZXMoKSB7XG5cbiAgICAgICAgdGhpcy5jbHVzdGVyVGV4dHVyZS5sb2NrKCkuc2V0KHRoaXMuY2x1c3RlcnMpO1xuICAgICAgICB0aGlzLmNsdXN0ZXJUZXh0dXJlLnVubG9jaygpO1xuXG4gICAgICAgIHRoaXMubGlnaHRzQnVmZmVyLnVwbG9hZFRleHR1cmVzKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlVW5pZm9ybXMoKSB7XG5cbiAgICAgICAgdGhpcy5saWdodHNCdWZmZXIudXBkYXRlVW5pZm9ybXMoKTtcblxuICAgICAgICAvLyB0ZXh0dXJlXG4gICAgICAgIHRoaXMuX2NsdXN0ZXJXb3JsZFRleHR1cmVJZC5zZXRWYWx1ZSh0aGlzLmNsdXN0ZXJUZXh0dXJlKTtcblxuICAgICAgICAvLyB1bmlmb3JtIHZhbHVlc1xuICAgICAgICBjb25zdCBib3VuZHNEZWx0YSA9IHRoaXMuYm91bmRzRGVsdGE7XG4gICAgICAgIHRoaXMuX2NsdXN0ZXJDZWxsc0NvdW50QnlCb3VuZHNTaXplRGF0YVswXSA9IHRoaXMuX2NlbGxzLnggLyBib3VuZHNEZWx0YS54O1xuICAgICAgICB0aGlzLl9jbHVzdGVyQ2VsbHNDb3VudEJ5Qm91bmRzU2l6ZURhdGFbMV0gPSB0aGlzLl9jZWxscy55IC8gYm91bmRzRGVsdGEueTtcbiAgICAgICAgdGhpcy5fY2x1c3RlckNlbGxzQ291bnRCeUJvdW5kc1NpemVEYXRhWzJdID0gdGhpcy5fY2VsbHMueiAvIGJvdW5kc0RlbHRhLno7XG4gICAgICAgIHRoaXMuX2NsdXN0ZXJDZWxsc0NvdW50QnlCb3VuZHNTaXplSWQuc2V0VmFsdWUodGhpcy5fY2x1c3RlckNlbGxzQ291bnRCeUJvdW5kc1NpemVEYXRhKTtcblxuICAgICAgICB0aGlzLl9jbHVzdGVyQm91bmRzTWluRGF0YVswXSA9IHRoaXMuYm91bmRzTWluLng7XG4gICAgICAgIHRoaXMuX2NsdXN0ZXJCb3VuZHNNaW5EYXRhWzFdID0gdGhpcy5ib3VuZHNNaW4ueTtcbiAgICAgICAgdGhpcy5fY2x1c3RlckJvdW5kc01pbkRhdGFbMl0gPSB0aGlzLmJvdW5kc01pbi56O1xuXG4gICAgICAgIHRoaXMuX2NsdXN0ZXJCb3VuZHNEZWx0YURhdGFbMF0gPSBib3VuZHNEZWx0YS54O1xuICAgICAgICB0aGlzLl9jbHVzdGVyQm91bmRzRGVsdGFEYXRhWzFdID0gYm91bmRzRGVsdGEueTtcbiAgICAgICAgdGhpcy5fY2x1c3RlckJvdW5kc0RlbHRhRGF0YVsyXSA9IGJvdW5kc0RlbHRhLno7XG5cbiAgICAgICAgdGhpcy5fY2x1c3RlckNvbXByZXNzaW9uTGltaXQwRGF0YVswXSA9IHRoaXMuX21heEF0dGVudWF0aW9uO1xuICAgICAgICB0aGlzLl9jbHVzdGVyQ29tcHJlc3Npb25MaW1pdDBEYXRhWzFdID0gdGhpcy5fbWF4Q29sb3JWYWx1ZTtcblxuICAgICAgICAvLyBhc3NpZ24gdmFsdWVzXG4gICAgICAgIHRoaXMuX2NsdXN0ZXJQaXhlbHNQZXJDZWxsSWQuc2V0VmFsdWUodGhpcy5fcGl4ZWxzUGVyQ2VsbENvdW50KTtcbiAgICAgICAgdGhpcy5fY2x1c3RlclRleHR1cmVTaXplSWQuc2V0VmFsdWUodGhpcy5fY2x1c3RlclRleHR1cmVTaXplRGF0YSk7XG4gICAgICAgIHRoaXMuX2NsdXN0ZXJCb3VuZHNNaW5JZC5zZXRWYWx1ZSh0aGlzLl9jbHVzdGVyQm91bmRzTWluRGF0YSk7XG4gICAgICAgIHRoaXMuX2NsdXN0ZXJCb3VuZHNEZWx0YUlkLnNldFZhbHVlKHRoaXMuX2NsdXN0ZXJCb3VuZHNEZWx0YURhdGEpO1xuICAgICAgICB0aGlzLl9jbHVzdGVyQ2VsbHNEb3RJZC5zZXRWYWx1ZSh0aGlzLl9jbHVzdGVyQ2VsbHNEb3REYXRhKTtcbiAgICAgICAgdGhpcy5fY2x1c3RlckNlbGxzTWF4SWQuc2V0VmFsdWUodGhpcy5fY2x1c3RlckNlbGxzTWF4RGF0YSk7XG4gICAgICAgIHRoaXMuX2NsdXN0ZXJDb21wcmVzc2lvbkxpbWl0MElkLnNldFZhbHVlKHRoaXMuX2NsdXN0ZXJDb21wcmVzc2lvbkxpbWl0MERhdGEpO1xuICAgIH1cblxuICAgIC8vIGV2YWx1YXRlcyBtaW4gYW5kIG1heCBjb29yZGluYXRlcyBvZiBBQUJCIG9mIHRoZSBsaWdodCBpbiB0aGUgY2VsbCBzcGFjZVxuICAgIGV2YWxMaWdodENlbGxNaW5NYXgoY2x1c3RlcmVkTGlnaHQsIG1pbiwgbWF4KSB7XG5cbiAgICAgICAgLy8gbWluIHBvaW50IG9mIEFBQkIgaW4gY2VsbCBzcGFjZVxuICAgICAgICBtaW4uY29weShjbHVzdGVyZWRMaWdodC5taW4pO1xuICAgICAgICBtaW4uc3ViKHRoaXMuYm91bmRzTWluKTtcbiAgICAgICAgbWluLmRpdih0aGlzLmJvdW5kc0RlbHRhKTtcbiAgICAgICAgbWluLm11bDIobWluLCB0aGlzLmNlbGxzKTtcbiAgICAgICAgbWluLmZsb29yKCk7XG5cbiAgICAgICAgLy8gbWF4IHBvaW50IG9mIEFBQkIgaW4gY2VsbCBzcGFjZVxuICAgICAgICBtYXguY29weShjbHVzdGVyZWRMaWdodC5tYXgpO1xuICAgICAgICBtYXguc3ViKHRoaXMuYm91bmRzTWluKTtcbiAgICAgICAgbWF4LmRpdih0aGlzLmJvdW5kc0RlbHRhKTtcbiAgICAgICAgbWF4Lm11bDIobWF4LCB0aGlzLmNlbGxzKTtcbiAgICAgICAgbWF4LmNlaWwoKTtcblxuICAgICAgICAvLyBjbGFtcCB0byBsaW1pdHNcbiAgICAgICAgbWluLm1heChWZWMzLlpFUk8pO1xuICAgICAgICBtYXgubWluKHRoaXMuX2NlbGxzTGltaXQpO1xuICAgIH1cblxuICAgIGNvbGxlY3RMaWdodHMobGlnaHRzKSB7XG5cbiAgICAgICAgY29uc3QgbWF4TGlnaHRzID0gdGhpcy5saWdodHNCdWZmZXIubWF4TGlnaHRzO1xuXG4gICAgICAgIC8vIHNraXAgaW5kZXggMCBhcyB0aGF0IGlzIHVzZWQgZm9yIHVudXNlZCBsaWdodFxuICAgICAgICBjb25zdCB1c2VkTGlnaHRzID0gdGhpcy5fdXNlZExpZ2h0cztcbiAgICAgICAgbGV0IGxpZ2h0SW5kZXggPSAxO1xuXG4gICAgICAgIGxpZ2h0cy5mb3JFYWNoKChsaWdodCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcnVudGltZUxpZ2h0ID0gISEobGlnaHQubWFzayAmIChNQVNLX0FGRkVDVF9EWU5BTUlDIHwgTUFTS19BRkZFQ1RfTElHSFRNQVBQRUQpKTtcbiAgICAgICAgICAgIGlmIChsaWdodC5lbmFibGVkICYmIGxpZ2h0LnR5cGUgIT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCAmJiBsaWdodC52aXNpYmxlVGhpc0ZyYW1lICYmIGxpZ2h0LmludGVuc2l0eSA+IDAgJiYgcnVudGltZUxpZ2h0KSB7XG5cbiAgICAgICAgICAgICAgICAvLyB3aXRoaW4gbGlnaHQgbGltaXRcbiAgICAgICAgICAgICAgICBpZiAobGlnaHRJbmRleCA8IG1heExpZ2h0cykge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldXNlIGFsbG9jYXRlZCBzcG90XG4gICAgICAgICAgICAgICAgICAgIGxldCBjbHVzdGVyZWRMaWdodDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0SW5kZXggPCB1c2VkTGlnaHRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2x1c3RlcmVkTGlnaHQgPSB1c2VkTGlnaHRzW2xpZ2h0SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxsb2NhdGUgbmV3IHNwb3RcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsdXN0ZXJlZExpZ2h0ID0gbmV3IENsdXN0ZXJMaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlZExpZ2h0cy5wdXNoKGNsdXN0ZXJlZExpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIHN0b3JlIGxpZ2h0IHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgICAgY2x1c3RlcmVkTGlnaHQubGlnaHQgPSBsaWdodDtcbiAgICAgICAgICAgICAgICAgICAgbGlnaHQuZ2V0Qm91bmRpbmdCb3godGVtcEJveCk7XG4gICAgICAgICAgICAgICAgICAgIGNsdXN0ZXJlZExpZ2h0Lm1pbi5jb3B5KHRlbXBCb3guZ2V0TWluKCkpO1xuICAgICAgICAgICAgICAgICAgICBjbHVzdGVyZWRMaWdodC5tYXguY29weSh0ZW1wQm94LmdldE1heCgpKTtcblxuICAgICAgICAgICAgICAgICAgICBsaWdodEluZGV4Kys7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgRGVidWcud2Fybk9uY2UoYENsdXN0ZXJlZCBsaWdodGluZzogbW9yZSB0aGFuICR7bWF4TGlnaHRzIC0gMX0gbGlnaHRzIGluIHRoZSBmcmFtZSwgaWdub3Jpbmcgc29tZS5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHVzZWRMaWdodHMubGVuZ3RoID0gbGlnaHRJbmRleDtcbiAgICB9XG5cbiAgICAvLyBldmFsdWF0ZSB0aGUgYXJlYSBhbGwgbGlnaHRzIGNvdmVyXG4gICAgZXZhbHVhdGVCb3VuZHMoKSB7XG5cbiAgICAgICAgY29uc3QgdXNlZExpZ2h0cyA9IHRoaXMuX3VzZWRMaWdodHM7XG5cbiAgICAgICAgLy8gYm91bmRzIG9mIHRoZSBhcmVhIHRoZSBsaWdodHMgY292ZXJcbiAgICAgICAgY29uc3QgbWluID0gdGhpcy5ib3VuZHNNaW47XG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMuYm91bmRzTWF4O1xuXG4gICAgICAgIC8vIGlmIGF0IGxlYXN0IG9uZSBsaWdodCAoaW5kZXggMCBpcyBudWxsLCBzbyBpZ25vcmUgdGhhdCBvbmUpXG4gICAgICAgIGlmICh1c2VkTGlnaHRzLmxlbmd0aCA+IDEpIHtcblxuICAgICAgICAgICAgLy8gQUFCQiBvZiB0aGUgZmlyc3QgbGlnaHRcbiAgICAgICAgICAgIG1pbi5jb3B5KHVzZWRMaWdodHNbMV0ubWluKTtcbiAgICAgICAgICAgIG1heC5jb3B5KHVzZWRMaWdodHNbMV0ubWF4KTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDI7IGkgPCB1c2VkTGlnaHRzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBleHBhbmQgYnkgQUFCQiBvZiB0aGlzIGxpZ2h0XG4gICAgICAgICAgICAgICAgbWluLm1pbih1c2VkTGlnaHRzW2ldLm1pbik7XG4gICAgICAgICAgICAgICAgbWF4Lm1heCh1c2VkTGlnaHRzW2ldLm1heCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIC8vIGFueSBzbWFsbCB2b2x1bWUgaWYgbm8gbGlnaHRzXG4gICAgICAgICAgICBtaW4uc2V0KDAsIDAsIDApO1xuICAgICAgICAgICAgbWF4LnNldCgxLCAxLCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGJvdW5kcyByYW5nZVxuICAgICAgICB0aGlzLmJvdW5kc0RlbHRhLnN1YjIobWF4LCBtaW4pO1xuXG4gICAgICAgIHRoaXMubGlnaHRzQnVmZmVyLnNldEJvdW5kcyhtaW4sIHRoaXMuYm91bmRzRGVsdGEpO1xuICAgIH1cblxuICAgIC8vIGV2YWx1YXRlIHJhbmdlcyBvZiB2YXJpYWJsZXMgY29tcHJlc3NlZCB0byA4Yml0IHRleHR1cmUgdG8gYWxsb3cgdGhlaXIgc2NhbGluZyB0byAwLi4xIHJhbmdlXG4gICAgZXZhbHVhdGVDb21wcmVzc2lvbkxpbWl0cyhnYW1tYUNvcnJlY3Rpb24pIHtcblxuICAgICAgICBsZXQgbWF4QXR0ZW51YXRpb24gPSAwO1xuICAgICAgICBsZXQgbWF4Q29sb3JWYWx1ZSA9IDA7XG5cbiAgICAgICAgY29uc3QgdXNlZExpZ2h0cyA9IHRoaXMuX3VzZWRMaWdodHM7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdXNlZExpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbGlnaHQgPSB1c2VkTGlnaHRzW2ldLmxpZ2h0O1xuICAgICAgICAgICAgbWF4QXR0ZW51YXRpb24gPSBNYXRoLm1heChsaWdodC5hdHRlbnVhdGlvbkVuZCwgbWF4QXR0ZW51YXRpb24pO1xuXG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IGdhbW1hQ29ycmVjdGlvbiA/IGxpZ2h0Ll9saW5lYXJGaW5hbENvbG9yIDogbGlnaHQuX2ZpbmFsQ29sb3I7XG4gICAgICAgICAgICBtYXhDb2xvclZhbHVlID0gTWF0aC5tYXgoY29sb3JbMF0sIG1heENvbG9yVmFsdWUpO1xuICAgICAgICAgICAgbWF4Q29sb3JWYWx1ZSA9IE1hdGgubWF4KGNvbG9yWzFdLCBtYXhDb2xvclZhbHVlKTtcbiAgICAgICAgICAgIG1heENvbG9yVmFsdWUgPSBNYXRoLm1heChjb2xvclsyXSwgbWF4Q29sb3JWYWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpbmNyZWFzZSBzbGlnaHRseSBhcyBjb21wcmVzc2lvbiBuZWVkcyB2YWx1ZSA8IDFcbiAgICAgICAgdGhpcy5fbWF4QXR0ZW51YXRpb24gPSBtYXhBdHRlbnVhdGlvbiArIGVwc2lsb247XG4gICAgICAgIHRoaXMuX21heENvbG9yVmFsdWUgPSBtYXhDb2xvclZhbHVlICsgZXBzaWxvbjtcblxuICAgICAgICB0aGlzLmxpZ2h0c0J1ZmZlci5zZXRDb21wcmVzc2lvblJhbmdlcyh0aGlzLl9tYXhBdHRlbnVhdGlvbiwgdGhpcy5fbWF4Q29sb3JWYWx1ZSk7XG4gICAgfVxuXG4gICAgdXBkYXRlQ2x1c3RlcnMoZ2FtbWFDb3JyZWN0aW9uKSB7XG5cbiAgICAgICAgLy8gY2xlYXIgY2x1c3RlcnNcbiAgICAgICAgdGhpcy5jb3VudHMuZmlsbCgwKTtcbiAgICAgICAgdGhpcy5jbHVzdGVycy5maWxsKDApO1xuXG4gICAgICAgIC8vIGxvY2FsIGFjY2Vzc29yc1xuICAgICAgICBjb25zdCBkaXZYID0gdGhpcy5fY2VsbHMueDtcbiAgICAgICAgY29uc3QgZGl2WiA9IHRoaXMuX2NlbGxzLno7XG4gICAgICAgIGNvbnN0IGNvdW50cyA9IHRoaXMuY291bnRzO1xuICAgICAgICBjb25zdCBsaW1pdCA9IHRoaXMuX21heENlbGxMaWdodENvdW50O1xuICAgICAgICBjb25zdCBjbHVzdGVycyA9IHRoaXMuY2x1c3RlcnM7XG4gICAgICAgIGNvbnN0IHBpeGVsc1BlckNlbGxDb3VudCA9IHRoaXMuX3BpeGVsc1BlckNlbGxDb3VudDtcbiAgICAgICAgbGV0IHRvb01hbnlMaWdodHMgPSBmYWxzZTtcblxuICAgICAgICAvLyBzdGFydGVkIGZyb20gaW5kZXggMSwgemVybyBpcyBcIm5vLWxpZ2h0XCIgaW5kZXhcbiAgICAgICAgY29uc3QgdXNlZExpZ2h0cyA9IHRoaXMuX3VzZWRMaWdodHM7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdXNlZExpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY2x1c3RlcmVkTGlnaHQgPSB1c2VkTGlnaHRzW2ldO1xuICAgICAgICAgICAgY29uc3QgbGlnaHQgPSBjbHVzdGVyZWRMaWdodC5saWdodDtcblxuICAgICAgICAgICAgLy8gYWRkIGxpZ2h0IGRhdGEgaW50byB0ZXh0dXJlc1xuICAgICAgICAgICAgdGhpcy5saWdodHNCdWZmZXIuYWRkTGlnaHREYXRhKGxpZ2h0LCBpLCBnYW1tYUNvcnJlY3Rpb24pO1xuXG4gICAgICAgICAgICAvLyBsaWdodCdzIGJvdW5kcyBpbiBjZWxsIHNwYWNlXG4gICAgICAgICAgICB0aGlzLmV2YWxMaWdodENlbGxNaW5NYXgoY2x1c3RlcmVkTGlnaHQsIHRlbXBNaW4zLCB0ZW1wTWF4Myk7XG5cbiAgICAgICAgICAgIGNvbnN0IHhTdGFydCA9IHRlbXBNaW4zLng7XG4gICAgICAgICAgICBjb25zdCB4RW5kID0gdGVtcE1heDMueDtcbiAgICAgICAgICAgIGNvbnN0IHlTdGFydCA9IHRlbXBNaW4zLnk7XG4gICAgICAgICAgICBjb25zdCB5RW5kID0gdGVtcE1heDMueTtcbiAgICAgICAgICAgIGNvbnN0IHpTdGFydCA9IHRlbXBNaW4zLno7XG4gICAgICAgICAgICBjb25zdCB6RW5kID0gdGVtcE1heDMuejtcblxuICAgICAgICAgICAgLy8gYWRkIHRoZSBsaWdodCB0byB0aGUgY2VsbHNcbiAgICAgICAgICAgIGZvciAobGV0IHggPSB4U3RhcnQ7IHggPD0geEVuZDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeiA9IHpTdGFydDsgeiA8PSB6RW5kOyB6KyspIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeSA9IHlTdGFydDsgeSA8PSB5RW5kOyB5KyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2x1c3RlckluZGV4ID0geCArIGRpdlggKiAoeiArIHkgKiBkaXZaKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gY291bnRzW2NsdXN0ZXJJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQgPCBsaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsdXN0ZXJzW3BpeGVsc1BlckNlbGxDb3VudCAqIGNsdXN0ZXJJbmRleCAqIDQgKyBjb3VudF0gPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50c1tjbHVzdGVySW5kZXhdID0gY291bnQgKyAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb01hbnlMaWdodHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyAjaWYgX0RFQlVHXG4gICAgICAgIGlmICh0b29NYW55TGlnaHRzKSB7XG4gICAgICAgICAgICBjb25zdCByZXBvcnRMaW1pdCA9IDU7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXBvcnRDb3VudCA8IHJlcG9ydExpbWl0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdUb28gbWFueSBsaWdodHMgaW4gbGlnaHQgY2x1c3RlciAnICsgdGhpcy5uYW1lICsgJywgcGxlYXNlIGFkanVzdCBwYXJhbWV0ZXJzLicgK1xuICAgICAgICAgICAgICAgICh0aGlzLnJlcG9ydENvdW50ID09PSByZXBvcnRMaW1pdCAtIDEgPyAnIEdpdmluZyB1cCBvbiByZXBvcnRpbmcgaXQuJyA6ICcnKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXBvcnRDb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vICNlbmRpZlxuICAgIH1cblxuICAgIC8vIGludGVybmFsIHVwZGF0ZSBvZiB0aGUgY2x1c3RlciBkYXRhLCBleGVjdXRlcyBvbmNlIHBlciBmcmFtZVxuICAgIHVwZGF0ZShsaWdodHMsIGdhbW1hQ29ycmVjdGlvbiwgbGlnaHRpbmdQYXJhbXMpIHtcbiAgICAgICAgdGhpcy51cGRhdGVQYXJhbXMobGlnaHRpbmdQYXJhbXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNlbGxzKCk7XG4gICAgICAgIHRoaXMuY29sbGVjdExpZ2h0cyhsaWdodHMpO1xuICAgICAgICB0aGlzLmV2YWx1YXRlQm91bmRzKCk7XG4gICAgICAgIHRoaXMuZXZhbHVhdGVDb21wcmVzc2lvbkxpbWl0cyhnYW1tYUNvcnJlY3Rpb24pO1xuICAgICAgICB0aGlzLnVwZGF0ZUNsdXN0ZXJzKGdhbW1hQ29ycmVjdGlvbik7XG4gICAgICAgIHRoaXMudXBsb2FkVGV4dHVyZXMoKTtcbiAgICB9XG5cbiAgICAvLyBjYWxsZWQgb24gYWxyZWFkeSB1cGRhdGVkIGNsdXN0ZXJzLCBhY3RpdmF0ZXMgZm9yIHJlbmRlcmluZyBieSBzZXR0aW5nIHVwIHVuaWZvcm1zIC8gdGV4dHVyZXMgb24gdGhlIGRldmljZVxuICAgIGFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVVuaWZvcm1zKCk7XG4gICAgfVxufVxuXG5leHBvcnQgeyBXb3JsZENsdXN0ZXJzIH07XG4iXSwibmFtZXMiOlsidGVtcFZlYzMiLCJWZWMzIiwidGVtcE1pbjMiLCJ0ZW1wTWF4MyIsInRlbXBCb3giLCJCb3VuZGluZ0JveCIsImVwc2lsb24iLCJtYXhUZXh0dXJlU2l6ZSIsIkNsdXN0ZXJMaWdodCIsImNvbnN0cnVjdG9yIiwibGlnaHQiLCJtaW4iLCJtYXgiLCJXb3JsZENsdXN0ZXJzIiwiZGV2aWNlIiwibmFtZSIsInJlcG9ydENvdW50IiwiYm91bmRzTWluIiwiYm91bmRzTWF4IiwiYm91bmRzRGVsdGEiLCJfY2VsbHMiLCJfY2VsbHNMaW1pdCIsImNlbGxzIiwiX21heENlbGxMaWdodENvdW50IiwiX3BpeGVsc1BlckNlbGxDb3VudCIsIm1heENlbGxMaWdodENvdW50IiwiX21heEF0dGVudWF0aW9uIiwiX21heENvbG9yVmFsdWUiLCJfdXNlZExpZ2h0cyIsInB1c2giLCJsaWdodHNCdWZmZXIiLCJMaWdodHNCdWZmZXIiLCJyZWdpc3RlclVuaWZvcm1zIiwiY291bnQiLCJtYXRoIiwicm91bmRVcCIsIl9jZWxsc0RpcnR5IiwidmFsdWUiLCJjb3B5IiwiZmxvb3IiLCJlcXVhbHMiLCJzdWIiLCJPTkUiLCJkZXN0cm95IiwicmVsZWFzZUNsdXN0ZXJUZXh0dXJlIiwiY2x1c3RlclRleHR1cmUiLCJfY2x1c3RlcldvcmxkVGV4dHVyZUlkIiwic2NvcGUiLCJyZXNvbHZlIiwiX2NsdXN0ZXJQaXhlbHNQZXJDZWxsSWQiLCJfY2x1c3RlclRleHR1cmVTaXplSWQiLCJfY2x1c3RlclRleHR1cmVTaXplRGF0YSIsIkZsb2F0MzJBcnJheSIsIl9jbHVzdGVyQm91bmRzTWluSWQiLCJfY2x1c3RlckJvdW5kc01pbkRhdGEiLCJfY2x1c3RlckJvdW5kc0RlbHRhSWQiLCJfY2x1c3RlckJvdW5kc0RlbHRhRGF0YSIsIl9jbHVzdGVyQ2VsbHNDb3VudEJ5Qm91bmRzU2l6ZUlkIiwiX2NsdXN0ZXJDZWxsc0NvdW50QnlCb3VuZHNTaXplRGF0YSIsIl9jbHVzdGVyQ2VsbHNEb3RJZCIsIl9jbHVzdGVyQ2VsbHNEb3REYXRhIiwiX2NsdXN0ZXJDZWxsc01heElkIiwiX2NsdXN0ZXJDZWxsc01heERhdGEiLCJfY2x1c3RlckNvbXByZXNzaW9uTGltaXQwSWQiLCJfY2x1c3RlckNvbXByZXNzaW9uTGltaXQwRGF0YSIsInVwZGF0ZVBhcmFtcyIsImxpZ2h0aW5nUGFyYW1zIiwibWF4TGlnaHRzUGVyQ2VsbCIsImNvb2tpZXNFbmFibGVkIiwic2hhZG93c0VuYWJsZWQiLCJhcmVhTGlnaHRzRW5hYmxlZCIsInVwZGF0ZUNlbGxzIiwiY3giLCJ4IiwiY3kiLCJ5IiwiY3oiLCJ6IiwibnVtQ2VsbHMiLCJ0b3RhbFBpeGVscyIsIndpZHRoIiwiTWF0aCIsImNlaWwiLCJzcXJ0IiwiaGVpZ2h0IiwiRGVidWciLCJhc3NlcnQiLCJjbHVzdGVycyIsIlVpbnQ4Q2xhbXBlZEFycmF5IiwiY291bnRzIiwiSW50MzJBcnJheSIsImNyZWF0ZVRleHR1cmUiLCJQSVhFTEZPUk1BVF9SOF9HOF9COF9BOCIsInVwbG9hZFRleHR1cmVzIiwibG9jayIsInNldCIsInVubG9jayIsInVwZGF0ZVVuaWZvcm1zIiwic2V0VmFsdWUiLCJldmFsTGlnaHRDZWxsTWluTWF4IiwiY2x1c3RlcmVkTGlnaHQiLCJkaXYiLCJtdWwyIiwiWkVSTyIsImNvbGxlY3RMaWdodHMiLCJsaWdodHMiLCJtYXhMaWdodHMiLCJ1c2VkTGlnaHRzIiwibGlnaHRJbmRleCIsImZvckVhY2giLCJydW50aW1lTGlnaHQiLCJtYXNrIiwiTUFTS19BRkZFQ1RfRFlOQU1JQyIsIk1BU0tfQUZGRUNUX0xJR0hUTUFQUEVEIiwiZW5hYmxlZCIsInR5cGUiLCJMSUdIVFRZUEVfRElSRUNUSU9OQUwiLCJ2aXNpYmxlVGhpc0ZyYW1lIiwiaW50ZW5zaXR5IiwibGVuZ3RoIiwiZ2V0Qm91bmRpbmdCb3giLCJnZXRNaW4iLCJnZXRNYXgiLCJ3YXJuT25jZSIsImV2YWx1YXRlQm91bmRzIiwiaSIsInN1YjIiLCJzZXRCb3VuZHMiLCJldmFsdWF0ZUNvbXByZXNzaW9uTGltaXRzIiwiZ2FtbWFDb3JyZWN0aW9uIiwibWF4QXR0ZW51YXRpb24iLCJtYXhDb2xvclZhbHVlIiwiYXR0ZW51YXRpb25FbmQiLCJjb2xvciIsIl9saW5lYXJGaW5hbENvbG9yIiwiX2ZpbmFsQ29sb3IiLCJzZXRDb21wcmVzc2lvblJhbmdlcyIsInVwZGF0ZUNsdXN0ZXJzIiwiZmlsbCIsImRpdlgiLCJkaXZaIiwibGltaXQiLCJwaXhlbHNQZXJDZWxsQ291bnQiLCJ0b29NYW55TGlnaHRzIiwiYWRkTGlnaHREYXRhIiwieFN0YXJ0IiwieEVuZCIsInlTdGFydCIsInlFbmQiLCJ6U3RhcnQiLCJ6RW5kIiwiY2x1c3RlckluZGV4IiwicmVwb3J0TGltaXQiLCJjb25zb2xlIiwid2FybiIsInVwZGF0ZSIsImFjdGl2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
