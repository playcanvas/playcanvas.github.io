/**
 * @license
 * PlayCanvas Engine v1.57.0 revision f1998a31e (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../core/debug.js';
import { EventHandler } from '../core/event-handler.js';
import { ScriptComponent } from '../framework/components/script/component.js';
import { ScriptAttributes } from './script-attributes.js';

const funcNameRegex = new RegExp('^\\s*function(?:\\s|\\s*\\/\\*.*\\*\\/\\s*)+([^\\(\\s\\/]*)\\s*');

class ScriptType extends EventHandler {
  constructor(args) {
    super();
    this.app = void 0;
    this.entity = void 0;
    this._enabled = void 0;
    this._enabledOld = void 0;
    this._initialized = void 0;
    this._postInitialized = void 0;
    this.__destroyed = void 0;
    this.__attributes = void 0;
    this.__attributesRaw = void 0;
    this.__scriptType = void 0;
    this.__executionOrder = void 0;
    this.initScriptType(args);
  }

  set enabled(value) {
    this._enabled = !!value;
    if (this.enabled === this._enabledOld) return;
    this._enabledOld = this.enabled;
    this.fire(this.enabled ? 'enable' : 'disable');
    this.fire('state', this.enabled);

    if (!this._initialized && this.enabled) {
      this._initialized = true;

      this.__initializeAttributes(true);

      if (this.initialize) this.entity.script._scriptMethod(this, ScriptComponent.scriptMethods.initialize);
    }

    if (this._initialized && !this._postInitialized && this.enabled && !this.entity.script._beingEnabled) {
      this._postInitialized = true;
      if (this.postInitialize) this.entity.script._scriptMethod(this, ScriptComponent.scriptMethods.postInitialize);
    }
  }

  get enabled() {
    return this._enabled && !this._destroyed && this.entity.script.enabled && this.entity.enabled;
  }

  initScriptType(args) {
    const script = this.constructor;
    Debug.assert(args && args.app && args.entity, `script [${script.__name}] has missing arguments in constructor`);
    this.app = args.app;
    this.entity = args.entity;
    this._enabled = typeof args.enabled === 'boolean' ? args.enabled : true;
    this._enabledOld = this.enabled;
    this.__destroyed = false;
    this.__attributes = {};
    this.__attributesRaw = args.attributes || {};
    this.__scriptType = script;
    this.__executionOrder = -1;
  }

  static __getScriptName(constructorFn) {
    if (typeof constructorFn !== 'function') return undefined;
    if ('name' in Function.prototype) return constructorFn.name;
    if (constructorFn === Function || constructorFn === Function.prototype.constructor) return 'Function';
    const match = ('' + constructorFn).match(funcNameRegex);
    return match ? match[1] : undefined;
  }

  static get scriptName() {
    return this.__name;
  }

  static get attributes() {
    if (!this.hasOwnProperty('__attributes')) this.__attributes = new ScriptAttributes(this);
    return this.__attributes;
  }

  __initializeAttributes(force) {
    if (!force && !this.__attributesRaw) return;

    for (const key in this.__scriptType.attributes.index) {
      if (this.__attributesRaw && this.__attributesRaw.hasOwnProperty(key)) {
        this[key] = this.__attributesRaw[key];
      } else if (!this.__attributes.hasOwnProperty(key)) {
        if (this.__scriptType.attributes.index[key].hasOwnProperty('default')) {
          this[key] = this.__scriptType.attributes.index[key].default;
        } else {
          this[key] = null;
        }
      }
    }

    this.__attributesRaw = null;
  }

  static extend(methods) {
    for (const key in methods) {
      if (!methods.hasOwnProperty(key)) continue;
      this.prototype[key] = methods[key];
    }
  }

}

ScriptType.__name = null;

export { ScriptType };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyaXB0LXR5cGUuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zY3JpcHQvc2NyaXB0LXR5cGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVidWcgfSBmcm9tICcuLi9jb3JlL2RlYnVnLmpzJztcbmltcG9ydCB7IEV2ZW50SGFuZGxlciB9IGZyb20gJy4uL2NvcmUvZXZlbnQtaGFuZGxlci5qcyc7XG5cbmltcG9ydCB7IFNjcmlwdENvbXBvbmVudCB9IGZyb20gJy4uL2ZyYW1ld29yay9jb21wb25lbnRzL3NjcmlwdC9jb21wb25lbnQuanMnO1xuXG5pbXBvcnQgeyBTY3JpcHRBdHRyaWJ1dGVzIH0gZnJvbSAnLi9zY3JpcHQtYXR0cmlidXRlcy5qcyc7XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9mcmFtZXdvcmsvYXBwLWJhc2UuanMnKS5BcHBCYXNlfSBBcHBCYXNlICovXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vZnJhbWV3b3JrL2VudGl0eS5qcycpLkVudGl0eX0gRW50aXR5ICovXG5cbmNvbnN0IGZ1bmNOYW1lUmVnZXggPSBuZXcgUmVnRXhwKCdeXFxcXHMqZnVuY3Rpb24oPzpcXFxcc3xcXFxccypcXFxcL1xcXFwqLipcXFxcKlxcXFwvXFxcXHMqKSsoW15cXFxcKFxcXFxzXFxcXC9dKilcXFxccyonKTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSB0eXBlIG9mIGEgc2NyaXB0LiBJdCBpcyByZXR1cm5lZCBieSB7QGxpbmsgY3JlYXRlU2NyaXB0fS4gQWxzbyByZWZlcnJlZCB0byBhc1xuICogU2NyaXB0IFR5cGUuXG4gKlxuICogVGhlIHR5cGUgaXMgdG8gYmUgZXh0ZW5kZWQgdXNpbmcgaXRzIEphdmFTY3JpcHQgcHJvdG90eXBlLiBUaGVyZSBpcyBhIGxpc3Qgb2YgbWV0aG9kcyB0aGF0IHdpbGxcbiAqIGJlIGV4ZWN1dGVkIGJ5IHRoZSBlbmdpbmUgb24gaW5zdGFuY2VzIG9mIHRoaXMgdHlwZSwgc3VjaCBhczpcbiAqXG4gKiAtIGBpbml0aWFsaXplYFxuICogLSBgcG9zdEluaXRpYWxpemVgXG4gKiAtIGB1cGRhdGVgXG4gKiAtIGBwb3N0VXBkYXRlYFxuICogLSBgc3dhcGBcbiAqXG4gKiBgaW5pdGlhbGl6ZWAgYW5kIGBwb3N0SW5pdGlhbGl6ZWAgLSBhcmUgY2FsbGVkIChpZiBkZWZpbmVkKSB3aGVuIGEgc2NyaXB0IGlzIGFib3V0IHRvIHJ1biBmb3JcbiAqIHRoZSBmaXJzdCB0aW1lIC0gYHBvc3RJbml0aWFsaXplYCB3aWxsIHJ1biBhZnRlciBhbGwgYGluaXRpYWxpemVgIG1ldGhvZHMgYXJlIGV4ZWN1dGVkIGluIHRoZVxuICogc2FtZSB0aWNrIG9yIGVuYWJsaW5nIGNoYWluIG9mIGFjdGlvbnMuXG4gKlxuICogYHVwZGF0ZWAgYW5kIGBwb3N0VXBkYXRlYCAtIGFyZSBjYWxsZWQgKGlmIGRlZmluZWQpIGZvciBlbmFibGVkIChydW5uaW5nIHN0YXRlKSBzY3JpcHRzIG9uIGVhY2hcbiAqIHRpY2suXG4gKlxuICogYHN3YXBgIC0gaXMgY2FsbGVkIHdoZW4gYSBTY3JpcHRUeXBlIHRoYXQgYWxyZWFkeSBleGlzdHMgaW4gdGhlIHJlZ2lzdHJ5IGdldHMgcmVkZWZpbmVkLiBJZiB0aGVcbiAqIG5ldyBTY3JpcHRUeXBlIGhhcyBhIGBzd2FwYCBtZXRob2QgaW4gaXRzIHByb3RvdHlwZSwgdGhlbiBpdCB3aWxsIGJlIGV4ZWN1dGVkIHRvIHBlcmZvcm0gaG90LVxuICogcmVsb2FkIGF0IHJ1bnRpbWUuXG4gKlxuICogQGF1Z21lbnRzIEV2ZW50SGFuZGxlclxuICovXG5jbGFzcyBTY3JpcHRUeXBlIGV4dGVuZHMgRXZlbnRIYW5kbGVyIHtcbiAgICAvKipcbiAgICAgKiBUaGUge0BsaW5rIEFwcEJhc2V9IHRoYXQgdGhlIGluc3RhbmNlIG9mIHRoaXMgdHlwZSBiZWxvbmdzIHRvLlxuICAgICAqXG4gICAgICogQHR5cGUge0FwcEJhc2V9XG4gICAgICovXG4gICAgYXBwO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHtAbGluayBFbnRpdHl9IHRoYXQgdGhlIGluc3RhbmNlIG9mIHRoaXMgdHlwZSBiZWxvbmdzIHRvLlxuICAgICAqXG4gICAgICogQHR5cGUge0VudGl0eX1cbiAgICAgKi9cbiAgICBlbnRpdHk7XG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfZW5hYmxlZDtcblxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9lbmFibGVkT2xkO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX2luaXRpYWxpemVkO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX3Bvc3RJbml0aWFsaXplZDtcblxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9fZGVzdHJveWVkO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX19hdHRyaWJ1dGVzO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX19hdHRyaWJ1dGVzUmF3O1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX19zY3JpcHRUeXBlO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG9yZGVyIGluIHRoZSBzY3JpcHQgY29tcG9uZW50IHRoYXQgdGhlIG1ldGhvZHMgb2YgdGhpcyBzY3JpcHQgaW5zdGFuY2Ugd2lsbCBydW5cbiAgICAgKiByZWxhdGl2ZSB0byBvdGhlciBzY3JpcHQgaW5zdGFuY2VzIGluIHRoZSBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX19leGVjdXRpb25PcmRlcjtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBTY3JpcHRUeXBlIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGFyZ3MgLSBUaGUgaW5wdXQgYXJndW1lbnRzIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0FwcEJhc2V9IGFyZ3MuYXBwIC0gVGhlIHtAbGluayBBcHBCYXNlfSB0aGF0IGlzIHJ1bm5pbmcgdGhlIHNjcmlwdC5cbiAgICAgKiBAcGFyYW0ge0VudGl0eX0gYXJncy5lbnRpdHkgLSBUaGUge0BsaW5rIEVudGl0eX0gdGhhdCB0aGUgc2NyaXB0IGlzIGF0dGFjaGVkIHRvLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pbml0U2NyaXB0VHlwZShhcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIGEgc2NyaXB0IGluc3RhbmNlIGJlY29tZXMgZW5hYmxlZC5cbiAgICAgKlxuICAgICAqIEBldmVudCBTY3JpcHRUeXBlI2VuYWJsZVxuICAgICAqIEBleGFtcGxlXG4gICAgICogUGxheWVyQ29udHJvbGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgKiAgICAgdGhpcy5vbignZW5hYmxlJywgZnVuY3Rpb24gKCkge1xuICAgICAqICAgICAgICAgLy8gU2NyaXB0IEluc3RhbmNlIGlzIG5vdyBlbmFibGVkXG4gICAgICogICAgIH0pO1xuICAgICAqIH07XG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIGEgc2NyaXB0IGluc3RhbmNlIGJlY29tZXMgZGlzYWJsZWQuXG4gICAgICpcbiAgICAgKiBAZXZlbnQgU2NyaXB0VHlwZSNkaXNhYmxlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBQbGF5ZXJDb250cm9sbGVyLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAqICAgICB0aGlzLm9uKCdkaXNhYmxlJywgZnVuY3Rpb24gKCkge1xuICAgICAqICAgICAgICAgLy8gU2NyaXB0IEluc3RhbmNlIGlzIG5vdyBkaXNhYmxlZFxuICAgICAqICAgICB9KTtcbiAgICAgKiB9O1xuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogRmlyZWQgd2hlbiBhIHNjcmlwdCBpbnN0YW5jZSBjaGFuZ2VzIHN0YXRlIHRvIGVuYWJsZWQgb3IgZGlzYWJsZWQuXG4gICAgICpcbiAgICAgKiBAZXZlbnQgU2NyaXB0VHlwZSNzdGF0ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCAtIFRydWUgaWYgbm93IGVuYWJsZWQsIEZhbHNlIGlmIGRpc2FibGVkLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogUGxheWVyQ29udHJvbGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgKiAgICAgdGhpcy5vbignc3RhdGUnLCBmdW5jdGlvbiAoZW5hYmxlZCkge1xuICAgICAqICAgICAgICAgY29uc29sZS5sb2coJ1NjcmlwdCBJbnN0YW5jZSBpcyBub3cgJyArIChlbmFibGVkID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJykpO1xuICAgICAqICAgICB9KTtcbiAgICAgKiB9O1xuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogRmlyZWQgd2hlbiBhIHNjcmlwdCBpbnN0YW5jZSBpcyBkZXN0cm95ZWQgYW5kIHJlbW92ZWQgZnJvbSBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAZXZlbnQgU2NyaXB0VHlwZSNkZXN0cm95XG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBQbGF5ZXJDb250cm9sbGVyLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAqICAgICB0aGlzLm9uKCdkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAqICAgICAgICAgLy8gbm8gbW9yZSBwYXJ0IG9mIGFuIGVudGl0eVxuICAgICAqICAgICAgICAgLy8gZ29vZCBwbGFjZSB0byBjbGVhbnVwIGVudGl0eSBmcm9tIGRlc3Ryb3llZCBzY3JpcHRcbiAgICAgKiAgICAgfSk7XG4gICAgICogfTtcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEZpcmVkIHdoZW4gYW55IHNjcmlwdCBhdHRyaWJ1dGUgaGFzIGJlZW4gY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEBldmVudCBTY3JpcHRUeXBlI2F0dHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIE5hbWUgb2YgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB2YWx1ZSAtIE5ldyB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gdmFsdWVPbGQgLSBPbGQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBQbGF5ZXJDb250cm9sbGVyLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAqICAgICB0aGlzLm9uKCdhdHRyJywgZnVuY3Rpb24gKG5hbWUsIHZhbHVlLCB2YWx1ZU9sZCkge1xuICAgICAqICAgICAgICAgY29uc29sZS5sb2cobmFtZSArICcgYmVlbiBjaGFuZ2VkIGZyb20gJyArIHZhbHVlT2xkICsgJyB0byAnICsgdmFsdWUpO1xuICAgICAqICAgICB9KTtcbiAgICAgKiB9O1xuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogRmlyZWQgd2hlbiBhIHNwZWNpZmljIHNjcmlwdCBhdHRyaWJ1dGUgaGFzIGJlZW4gY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEBldmVudCBTY3JpcHRUeXBlI2F0dHI6W25hbWVdXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHZhbHVlIC0gTmV3IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB2YWx1ZU9sZCAtIE9sZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIFBsYXllckNvbnRyb2xsZXIucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICogICAgIHRoaXMub24oJ2F0dHI6c3BlZWQnLCBmdW5jdGlvbiAodmFsdWUsIHZhbHVlT2xkKSB7XG4gICAgICogICAgICAgICBjb25zb2xlLmxvZygnc3BlZWQgYmVlbiBjaGFuZ2VkIGZyb20gJyArIHZhbHVlT2xkICsgJyB0byAnICsgdmFsdWUpO1xuICAgICAqICAgICB9KTtcbiAgICAgKiB9O1xuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogRmlyZWQgd2hlbiBhIHNjcmlwdCBpbnN0YW5jZSBoYWQgYW4gZXhjZXB0aW9uLiBUaGUgc2NyaXB0IGluc3RhbmNlIHdpbGwgYmUgYXV0b21hdGljYWxseVxuICAgICAqIGRpc2FibGVkLlxuICAgICAqXG4gICAgICogQGV2ZW50IFNjcmlwdFR5cGUjZXJyb3JcbiAgICAgKiBAcGFyYW0ge0Vycm9yfSBlcnIgLSBOYXRpdmUgSmF2YVNjcmlwdCBFcnJvciBvYmplY3Qgd2l0aCBkZXRhaWxzIG9mIGVycm9yLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgLSBUaGUgbWV0aG9kIG9mIHRoZSBzY3JpcHQgaW5zdGFuY2UgdGhhdCB0aGUgZXhjZXB0aW9uIG9yaWdpbmF0ZWQgZnJvbS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIFBsYXllckNvbnRyb2xsZXIucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICogICAgIHRoaXMub24oJ2Vycm9yJywgZnVuY3Rpb24gKGVyciwgbWV0aG9kKSB7XG4gICAgICogICAgICAgICAvLyBjYXVnaHQgYW4gZXhjZXB0aW9uXG4gICAgICogICAgICAgICBjb25zb2xlLmxvZyhlcnIuc3RhY2spO1xuICAgICAqICAgICB9KTtcbiAgICAgKiB9O1xuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiB0aGUgaW5zdGFuY2Ugb2YgdGhpcyB0eXBlIGlzIGluIHJ1bm5pbmcgc3RhdGUuIEZhbHNlIHdoZW4gc2NyaXB0IGlzIG5vdCBydW5uaW5nLFxuICAgICAqIGJlY2F1c2UgdGhlIEVudGl0eSBvciBhbnkgb2YgaXRzIHBhcmVudHMgYXJlIGRpc2FibGVkIG9yIHRoZSB7QGxpbmsgU2NyaXB0Q29tcG9uZW50fSBpc1xuICAgICAqIGRpc2FibGVkIG9yIHRoZSBTY3JpcHQgSW5zdGFuY2UgaXMgZGlzYWJsZWQuIFdoZW4gZGlzYWJsZWQgbm8gdXBkYXRlIG1ldGhvZHMgd2lsbCBiZSBjYWxsZWRcbiAgICAgKiBvbiBlYWNoIHRpY2suIGluaXRpYWxpemUgYW5kIHBvc3RJbml0aWFsaXplIG1ldGhvZHMgd2lsbCBydW4gb25jZSB3aGVuIHRoZSBzY3JpcHQgaW5zdGFuY2VcbiAgICAgKiBpcyBpbiBgZW5hYmxlZGAgc3RhdGUgZHVyaW5nIGFwcCB0aWNrLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgc2V0IGVuYWJsZWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fZW5hYmxlZCA9ICEhdmFsdWU7XG5cbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCA9PT0gdGhpcy5fZW5hYmxlZE9sZCkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuX2VuYWJsZWRPbGQgPSB0aGlzLmVuYWJsZWQ7XG4gICAgICAgIHRoaXMuZmlyZSh0aGlzLmVuYWJsZWQgPyAnZW5hYmxlJyA6ICdkaXNhYmxlJyk7XG4gICAgICAgIHRoaXMuZmlyZSgnc3RhdGUnLCB0aGlzLmVuYWJsZWQpO1xuXG4gICAgICAgIC8vIGluaXRpYWxpemUgc2NyaXB0IGlmIG5vdCBpbml0aWFsaXplZCB5ZXQgYW5kIHNjcmlwdCBpcyBlbmFibGVkXG4gICAgICAgIGlmICghdGhpcy5faW5pdGlhbGl6ZWQgJiYgdGhpcy5lbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XG5cbiAgICAgICAgICAgIHRoaXMuX19pbml0aWFsaXplQXR0cmlidXRlcyh0cnVlKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuaW5pdGlhbGl6ZSlcbiAgICAgICAgICAgICAgICB0aGlzLmVudGl0eS5zY3JpcHQuX3NjcmlwdE1ldGhvZCh0aGlzLCBTY3JpcHRDb21wb25lbnQuc2NyaXB0TWV0aG9kcy5pbml0aWFsaXplKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHBvc3QgaW5pdGlhbGl6ZSBzY3JpcHQgaWYgbm90IHBvc3QgaW5pdGlhbGl6ZWQgeWV0IGFuZCBzdGlsbCBlbmFibGVkXG4gICAgICAgIC8vIChpbml0aWFsaXplIG1pZ2h0IGhhdmUgZGlzYWJsZWQgdGhlIHNjcmlwdCBzbyBjaGVjayB0aGlzLmVuYWJsZWQgYWdhaW4pXG4gICAgICAgIC8vIFdhcm5pbmc6IERvIG5vdCBkbyB0aGlzIGlmIHRoZSBzY3JpcHQgY29tcG9uZW50IGlzIGN1cnJlbnRseSBiZWluZyBlbmFibGVkXG4gICAgICAgIC8vIGJlY2F1c2UgaW4gdGhpcyBjYXNlIHBvc3QgaW5pdGlhbGl6ZSBtdXN0IGJlIGNhbGxlZCBhZnRlciBhbGwgdGhlIHNjcmlwdHNcbiAgICAgICAgLy8gaW4gdGhlIHNjcmlwdCBjb21wb25lbnQgaGF2ZSBiZWVuIGluaXRpYWxpemVkIGZpcnN0XG4gICAgICAgIGlmICh0aGlzLl9pbml0aWFsaXplZCAmJiAhdGhpcy5fcG9zdEluaXRpYWxpemVkICYmIHRoaXMuZW5hYmxlZCAmJiAhdGhpcy5lbnRpdHkuc2NyaXB0Ll9iZWluZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Bvc3RJbml0aWFsaXplZCA9IHRydWU7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnBvc3RJbml0aWFsaXplKVxuICAgICAgICAgICAgICAgIHRoaXMuZW50aXR5LnNjcmlwdC5fc2NyaXB0TWV0aG9kKHRoaXMsIFNjcmlwdENvbXBvbmVudC5zY3JpcHRNZXRob2RzLnBvc3RJbml0aWFsaXplKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBlbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlZCAmJiAhdGhpcy5fZGVzdHJveWVkICYmIHRoaXMuZW50aXR5LnNjcmlwdC5lbmFibGVkICYmIHRoaXMuZW50aXR5LmVuYWJsZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHt7ZW50aXR5OiBFbnRpdHksIGFwcDogQXBwQmFzZX19IGFyZ3MgLSBUaGUgZW50aXR5IGFuZCBhcHAuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBpbml0U2NyaXB0VHlwZShhcmdzKSB7XG4gICAgICAgIGNvbnN0IHNjcmlwdCA9IHRoaXMuY29uc3RydWN0b3I7IC8vIGdldCBzY3JpcHQgdHlwZSwgaS5lLiBmdW5jdGlvbiAoY2xhc3MpXG4gICAgICAgIERlYnVnLmFzc2VydChhcmdzICYmIGFyZ3MuYXBwICYmIGFyZ3MuZW50aXR5LCBgc2NyaXB0IFske3NjcmlwdC5fX25hbWV9XSBoYXMgbWlzc2luZyBhcmd1bWVudHMgaW4gY29uc3RydWN0b3JgKTtcblxuICAgICAgICB0aGlzLmFwcCA9IGFyZ3MuYXBwO1xuICAgICAgICB0aGlzLmVudGl0eSA9IGFyZ3MuZW50aXR5O1xuXG4gICAgICAgIHRoaXMuX2VuYWJsZWQgPSB0eXBlb2YgYXJncy5lbmFibGVkID09PSAnYm9vbGVhbicgPyBhcmdzLmVuYWJsZWQgOiB0cnVlO1xuICAgICAgICB0aGlzLl9lbmFibGVkT2xkID0gdGhpcy5lbmFibGVkO1xuXG4gICAgICAgIHRoaXMuX19kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fX2F0dHJpYnV0ZXMgPSB7IH07XG4gICAgICAgIHRoaXMuX19hdHRyaWJ1dGVzUmF3ID0gYXJncy5hdHRyaWJ1dGVzIHx8IHsgfTsgLy8gbmVlZCBhdCBsZWFzdCBhbiBlbXB0eSBvYmplY3QgdG8gbWFrZSBzdXJlIGRlZmF1bHQgYXR0cmlidXRlcyBhcmUgaW5pdGlhbGl6ZWRcbiAgICAgICAgdGhpcy5fX3NjcmlwdFR5cGUgPSBzY3JpcHQ7XG4gICAgICAgIHRoaXMuX19leGVjdXRpb25PcmRlciA9IC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE5hbWUgb2YgYSBTY3JpcHQgVHlwZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBzdGF0aWMgX19uYW1lID0gbnVsbDsgLy8gV2lsbCBiZSBhc3NpZ25lZCB3aGVuIGNhbGxpbmcgY3JlYXRlU2NyaXB0IG9yIHJlZ2lzdGVyU2NyaXB0LlxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHsqfSBjb25zdHJ1Y3RvckZuIC0gVGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIG9mIHRoZSBzY3JpcHQgdHlwZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgc2NyaXB0IG5hbWUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBzdGF0aWMgX19nZXRTY3JpcHROYW1lKGNvbnN0cnVjdG9yRm4pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25zdHJ1Y3RvckZuICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoJ25hbWUnIGluIEZ1bmN0aW9uLnByb3RvdHlwZSkgcmV0dXJuIGNvbnN0cnVjdG9yRm4ubmFtZTtcbiAgICAgICAgaWYgKGNvbnN0cnVjdG9yRm4gPT09IEZ1bmN0aW9uIHx8IGNvbnN0cnVjdG9yRm4gPT09IEZ1bmN0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvcikgcmV0dXJuICdGdW5jdGlvbic7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gKCcnICsgY29uc3RydWN0b3JGbikubWF0Y2goZnVuY05hbWVSZWdleCk7XG4gICAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE5hbWUgb2YgYSBTY3JpcHQgVHlwZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd8bnVsbH1cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IHNjcmlwdE5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9fbmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaW50ZXJmYWNlIHRvIGRlZmluZSBhdHRyaWJ1dGVzIGZvciBTY3JpcHQgVHlwZXMuIFJlZmVyIHRvIHtAbGluayBTY3JpcHRBdHRyaWJ1dGVzfS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtTY3JpcHRBdHRyaWJ1dGVzfVxuICAgICAqIEBleGFtcGxlXG4gICAgICogdmFyIFBsYXllckNvbnRyb2xsZXIgPSBwYy5jcmVhdGVTY3JpcHQoJ3BsYXllckNvbnRyb2xsZXInKTtcbiAgICAgKlxuICAgICAqIFBsYXllckNvbnRyb2xsZXIuYXR0cmlidXRlcy5hZGQoJ3NwZWVkJywge1xuICAgICAqICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgKiAgICAgdGl0bGU6ICdTcGVlZCcsXG4gICAgICogICAgIHBsYWNlaG9sZGVyOiAna20vaCcsXG4gICAgICogICAgIGRlZmF1bHQ6IDIyLjJcbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IGF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eSgnX19hdHRyaWJ1dGVzJykpIHRoaXMuX19hdHRyaWJ1dGVzID0gbmV3IFNjcmlwdEF0dHJpYnV0ZXModGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzLl9fYXR0cmlidXRlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmb3JjZV0gLSBTZXQgdG8gdHJ1ZSB0byBmb3JjZSBpbml0aWFsaXphdGlvbiBvZiB0aGUgYXR0cmlidXRlcy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9faW5pdGlhbGl6ZUF0dHJpYnV0ZXMoZm9yY2UpIHtcbiAgICAgICAgaWYgKCFmb3JjZSAmJiAhdGhpcy5fX2F0dHJpYnV0ZXNSYXcpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgLy8gc2V0IGF0dHJpYnV0ZXMgdmFsdWVzXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuX19zY3JpcHRUeXBlLmF0dHJpYnV0ZXMuaW5kZXgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9fYXR0cmlidXRlc1JhdyAmJiB0aGlzLl9fYXR0cmlidXRlc1Jhdy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpc1trZXldID0gdGhpcy5fX2F0dHJpYnV0ZXNSYXdba2V5XTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX19hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fX3NjcmlwdFR5cGUuYXR0cmlidXRlcy5pbmRleFtrZXldLmhhc093blByb3BlcnR5KCdkZWZhdWx0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trZXldID0gdGhpcy5fX3NjcmlwdFR5cGUuYXR0cmlidXRlcy5pbmRleFtrZXldLmRlZmF1bHQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trZXldID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9fYXR0cmlidXRlc1JhdyA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvcnRoYW5kIGZ1bmN0aW9uIHRvIGV4dGVuZCBTY3JpcHQgVHlwZSBwcm90b3R5cGUgd2l0aCBsaXN0IG9mIG1ldGhvZHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gbWV0aG9kcyAtIE9iamVjdCB3aXRoIG1ldGhvZHMsIHdoZXJlIGtleSAtIGlzIG5hbWUgb2YgbWV0aG9kLCBhbmQgdmFsdWUgLSBpcyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHZhciBQbGF5ZXJDb250cm9sbGVyID0gcGMuY3JlYXRlU2NyaXB0KCdwbGF5ZXJDb250cm9sbGVyJyk7XG4gICAgICpcbiAgICAgKiBQbGF5ZXJDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICogICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgKiAgICAgICAgIC8vIGNhbGxlZCBvbmNlIG9uIGluaXRpYWxpemVcbiAgICAgKiAgICAgfSxcbiAgICAgKiAgICAgdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcbiAgICAgKiAgICAgICAgIC8vIGNhbGxlZCBlYWNoIHRpY2tcbiAgICAgKiAgICAgfVxuICAgICAqIH0pO1xuICAgICAqL1xuICAgIHN0YXRpYyBleHRlbmQobWV0aG9kcykge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtZXRob2RzKSB7XG4gICAgICAgICAgICBpZiAoIW1ldGhvZHMuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgdGhpcy5wcm90b3R5cGVba2V5XSA9IG1ldGhvZHNba2V5XTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBuYW1lIFNjcmlwdFR5cGUjW2luaXRpYWxpemVdXG4gICAgICogQGRlc2NyaXB0aW9uIENhbGxlZCB3aGVuIHNjcmlwdCBpcyBhYm91dCB0byBydW4gZm9yIHRoZSBmaXJzdCB0aW1lLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQG5hbWUgU2NyaXB0VHlwZSNbcG9zdEluaXRpYWxpemVdXG4gICAgICogQGRlc2NyaXB0aW9uIENhbGxlZCBhZnRlciBhbGwgaW5pdGlhbGl6ZSBtZXRob2RzIGFyZSBleGVjdXRlZCBpbiB0aGUgc2FtZSB0aWNrIG9yIGVuYWJsaW5nIGNoYWluIG9mIGFjdGlvbnMuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAbmFtZSBTY3JpcHRUeXBlI1t1cGRhdGVdXG4gICAgICogQGRlc2NyaXB0aW9uIENhbGxlZCBmb3IgZW5hYmxlZCAocnVubmluZyBzdGF0ZSkgc2NyaXB0cyBvbiBlYWNoIHRpY2suXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGR0IC0gVGhlIGRlbHRhIHRpbWUgaW4gc2Vjb25kcyBzaW5jZSB0aGUgbGFzdCBmcmFtZS5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBuYW1lIFNjcmlwdFR5cGUjW3Bvc3RVcGRhdGVdXG4gICAgICogQGRlc2NyaXB0aW9uIENhbGxlZCBmb3IgZW5hYmxlZCAocnVubmluZyBzdGF0ZSkgc2NyaXB0cyBvbiBlYWNoIHRpY2ssIGFmdGVyIHVwZGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZHQgLSBUaGUgZGVsdGEgdGltZSBpbiBzZWNvbmRzIHNpbmNlIHRoZSBsYXN0IGZyYW1lLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQG5hbWUgU2NyaXB0VHlwZSNbc3dhcF1cbiAgICAgKiBAZGVzY3JpcHRpb24gQ2FsbGVkIHdoZW4gYSBTY3JpcHRUeXBlIHRoYXQgYWxyZWFkeSBleGlzdHMgaW4gdGhlIHJlZ2lzdHJ5XG4gICAgICogZ2V0cyByZWRlZmluZWQuIElmIHRoZSBuZXcgU2NyaXB0VHlwZSBoYXMgYSBgc3dhcGAgbWV0aG9kIGluIGl0cyBwcm90b3R5cGUsXG4gICAgICogdGhlbiBpdCB3aWxsIGJlIGV4ZWN1dGVkIHRvIHBlcmZvcm0gaG90LXJlbG9hZCBhdCBydW50aW1lLlxuICAgICAqIEBwYXJhbSB7U2NyaXB0VHlwZX0gb2xkIC0gT2xkIGluc3RhbmNlIG9mIHRoZSBzY3JpcHRUeXBlIHRvIGNvcHkgZGF0YSB0byB0aGUgbmV3IGluc3RhbmNlLlxuICAgICAqL1xufVxuXG5leHBvcnQgeyBTY3JpcHRUeXBlIH07XG4iXSwibmFtZXMiOlsiZnVuY05hbWVSZWdleCIsIlJlZ0V4cCIsIlNjcmlwdFR5cGUiLCJFdmVudEhhbmRsZXIiLCJjb25zdHJ1Y3RvciIsImFyZ3MiLCJhcHAiLCJlbnRpdHkiLCJfZW5hYmxlZCIsIl9lbmFibGVkT2xkIiwiX2luaXRpYWxpemVkIiwiX3Bvc3RJbml0aWFsaXplZCIsIl9fZGVzdHJveWVkIiwiX19hdHRyaWJ1dGVzIiwiX19hdHRyaWJ1dGVzUmF3IiwiX19zY3JpcHRUeXBlIiwiX19leGVjdXRpb25PcmRlciIsImluaXRTY3JpcHRUeXBlIiwiZW5hYmxlZCIsInZhbHVlIiwiZmlyZSIsIl9faW5pdGlhbGl6ZUF0dHJpYnV0ZXMiLCJpbml0aWFsaXplIiwic2NyaXB0IiwiX3NjcmlwdE1ldGhvZCIsIlNjcmlwdENvbXBvbmVudCIsInNjcmlwdE1ldGhvZHMiLCJfYmVpbmdFbmFibGVkIiwicG9zdEluaXRpYWxpemUiLCJfZGVzdHJveWVkIiwiRGVidWciLCJhc3NlcnQiLCJfX25hbWUiLCJhdHRyaWJ1dGVzIiwiX19nZXRTY3JpcHROYW1lIiwiY29uc3RydWN0b3JGbiIsInVuZGVmaW5lZCIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwibmFtZSIsIm1hdGNoIiwic2NyaXB0TmFtZSIsImhhc093blByb3BlcnR5IiwiU2NyaXB0QXR0cmlidXRlcyIsImZvcmNlIiwia2V5IiwiaW5kZXgiLCJkZWZhdWx0IiwiZXh0ZW5kIiwibWV0aG9kcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQVVBLE1BQU1BLGFBQWEsR0FBRyxJQUFJQyxNQUFKLENBQVcsaUVBQVgsQ0FBdEIsQ0FBQTs7QUE0QkEsTUFBTUMsVUFBTixTQUF5QkMsWUFBekIsQ0FBc0M7RUF1RGxDQyxXQUFXLENBQUNDLElBQUQsRUFBTztBQUNkLElBQUEsS0FBQSxFQUFBLENBQUE7QUFEYyxJQUFBLElBQUEsQ0FqRGxCQyxHQWlEa0IsR0FBQSxLQUFBLENBQUEsQ0FBQTtBQUFBLElBQUEsSUFBQSxDQTFDbEJDLE1BMENrQixHQUFBLEtBQUEsQ0FBQSxDQUFBO0FBQUEsSUFBQSxJQUFBLENBdkNsQkMsUUF1Q2tCLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFBQSxJQUFBLElBQUEsQ0FwQ2xCQyxXQW9Da0IsR0FBQSxLQUFBLENBQUEsQ0FBQTtBQUFBLElBQUEsSUFBQSxDQWpDbEJDLFlBaUNrQixHQUFBLEtBQUEsQ0FBQSxDQUFBO0FBQUEsSUFBQSxJQUFBLENBOUJsQkMsZ0JBOEJrQixHQUFBLEtBQUEsQ0FBQSxDQUFBO0FBQUEsSUFBQSxJQUFBLENBM0JsQkMsV0EyQmtCLEdBQUEsS0FBQSxDQUFBLENBQUE7QUFBQSxJQUFBLElBQUEsQ0F4QmxCQyxZQXdCa0IsR0FBQSxLQUFBLENBQUEsQ0FBQTtBQUFBLElBQUEs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
