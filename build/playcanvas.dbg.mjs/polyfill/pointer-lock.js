// Apply PointerLock shims
(function () {
  // Old API
  if (typeof navigator === 'undefined' || typeof document === 'undefined') {
    // Not running in a browser
    return;
  }
  navigator.pointer = navigator.pointer || navigator.webkitPointer || navigator.mozPointer;

  // Events
  var pointerlockchange = function pointerlockchange() {
    var e = document.createEvent('CustomEvent');
    e.initCustomEvent('pointerlockchange', true, false, null);
    document.dispatchEvent(e);
  };
  var pointerlockerror = function pointerlockerror() {
    var e = document.createEvent('CustomEvent');
    e.initCustomEvent('pointerlockerror', true, false, null);
    document.dispatchEvent(e);
  };
  document.addEventListener('webkitpointerlockchange', pointerlockchange, false);
  document.addEventListener('webkitpointerlocklost', pointerlockchange, false);
  document.addEventListener('mozpointerlockchange', pointerlockchange, false);
  document.addEventListener('mozpointerlocklost', pointerlockchange, false);
  document.addEventListener('webkitpointerlockerror', pointerlockerror, false);
  document.addEventListener('mozpointerlockerror', pointerlockerror, false);

  // requestPointerLock
  if (Element.prototype.mozRequestPointerLock) {
    // FF requires a new function for some reason
    Element.prototype.requestPointerLock = function () {
      this.mozRequestPointerLock();
    };
  } else {
    Element.prototype.requestPointerLock = Element.prototype.requestPointerLock || Element.prototype.webkitRequestPointerLock || Element.prototype.mozRequestPointerLock;
  }
  if (!Element.prototype.requestPointerLock && navigator.pointer) {
    Element.prototype.requestPointerLock = function () {
      var el = this;
      document.pointerLockElement = el;
      navigator.pointer.lock(el, pointerlockchange, pointerlockerror);
    };
  }

  // exitPointerLock
  document.exitPointerLock = document.exitPointerLock || document.webkitExitPointerLock || document.mozExitPointerLock;
  if (!document.exitPointerLock) {
    document.exitPointerLock = function () {
      if (navigator.pointer) {
        document.pointerLockElement = null;
        navigator.pointer.unlock();
      }
    };
  }
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9pbnRlci1sb2NrLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvcG9seWZpbGwvcG9pbnRlci1sb2NrLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEFwcGx5IFBvaW50ZXJMb2NrIHNoaW1zXG4oZnVuY3Rpb24gKCkge1xuICAgIC8vIE9sZCBBUElcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBOb3QgcnVubmluZyBpbiBhIGJyb3dzZXJcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG5hdmlnYXRvci5wb2ludGVyID0gbmF2aWdhdG9yLnBvaW50ZXIgfHwgbmF2aWdhdG9yLndlYmtpdFBvaW50ZXIgfHwgbmF2aWdhdG9yLm1velBvaW50ZXI7XG5cbiAgICAvLyBFdmVudHNcbiAgICB2YXIgcG9pbnRlcmxvY2tjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgICAgIGUuaW5pdEN1c3RvbUV2ZW50KCdwb2ludGVybG9ja2NoYW5nZScsIHRydWUsIGZhbHNlLCBudWxsKTtcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChlKTtcbiAgICB9O1xuXG4gICAgdmFyIHBvaW50ZXJsb2NrZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgICAgIGUuaW5pdEN1c3RvbUV2ZW50KCdwb2ludGVybG9ja2Vycm9yJywgdHJ1ZSwgZmFsc2UsIG51bGwpO1xuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xuICAgIH07XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd3ZWJraXRwb2ludGVybG9ja2NoYW5nZScsIHBvaW50ZXJsb2NrY2hhbmdlLCBmYWxzZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2Via2l0cG9pbnRlcmxvY2tsb3N0JywgcG9pbnRlcmxvY2tjaGFuZ2UsIGZhbHNlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3pwb2ludGVybG9ja2NoYW5nZScsIHBvaW50ZXJsb2NrY2hhbmdlLCBmYWxzZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW96cG9pbnRlcmxvY2tsb3N0JywgcG9pbnRlcmxvY2tjaGFuZ2UsIGZhbHNlKTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdHBvaW50ZXJsb2NrZXJyb3InLCBwb2ludGVybG9ja2Vycm9yLCBmYWxzZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW96cG9pbnRlcmxvY2tlcnJvcicsIHBvaW50ZXJsb2NrZXJyb3IsIGZhbHNlKTtcblxuICAgIC8vIHJlcXVlc3RQb2ludGVyTG9ja1xuICAgIGlmIChFbGVtZW50LnByb3RvdHlwZS5tb3pSZXF1ZXN0UG9pbnRlckxvY2spIHtcbiAgICAgICAgLy8gRkYgcmVxdWlyZXMgYSBuZXcgZnVuY3Rpb24gZm9yIHNvbWUgcmVhc29uXG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLnJlcXVlc3RQb2ludGVyTG9jayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubW96UmVxdWVzdFBvaW50ZXJMb2NrKCk7XG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUucmVxdWVzdFBvaW50ZXJMb2NrID0gRWxlbWVudC5wcm90b3R5cGUucmVxdWVzdFBvaW50ZXJMb2NrIHx8IEVsZW1lbnQucHJvdG90eXBlLndlYmtpdFJlcXVlc3RQb2ludGVyTG9jayB8fCBFbGVtZW50LnByb3RvdHlwZS5tb3pSZXF1ZXN0UG9pbnRlckxvY2s7XG4gICAgfVxuXG4gICAgaWYgKCFFbGVtZW50LnByb3RvdHlwZS5yZXF1ZXN0UG9pbnRlckxvY2sgJiYgbmF2aWdhdG9yLnBvaW50ZXIpIHtcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUucmVxdWVzdFBvaW50ZXJMb2NrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsID0gdGhpcztcbiAgICAgICAgICAgIGRvY3VtZW50LnBvaW50ZXJMb2NrRWxlbWVudCA9IGVsO1xuICAgICAgICAgICAgbmF2aWdhdG9yLnBvaW50ZXIubG9jayhlbCwgcG9pbnRlcmxvY2tjaGFuZ2UsIHBvaW50ZXJsb2NrZXJyb3IpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIGV4aXRQb2ludGVyTG9ja1xuICAgIGRvY3VtZW50LmV4aXRQb2ludGVyTG9jayA9IGRvY3VtZW50LmV4aXRQb2ludGVyTG9jayB8fCBkb2N1bWVudC53ZWJraXRFeGl0UG9pbnRlckxvY2sgfHwgZG9jdW1lbnQubW96RXhpdFBvaW50ZXJMb2NrO1xuICAgIGlmICghZG9jdW1lbnQuZXhpdFBvaW50ZXJMb2NrKSB7XG4gICAgICAgIGRvY3VtZW50LmV4aXRQb2ludGVyTG9jayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IucG9pbnRlcikge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnBvaW50ZXJMb2NrRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLnBvaW50ZXIudW5sb2NrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufSkoKTtcbiJdLCJuYW1lcyI6WyJuYXZpZ2F0b3IiLCJkb2N1bWVudCIsInBvaW50ZXIiLCJ3ZWJraXRQb2ludGVyIiwibW96UG9pbnRlciIsInBvaW50ZXJsb2NrY2hhbmdlIiwiZSIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsInBvaW50ZXJsb2NrZXJyb3IiLCJhZGRFdmVudExpc3RlbmVyIiwiRWxlbWVudCIsInByb3RvdHlwZSIsIm1velJlcXVlc3RQb2ludGVyTG9jayIsInJlcXVlc3RQb2ludGVyTG9jayIsIndlYmtpdFJlcXVlc3RQb2ludGVyTG9jayIsImVsIiwicG9pbnRlckxvY2tFbGVtZW50IiwibG9jayIsImV4aXRQb2ludGVyTG9jayIsIndlYmtpdEV4aXRQb2ludGVyTG9jayIsIm1vekV4aXRQb2ludGVyTG9jayIsInVubG9jayJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxDQUFDLFlBQVk7QUFDVDtFQUNBLElBQUksT0FBT0EsU0FBUyxLQUFLLFdBQVcsSUFBSSxPQUFPQyxRQUFRLEtBQUssV0FBVyxFQUFFO0FBQ3JFO0FBQ0EsSUFBQSxPQUFBO0FBQ0osR0FBQTtBQUVBRCxFQUFBQSxTQUFTLENBQUNFLE9BQU8sR0FBR0YsU0FBUyxDQUFDRSxPQUFPLElBQUlGLFNBQVMsQ0FBQ0csYUFBYSxJQUFJSCxTQUFTLENBQUNJLFVBQVUsQ0FBQTs7QUFFeEY7QUFDQSxFQUFBLElBQUlDLGlCQUFpQixHQUFHLFNBQXBCQSxpQkFBaUJBLEdBQWU7QUFDaEMsSUFBQSxJQUFJQyxDQUFDLEdBQUdMLFFBQVEsQ0FBQ00sV0FBVyxDQUFDLGFBQWEsQ0FBQyxDQUFBO0lBQzNDRCxDQUFDLENBQUNFLGVBQWUsQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFBO0FBQ3pEUCxJQUFBQSxRQUFRLENBQUNRLGFBQWEsQ0FBQ0gsQ0FBQyxDQUFDLENBQUE7R0FDNUIsQ0FBQTtBQUVELEVBQUEsSUFBSUksZ0JBQWdCLEdBQUcsU0FBbkJBLGdCQUFnQkEsR0FBZTtBQUMvQixJQUFBLElBQUlKLENBQUMsR0FBR0wsUUFBUSxDQUFDTSxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUE7SUFDM0NELENBQUMsQ0FBQ0UsZUFBZSxDQUFDLGtCQUFrQixFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUE7QUFDeERQLElBQUFBLFFBQVEsQ0FBQ1EsYUFBYSxDQUFDSCxDQUFDLENBQUMsQ0FBQTtHQUM1QixDQUFBO0VBRURMLFFBQVEsQ0FBQ1UsZ0JBQWdCLENBQUMseUJBQXlCLEVBQUVOLGlCQUFpQixFQUFFLEtBQUssQ0FBQyxDQUFBO0VBQzlFSixRQUFRLENBQUNVLGdCQUFnQixDQUFDLHVCQUF1QixFQUFFTixpQkFBaUIsRUFBRSxLQUFLLENBQUMsQ0FBQTtFQUM1RUosUUFBUSxDQUFDVSxnQkFBZ0IsQ0FBQyxzQkFBc0IsRUFBRU4saUJBQWlCLEVBQUUsS0FBSyxDQUFDLENBQUE7RUFDM0VKLFFBQVEsQ0FBQ1UsZ0JBQWdCLENBQUMsb0JBQW9CLEVBQUVOLGlCQUFpQixFQUFFLEtBQUssQ0FBQyxDQUFBO0VBRXpFSixRQUFRLENBQUNVLGdCQUFnQixDQUFDLHdCQUF3QixFQUFFRCxnQkFBZ0IsRUFBRSxLQUFLLENBQUMsQ0FBQTtFQUM1RVQsUUFBUSxDQUFDVSxnQkFBZ0IsQ0FBQyxxQkFBcUIsRUFBRUQsZ0JBQWdCLEVBQUUsS0FBSyxDQUFDLENBQUE7O0FBRXpFO0FBQ0EsRUFBQSxJQUFJRSxPQUFPLENBQUNDLFNBQVMsQ0FBQ0MscUJBQXFCLEVBQUU7QUFDekM7QUFDQUYsSUFBQUEsT0FBTyxDQUFDQyxTQUFTLENBQUNFLGtCQUFrQixHQUFHLFlBQVk7TUFDL0MsSUFBSSxDQUFDRCxxQkFBcUIsRUFBRSxDQUFBO0tBQy9CLENBQUE7QUFDTCxHQUFDLE1BQU07SUFDSEYsT0FBTyxDQUFDQyxTQUFTLENBQUNFLGtCQUFrQixHQUFHSCxPQUFPLENBQUNDLFNBQVMsQ0FBQ0Usa0JBQWtCLElBQUlILE9BQU8sQ0FBQ0MsU0FBUyxDQUFDRyx3QkFBd0IsSUFBSUosT0FBTyxDQUFDQyxTQUFTLENBQUNDLHFCQUFxQixDQUFBO0FBQ3hLLEdBQUE7RUFFQSxJQUFJLENBQUNGLE9BQU8sQ0FBQ0MsU0FBUyxDQUFDRSxrQkFBa0IsSUFBSWYsU0FBUyxDQUFDRSxPQUFPLEVBQUU7QUFDNURVLElBQUFBLE9BQU8sQ0FBQ0MsU0FBUyxDQUFDRSxrQkFBa0IsR0FBRyxZQUFZO01BQy9DLElBQUlFLEVBQUUsR0FBRyxJQUFJLENBQUE7TUFDYmhCLFFBQVEsQ0FBQ2lCLGtCQUFrQixHQUFHRCxFQUFFLENBQUE7TUFDaENqQixTQUFTLENBQUNFLE9BQU8sQ0FBQ2lCLElBQUksQ0FBQ0YsRUFBRSxFQUFFWixpQkFBaUIsRUFBRUssZ0JBQWdCLENBQUMsQ0FBQTtLQUNsRSxDQUFBO0FBQ0wsR0FBQTs7QUFFQTtBQUNBVCxFQUFBQSxRQUFRLENBQUNtQixlQUFlLEdBQUduQixRQUFRLENBQUNtQixlQUFlLElBQUluQixRQUFRLENBQUNvQixxQkFBcUIsSUFBSXBCLFFBQVEsQ0FBQ3FCLGtCQUFrQixDQUFBO0FBQ3BILEVBQUEsSUFBSSxDQUFDckIsUUFBUSxDQUFDbUIsZUFBZSxFQUFFO0lBQzNCbkIsUUFBUSxDQUFDbUIsZUFBZSxHQUFHLFlBQVk7TUFDbkMsSUFBSXBCLFNBQVMsQ0FBQ0UsT0FBTyxFQUFFO1FBQ25CRCxRQUFRLENBQUNpQixrQkFBa0IsR0FBRyxJQUFJLENBQUE7QUFDbENsQixRQUFBQSxTQUFTLENBQUNFLE9BQU8sQ0FBQ3FCLE1BQU0sRUFBRSxDQUFBO0FBQzlCLE9BQUE7S0FDSCxDQUFBO0FBQ0wsR0FBQTtBQUNKLENBQUMsR0FBRyJ9
