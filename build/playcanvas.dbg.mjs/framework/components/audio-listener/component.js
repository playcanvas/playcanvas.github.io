import { Component } from '../component.js';

/**
 * Represents the audio listener in the 3D world, so that 3D positioned audio sources are heard
 * correctly.
 *
 * @augments Component
 */
class AudioListenerComponent extends Component {
  /**
   * Create a new AudioListenerComponent instance.
   *
   * @param {import('./system.js').AudioListenerComponentSystem} system - The ComponentSystem
   * that created this component.
   * @param {import('../../entity.js').Entity} entity - The Entity that this component is
   * attached to.
   */
  constructor(system, entity) {
    // eslint-disable-line no-useless-constructor
    super(system, entity);
  }
  setCurrentListener() {
    if (this.enabled && this.entity.audiolistener && this.entity.enabled) {
      this.system.current = this.entity;
      const position = this.system.current.getPosition();
      this.system.manager.listener.setPosition(position);
    }
  }
  onEnable() {
    this.setCurrentListener();
  }
  onDisable() {
    if (this.system.current === this.entity) {
      this.system.current = null;
    }
  }
}

export { AudioListenerComponent };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvYXVkaW8tbGlzdGVuZXIvY29tcG9uZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudC5qcyc7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgYXVkaW8gbGlzdGVuZXIgaW4gdGhlIDNEIHdvcmxkLCBzbyB0aGF0IDNEIHBvc2l0aW9uZWQgYXVkaW8gc291cmNlcyBhcmUgaGVhcmRcbiAqIGNvcnJlY3RseS5cbiAqXG4gKiBAYXVnbWVudHMgQ29tcG9uZW50XG4gKi9cbmNsYXNzIEF1ZGlvTGlzdGVuZXJDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBBdWRpb0xpc3RlbmVyQ29tcG9uZW50IGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4vc3lzdGVtLmpzJykuQXVkaW9MaXN0ZW5lckNvbXBvbmVudFN5c3RlbX0gc3lzdGVtIC0gVGhlIENvbXBvbmVudFN5c3RlbVxuICAgICAqIHRoYXQgY3JlYXRlZCB0aGlzIGNvbXBvbmVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vZW50aXR5LmpzJykuRW50aXR5fSBlbnRpdHkgLSBUaGUgRW50aXR5IHRoYXQgdGhpcyBjb21wb25lbnQgaXNcbiAgICAgKiBhdHRhY2hlZCB0by5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzeXN0ZW0sIGVudGl0eSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVzZWxlc3MtY29uc3RydWN0b3JcbiAgICAgICAgc3VwZXIoc3lzdGVtLCBlbnRpdHkpO1xuICAgIH1cblxuICAgIHNldEN1cnJlbnRMaXN0ZW5lcigpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCAmJiB0aGlzLmVudGl0eS5hdWRpb2xpc3RlbmVyICYmIHRoaXMuZW50aXR5LmVuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLmN1cnJlbnQgPSB0aGlzLmVudGl0eTtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5zeXN0ZW0uY3VycmVudC5nZXRQb3NpdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW0ubWFuYWdlci5saXN0ZW5lci5zZXRQb3NpdGlvbihwb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkVuYWJsZSgpIHtcbiAgICAgICAgdGhpcy5zZXRDdXJyZW50TGlzdGVuZXIoKTtcbiAgICB9XG5cbiAgICBvbkRpc2FibGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnN5c3RlbS5jdXJyZW50ID09PSB0aGlzLmVudGl0eSkge1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW0uY3VycmVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IEF1ZGlvTGlzdGVuZXJDb21wb25lbnQgfTtcbiJdLCJuYW1lcyI6WyJBdWRpb0xpc3RlbmVyQ29tcG9uZW50IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJzeXN0ZW0iLCJlbnRpdHkiLCJzZXRDdXJyZW50TGlzdGVuZXIiLCJlbmFibGVkIiwiYXVkaW9saXN0ZW5lciIsImN1cnJlbnQiLCJwb3NpdGlvbiIsImdldFBvc2l0aW9uIiwibWFuYWdlciIsImxpc3RlbmVyIiwic2V0UG9zaXRpb24iLCJvbkVuYWJsZSIsIm9uRGlzYWJsZSJdLCJtYXBwaW5ncyI6Ijs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxzQkFBc0IsU0FBU0MsU0FBUyxDQUFDO0FBQzNDO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSUMsRUFBQUEsV0FBV0EsQ0FBQ0MsTUFBTSxFQUFFQyxNQUFNLEVBQUU7QUFBRTtBQUMxQixJQUFBLEtBQUssQ0FBQ0QsTUFBTSxFQUFFQyxNQUFNLENBQUMsQ0FBQTtBQUN6QixHQUFBO0FBRUFDLEVBQUFBLGtCQUFrQkEsR0FBRztBQUNqQixJQUFBLElBQUksSUFBSSxDQUFDQyxPQUFPLElBQUksSUFBSSxDQUFDRixNQUFNLENBQUNHLGFBQWEsSUFBSSxJQUFJLENBQUNILE1BQU0sQ0FBQ0UsT0FBTyxFQUFFO0FBQ2xFLE1BQUEsSUFBSSxDQUFDSCxNQUFNLENBQUNLLE9BQU8sR0FBRyxJQUFJLENBQUNKLE1BQU0sQ0FBQTtNQUNqQyxNQUFNSyxRQUFRLEdBQUcsSUFBSSxDQUFDTixNQUFNLENBQUNLLE9BQU8sQ0FBQ0UsV0FBVyxFQUFFLENBQUE7TUFDbEQsSUFBSSxDQUFDUCxNQUFNLENBQUNRLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxXQUFXLENBQUNKLFFBQVEsQ0FBQyxDQUFBO0FBQ3RELEtBQUE7QUFDSixHQUFBO0FBRUFLLEVBQUFBLFFBQVFBLEdBQUc7SUFDUCxJQUFJLENBQUNULGtCQUFrQixFQUFFLENBQUE7QUFDN0IsR0FBQTtBQUVBVSxFQUFBQSxTQUFTQSxHQUFHO0lBQ1IsSUFBSSxJQUFJLENBQUNaLE1BQU0sQ0FBQ0ssT0FBTyxLQUFLLElBQUksQ0FBQ0osTUFBTSxFQUFFO0FBQ3JDLE1BQUEsSUFBSSxDQUFDRCxNQUFNLENBQUNLLE9BQU8sR0FBRyxJQUFJLENBQUE7QUFDOUIsS0FBQTtBQUNKLEdBQUE7QUFDSjs7OzsifQ==
