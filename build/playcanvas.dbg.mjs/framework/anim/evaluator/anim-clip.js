import { extends as _extends } from '../../../_virtual/_rollupPluginBabelHelpers.js';
import { AnimSnapshot } from './anim-snapshot.js';

// TODO: add configurable looping start/end times?

/**
 * AnimClip wraps the running state of an animation track. It contains and update the animation
 * 'cursor' and performs looping logic.
 *
 * @ignore
 */
class AnimClip {
  /**
   * Create a new animation clip.
   *
   * @param {import('./anim-track.js').AnimTrack} track - The animation data.
   * @param {number} time - The initial time of the clip.
   * @param {number} speed - Speed of the animation playback.
   * @param {boolean} playing - true if the clip is playing and false otherwise.
   * @param {boolean} loop - Whether the clip should loop.
   * @param {import('../../../core/event-handler.js').EventHandler} [eventHandler] - The handler
   * to call when an event is fired by the clip.
   */
  constructor(track, time, speed, playing, loop, eventHandler) {
    this._name = track.name; // default to track name
    this._track = track;
    this._snapshot = new AnimSnapshot(track);
    this._playing = playing;
    this._time = time; // play cursor
    this._speed = speed; // playback speed, may be negative
    this._loop = loop; // whether to loop
    this._blendWeight = 1.0; // blend weight 0..1
    this._blendOrder = 0.0; // blend order relative to other clips
    this._eventHandler = eventHandler;
    this.alignCursorToCurrentTime();
  }
  set name(name) {
    this._name = name;
  }
  get name() {
    return this._name;
  }
  set track(track) {
    this._track = track;
    this._snapshot = new AnimSnapshot(track);
  }
  get track() {
    return this._track;
  }
  get snapshot() {
    return this._snapshot;
  }
  set time(time) {
    this._time = time;
    this.alignCursorToCurrentTime();
  }
  get time() {
    return this._time;
  }
  set speed(speed) {
    this._speed = speed;
  }
  get speed() {
    return this._speed;
  }
  set loop(loop) {
    this._loop = loop;
  }
  get loop() {
    return this._loop;
  }
  set blendWeight(blendWeight) {
    this._blendWeight = blendWeight;
  }
  get blendWeight() {
    return this._blendWeight;
  }
  set blendOrder(blendOrder) {
    this._blendOrder = blendOrder;
  }
  get blendOrder() {
    return this._blendOrder;
  }
  set eventCursor(value) {
    this._eventCursor = value;
  }
  get eventCursor() {
    return this._eventCursor;
  }
  alignCursorToCurrentTime() {
    this._eventCursor = 0;
    // move the event cursor to the event that should fire after the current time
    while (this._track.events[this._eventCursor] && this._track.events[this._eventCursor].time < this.time) {
      this._eventCursor++;
    }
  }
  activeEventsForFrame(frameStartTime, frameEndTime) {
    if (frameStartTime === 0) {
      this.eventCursor = 0;
    }
    let clippedFrameDuration;
    // if this frame overlaps with the end of the track, we should clip off the end of the frame time then check that clipped time later
    if (frameEndTime > this.track.duration) {
      clippedFrameDuration = frameEndTime - this.track.duration;
      frameEndTime = this.track.duration;
    }

    // check whether the next event occurs during the current frame. If the frame end time is at the end of the track then test that inclusively too
    while (this.track.events[this.eventCursor] && this.track.events[this.eventCursor].time >= frameStartTime && (frameEndTime === this.track.duration ? this.track.events[this.eventCursor].time <= frameEndTime : this.track.events[this.eventCursor].time < frameEndTime)) {
      const event = this.track.events[this.eventCursor];
      this._eventHandler.fire(event.name, _extends({
        track: this.track
      }, event));
      this.eventCursor++;
    }

    // if we had to clip the current frame, then we should check the start of the track for events during that clipped duration
    if (Number.isFinite(clippedFrameDuration)) {
      this.activeEventsForFrame(0, clippedFrameDuration);
    }
  }
  progressForTime(time) {
    return time * this._speed / this._track.duration;
  }
  _update(deltaTime) {
    if (this._playing) {
      let time = this._time;
      const duration = this._track.duration;
      const speed = this._speed;
      const loop = this._loop;

      // check for events that should fire during this frame
      if (this._track.events.length > 0 && duration > 0) {
        this.activeEventsForFrame(time, time + speed * deltaTime);
      }

      // update time
      time += speed * deltaTime;

      // perform looping
      if (speed >= 0) {
        // playing forwards
        if (time > duration) {
          if (loop) {
            time = time % duration || 0; // if duration is 0, % is NaN
          } else {
            time = this._track.duration;
            this.pause();
          }
        }
      } else {
        // playing backwards
        if (time < 0) {
          if (loop) {
            time = duration + (time % duration || 0);
          } else {
            time = 0;
            this.pause();
          }
        }
      }
      this._time = time;
    }

    // update snapshot if time has changed
    if (this._time !== this._snapshot._time) {
      this._track.eval(this._time, this._snapshot);
    }
  }
  play() {
    this._playing = true;
    this._time = 0;
  }
  stop() {
    this._playing = false;
    this._time = 0;
  }
  pause() {
    this._playing = false;
  }
  resume() {
    this._playing = true;
  }
  reset() {
    this._time = 0;
  }
}

export { AnimClip };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5pbS1jbGlwLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2FuaW0vZXZhbHVhdG9yL2FuaW0tY2xpcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBbmltU25hcHNob3QgfSBmcm9tICcuL2FuaW0tc25hcHNob3QuanMnO1xuXG4vLyBUT0RPOiBhZGQgY29uZmlndXJhYmxlIGxvb3Bpbmcgc3RhcnQvZW5kIHRpbWVzP1xuXG4vKipcbiAqIEFuaW1DbGlwIHdyYXBzIHRoZSBydW5uaW5nIHN0YXRlIG9mIGFuIGFuaW1hdGlvbiB0cmFjay4gSXQgY29udGFpbnMgYW5kIHVwZGF0ZSB0aGUgYW5pbWF0aW9uXG4gKiAnY3Vyc29yJyBhbmQgcGVyZm9ybXMgbG9vcGluZyBsb2dpYy5cbiAqXG4gKiBAaWdub3JlXG4gKi9cbmNsYXNzIEFuaW1DbGlwIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgYW5pbWF0aW9uIGNsaXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi9hbmltLXRyYWNrLmpzJykuQW5pbVRyYWNrfSB0cmFjayAtIFRoZSBhbmltYXRpb24gZGF0YS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGltZSAtIFRoZSBpbml0aWFsIHRpbWUgb2YgdGhlIGNsaXAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNwZWVkIC0gU3BlZWQgb2YgdGhlIGFuaW1hdGlvbiBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHBsYXlpbmcgLSB0cnVlIGlmIHRoZSBjbGlwIGlzIHBsYXlpbmcgYW5kIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGxvb3AgLSBXaGV0aGVyIHRoZSBjbGlwIHNob3VsZCBsb29wLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi8uLi9jb3JlL2V2ZW50LWhhbmRsZXIuanMnKS5FdmVudEhhbmRsZXJ9IFtldmVudEhhbmRsZXJdIC0gVGhlIGhhbmRsZXJcbiAgICAgKiB0byBjYWxsIHdoZW4gYW4gZXZlbnQgaXMgZmlyZWQgYnkgdGhlIGNsaXAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodHJhY2ssIHRpbWUsIHNwZWVkLCBwbGF5aW5nLCBsb29wLCBldmVudEhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IHRyYWNrLm5hbWU7ICAgICAgICAvLyBkZWZhdWx0IHRvIHRyYWNrIG5hbWVcbiAgICAgICAgdGhpcy5fdHJhY2sgPSB0cmFjaztcbiAgICAgICAgdGhpcy5fc25hcHNob3QgPSBuZXcgQW5pbVNuYXBzaG90KHRyYWNrKTtcbiAgICAgICAgdGhpcy5fcGxheWluZyA9IHBsYXlpbmc7XG4gICAgICAgIHRoaXMuX3RpbWUgPSB0aW1lOyAgICAgICAgICAgICAgLy8gcGxheSBjdXJzb3JcbiAgICAgICAgdGhpcy5fc3BlZWQgPSBzcGVlZDsgICAgICAgICAgICAvLyBwbGF5YmFjayBzcGVlZCwgbWF5IGJlIG5lZ2F0aXZlXG4gICAgICAgIHRoaXMuX2xvb3AgPSBsb29wOyAgICAgICAgICAgICAgLy8gd2hldGhlciB0byBsb29wXG4gICAgICAgIHRoaXMuX2JsZW5kV2VpZ2h0ID0gMS4wOyAgICAgICAgLy8gYmxlbmQgd2VpZ2h0IDAuLjFcbiAgICAgICAgdGhpcy5fYmxlbmRPcmRlciA9IDAuMDsgICAgICAgICAvLyBibGVuZCBvcmRlciByZWxhdGl2ZSB0byBvdGhlciBjbGlwc1xuICAgICAgICB0aGlzLl9ldmVudEhhbmRsZXIgPSBldmVudEhhbmRsZXI7XG4gICAgICAgIHRoaXMuYWxpZ25DdXJzb3JUb0N1cnJlbnRUaW1lKCk7XG4gICAgfVxuXG4gICAgc2V0IG5hbWUobmFtZSkge1xuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB9XG5cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gICAgfVxuXG4gICAgc2V0IHRyYWNrKHRyYWNrKSB7XG4gICAgICAgIHRoaXMuX3RyYWNrID0gdHJhY2s7XG4gICAgICAgIHRoaXMuX3NuYXBzaG90ID0gbmV3IEFuaW1TbmFwc2hvdCh0cmFjayk7XG4gICAgfVxuXG4gICAgZ2V0IHRyYWNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhY2s7XG4gICAgfVxuXG4gICAgZ2V0IHNuYXBzaG90KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc25hcHNob3Q7XG4gICAgfVxuXG4gICAgc2V0IHRpbWUodGltZSkge1xuICAgICAgICB0aGlzLl90aW1lID0gdGltZTtcbiAgICAgICAgdGhpcy5hbGlnbkN1cnNvclRvQ3VycmVudFRpbWUoKTtcbiAgICB9XG5cbiAgICBnZXQgdGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpbWU7XG4gICAgfVxuXG4gICAgc2V0IHNwZWVkKHNwZWVkKSB7XG4gICAgICAgIHRoaXMuX3NwZWVkID0gc3BlZWQ7XG4gICAgfVxuXG4gICAgZ2V0IHNwZWVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3BlZWQ7XG4gICAgfVxuXG4gICAgc2V0IGxvb3AobG9vcCkge1xuICAgICAgICB0aGlzLl9sb29wID0gbG9vcDtcbiAgICB9XG5cbiAgICBnZXQgbG9vcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvb3A7XG4gICAgfVxuXG4gICAgc2V0IGJsZW5kV2VpZ2h0KGJsZW5kV2VpZ2h0KSB7XG4gICAgICAgIHRoaXMuX2JsZW5kV2VpZ2h0ID0gYmxlbmRXZWlnaHQ7XG4gICAgfVxuXG4gICAgZ2V0IGJsZW5kV2VpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmxlbmRXZWlnaHQ7XG4gICAgfVxuXG4gICAgc2V0IGJsZW5kT3JkZXIoYmxlbmRPcmRlcikge1xuICAgICAgICB0aGlzLl9ibGVuZE9yZGVyID0gYmxlbmRPcmRlcjtcbiAgICB9XG5cbiAgICBnZXQgYmxlbmRPcmRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JsZW5kT3JkZXI7XG4gICAgfVxuXG4gICAgc2V0IGV2ZW50Q3Vyc29yKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2V2ZW50Q3Vyc29yID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGV2ZW50Q3Vyc29yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZXZlbnRDdXJzb3I7XG4gICAgfVxuXG4gICAgYWxpZ25DdXJzb3JUb0N1cnJlbnRUaW1lKCkge1xuICAgICAgICB0aGlzLl9ldmVudEN1cnNvciA9IDA7XG4gICAgICAgIC8vIG1vdmUgdGhlIGV2ZW50IGN1cnNvciB0byB0aGUgZXZlbnQgdGhhdCBzaG91bGQgZmlyZSBhZnRlciB0aGUgY3VycmVudCB0aW1lXG4gICAgICAgIHdoaWxlICh0aGlzLl90cmFjay5ldmVudHNbdGhpcy5fZXZlbnRDdXJzb3JdICYmIHRoaXMuX3RyYWNrLmV2ZW50c1t0aGlzLl9ldmVudEN1cnNvcl0udGltZSA8IHRoaXMudGltZSkge1xuICAgICAgICAgICAgdGhpcy5fZXZlbnRDdXJzb3IrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFjdGl2ZUV2ZW50c0ZvckZyYW1lKGZyYW1lU3RhcnRUaW1lLCBmcmFtZUVuZFRpbWUpIHtcbiAgICAgICAgaWYgKGZyYW1lU3RhcnRUaW1lID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50Q3Vyc29yID0gMDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY2xpcHBlZEZyYW1lRHVyYXRpb247XG4gICAgICAgIC8vIGlmIHRoaXMgZnJhbWUgb3ZlcmxhcHMgd2l0aCB0aGUgZW5kIG9mIHRoZSB0cmFjaywgd2Ugc2hvdWxkIGNsaXAgb2ZmIHRoZSBlbmQgb2YgdGhlIGZyYW1lIHRpbWUgdGhlbiBjaGVjayB0aGF0IGNsaXBwZWQgdGltZSBsYXRlclxuICAgICAgICBpZiAoZnJhbWVFbmRUaW1lID4gdGhpcy50cmFjay5kdXJhdGlvbikge1xuICAgICAgICAgICAgY2xpcHBlZEZyYW1lRHVyYXRpb24gPSBmcmFtZUVuZFRpbWUgLSB0aGlzLnRyYWNrLmR1cmF0aW9uO1xuICAgICAgICAgICAgZnJhbWVFbmRUaW1lID0gdGhpcy50cmFjay5kdXJhdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgdGhlIG5leHQgZXZlbnQgb2NjdXJzIGR1cmluZyB0aGUgY3VycmVudCBmcmFtZS4gSWYgdGhlIGZyYW1lIGVuZCB0aW1lIGlzIGF0IHRoZSBlbmQgb2YgdGhlIHRyYWNrIHRoZW4gdGVzdCB0aGF0IGluY2x1c2l2ZWx5IHRvb1xuICAgICAgICB3aGlsZSAodGhpcy50cmFjay5ldmVudHNbdGhpcy5ldmVudEN1cnNvcl0gJiYgdGhpcy50cmFjay5ldmVudHNbdGhpcy5ldmVudEN1cnNvcl0udGltZSA+PSBmcmFtZVN0YXJ0VGltZSAmJiAoZnJhbWVFbmRUaW1lID09PSB0aGlzLnRyYWNrLmR1cmF0aW9uID8gdGhpcy50cmFjay5ldmVudHNbdGhpcy5ldmVudEN1cnNvcl0udGltZSA8PSBmcmFtZUVuZFRpbWUgOiB0aGlzLnRyYWNrLmV2ZW50c1t0aGlzLmV2ZW50Q3Vyc29yXS50aW1lIDwgZnJhbWVFbmRUaW1lKSkge1xuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB0aGlzLnRyYWNrLmV2ZW50c1t0aGlzLmV2ZW50Q3Vyc29yXTtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50SGFuZGxlci5maXJlKGV2ZW50Lm5hbWUsIHsgdHJhY2s6IHRoaXMudHJhY2ssIC4uLmV2ZW50IH0pO1xuICAgICAgICAgICAgdGhpcy5ldmVudEN1cnNvcisrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgd2UgaGFkIHRvIGNsaXAgdGhlIGN1cnJlbnQgZnJhbWUsIHRoZW4gd2Ugc2hvdWxkIGNoZWNrIHRoZSBzdGFydCBvZiB0aGUgdHJhY2sgZm9yIGV2ZW50cyBkdXJpbmcgdGhhdCBjbGlwcGVkIGR1cmF0aW9uXG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoY2xpcHBlZEZyYW1lRHVyYXRpb24pKSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUV2ZW50c0ZvckZyYW1lKDAsIGNsaXBwZWRGcmFtZUR1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb2dyZXNzRm9yVGltZSh0aW1lKSB7XG4gICAgICAgIHJldHVybiAodGltZSAqIHRoaXMuX3NwZWVkKSAvIHRoaXMuX3RyYWNrLmR1cmF0aW9uO1xuICAgIH1cblxuICAgIF91cGRhdGUoZGVsdGFUaW1lKSB7XG4gICAgICAgIGlmICh0aGlzLl9wbGF5aW5nKSB7XG4gICAgICAgICAgICBsZXQgdGltZSA9IHRoaXMuX3RpbWU7XG4gICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IHRoaXMuX3RyYWNrLmR1cmF0aW9uO1xuICAgICAgICAgICAgY29uc3Qgc3BlZWQgPSB0aGlzLl9zcGVlZDtcbiAgICAgICAgICAgIGNvbnN0IGxvb3AgPSB0aGlzLl9sb29wO1xuXG4gICAgICAgICAgICAvLyBjaGVjayBmb3IgZXZlbnRzIHRoYXQgc2hvdWxkIGZpcmUgZHVyaW5nIHRoaXMgZnJhbWVcbiAgICAgICAgICAgIGlmICh0aGlzLl90cmFjay5ldmVudHMubGVuZ3RoID4gMCAmJiBkdXJhdGlvbiA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUV2ZW50c0ZvckZyYW1lKHRpbWUsIHRpbWUgKyBzcGVlZCAqIGRlbHRhVGltZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aW1lXG4gICAgICAgICAgICB0aW1lICs9IHNwZWVkICogZGVsdGFUaW1lO1xuXG4gICAgICAgICAgICAvLyBwZXJmb3JtIGxvb3BpbmdcbiAgICAgICAgICAgIGlmIChzcGVlZCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gcGxheWluZyBmb3J3YXJkc1xuICAgICAgICAgICAgICAgIGlmICh0aW1lID4gZHVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUgPSAodGltZSAlIGR1cmF0aW9uKSB8fCAwOyAgLy8gaWYgZHVyYXRpb24gaXMgMCwgJSBpcyBOYU5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUgPSB0aGlzLl90cmFjay5kdXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gcGxheWluZyBiYWNrd2FyZHNcbiAgICAgICAgICAgICAgICBpZiAodGltZSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUgPSBkdXJhdGlvbiArICgodGltZSAlIGR1cmF0aW9uKSB8fCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fdGltZSA9IHRpbWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgc25hcHNob3QgaWYgdGltZSBoYXMgY2hhbmdlZFxuICAgICAgICBpZiAodGhpcy5fdGltZSAhPT0gdGhpcy5fc25hcHNob3QuX3RpbWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyYWNrLmV2YWwodGhpcy5fdGltZSwgdGhpcy5fc25hcHNob3QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcGxheSgpIHtcbiAgICAgICAgdGhpcy5fcGxheWluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuX3RpbWUgPSAwO1xuICAgIH1cblxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuX3BsYXlpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fdGltZSA9IDA7XG4gICAgfVxuXG4gICAgcGF1c2UoKSB7XG4gICAgICAgIHRoaXMuX3BsYXlpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXN1bWUoKSB7XG4gICAgICAgIHRoaXMuX3BsYXlpbmcgPSB0cnVlO1xuICAgIH1cblxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLl90aW1lID0gMDtcbiAgICB9XG59XG5cbmV4cG9ydCB7IEFuaW1DbGlwIH07XG4iXSwibmFtZXMiOlsiQW5pbUNsaXAiLCJjb25zdHJ1Y3RvciIsInRyYWNrIiwidGltZSIsInNwZWVkIiwicGxheWluZyIsImxvb3AiLCJldmVudEhhbmRsZXIiLCJfbmFtZSIsIm5hbWUiLCJfdHJhY2siLCJfc25hcHNob3QiLCJBbmltU25hcHNob3QiLCJfcGxheWluZyIsIl90aW1lIiwiX3NwZWVkIiwiX2xvb3AiLCJfYmxlbmRXZWlnaHQiLCJfYmxlbmRPcmRlciIsIl9ldmVudEhhbmRsZXIiLCJhbGlnbkN1cnNvclRvQ3VycmVudFRpbWUiLCJzbmFwc2hvdCIsImJsZW5kV2VpZ2h0IiwiYmxlbmRPcmRlciIsImV2ZW50Q3Vyc29yIiwidmFsdWUiLCJfZXZlbnRDdXJzb3IiLCJldmVudHMiLCJhY3RpdmVFdmVudHNGb3JGcmFtZSIsImZyYW1lU3RhcnRUaW1lIiwiZnJhbWVFbmRUaW1lIiwiY2xpcHBlZEZyYW1lRHVyYXRpb24iLCJkdXJhdGlvbiIsImV2ZW50IiwiZmlyZSIsIl9leHRlbmRzIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJwcm9ncmVzc0ZvclRpbWUiLCJfdXBkYXRlIiwiZGVsdGFUaW1lIiwibGVuZ3RoIiwicGF1c2UiLCJldmFsIiwicGxheSIsInN0b3AiLCJyZXN1bWUiLCJyZXNldCJdLCJtYXBwaW5ncyI6Ijs7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsUUFBUSxDQUFDO0FBQ1g7QUFDSjtBQUNBO0FBQ0E7QUFD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
