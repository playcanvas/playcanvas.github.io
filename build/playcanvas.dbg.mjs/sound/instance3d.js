/**
 * @license
 * PlayCanvas Engine v1.58.0-dev revision e102f2b2a (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../core/debug.js';
import { math } from '../math/math.js';
import { Vec3 } from '../math/vec3.js';
import { DISTANCE_LINEAR, DISTANCE_INVERSE, DISTANCE_EXPONENTIAL } from '../audio/constants.js';
import { hasAudioContext } from '../audio/capabilities.js';
import { SoundInstance } from './instance.js';

const MAX_DISTANCE = 10000;

class SoundInstance3d extends SoundInstance {
  constructor(manager, sound, options = {}) {
    super(manager, sound, options);
    this._position = new Vec3();
    this._velocity = new Vec3();
    if (options.position) this.position = options.position;
    this.maxDistance = options.maxDistance !== undefined ? Number(options.maxDistance) : MAX_DISTANCE;
    this.refDistance = options.refDistance !== undefined ? Number(options.refDistance) : 1;
    this.rollOffFactor = options.rollOffFactor !== undefined ? Number(options.rollOffFactor) : 1;
    this.distanceModel = options.distanceModel !== undefined ? options.distanceModel : DISTANCE_LINEAR;
  }

  _initializeNodes() {
    this.gain = this._manager.context.createGain();
    this.panner = this._manager.context.createPanner();
    this.panner.connect(this.gain);
    this._inputNode = this.panner;
    this._connectorNode = this.gain;

    this._connectorNode.connect(this._manager.context.destination);
  }

  set position(value) {
    this._position.copy(value);

    const panner = this.panner;

    if ('positionX' in panner) {
      panner.positionX.value = value.x;
      panner.positionY.value = value.y;
      panner.positionZ.value = value.z;
    } else if (panner.setPosition) {
      panner.setPosition(value.x, value.y, value.z);
    }
  }

  get position() {
    return this._position;
  }

  set velocity(velocity) {
    Debug.warn('SoundInstance3d#velocity is not implemented.');

    this._velocity.copy(velocity);
  }

  get velocity() {
    Debug.warn('SoundInstance3d#velocity is not implemented.');
    return this._velocity;
  }

  set maxDistance(value) {
    this.panner.maxDistance = value;
  }

  get maxDistance() {
    return this.panner.maxDistance;
  }

  set refDistance(value) {
    this.panner.refDistance = value;
  }

  get refDistance() {
    return this.panner.refDistance;
  }

  set rollOffFactor(value) {
    this.panner.rolloffFactor = value;
  }

  get rollOffFactor() {
    return this.panner.rolloffFactor;
  }

  set distanceModel(value) {
    this.panner.distanceModel = value;
  }

  get distanceModel() {
    return this.panner.distanceModel;
  }

}

if (!hasAudioContext()) {
  let offset = new Vec3();

  const fallOff = function fallOff(posOne, posTwo, refDistance, maxDistance, rollOffFactor, distanceModel) {
    offset = offset.sub2(posOne, posTwo);
    const distance = offset.length();

    if (distance < refDistance) {
      return 1;
    } else if (distance > maxDistance) {
      return 0;
    }

    let result = 0;

    if (distanceModel === DISTANCE_LINEAR) {
      result = 1 - rollOffFactor * (distance - refDistance) / (maxDistance - refDistance);
    } else if (distanceModel === DISTANCE_INVERSE) {
      result = refDistance / (refDistance + rollOffFactor * (distance - refDistance));
    } else if (distanceModel === DISTANCE_EXPONENTIAL) {
      result = Math.pow(distance / refDistance, -rollOffFactor);
    }

    return math.clamp(result, 0, 1);
  };

  Object.defineProperty(SoundInstance3d.prototype, 'position', {
    get: function () {
      return this._position;
    },
    set: function (position) {
      this._position.copy(position);

      if (this.source) {
        const listener = this._manager.listener;
        const lpos = listener.getPosition();
        const factor = fallOff(lpos, this._position, this.refDistance, this.maxDistance, this.rollOffFactor, this.distanceModel);
        const v = this.volume;
        this.source.volume = v * factor * this._manager.volume;
      }
    }
  });
  Object.defineProperty(SoundInstance3d.prototype, 'maxDistance', {
    get: function () {
      return this._maxDistance;
    },
    set: function (value) {
      this._maxDistance = value;
    }
  });
  Object.defineProperty(SoundInstance3d.prototype, 'refDistance', {
    get: function () {
      return this._refDistance;
    },
    set: function (value) {
      this._refDistance = value;
    }
  });
  Object.defineProperty(SoundInstance3d.prototype, 'rollOffFactor', {
    get: function () {
      return this._rollOffFactor;
    },
    set: function (value) {
      this._rollOffFactor = value;
    }
  });
  Object.defineProperty(SoundInstance3d.prototype, 'distanceModel', {
    get: function () {
      return this._distanceModel;
    },
    set: function (value) {
      this._distanceModel = value;
    }
  });
}

export { SoundInstance3d };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5zdGFuY2UzZC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NvdW5kL2luc3RhbmNlM2QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVidWcgfSBmcm9tICcuLi9jb3JlL2RlYnVnLmpzJztcblxuaW1wb3J0IHsgbWF0aCB9IGZyb20gJy4uL21hdGgvbWF0aC5qcyc7XG5pbXBvcnQgeyBWZWMzIH0gZnJvbSAnLi4vbWF0aC92ZWMzLmpzJztcblxuaW1wb3J0IHsgRElTVEFOQ0VfRVhQT05FTlRJQUwsIERJU1RBTkNFX0lOVkVSU0UsIERJU1RBTkNFX0xJTkVBUiB9IGZyb20gJy4uL2F1ZGlvL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBoYXNBdWRpb0NvbnRleHQgfSBmcm9tICcuLi9hdWRpby9jYXBhYmlsaXRpZXMuanMnO1xuXG5pbXBvcnQgeyBTb3VuZEluc3RhbmNlIH0gZnJvbSAnLi9pbnN0YW5jZS5qcyc7XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3NvdW5kLmpzJykuU291bmR9IFNvdW5kICovXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9tYW5hZ2VyLmpzJykuU291bmRNYW5hZ2VyfSBTb3VuZE1hbmFnZXIgKi9cblxuLy8gZGVmYXVsdCBtYXhEaXN0YW5jZSwgc2FtZSBhcyBXZWIgQXVkaW8gQVBJXG5jb25zdCBNQVhfRElTVEFOQ0UgPSAxMDAwMDtcblxuLyoqXG4gKiBBIFNvdW5kSW5zdGFuY2UzZCBwbGF5cyBhIHtAbGluayBTb3VuZH0gaW4gM0QuXG4gKlxuICogQGF1Z21lbnRzIFNvdW5kSW5zdGFuY2VcbiAqL1xuY2xhc3MgU291bmRJbnN0YW5jZTNkIGV4dGVuZHMgU291bmRJbnN0YW5jZSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge1ZlYzN9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfcG9zaXRpb24gPSBuZXcgVmVjMygpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge1ZlYzN9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfdmVsb2NpdHkgPSBuZXcgVmVjMygpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IFNvdW5kSW5zdGFuY2UzZCBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U291bmRNYW5hZ2VyfSBtYW5hZ2VyIC0gVGhlIHNvdW5kIG1hbmFnZXIuXG4gICAgICogQHBhcmFtIHtTb3VuZH0gc291bmQgLSBUaGUgc291bmQgdG8gcGxheS5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMudm9sdW1lPTFdIC0gVGhlIHBsYXliYWNrIHZvbHVtZSwgYmV0d2VlbiAwIGFuZCAxLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5waXRjaD0xXSAtIFRoZSByZWxhdGl2ZSBwaXRjaCwgZGVmYXVsdCBvZiAxLCBwbGF5cyBhdCBub3JtYWwgcGl0Y2guXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sb29wPWZhbHNlXSAtIFdoZXRoZXIgdGhlIHNvdW5kIHNob3VsZCBsb29wIHdoZW4gaXQgcmVhY2hlcyB0aGVcbiAgICAgKiBlbmQgb3Igbm90LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5zdGFydFRpbWU9MF0gLSBUaGUgdGltZSBmcm9tIHdoaWNoIHRoZSBwbGF5YmFjayB3aWxsIHN0YXJ0LiBEZWZhdWx0XG4gICAgICogaXMgMCB0byBzdGFydCBhdCB0aGUgYmVnaW5uaW5nLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5kdXJhdGlvbj1udWxsXSAtIFRoZSB0b3RhbCB0aW1lIGFmdGVyIHRoZSBzdGFydFRpbWUgd2hlbiBwbGF5YmFja1xuICAgICAqIHdpbGwgc3RvcCBvciByZXN0YXJ0IGlmIGxvb3AgaXMgdHJ1ZS5cbiAgICAgKiBAcGFyYW0ge1ZlYzN9IFtvcHRpb25zLnBvc2l0aW9uPW51bGxdIC0gVGhlIHBvc2l0aW9uIG9mIHRoZSBzb3VuZCBpbiAzRCBzcGFjZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuZGlzdGFuY2VNb2RlbD1ESVNUQU5DRV9MSU5FQVJdIC0gRGV0ZXJtaW5lcyB3aGljaCBhbGdvcml0aG0gdG8gdXNlXG4gICAgICogdG8gcmVkdWNlIHRoZSB2b2x1bWUgb2YgdGhlIGF1ZGlvIGFzIGl0IG1vdmVzIGF3YXkgZnJvbSB0aGUgbGlzdGVuZXIuIENhbiBiZTpcbiAgICAgKlxuICAgICAqIC0ge0BsaW5rIERJU1RBTkNFX0xJTkVBUn1cbiAgICAgKiAtIHtAbGluayBESVNUQU5DRV9JTlZFUlNFfVxuICAgICAqIC0ge0BsaW5rIERJU1RBTkNFX0VYUE9ORU5USUFMfVxuICAgICAqXG4gICAgICogRGVmYXVsdCBpcyB7QGxpbmsgRElTVEFOQ0VfTElORUFSfS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucmVmRGlzdGFuY2U9MV0gLSBUaGUgcmVmZXJlbmNlIGRpc3RhbmNlIGZvciByZWR1Y2luZyB2b2x1bWUgYXMgdGhlXG4gICAgICogc291bmQgc291cmNlIG1vdmVzIGZ1cnRoZXIgZnJvbSB0aGUgbGlzdGVuZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heERpc3RhbmNlPTEwMDAwXSAtIFRoZSBtYXhpbXVtIGRpc3RhbmNlIGZyb20gdGhlIGxpc3RlbmVyIGF0IHdoaWNoXG4gICAgICogYXVkaW8gZmFsbG9mZiBzdG9wcy4gTm90ZSB0aGUgdm9sdW1lIG9mIHRoZSBhdWRpbyBpcyBub3QgMCBhZnRlciB0aGlzIGRpc3RhbmNlLCBidXQganVzdFxuICAgICAqIGRvZXNuJ3QgZmFsbCBvZmYgYW55bW9yZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucm9sbE9mZkZhY3Rvcj0xXSAtIFRoZSBmYWN0b3IgdXNlZCBpbiB0aGUgZmFsbG9mZiBlcXVhdGlvbi5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihtYW5hZ2VyLCBzb3VuZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKG1hbmFnZXIsIHNvdW5kLCBvcHRpb25zKTtcblxuICAgICAgICBpZiAob3B0aW9ucy5wb3NpdGlvbilcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBvcHRpb25zLnBvc2l0aW9uO1xuXG4gICAgICAgIHRoaXMubWF4RGlzdGFuY2UgPSBvcHRpb25zLm1heERpc3RhbmNlICE9PSB1bmRlZmluZWQgPyBOdW1iZXIob3B0aW9ucy5tYXhEaXN0YW5jZSkgOiBNQVhfRElTVEFOQ0U7XG4gICAgICAgIHRoaXMucmVmRGlzdGFuY2UgPSBvcHRpb25zLnJlZkRpc3RhbmNlICE9PSB1bmRlZmluZWQgPyBOdW1iZXIob3B0aW9ucy5yZWZEaXN0YW5jZSkgOiAxO1xuICAgICAgICB0aGlzLnJvbGxPZmZGYWN0b3IgPSBvcHRpb25zLnJvbGxPZmZGYWN0b3IgIT09IHVuZGVmaW5lZCA/IE51bWJlcihvcHRpb25zLnJvbGxPZmZGYWN0b3IpIDogMTtcbiAgICAgICAgdGhpcy5kaXN0YW5jZU1vZGVsID0gb3B0aW9ucy5kaXN0YW5jZU1vZGVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmRpc3RhbmNlTW9kZWwgOiBESVNUQU5DRV9MSU5FQVI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWxsb2NhdGUgV2ViIEF1ZGlvIHJlc291cmNlcyBmb3IgdGhpcyBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2luaXRpYWxpemVOb2RlcygpIHtcbiAgICAgICAgdGhpcy5nYWluID0gdGhpcy5fbWFuYWdlci5jb250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgdGhpcy5wYW5uZXIgPSB0aGlzLl9tYW5hZ2VyLmNvbnRleHQuY3JlYXRlUGFubmVyKCk7XG4gICAgICAgIHRoaXMucGFubmVyLmNvbm5lY3QodGhpcy5nYWluKTtcbiAgICAgICAgdGhpcy5faW5wdXROb2RlID0gdGhpcy5wYW5uZXI7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rvck5vZGUgPSB0aGlzLmdhaW47XG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rvck5vZGUuY29ubmVjdCh0aGlzLl9tYW5hZ2VyLmNvbnRleHQuZGVzdGluYXRpb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBwb3NpdGlvbiBvZiB0aGUgc291bmQgaW4gM0Qgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7VmVjM31cbiAgICAgKi9cbiAgICBzZXQgcG9zaXRpb24odmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcG9zaXRpb24uY29weSh2YWx1ZSk7XG4gICAgICAgIGNvbnN0IHBhbm5lciA9IHRoaXMucGFubmVyO1xuICAgICAgICBpZiAoJ3Bvc2l0aW9uWCcgaW4gcGFubmVyKSB7XG4gICAgICAgICAgICBwYW5uZXIucG9zaXRpb25YLnZhbHVlID0gdmFsdWUueDtcbiAgICAgICAgICAgIHBhbm5lci5wb3NpdGlvblkudmFsdWUgPSB2YWx1ZS55O1xuICAgICAgICAgICAgcGFubmVyLnBvc2l0aW9uWi52YWx1ZSA9IHZhbHVlLno7XG4gICAgICAgIH0gZWxzZSBpZiAocGFubmVyLnNldFBvc2l0aW9uKSB7IC8vIEZpcmVmb3ggKGFuZCBsZWdhY3kgYnJvd3NlcnMpXG4gICAgICAgICAgICBwYW5uZXIuc2V0UG9zaXRpb24odmFsdWUueCwgdmFsdWUueSwgdmFsdWUueik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgcG9zaXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmVsb2NpdHkgb2YgdGhlIHNvdW5kLlxuICAgICAqXG4gICAgICogQHR5cGUge1ZlYzN9XG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgc2V0IHZlbG9jaXR5KHZlbG9jaXR5KSB7XG4gICAgICAgIERlYnVnLndhcm4oJ1NvdW5kSW5zdGFuY2UzZCN2ZWxvY2l0eSBpcyBub3QgaW1wbGVtZW50ZWQuJyk7XG4gICAgICAgIHRoaXMuX3ZlbG9jaXR5LmNvcHkodmVsb2NpdHkpO1xuICAgIH1cblxuICAgIGdldCB2ZWxvY2l0eSgpIHtcbiAgICAgICAgRGVidWcud2FybignU291bmRJbnN0YW5jZTNkI3ZlbG9jaXR5IGlzIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZlbG9jaXR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIGRpc3RhbmNlIGZyb20gdGhlIGxpc3RlbmVyIGF0IHdoaWNoIGF1ZGlvIGZhbGxvZmYgc3RvcHMuIE5vdGUgdGhlIHZvbHVtZSBvZiB0aGVcbiAgICAgKiBhdWRpbyBpcyBub3QgMCBhZnRlciB0aGlzIGRpc3RhbmNlLCBidXQganVzdCBkb2Vzbid0IGZhbGwgb2ZmIGFueW1vcmUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNldCBtYXhEaXN0YW5jZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnBhbm5lci5tYXhEaXN0YW5jZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBtYXhEaXN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFubmVyLm1heERpc3RhbmNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSByZWZlcmVuY2UgZGlzdGFuY2UgZm9yIHJlZHVjaW5nIHZvbHVtZSBhcyB0aGUgc291bmQgc291cmNlIG1vdmVzIGZ1cnRoZXIgZnJvbSB0aGVcbiAgICAgKiBsaXN0ZW5lci5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IHJlZkRpc3RhbmNlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucGFubmVyLnJlZkRpc3RhbmNlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IHJlZkRpc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYW5uZXIucmVmRGlzdGFuY2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGZhY3RvciB1c2VkIGluIHRoZSBmYWxsb2ZmIGVxdWF0aW9uLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBzZXQgcm9sbE9mZkZhY3Rvcih2YWx1ZSkge1xuICAgICAgICB0aGlzLnBhbm5lci5yb2xsb2ZmRmFjdG9yID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IHJvbGxPZmZGYWN0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhbm5lci5yb2xsb2ZmRmFjdG9yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgd2hpY2ggYWxnb3JpdGhtIHRvIHVzZSB0byByZWR1Y2UgdGhlIHZvbHVtZSBvZiB0aGUgYXVkaW8gYXMgaXQgbW92ZXMgYXdheSBmcm9tXG4gICAgICogdGhlIGxpc3RlbmVyLiBDYW4gYmU6XG4gICAgICpcbiAgICAgKiAtIHtAbGluayBESVNUQU5DRV9MSU5FQVJ9XG4gICAgICogLSB7QGxpbmsgRElTVEFOQ0VfSU5WRVJTRX1cbiAgICAgKiAtIHtAbGluayBESVNUQU5DRV9FWFBPTkVOVElBTH1cbiAgICAgKlxuICAgICAqIERlZmF1bHQgaXMge0BsaW5rIERJU1RBTkNFX0xJTkVBUn0uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHNldCBkaXN0YW5jZU1vZGVsKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucGFubmVyLmRpc3RhbmNlTW9kZWwgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZGlzdGFuY2VNb2RlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFubmVyLmRpc3RhbmNlTW9kZWw7XG4gICAgfVxufVxuXG5pZiAoIWhhc0F1ZGlvQ29udGV4dCgpKSB7XG4gICAgLy8gdGVtcCB2ZWN0b3Igc3RvcmFnZVxuICAgIGxldCBvZmZzZXQgPSBuZXcgVmVjMygpO1xuXG4gICAgLy8gRmFsbCBvZmYgZnVuY3Rpb24gd2hpY2ggc2hvdWxkIGJlIHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gdGhlIFdlYiBBdWRpbyBBUElcbiAgICAvLyBUYWtlbiBmcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9QYW5uZXJOb2RlL2Rpc3RhbmNlTW9kZWxcbiAgICBjb25zdCBmYWxsT2ZmID0gZnVuY3Rpb24gKHBvc09uZSwgcG9zVHdvLCByZWZEaXN0YW5jZSwgbWF4RGlzdGFuY2UsIHJvbGxPZmZGYWN0b3IsIGRpc3RhbmNlTW9kZWwpIHtcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0LnN1YjIocG9zT25lLCBwb3NUd28pO1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IG9mZnNldC5sZW5ndGgoKTtcblxuICAgICAgICBpZiAoZGlzdGFuY2UgPCByZWZEaXN0YW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlzdGFuY2UgPiBtYXhEaXN0YW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzdWx0ID0gMDtcbiAgICAgICAgaWYgKGRpc3RhbmNlTW9kZWwgPT09IERJU1RBTkNFX0xJTkVBUikge1xuICAgICAgICAgICAgcmVzdWx0ID0gMSAtIHJvbGxPZmZGYWN0b3IgKiAoZGlzdGFuY2UgLSByZWZEaXN0YW5jZSkgLyAobWF4RGlzdGFuY2UgLSByZWZEaXN0YW5jZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlzdGFuY2VNb2RlbCA9PT0gRElTVEFOQ0VfSU5WRVJTRSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVmRGlzdGFuY2UgLyAocmVmRGlzdGFuY2UgKyByb2xsT2ZmRmFjdG9yICogKGRpc3RhbmNlIC0gcmVmRGlzdGFuY2UpKTtcbiAgICAgICAgfSBlbHNlIGlmIChkaXN0YW5jZU1vZGVsID09PSBESVNUQU5DRV9FWFBPTkVOVElBTCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gTWF0aC5wb3coZGlzdGFuY2UgLyByZWZEaXN0YW5jZSwgLXJvbGxPZmZGYWN0b3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXRoLmNsYW1wKHJlc3VsdCwgMCwgMSk7XG4gICAgfTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTb3VuZEluc3RhbmNlM2QucHJvdG90eXBlLCAncG9zaXRpb24nLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICAgICAgdGhpcy5fcG9zaXRpb24uY29weShwb3NpdGlvbik7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gdGhpcy5fbWFuYWdlci5saXN0ZW5lcjtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGxwb3MgPSBsaXN0ZW5lci5nZXRQb3NpdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gZmFsbE9mZihscG9zLCB0aGlzLl9wb3NpdGlvbiwgdGhpcy5yZWZEaXN0YW5jZSwgdGhpcy5tYXhEaXN0YW5jZSwgdGhpcy5yb2xsT2ZmRmFjdG9yLCB0aGlzLmRpc3RhbmNlTW9kZWwpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMudm9sdW1lO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zb3VyY2Uudm9sdW1lID0gdiAqIGZhY3RvciAqIHRoaXMuX21hbmFnZXIudm9sdW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU291bmRJbnN0YW5jZTNkLnByb3RvdHlwZSwgJ21heERpc3RhbmNlJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXhEaXN0YW5jZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX21heERpc3RhbmNlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTb3VuZEluc3RhbmNlM2QucHJvdG90eXBlLCAncmVmRGlzdGFuY2UnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlZkRpc3RhbmNlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fcmVmRGlzdGFuY2UgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNvdW5kSW5zdGFuY2UzZC5wcm90b3R5cGUsICdyb2xsT2ZmRmFjdG9yJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yb2xsT2ZmRmFjdG9yO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fcm9sbE9mZkZhY3RvciA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU291bmRJbnN0YW5jZTNkLnByb3RvdHlwZSwgJ2Rpc3RhbmNlTW9kZWwnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc3RhbmNlTW9kZWw7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9kaXN0YW5jZU1vZGVsID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZXhwb3J0IHsgU291bmRJbnN0YW5jZTNkIH07XG4iXSwibmFtZXMiOlsiTUFYX0RJU1RBTkNFIiwiU291bmRJbnN0YW5jZTNkIiwiU291bmRJbnN0YW5jZSIsImNvbnN0cnVjdG9yIiwibWFuYWdlciIsInNvdW5kIiwib3B0aW9ucyIsIl9wb3NpdGlvbiIsIlZlYzMiLCJfdmVsb2NpdHkiLCJwb3NpdGlvbiIsIm1heERpc3RhbmNlIiwidW5kZWZpbmVkIiwiTnVtYmVyIiwicmVmRGlzdGFuY2UiLCJyb2xsT2ZmRmFjdG9yIiwiZGlzdGFuY2VNb2RlbCIsIkRJU1RBTkNFX0xJTkVBUiIsIl9pbml0aWFsaXplTm9kZXMiLCJnYWluIiwiX21hbmFnZXIiLCJjb250ZXh0IiwiY3JlYXRlR2FpbiIsInBhbm5lciIsImNyZWF0ZVBhbm5lciIsImNvbm5lY3QiLCJfaW5wdXROb2RlIiwiX2Nvbm5lY3Rvck5vZGUiLCJkZXN0aW5hdGlvbiIsInZhbHVlIiwiY29weSIsInBvc2l0aW9uWCIsIngiLCJwb3NpdGlvblkiLCJ5IiwicG9zaXRpb25aIiwieiIsInNldFBvc2l0aW9uIiwidmVsb2NpdHkiLCJEZWJ1ZyIsIndhcm4iLCJyb2xsb2ZmRmFjdG9yIiwiaGFzQXVkaW9Db250ZXh0Iiwib2Zmc2V0IiwiZmFsbE9mZiIsInBvc09uZSIsInBvc1R3byIsInN1YjIiLCJkaXN0YW5jZSIsImxlbmd0aCIsInJlc3VsdCIsIkRJU1RBTkNFX0lOVkVSU0UiLCJESVNUQU5DRV9FWFBPTkVOVElBTCIsIk1hdGgiLCJwb3ciLCJtYXRoIiwiY2xhbXAiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInByb3RvdHlwZSIsImdldCIsInNldCIsInNvdXJjZSIsImxpc3RlbmVyIiwibHBvcyIsImdldFBvc2l0aW9uIiwiZmFjdG9yIiwidiIsInZvbHVtZSIsIl9tYXhEaXN0YW5jZSIsIl9yZWZEaXN0YW5jZSIsIl9yb2xsT2ZmRmFjdG9yIiwiX2Rpc3RhbmNlTW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztB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
