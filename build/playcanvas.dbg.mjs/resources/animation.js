/**
 * @license
 * PlayCanvas Engine v1.57.1 revision 256dd83c2 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { path } from '../core/path.js';
import { Quat } from '../math/quat.js';
import { Vec3 } from '../math/vec3.js';
import { Http, http } from '../net/http.js';
import { Animation, Node, Key } from '../animation/animation.js';
import { AnimEvents } from '../anim/evaluator/anim-events.js';
import { GlbParser } from './parser/glb-parser.js';

class AnimationHandler {
  constructor(app) {
    this.handlerType = "animation";
    this.maxRetries = 0;
  }

  load(url, callback) {
    if (typeof url === 'string') {
      url = {
        load: url,
        original: url
      };
    }

    const options = {
      retry: this.maxRetries > 0,
      maxRetries: this.maxRetries
    };

    if (url.load.startsWith('blob:') || url.load.startsWith('data:')) {
      if (path.getExtension(url.original).toLowerCase() === '.glb') {
        options.responseType = Http.ResponseType.ARRAY_BUFFER;
      } else {
        options.responseType = Http.ResponseType.JSON;
      }
    }

    http.get(url.load, options, function (err, response) {
      if (err) {
        callback(`Error loading animation resource: ${url.original} [${err}]`);
      } else {
        callback(null, response);
      }
    });
  }

  open(url, data, asset) {
    if (path.getExtension(url).toLowerCase() === '.glb') {
      const glbResources = GlbParser.parse('filename.glb', data, null);

      if (glbResources) {
        var _asset$data;

        const animations = glbResources.animations;

        if (asset != null && (_asset$data = asset.data) != null && _asset$data.events) {
          for (let i = 0; i < animations.length; i++) {
            animations[i].events = new AnimEvents(Object.values(asset.data.events));
          }
        }

        glbResources.destroy();
        return animations;
      }

      return null;
    }

    return this['_parseAnimationV' + data.animation.version](data);
  }

  patch(asset, assets) {}

  _parseAnimationV3(data) {
    const animData = data.animation;
    const anim = new Animation();
    anim.name = animData.name;
    anim.duration = animData.duration;

    for (let i = 0; i < animData.nodes.length; i++) {
      const node = new Node();
      const n = animData.nodes[i];
      node._name = n.name;

      for (let j = 0; j < n.keys.length; j++) {
        const k = n.keys[j];
        const t = k.time;
        const p = k.pos;
        const r = k.rot;
        const s = k.scale;
        const pos = new Vec3(p[0], p[1], p[2]);
        const rot = new Quat().setFromEulerAngles(r[0], r[1], r[2]);
        const scl = new Vec3(s[0], s[1], s[2]);
        const key = new Key(t, pos, rot, scl);

        node._keys.push(key);
      }

      anim.addNode(node);
    }

    return anim;
  }

  _parseAnimationV4(data) {
    const animData = data.animation;
    const anim = new Animation();
    anim.name = animData.name;
    anim.duration = animData.duration;

    for (let i = 0; i < animData.nodes.length; i++) {
      const node = new Node();
      const n = animData.nodes[i];
      node._name = n.name;
      const defPos = n.defaults.p;
      const defRot = n.defaults.r;
      const defScl = n.defaults.s;

      for (let j = 0; j < n.keys.length; j++) {
        const k = n.keys[j];
        const t = k.t;
        const p = defPos ? defPos : k.p;
        const r = defRot ? defRot : k.r;
        const s = defScl ? defScl : k.s;
        const pos = new Vec3(p[0], p[1], p[2]);
        const rot = new Quat().setFromEulerAngles(r[0], r[1], r[2]);
        const scl = new Vec3(s[0], s[1], s[2]);
        const key = new Key(t, pos, rot, scl);

        node._keys.push(key);
      }

      anim.addNode(node);
    }

    return anim;
  }

}

export { AnimationHandler };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5pbWF0aW9uLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvcmVzb3VyY2VzL2FuaW1hdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXRoIH0gZnJvbSAnLi4vY29yZS9wYXRoLmpzJztcblxuaW1wb3J0IHsgUXVhdCB9IGZyb20gJy4uL21hdGgvcXVhdC5qcyc7XG5pbXBvcnQgeyBWZWMzIH0gZnJvbSAnLi4vbWF0aC92ZWMzLmpzJztcblxuaW1wb3J0IHsgaHR0cCwgSHR0cCB9IGZyb20gJy4uL25ldC9odHRwLmpzJztcblxuaW1wb3J0IHsgQW5pbWF0aW9uLCBLZXksIE5vZGUgfSBmcm9tICcuLi9hbmltYXRpb24vYW5pbWF0aW9uLmpzJztcbmltcG9ydCB7IEFuaW1FdmVudHMgfSBmcm9tICcuLi9hbmltL2V2YWx1YXRvci9hbmltLWV2ZW50cy5qcyc7XG5cbmltcG9ydCB7IEdsYlBhcnNlciB9IGZyb20gJy4uL3Jlc291cmNlcy9wYXJzZXIvZ2xiLXBhcnNlci5qcyc7XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL2hhbmRsZXIuanMnKS5SZXNvdXJjZUhhbmRsZXJ9IFJlc291cmNlSGFuZGxlciAqL1xuXG4vKipcbiAqIFJlc291cmNlIGhhbmRsZXIgdXNlZCBmb3IgbG9hZGluZyB7QGxpbmsgQW5pbWF0aW9ufSByZXNvdXJjZXMuXG4gKlxuICogQGltcGxlbWVudHMge1Jlc291cmNlSGFuZGxlcn1cbiAqL1xuY2xhc3MgQW5pbWF0aW9uSGFuZGxlciB7XG4gICAgLyoqXG4gICAgICogVHlwZSBvZiB0aGUgcmVzb3VyY2UgdGhlIGhhbmRsZXIgaGFuZGxlcy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgaGFuZGxlclR5cGUgPSBcImFuaW1hdGlvblwiO1xuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgdGhpcy5tYXhSZXRyaWVzID0gMDtcbiAgICB9XG5cbiAgICBsb2FkKHVybCwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB1cmwgPSB7XG4gICAgICAgICAgICAgICAgbG9hZDogdXJsLFxuICAgICAgICAgICAgICAgIG9yaWdpbmFsOiB1cmxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3ZSBuZWVkIHRvIHNwZWNpZnkgSlNPTiBmb3IgYmxvYiBVUkxzXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICByZXRyeTogdGhpcy5tYXhSZXRyaWVzID4gMCxcbiAgICAgICAgICAgIG1heFJldHJpZXM6IHRoaXMubWF4UmV0cmllc1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh1cmwubG9hZC5zdGFydHNXaXRoKCdibG9iOicpIHx8IHVybC5sb2FkLnN0YXJ0c1dpdGgoJ2RhdGE6JykpIHtcbiAgICAgICAgICAgIGlmIChwYXRoLmdldEV4dGVuc2lvbih1cmwub3JpZ2luYWwpLnRvTG93ZXJDYXNlKCkgPT09ICcuZ2xiJykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMucmVzcG9uc2VUeXBlID0gSHR0cC5SZXNwb25zZVR5cGUuQVJSQVlfQlVGRkVSO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnJlc3BvbnNlVHlwZSA9IEh0dHAuUmVzcG9uc2VUeXBlLkpTT047XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBodHRwLmdldCh1cmwubG9hZCwgb3B0aW9ucywgZnVuY3Rpb24gKGVyciwgcmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhgRXJyb3IgbG9hZGluZyBhbmltYXRpb24gcmVzb3VyY2U6ICR7dXJsLm9yaWdpbmFsfSBbJHtlcnJ9XWApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9wZW4odXJsLCBkYXRhLCBhc3NldCkge1xuICAgICAgICBpZiAocGF0aC5nZXRFeHRlbnNpb24odXJsKS50b0xvd2VyQ2FzZSgpID09PSAnLmdsYicpIHtcbiAgICAgICAgICAgIGNvbnN0IGdsYlJlc291cmNlcyA9IEdsYlBhcnNlci5wYXJzZSgnZmlsZW5hbWUuZ2xiJywgZGF0YSwgbnVsbCk7XG4gICAgICAgICAgICBpZiAoZ2xiUmVzb3VyY2VzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYW5pbWF0aW9ucyA9IGdsYlJlc291cmNlcy5hbmltYXRpb25zO1xuICAgICAgICAgICAgICAgIGlmIChhc3NldD8uZGF0YT8uZXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW5pbWF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uc1tpXS5ldmVudHMgPSBuZXcgQW5pbUV2ZW50cyhPYmplY3QudmFsdWVzKGFzc2V0LmRhdGEuZXZlbnRzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2xiUmVzb3VyY2VzLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5pbWF0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzWydfcGFyc2VBbmltYXRpb25WJyArIGRhdGEuYW5pbWF0aW9uLnZlcnNpb25dKGRhdGEpO1xuICAgIH1cblxuICAgIHBhdGNoKGFzc2V0LCBhc3NldHMpIHtcbiAgICB9XG5cbiAgICBfcGFyc2VBbmltYXRpb25WMyhkYXRhKSB7XG4gICAgICAgIGNvbnN0IGFuaW1EYXRhID0gZGF0YS5hbmltYXRpb247XG5cbiAgICAgICAgY29uc3QgYW5pbSA9IG5ldyBBbmltYXRpb24oKTtcbiAgICAgICAgYW5pbS5uYW1lID0gYW5pbURhdGEubmFtZTtcbiAgICAgICAgYW5pbS5kdXJhdGlvbiA9IGFuaW1EYXRhLmR1cmF0aW9uO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW5pbURhdGEubm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBuZXcgTm9kZSgpO1xuXG4gICAgICAgICAgICBjb25zdCBuID0gYW5pbURhdGEubm9kZXNbaV07XG4gICAgICAgICAgICBub2RlLl9uYW1lID0gbi5uYW1lO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG4ua2V5cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGsgPSBuLmtleXNbal07XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gay50aW1lO1xuICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBrLnBvcztcbiAgICAgICAgICAgICAgICBjb25zdCByID0gay5yb3Q7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGsuc2NhbGU7XG4gICAgICAgICAgICAgICAgY29uc3QgcG9zID0gbmV3IFZlYzMocFswXSwgcFsxXSwgcFsyXSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm90ID0gbmV3IFF1YXQoKS5zZXRGcm9tRXVsZXJBbmdsZXMoclswXSwgclsxXSwgclsyXSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2NsID0gbmV3IFZlYzMoc1swXSwgc1sxXSwgc1syXSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBuZXcgS2V5KHQsIHBvcywgcm90LCBzY2wpO1xuXG4gICAgICAgICAgICAgICAgbm9kZS5fa2V5cy5wdXNoKGtleSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFuaW0uYWRkTm9kZShub2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhbmltO1xuICAgIH1cblxuICAgIF9wYXJzZUFuaW1hdGlvblY0KGRhdGEpIHtcbiAgICAgICAgY29uc3QgYW5pbURhdGEgPSBkYXRhLmFuaW1hdGlvbjtcblxuICAgICAgICBjb25zdCBhbmltID0gbmV3IEFuaW1hdGlvbigpO1xuICAgICAgICBhbmltLm5hbWUgPSBhbmltRGF0YS5uYW1lO1xuICAgICAgICBhbmltLmR1cmF0aW9uID0gYW5pbURhdGEuZHVyYXRpb247XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbmltRGF0YS5ub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5ldyBOb2RlKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBhbmltRGF0YS5ub2Rlc1tpXTtcbiAgICAgICAgICAgIG5vZGUuX25hbWUgPSBuLm5hbWU7XG5cbiAgICAgICAgICAgIGNvbnN0IGRlZlBvcyA9IG4uZGVmYXVsdHMucDtcbiAgICAgICAgICAgIGNvbnN0IGRlZlJvdCA9IG4uZGVmYXVsdHMucjtcbiAgICAgICAgICAgIGNvbnN0IGRlZlNjbCA9IG4uZGVmYXVsdHMucztcblxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBuLmtleXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrID0gbi5rZXlzW2pdO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGsudDtcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gZGVmUG9zID8gZGVmUG9zIDogay5wO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBkZWZSb3QgPyBkZWZSb3QgOiBrLnI7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGRlZlNjbCA/IGRlZlNjbCA6IGsucztcbiAgICAgICAgICAgICAgICBjb25zdCBwb3MgPSBuZXcgVmVjMyhwWzBdLCBwWzFdLCBwWzJdKTtcbiAgICAgICAgICAgICAgICBjb25zdCByb3QgPSBuZXcgUXVhdCgpLnNldEZyb21FdWxlckFuZ2xlcyhyWzBdLCByWzFdLCByWzJdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzY2wgPSBuZXcgVmVjMyhzWzBdLCBzWzFdLCBzWzJdKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IG5ldyBLZXkodCwgcG9zLCByb3QsIHNjbCk7XG5cbiAgICAgICAgICAgICAgICBub2RlLl9rZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYW5pbS5hZGROb2RlKG5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFuaW07XG4gICAgfVxufVxuXG5leHBvcnQgeyBBbmltYXRpb25IYW5kbGVyIH07XG4iXSwibmFtZXMiOlsiQW5pbWF0aW9uSGFuZGxlciIsImNvbnN0cnVjdG9yIiwiYXBwIiwiaGFuZGxlclR5cGUiLCJtYXhSZXRyaWVzIiwibG9hZCIsInVybCIsImNhbGxiYWNrIiwib3JpZ2luYWwiLCJvcHRpb25zIiwicmV0cnkiLCJzdGFydHNXaXRoIiwicGF0aCIsImdldEV4dGVuc2lvbiIsInRvTG93ZXJDYXNlIiwicmVzcG9uc2VUeXBlIiwiSHR0cCIsIlJlc3BvbnNlVHlwZSIsIkFSUkFZX0JVRkZFUiIsIkpTT04iLCJodHRwIiwiZ2V0IiwiZXJyIiwicmVzcG9uc2UiLCJvcGVuIiwiZGF0YSIsImFzc2V0IiwiZ2xiUmVzb3VyY2VzIiwiR2xiUGFyc2VyIiwicGFyc2UiLCJhbmltYXRpb25zIiwiZXZlbnRzIiwiaSIsImxlbmd0aCIsIkFuaW1FdmVudHMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJkZXN0cm95IiwiYW5pbWF0aW9uIiwidmVyc2lvbiIsInBhdGNoIiwiYXNzZXRzIiwiX3BhcnNlQW5pbWF0aW9uVjMiLCJhbmltRGF0YSIsImFuaW0iLCJBbmltYXRpb24iLCJuYW1lIiwiZHVyYXRpb24iLCJub2RlcyIsIm5vZGUiLCJOb2RlIiwibiIsIl9uYW1lIiwiaiIsImtleXMiLCJrIiwidCIsInRpbWUiLCJwIiwicG9zIiwiciIsInJvdCIsInMiLCJzY2FsZSIsIlZlYzMiLCJRdWF0Iiwic2V0RnJvbUV1bGVyQW5nbGVzIiwic2NsIiwia2V5IiwiS2V5IiwiX2tleXMiLCJwdXNoIiwiYWRkTm9kZSIsIl9wYXJzZUFuaW1hdGlvblY0IiwiZGVmUG9zIiwiZGVmYXVsdHMiLCJkZWZSb3QiLCJkZWZTY2wiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFtQkEsTUFBTUEsZ0JBQU4sQ0FBdUI7RUFTbkJDLFdBQVcsQ0FBQ0MsR0FBRCxFQUFNO0lBQUEsSUFIakJDLENBQUFBLFdBR2lCLEdBSEgsV0FHRyxDQUFBO0lBQ2IsSUFBS0MsQ0FBQUEsVUFBTCxHQUFrQixDQUFsQixDQUFBO0FBQ0gsR0FBQTs7QUFFREMsRUFBQUEsSUFBSSxDQUFDQyxHQUFELEVBQU1DLFFBQU4sRUFBZ0I7QUFDaEIsSUFBQSxJQUFJLE9BQU9ELEdBQVAsS0FBZSxRQUFuQixFQUE2QjtBQUN6QkEsTUFBQUEsR0FBRyxHQUFHO0FBQ0ZELFFBQUFBLElBQUksRUFBRUMsR0FESjtBQUVGRSxRQUFBQSxRQUFRLEVBQUVGLEdBQUFBO09BRmQsQ0FBQTtBQUlILEtBQUE7O0FBR0QsSUFBQSxNQUFNRyxPQUFPLEdBQUc7QUFDWkMsTUFBQUEsS0FBSyxFQUFFLElBQUEsQ0FBS04sVUFBTCxHQUFrQixDQURiO0FBRVpBLE1BQUFBLFVBQVUsRUFBRSxJQUFLQSxDQUFBQSxVQUFBQTtLQUZyQixDQUFBOztBQUtBLElBQUEsSUFBSUUsR0FBRyxDQUFDRCxJQUFKLENBQVNNLFVBQVQsQ0FBb0IsT0FBcEIsQ0FBQSxJQUFnQ0wsR0FBRyxDQUFDRCxJQUFKLENBQVNNLFVBQVQsQ0FBb0IsT0FBcEIsQ0FBcEMsRUFBa0U7TUFDOUQsSUFBSUMsSUFBSSxDQUFDQyxZQUFMLENBQWtCUCxHQUFHLENBQUNFLFFBQXRCLENBQWdDTSxDQUFBQSxXQUFoQyxFQUFrRCxLQUFBLE1BQXRELEVBQThEO0FBQzFETCxRQUFBQSxPQUFPLENBQUNN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
