import { http } from '../../platform/net/http.js';

const SceneUtils = {
  /**
   * @private
   * @function
   * @static
   * @name SceneUtils.load
   * @description Loads the scene JSON file from a URL.
   * @param {string} url - URL to scene JSON.
   * @param {number} maxRetries - Number of http load retry attempts.
   * @param {Function} callback - The callback to the JSON file is loaded.
   */
  load: function (url, maxRetries, callback) {
    if (typeof url === 'string') {
      url = {
        load: url,
        original: url
      };
    }
    http.get(url.load, {
      retry: maxRetries > 0,
      maxRetries: maxRetries
    }, function (err, response) {
      if (!err) {
        callback(err, response);
      } else {
        let errMsg = 'Error while loading scene JSON ' + url.original;
        if (err.message) {
          errMsg += ': ' + err.message;
          if (err.stack) {
            errMsg += '\n' + err.stack;
          }
        } else {
          errMsg += ': ' + err;
        }
        callback(errMsg);
      }
    });
  }
};

export { SceneUtils };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NlbmUtdXRpbHMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9mcmFtZXdvcmsvaGFuZGxlcnMvc2NlbmUtdXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaHR0cCB9IGZyb20gJy4uLy4uL3BsYXRmb3JtL25ldC9odHRwLmpzJztcblxuY29uc3QgU2NlbmVVdGlscyA9IHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbmFtZSBTY2VuZVV0aWxzLmxvYWRcbiAgICAgKiBAZGVzY3JpcHRpb24gTG9hZHMgdGhlIHNjZW5lIEpTT04gZmlsZSBmcm9tIGEgVVJMLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBVUkwgdG8gc2NlbmUgSlNPTi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4UmV0cmllcyAtIE51bWJlciBvZiBodHRwIGxvYWQgcmV0cnkgYXR0ZW1wdHMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBUaGUgY2FsbGJhY2sgdG8gdGhlIEpTT04gZmlsZSBpcyBsb2FkZWQuXG4gICAgICovXG4gICAgbG9hZDogZnVuY3Rpb24gKHVybCwgbWF4UmV0cmllcywgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB1cmwgPSB7XG4gICAgICAgICAgICAgICAgbG9hZDogdXJsLFxuICAgICAgICAgICAgICAgIG9yaWdpbmFsOiB1cmxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBodHRwLmdldCh1cmwubG9hZCwge1xuICAgICAgICAgICAgcmV0cnk6IG1heFJldHJpZXMgPiAwLFxuICAgICAgICAgICAgbWF4UmV0cmllczogbWF4UmV0cmllc1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyLCByZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGVyck1zZyA9ICdFcnJvciB3aGlsZSBsb2FkaW5nIHNjZW5lIEpTT04gJyArIHVybC5vcmlnaW5hbDtcbiAgICAgICAgICAgICAgICBpZiAoZXJyLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyTXNnICs9ICc6ICcgKyBlcnIubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVyci5zdGFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyTXNnICs9ICdcXG4nICsgZXJyLnN0YWNrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyTXNnICs9ICc6ICcgKyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyTXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuZXhwb3J0IHsgU2NlbmVVdGlscyB9O1xuIl0sIm5hbWVzIjpbIlNjZW5lVXRpbHMiLCJsb2FkIiwidXJsIiwibWF4UmV0cmllcyIsImNhbGxiYWNrIiwib3JpZ2luYWwiLCJodHRwIiwiZ2V0IiwicmV0cnkiLCJlcnIiLCJyZXNwb25zZSIsImVyck1zZyIsIm1lc3NhZ2UiLCJzdGFjayJdLCJtYXBwaW5ncyI6Ijs7QUFFQSxNQUFNQSxVQUFVLEdBQUc7QUFDZjtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJQyxJQUFJLEVBQUUsVUFBVUMsR0FBRyxFQUFFQyxVQUFVLEVBQUVDLFFBQVEsRUFBRTtBQUN2QyxJQUFBLElBQUksT0FBT0YsR0FBRyxLQUFLLFFBQVEsRUFBRTtBQUN6QkEsTUFBQUEsR0FBRyxHQUFHO0FBQ0ZELFFBQUFBLElBQUksRUFBRUMsR0FBRztBQUNURyxRQUFBQSxRQUFRLEVBQUVILEdBQUFBO09BQ2IsQ0FBQTtBQUNMLEtBQUE7QUFFQUksSUFBQUEsSUFBSSxDQUFDQyxHQUFHLENBQUNMLEdBQUcsQ0FBQ0QsSUFBSSxFQUFFO01BQ2ZPLEtBQUssRUFBRUwsVUFBVSxHQUFHLENBQUM7QUFDckJBLE1BQUFBLFVBQVUsRUFBRUEsVUFBQUE7QUFDaEIsS0FBQyxFQUFFLFVBQVVNLEdBQUcsRUFBRUMsUUFBUSxFQUFFO01BQ3hCLElBQUksQ0FBQ0QsR0FBRyxFQUFFO0FBQ05MLFFBQUFBLFFBQVEsQ0FBQ0ssR0FBRyxFQUFFQyxRQUFRLENBQUMsQ0FBQTtBQUMzQixPQUFDLE1BQU07QUFDSCxRQUFBLElBQUlDLE1BQU0sR0FBRyxpQ0FBaUMsR0FBR1QsR0FBRyxDQUFDRyxRQUFRLENBQUE7UUFDN0QsSUFBSUksR0FBRyxDQUFDRyxPQUFPLEVBQUU7QUFDYkQsVUFBQUEsTUFBTSxJQUFJLElBQUksR0FBR0YsR0FBRyxDQUFDRyxPQUFPLENBQUE7VUFDNUIsSUFBSUgsR0FBRyxDQUFDSSxLQUFLLEVBQUU7QUFDWEYsWUFBQUEsTUFBTSxJQUFJLElBQUksR0FBR0YsR0FBRyxDQUFDSSxLQUFLLENBQUE7QUFDOUIsV0FBQTtBQUNKLFNBQUMsTUFBTTtVQUNIRixNQUFNLElBQUksSUFBSSxHQUFHRixHQUFHLENBQUE7QUFDeEIsU0FBQTtRQUVBTCxRQUFRLENBQUNPLE1BQU0sQ0FBQyxDQUFBO0FBQ3BCLE9BQUE7QUFDSixLQUFDLENBQUMsQ0FBQTtBQUNOLEdBQUE7QUFDSjs7OzsifQ==
