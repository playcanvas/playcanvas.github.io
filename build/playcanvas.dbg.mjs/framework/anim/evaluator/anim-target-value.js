/**
 * @license
 * PlayCanvas Engine v1.62.0 revision 818511d2b (DEBUG PROFILER)
 * Copyright 2011-2023 PlayCanvas Ltd. All rights reserved.
 */
import { Quat } from '../../../core/math/quat.js';
import { ANIM_LAYER_OVERWRITE, ANIM_LAYER_ADDITIVE } from '../controller/constants.js';
import { AnimBlend } from './anim-blend.js';
import { math } from '../../../core/math/math.js';

/**
 * Used to store and update the value of an animation target. This combines the values of multiple
 * layer targets into a single value.
 *
 * @ignore
 */
class AnimTargetValue {
  /**
   * Create a new AnimTargetValue instance.
   *
   * @param {AnimComponent} component - The anim component this target value is associated with.
   * @param {string} type - The type of value stored, either quat or vec3.
   */
  constructor(component, type) {
    this._component = component;
    this.mask = new Int8Array(component.layers.length);
    this.weights = new Float32Array(component.layers.length);
    this.totalWeight = 0;
    this.counter = 0;
    this.layerCounter = 0;
    this.valueType = type;
    this.dirty = true;
    this.value = type === AnimTargetValue.TYPE_QUAT ? [0, 0, 0, 1] : [0, 0, 0];
    this.baseValue = null;
    this.setter = null;
  }
  get _normalizeWeights() {
    return this._component.normalizeWeights;
  }
  getWeight(index) {
    if (this.dirty) this.updateWeights();
    if (this._normalizeWeights && this.totalWeight === 0 || !this.mask[index]) {
      return 0;
    } else if (this._normalizeWeights) {
      return this.weights[index] / this.totalWeight;
    }
    return math.clamp(this.weights[index], 0, 1);
  }
  _layerBlendType(index) {
    return this._component.layers[index].blendType;
  }
  setMask(index, value) {
    this.mask[index] = value;
    if (this._normalizeWeights) {
      if (this._component.layers[index].blendType === ANIM_LAYER_OVERWRITE) {
        this.mask = this.mask.fill(0, 0, index);
      }
      this.dirty = true;
    }
  }
  updateWeights() {
    this.totalWeight = 0;
    for (let i = 0; i < this.weights.length; i++) {
      this.weights[i] = this._component.layers[i].weight;
      this.totalWeight += this.mask[i] * this.weights[i];
    }
    this.dirty = false;
  }
  updateValue(index, value) {
    // always reset the value of the target when the counter is 0
    if (this.counter === 0) {
      AnimBlend.set(this.value, AnimTargetValue.IDENTITY_QUAT_ARR, this.valueType);
      if (!this._normalizeWeights) {
        AnimBlend.blend(this.value, this.baseValue, 1, this.valueType);
      }
    }
    if (!this.mask[index] || this.getWeight(index) === 0) return;
    if (this._layerBlendType(index) === ANIM_LAYER_ADDITIVE && !this._normalizeWeights) {
      if (this.valueType === AnimTargetValue.TYPE_QUAT) {
        // current value
        const v = AnimTargetValue.q1.set(this.value[0], this.value[1], this.value[2], this.value[3]);
        // additive value
        const aV1 = AnimTargetValue.q2.set(this.baseValue[0], this.baseValue[1], this.baseValue[2], this.baseValue[3]);
        const aV2 = AnimTargetValue.q3.set(value[0], value[1], value[2], value[3]);
        const aV = aV1.invert().mul(aV2);
        // scale additive value by it's weight
        aV.slerp(Quat.IDENTITY, aV, this.getWeight(index));
        // add the additive value onto the current value then set it to the targets value
        v.mul(aV);
        AnimTargetValue.quatArr[0] = v.x;
        AnimTargetValue.quatArr[1] = v.y;
        AnimTargetValue.quatArr[2] = v.z;
        AnimTargetValue.quatArr[3] = v.w;
        AnimBlend.set(this.value, AnimTargetValue.quatArr, this.valueType);
      } else {
        AnimTargetValue.vecArr[0] = value[0] - this.baseValue[0];
        AnimTargetValue.vecArr[1] = value[1] - this.baseValue[1];
        AnimTargetValue.vecArr[2] = value[2] - this.baseValue[2];
        AnimBlend.blend(this.value, AnimTargetValue.vecArr, this.getWeight(index), this.valueType, true);
      }
    } else {
      AnimBlend.blend(this.value, value, this.getWeight(index), this.valueType);
    }
    if (this.setter) this.setter(this.value);
  }
  unbind() {
    if (this.setter) {
      this.setter(this.baseValue);
    }
  }
}
AnimTargetValue.TYPE_QUAT = 'quaternion';
AnimTargetValue.TYPE_VEC3 = 'vector3';
AnimTargetValue.q1 = new Quat();
AnimTargetValue.q2 = new Quat();
AnimTargetValue.q3 = new Quat();
AnimTargetValue.quatArr = [0, 0, 0, 1];
AnimTargetValue.vecArr = [0, 0, 0];
AnimTargetValue.IDENTITY_QUAT_ARR = [0, 0, 0, 1];

export { AnimTargetValue };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5pbS10YXJnZXQtdmFsdWUuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9mcmFtZXdvcmsvYW5pbS9ldmFsdWF0b3IvYW5pbS10YXJnZXQtdmFsdWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUXVhdCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvbWF0aC9xdWF0LmpzJztcbmltcG9ydCB7IEFOSU1fTEFZRVJfQURESVRJVkUsIEFOSU1fTEFZRVJfT1ZFUldSSVRFIH0gZnJvbSAnLi4vY29udHJvbGxlci9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgQW5pbUJsZW5kIH0gZnJvbSAnLi9hbmltLWJsZW5kLmpzJztcbmltcG9ydCB7IG1hdGggfSBmcm9tICcuLi8uLi8uLi9jb3JlL21hdGgvbWF0aC5qcyc7XG5cbi8qKlxuICogVXNlZCB0byBzdG9yZSBhbmQgdXBkYXRlIHRoZSB2YWx1ZSBvZiBhbiBhbmltYXRpb24gdGFyZ2V0LiBUaGlzIGNvbWJpbmVzIHRoZSB2YWx1ZXMgb2YgbXVsdGlwbGVcbiAqIGxheWVyIHRhcmdldHMgaW50byBhIHNpbmdsZSB2YWx1ZS5cbiAqXG4gKiBAaWdub3JlXG4gKi9cbmNsYXNzIEFuaW1UYXJnZXRWYWx1ZSB7XG4gICAgc3RhdGljIFRZUEVfUVVBVCA9ICdxdWF0ZXJuaW9uJztcblxuICAgIHN0YXRpYyBUWVBFX1ZFQzMgPSAndmVjdG9yMyc7XG5cbiAgICBzdGF0aWMgcTEgPSBuZXcgUXVhdCgpO1xuXG4gICAgc3RhdGljIHEyID0gbmV3IFF1YXQoKTtcblxuICAgIHN0YXRpYyBxMyA9IG5ldyBRdWF0KCk7XG5cbiAgICBzdGF0aWMgcXVhdEFyciA9IFswLCAwLCAwLCAxXTtcblxuICAgIHN0YXRpYyB2ZWNBcnIgPSBbMCwgMCwgMF07XG5cbiAgICBzdGF0aWMgSURFTlRJVFlfUVVBVF9BUlIgPSBbMCwgMCwgMCwgMV07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgQW5pbVRhcmdldFZhbHVlIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBbmltQ29tcG9uZW50fSBjb21wb25lbnQgLSBUaGUgYW5pbSBjb21wb25lbnQgdGhpcyB0YXJnZXQgdmFsdWUgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gVGhlIHR5cGUgb2YgdmFsdWUgc3RvcmVkLCBlaXRoZXIgcXVhdCBvciB2ZWMzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbXBvbmVudCwgdHlwZSkge1xuICAgICAgICB0aGlzLl9jb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgICAgIHRoaXMubWFzayA9IG5ldyBJbnQ4QXJyYXkoY29tcG9uZW50LmxheWVycy5sZW5ndGgpO1xuICAgICAgICB0aGlzLndlaWdodHMgPSBuZXcgRmxvYXQzMkFycmF5KGNvbXBvbmVudC5sYXllcnMubGVuZ3RoKTtcbiAgICAgICAgdGhpcy50b3RhbFdlaWdodCA9IDA7XG4gICAgICAgIHRoaXMuY291bnRlciA9IDA7XG4gICAgICAgIHRoaXMubGF5ZXJDb3VudGVyID0gMDtcbiAgICAgICAgdGhpcy52YWx1ZVR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9ICh0eXBlID09PSBBbmltVGFyZ2V0VmFsdWUuVFlQRV9RVUFUID8gWzAsIDAsIDAsIDFdIDogWzAsIDAsIDBdKTtcbiAgICAgICAgdGhpcy5iYXNlVmFsdWUgPSBudWxsO1xuICAgICAgICB0aGlzLnNldHRlciA9IG51bGw7XG4gICAgfVxuXG4gICAgZ2V0IF9ub3JtYWxpemVXZWlnaHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50Lm5vcm1hbGl6ZVdlaWdodHM7XG4gICAgfVxuXG4gICAgZ2V0V2VpZ2h0KGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLmRpcnR5KSB0aGlzLnVwZGF0ZVdlaWdodHMoKTtcbiAgICAgICAgaWYgKHRoaXMuX25vcm1hbGl6ZVdlaWdodHMgJiYgdGhpcy50b3RhbFdlaWdodCA9PT0gMCB8fCAhdGhpcy5tYXNrW2luZGV4XSkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fbm9ybWFsaXplV2VpZ2h0cykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2VpZ2h0c1tpbmRleF0gLyB0aGlzLnRvdGFsV2VpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXRoLmNsYW1wKHRoaXMud2VpZ2h0c1tpbmRleF0sIDAsIDEpO1xuICAgIH1cblxuICAgIF9sYXllckJsZW5kVHlwZShpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50LmxheWVyc1tpbmRleF0uYmxlbmRUeXBlO1xuICAgIH1cblxuICAgIHNldE1hc2soaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMubWFza1tpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgaWYgKHRoaXMuX25vcm1hbGl6ZVdlaWdodHMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb21wb25lbnQubGF5ZXJzW2luZGV4XS5ibGVuZFR5cGUgPT09IEFOSU1fTEFZRVJfT1ZFUldSSVRFKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXNrID0gdGhpcy5tYXNrLmZpbGwoMCwgMCwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVXZWlnaHRzKCkge1xuICAgICAgICB0aGlzLnRvdGFsV2VpZ2h0ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLndlaWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMud2VpZ2h0c1tpXSA9IHRoaXMuX2NvbXBvbmVudC5sYXllcnNbaV0ud2VpZ2h0O1xuICAgICAgICAgICAgdGhpcy50b3RhbFdlaWdodCArPSB0aGlzLm1hc2tbaV0gKiB0aGlzLndlaWdodHNbaV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHVwZGF0ZVZhbHVlKGluZGV4LCB2YWx1ZSkge1xuICAgICAgICAvLyBhbHdheXMgcmVzZXQgdGhlIHZhbHVlIG9mIHRoZSB0YXJnZXQgd2hlbiB0aGUgY291bnRlciBpcyAwXG4gICAgICAgIGlmICh0aGlzLmNvdW50ZXIgPT09IDApIHtcbiAgICAgICAgICAgIEFuaW1CbGVuZC5zZXQodGhpcy52YWx1ZSwgQW5pbVRhcmdldFZhbHVlLklERU5USVRZX1FVQVRfQVJSLCB0aGlzLnZhbHVlVHlwZSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX25vcm1hbGl6ZVdlaWdodHMpIHtcbiAgICAgICAgICAgICAgICBBbmltQmxlbmQuYmxlbmQodGhpcy52YWx1ZSwgdGhpcy5iYXNlVmFsdWUsIDEsIHRoaXMudmFsdWVUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubWFza1tpbmRleF0gfHwgdGhpcy5nZXRXZWlnaHQoaW5kZXgpID09PSAwKSByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLl9sYXllckJsZW5kVHlwZShpbmRleCkgPT09IEFOSU1fTEFZRVJfQURESVRJVkUgJiYgIXRoaXMuX25vcm1hbGl6ZVdlaWdodHMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlVHlwZSA9PT0gQW5pbVRhcmdldFZhbHVlLlRZUEVfUVVBVCkge1xuICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgdmFsdWVcbiAgICAgICAgICAgICAgICBjb25zdCB2ID0gQW5pbVRhcmdldFZhbHVlLnExLnNldCh0aGlzLnZhbHVlWzBdLCB0aGlzLnZhbHVlWzFdLCB0aGlzLnZhbHVlWzJdLCB0aGlzLnZhbHVlWzNdKTtcbiAgICAgICAgICAgICAgICAvLyBhZGRpdGl2ZSB2YWx1ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGFWMSA9IEFuaW1UYXJnZXRWYWx1ZS5xMi5zZXQodGhpcy5iYXNlVmFsdWVbMF0sIHRoaXMuYmFzZVZhbHVlWzFdLCB0aGlzLmJhc2VWYWx1ZVsyXSwgdGhpcy5iYXNlVmFsdWVbM10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFWMiA9IEFuaW1UYXJnZXRWYWx1ZS5xMy5zZXQodmFsdWVbMF0sIHZhbHVlWzFdLCB2YWx1ZVsyXSwgdmFsdWVbM10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFWID0gYVYxLmludmVydCgpLm11bChhVjIpO1xuICAgICAgICAgICAgICAgIC8vIHNjYWxlIGFkZGl0aXZlIHZhbHVlIGJ5IGl0J3Mgd2VpZ2h0XG4gICAgICAgICAgICAgICAgYVYuc2xlcnAoUXVhdC5JREVOVElUWSwgYVYsIHRoaXMuZ2V0V2VpZ2h0KGluZGV4KSk7XG4gICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBhZGRpdGl2ZSB2YWx1ZSBvbnRvIHRoZSBjdXJyZW50IHZhbHVlIHRoZW4gc2V0IGl0IHRvIHRoZSB0YXJnZXRzIHZhbHVlXG4gICAgICAgICAgICAgICAgdi5tdWwoYVYpO1xuICAgICAgICAgICAgICAgIEFuaW1UYXJnZXRWYWx1ZS5xdWF0QXJyWzBdID0gdi54O1xuICAgICAgICAgICAgICAgIEFuaW1UYXJnZXRWYWx1ZS5xdWF0QXJyWzFdID0gdi55O1xuICAgICAgICAgICAgICAgIEFuaW1UYXJnZXRWYWx1ZS5xdWF0QXJyWzJdID0gdi56O1xuICAgICAgICAgICAgICAgIEFuaW1UYXJnZXRWYWx1ZS5xdWF0QXJyWzNdID0gdi53O1xuICAgICAgICAgICAgICAgIEFuaW1CbGVuZC5zZXQodGhpcy52YWx1ZSwgQW5pbVRhcmdldFZhbHVlLnF1YXRBcnIsIHRoaXMudmFsdWVUeXBlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgQW5pbVRhcmdldFZhbHVlLnZlY0FyclswXSA9IHZhbHVlWzBdIC0gdGhpcy5iYXNlVmFsdWVbMF07XG4gICAgICAgICAgICAgICAgQW5pbVRhcmdldFZhbHVlLnZlY0FyclsxXSA9IHZhbHVlWzFdIC0gdGhpcy5iYXNlVmFsdWVbMV07XG4gICAgICAgICAgICAgICAgQW5pbVRhcmdldFZhbHVlLnZlY0FyclsyXSA9IHZhbHVlWzJdIC0gdGhpcy5iYXNlVmFsdWVbMl07XG4gICAgICAgICAgICAgICAgQW5pbUJsZW5kLmJsZW5kKHRoaXMudmFsdWUsIEFuaW1UYXJnZXRWYWx1ZS52ZWNBcnIsIHRoaXMuZ2V0V2VpZ2h0KGluZGV4KSwgdGhpcy52YWx1ZVR5cGUsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQW5pbUJsZW5kLmJsZW5kKHRoaXMudmFsdWUsIHZhbHVlLCB0aGlzLmdldFdlaWdodChpbmRleCksIHRoaXMudmFsdWVUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZXR0ZXIpIHRoaXMuc2V0dGVyKHRoaXMudmFsdWUpO1xuICAgIH1cblxuICAgIHVuYmluZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGVyKSB7XG4gICAgICAgICAgICB0aGlzLnNldHRlcih0aGlzLmJhc2VWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7XG4gICAgQW5pbVRhcmdldFZhbHVlXG59O1xuIl0sIm5hbWVzIjpbIkFuaW1UYXJnZXRWYWx1ZSIsImNvbnN0cnVjdG9yIiwiY29tcG9uZW50IiwidHlwZSIsIl9jb21wb25lbnQiLCJtYXNrIiwiSW50OEFycmF5IiwibGF5ZXJzIiwibGVuZ3RoIiwid2VpZ2h0cyIsIkZsb2F0MzJBcnJheSIsInRvdGFsV2VpZ2h0IiwiY291bnRlciIsImxheWVyQ291bnRlciIsInZhbHVlVHlwZSIsImRpcnR5IiwidmFsdWUiLCJUWVBFX1FVQVQiLCJiYXNlVmFsdWUiLCJzZXR0ZXIiLCJfbm9ybWFsaXplV2VpZ2h0cyIsIm5vcm1hbGl6ZVdlaWdodHMiLCJnZXRXZWlnaHQiLCJpbmRleCIsInVwZGF0ZVdlaWdodHMiLCJtYXRoIiwiY2xhbXAiLCJfbGF5ZXJCbGVuZFR5cGUiLCJibGVuZFR5cGUiLCJzZXRNYXNrIiwiQU5JTV9MQVlFUl9PVkVSV1JJVEUiLCJmaWxsIiwiaSIsIndlaWdodCIsInVwZGF0ZVZhbHVlIiwiQW5pbUJsZW5kIiwic2V0IiwiSURFTlRJVFlfUVVBVF9BUlIiLCJibGVuZCIsIkFOSU1fTEFZRVJfQURESVRJVkUiLCJ2IiwicTEiLCJhVjEiLCJxMiIsImFWMiIsInEzIiwiYVYiLCJpbnZlcnQiLCJtdWwiLCJzbGVycCIsIlF1YXQiLCJJREVOVElUWSIsInF1YXRBcnIiLCJ4IiwieSIsInoiLCJ3IiwidmVjQXJyIiwidW5iaW5kIiwiVFlQRV9WRUMzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsZUFBZSxDQUFDO0FBaUJsQjtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSUMsRUFBQUEsV0FBVyxDQUFDQyxTQUFTLEVBQUVDLElBQUksRUFBRTtJQUN6QixJQUFJLENBQUNDLFVBQVUsR0FBR0YsU0FBUyxDQUFBO0lBQzNCLElBQUksQ0FBQ0csSUFBSSxHQUFHLElBQUlDLFNBQVMsQ0FBQ0osU0FBUyxDQUFDSyxNQUFNLENBQUNDLE1BQU0sQ0FBQyxDQUFBO0lBQ2xELElBQUksQ0FBQ0MsT0FBTyxHQUFHLElBQUlDLFlBQVksQ0FBQ1IsU0FBUyxDQUFDSyxNQUFNLENBQUNDLE1BQU0sQ0FBQyxDQUFBO0lBQ3hELElBQUksQ0FBQ0csV0FBVyxHQUFHLENBQUMsQ0FBQTtJQUNwQixJQUFJLENBQUNDLE9BQU8sR0FBRyxDQUFDLENBQUE7SUFDaEIsSUFBSSxDQUFDQyxZQUFZLEdBQUcsQ0FBQyxDQUFBO0lBQ3JCLElBQUksQ0FBQ0MsU0FBUyxHQUFHWCxJQUFJLENBQUE7SUFDckIsSUFBSSxDQUFDWSxLQUFLLEdBQUcsSUFBSSxDQUFBO0lBQ2pCLElBQUksQ0FBQ0MsS0FBSyxHQUFJYixJQUFJLEtBQUtILGVBQWUsQ0FBQ2lCLFNBQVMsR0FBRyxD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
