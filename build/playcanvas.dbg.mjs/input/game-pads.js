/**
 * @license
 * PlayCanvas Engine v1.57.0 revision f1998a31e (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
const MAPS = {
  DEFAULT: {
    buttons: ['PAD_FACE_1', 'PAD_FACE_2', 'PAD_FACE_3', 'PAD_FACE_4', 'PAD_L_SHOULDER_1', 'PAD_R_SHOULDER_1', 'PAD_L_SHOULDER_2', 'PAD_R_SHOULDER_2', 'PAD_SELECT', 'PAD_START', 'PAD_L_STICK_BUTTON', 'PAD_R_STICK_BUTTON', 'PAD_UP', 'PAD_DOWN', 'PAD_LEFT', 'PAD_RIGHT', 'PAD_VENDOR'],
    axes: ['PAD_L_STICK_X', 'PAD_L_STICK_Y', 'PAD_R_STICK_X', 'PAD_R_STICK_Y']
  },
  PS3: {
    buttons: ['PAD_FACE_1', 'PAD_FACE_2', 'PAD_FACE_4', 'PAD_FACE_3', 'PAD_L_SHOULDER_1', 'PAD_R_SHOULDER_1', 'PAD_L_SHOULDER_2', 'PAD_R_SHOULDER_2', 'PAD_SELECT', 'PAD_START', 'PAD_L_STICK_BUTTON', 'PAD_R_STICK_BUTTON', 'PAD_UP', 'PAD_DOWN', 'PAD_LEFT', 'PAD_RIGHT', 'PAD_VENDOR'],
    axes: ['PAD_L_STICK_X', 'PAD_L_STICK_Y', 'PAD_R_STICK_X', 'PAD_R_STICK_Y']
  }
};
const PRODUCT_CODES = {
  'Product: 0268': 'PS3'
};

class GamePads {
  constructor() {
    this.gamepadsSupported = !!navigator.getGamepads || !!navigator.webkitGetGamepads;
    this.current = [];
    this.previous = [];
    this.deadZone = 0.25;
  }

  update() {
    for (let i = 0, l = this.current.length; i < l; i++) {
      const buttons = this.current[i].pad.buttons;
      const buttonsLen = buttons.length;

      for (let j = 0; j < buttonsLen; j++) {
        if (this.previous[i] === undefined) {
          this.previous[i] = [];
        }

        this.previous[i][j] = buttons[j].pressed;
      }
    }

    this.poll(this.current);
  }

  poll(pads = []) {
    if (pads.length > 0) {
      pads.length = 0;
    }

    if (this.gamepadsSupported) {
      const padDevices = navigator.getGamepads ? navigator.getGamepads() : navigator.webkitGetGamepads();

      for (let i = 0, len = padDevices.length; i < len; i++) {
        if (padDevices[i]) {
          pads.push({
            map: this.getMap(padDevices[i]),
            pad: padDevices[i]
          });
        }
      }
    }

    return pads;
  }

  getMap(pad) {
    for (const code in PRODUCT_CODES) {
      if (pad.id.indexOf(code) >= 0) {
        return MAPS[PRODUCT_CODES[code]];
      }
    }

    return MAPS.DEFAULT;
  }

  isPressed(index, button) {
    if (!this.current[index]) {
      return false;
    }

    const key = this.current[index].map.buttons[button];
    return this.current[index].pad.buttons[pc[key]].pressed;
  }

  wasPressed(index, button) {
    if (!this.current[index]) {
      return false;
    }

    const key = this.current[index].map.buttons[button];
    const i = pc[key];
    return this.current[index].pad.buttons[i].pressed && !(this.previous[index] && this.previous[index][i]);
  }

  wasReleased(index, button) {
    if (!this.current[index]) {
      return false;
    }

    const key = this.current[index].map.buttons[button];
    const i = pc[key];
    return !this.current[index].pad.buttons[i].pressed && this.previous[index] && this.previous[index][i];
  }

  getAxis(index, axes) {
    if (!this.current[index]) {
      return 0;
    }

    const key = this.current[index].map.axes[axes];
    let value = this.current[index].pad.axes[pc[key]];

    if (Math.abs(value) < this.deadZone) {
      value = 0;
    }

    return value;
  }

}

export { GamePads };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FtZS1wYWRzLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvaW5wdXQvZ2FtZS1wYWRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IE1BUFMgPSB7XG4gICAgREVGQVVMVDoge1xuICAgICAgICBidXR0b25zOiBbXG4gICAgICAgICAgICAvLyBGYWNlIGJ1dHRvbnNcbiAgICAgICAgICAgICdQQURfRkFDRV8xJyxcbiAgICAgICAgICAgICdQQURfRkFDRV8yJyxcbiAgICAgICAgICAgICdQQURfRkFDRV8zJyxcbiAgICAgICAgICAgICdQQURfRkFDRV80JyxcblxuICAgICAgICAgICAgLy8gU2hvdWxkZXIgYnV0dG9uc1xuICAgICAgICAgICAgJ1BBRF9MX1NIT1VMREVSXzEnLFxuICAgICAgICAgICAgJ1BBRF9SX1NIT1VMREVSXzEnLFxuICAgICAgICAgICAgJ1BBRF9MX1NIT1VMREVSXzInLFxuICAgICAgICAgICAgJ1BBRF9SX1NIT1VMREVSXzInLFxuXG4gICAgICAgICAgICAvLyBPdGhlciBidXR0b25zXG4gICAgICAgICAgICAnUEFEX1NFTEVDVCcsXG4gICAgICAgICAgICAnUEFEX1NUQVJUJyxcbiAgICAgICAgICAgICdQQURfTF9TVElDS19CVVRUT04nLFxuICAgICAgICAgICAgJ1BBRF9SX1NUSUNLX0JVVFRPTicsXG5cbiAgICAgICAgICAgIC8vIEQgUGFkXG4gICAgICAgICAgICAnUEFEX1VQJyxcbiAgICAgICAgICAgICdQQURfRE9XTicsXG4gICAgICAgICAgICAnUEFEX0xFRlQnLFxuICAgICAgICAgICAgJ1BBRF9SSUdIVCcsXG5cbiAgICAgICAgICAgICAvLyBWZW5kb3Igc3BlY2lmaWMgYnV0dG9uXG4gICAgICAgICAgICAnUEFEX1ZFTkRPUidcbiAgICAgICAgXSxcblxuICAgICAgICBheGVzOiBbXG4gICAgICAgICAgICAvLyBBbmFsb2d1ZSBTdGlja3NcbiAgICAgICAgICAgICdQQURfTF9TVElDS19YJyxcbiAgICAgICAgICAgICdQQURfTF9TVElDS19ZJyxcbiAgICAgICAgICAgICdQQURfUl9TVElDS19YJyxcbiAgICAgICAgICAgICdQQURfUl9TVElDS19ZJ1xuICAgICAgICBdXG4gICAgfSxcblxuICAgIFBTMzoge1xuICAgICAgICBidXR0b25zOiBbXG4gICAgICAgICAgICAvLyBYLCBPLCBUUkksIFNRXG4gICAgICAgICAgICAnUEFEX0ZBQ0VfMScsXG4gICAgICAgICAgICAnUEFEX0ZBQ0VfMicsXG4gICAgICAgICAgICAnUEFEX0ZBQ0VfNCcsXG4gICAgICAgICAgICAnUEFEX0ZBQ0VfMycsXG5cbiAgICAgICAgICAgIC8vIFNob3VsZGVyIGJ1dHRvbnNcbiAgICAgICAgICAgICdQQURfTF9TSE9VTERFUl8xJyxcbiAgICAgICAgICAgICdQQURfUl9TSE9VTERFUl8xJyxcbiAgICAgICAgICAgICdQQURfTF9TSE9VTERFUl8yJyxcbiAgICAgICAgICAgICdQQURfUl9TSE9VTERFUl8yJyxcblxuICAgICAgICAgICAgLy8gT3RoZXIgYnV0dG9uc1xuICAgICAgICAgICAgJ1BBRF9TRUxFQ1QnLFxuICAgICAgICAgICAgJ1BBRF9TVEFSVCcsXG4gICAgICAgICAgICAnUEFEX0xfU1RJQ0tfQlVUVE9OJyxcbiAgICAgICAgICAgICdQQURfUl9TVElDS19CVVRUT04nLFxuXG4gICAgICAgICAgICAvLyBEIFBhZFxuICAgICAgICAgICAgJ1BBRF9VUCcsXG4gICAgICAgICAgICAnUEFEX0RPV04nLFxuICAgICAgICAgICAgJ1BBRF9MRUZUJyxcbiAgICAgICAgICAgICdQQURfUklHSFQnLFxuXG4gICAgICAgICAgICAnUEFEX1ZFTkRPUidcbiAgICAgICAgXSxcblxuICAgICAgICBheGVzOiBbXG4gICAgICAgICAgICAvLyBBbmFsb2d1ZSBTdGlja3NcbiAgICAgICAgICAgICdQQURfTF9TVElDS19YJyxcbiAgICAgICAgICAgICdQQURfTF9TVElDS19ZJyxcbiAgICAgICAgICAgICdQQURfUl9TVElDS19YJyxcbiAgICAgICAgICAgICdQQURfUl9TVElDS19ZJ1xuICAgICAgICBdXG4gICAgfVxufTtcblxuY29uc3QgUFJPRFVDVF9DT0RFUyA9IHtcbiAgICAnUHJvZHVjdDogMDI2OCc6ICdQUzMnXG59O1xuXG4vKipcbiAqIElucHV0IGhhbmRsZXIgZm9yIGFjY2Vzc2luZyBHYW1lUGFkIGlucHV0LlxuICovXG5jbGFzcyBHYW1lUGFkcyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IEdhbWVQYWRzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmdhbWVwYWRzU3VwcG9ydGVkID0gISFuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMgfHwgISFuYXZpZ2F0b3Iud2Via2l0R2V0R2FtZXBhZHM7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gW107XG4gICAgICAgIHRoaXMucHJldmlvdXMgPSBbXTtcblxuICAgICAgICB0aGlzLmRlYWRab25lID0gMC4yNTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGN1cnJlbnQgYW5kIHByZXZpb3VzIHN0YXRlIG9mIHRoZSBnYW1lcGFkcy4gVGhpcyBtdXN0IGJlIGNhbGxlZCBldmVyeSBmcmFtZSBmb3JcbiAgICAgKiBgd2FzUHJlc3NlZGAgdG8gd29yay5cbiAgICAgKi9cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIC8vIG1vdmUgY3VycmVudCBidXR0b25zIHN0YXR1cyBpbnRvIHByZXZpb3VzIGFycmF5XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdGhpcy5jdXJyZW50Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IHRoaXMuY3VycmVudFtpXS5wYWQuYnV0dG9ucztcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnNMZW4gPSBidXR0b25zLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYnV0dG9uc0xlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJldmlvdXNbaV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzW2ldID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNbaV1bal0gPSBidXR0b25zW2pdLnByZXNzZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgY3VycmVudFxuICAgICAgICB0aGlzLnBvbGwodGhpcy5jdXJyZW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQb2xsIGZvciB0aGUgbGF0ZXN0IGRhdGEgZnJvbSB0aGUgZ2FtZXBhZCBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBbcGFkc10gLSBBbiBvcHRpb25hbCBhcnJheSB1c2VkIHRvIHJlY2VpdmUgdGhlIGdhbWVwYWRzIG1hcHBpbmcuIFRoaXNcbiAgICAgKiBhcnJheSB3aWxsIGJlIHJldHVybmVkIGJ5IHRoaXMgZnVuY3Rpb24uXG4gICAgICogQHJldHVybnMge29iamVjdFtdfSBBbiBhcnJheSBvZiBnYW1lcGFkcyBhbmQgbWFwcGluZ3MgZm9yIHRoZSBtb2RlbCBvZiBnYW1lcGFkIHRoYXQgaXNcbiAgICAgKiBhdHRhY2hlZC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHZhciBnYW1lcGFkcyA9IG5ldyBwYy5HYW1lUGFkcygpO1xuICAgICAqIHZhciBwYWRzID0gZ2FtZXBhZHMucG9sbCgpO1xuICAgICAqL1xuICAgIHBvbGwocGFkcyA9IFtdKSB7XG4gICAgICAgIGlmIChwYWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHBhZHMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmdhbWVwYWRzU3VwcG9ydGVkKSB7XG4gICAgICAgICAgICBjb25zdCBwYWREZXZpY2VzID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzID8gbmF2aWdhdG9yLmdldEdhbWVwYWRzKCkgOiBuYXZpZ2F0b3Iud2Via2l0R2V0R2FtZXBhZHMoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBwYWREZXZpY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhZERldmljZXNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcGFkcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogdGhpcy5nZXRNYXAocGFkRGV2aWNlc1tpXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWQ6IHBhZERldmljZXNbaV1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYWRzO1xuICAgIH1cblxuICAgIGdldE1hcChwYWQpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb2RlIGluIFBST0RVQ1RfQ09ERVMpIHtcbiAgICAgICAgICAgIGlmIChwYWQuaWQuaW5kZXhPZihjb2RlKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1BUFNbUFJPRFVDVF9DT0RFU1tjb2RlXV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gTUFQUy5ERUZBVUxUO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYnV0dG9uIG9uIHRoZSBwYWQgcmVxdWVzdGVkIGlzIHByZXNzZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBUaGUgaW5kZXggb2YgdGhlIHBhZCB0byBjaGVjaywgdXNlIGNvbnN0YW50cyB7QGxpbmsgUEFEXzF9LFxuICAgICAqIHtAbGluayBQQURfMn0sIGV0Yy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYnV0dG9uIC0gVGhlIGJ1dHRvbiB0byB0ZXN0LCB1c2UgY29uc3RhbnRzIHtAbGluayBQQURfRkFDRV8xfSwgZXRjLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBidXR0b24gaXMgcHJlc3NlZC5cbiAgICAgKi9cbiAgICBpc1ByZXNzZWQoaW5kZXgsIGJ1dHRvbikge1xuICAgICAgICBpZiAoIXRoaXMuY3VycmVudFtpbmRleF0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuY3VycmVudFtpbmRleF0ubWFwLmJ1dHRvbnNbYnV0dG9uXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFtpbmRleF0ucGFkLmJ1dHRvbnNbcGNba2V5XV0ucHJlc3NlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGJ1dHRvbiB3YXMgcHJlc3NlZCBzaW5jZSB0aGUgbGFzdCBmcmFtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIFRoZSBpbmRleCBvZiB0aGUgcGFkIHRvIGNoZWNrLCB1c2UgY29uc3RhbnRzIHtAbGluayBQQURfMX0sXG4gICAgICoge0BsaW5rIFBBRF8yfSwgZXRjLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBidXR0b24gLSBUaGUgYnV0dG9uIHRvIHRlc3QsIHVzZSBjb25zdGFudHMge0BsaW5rIFBBRF9GQUNFXzF9LCBldGMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIGJ1dHRvbiB3YXMgcHJlc3NlZCBzaW5jZSB0aGUgbGFzdCBmcmFtZS5cbiAgICAgKi9cbiAgICB3YXNQcmVzc2VkKGluZGV4LCBidXR0b24pIHtcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRbaW5kZXhdKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmN1cnJlbnRbaW5kZXhdLm1hcC5idXR0b25zW2J1dHRvbl07XG4gICAgICAgIGNvbnN0IGkgPSBwY1trZXldO1xuXG4gICAgICAgIC8vIFByZXZpb3VzIHBhZCBidXR0b25zIG1heSBub3QgaGF2ZSBiZWVuIHBvcHVsYXRlZCB5ZXRcbiAgICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgdGltZSBmcmFtZSBhIHBhZCBoYXMgYmVlbiBkZXRlY3RlZFxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50W2luZGV4XS5wYWQuYnV0dG9uc1tpXS5wcmVzc2VkICYmICEodGhpcy5wcmV2aW91c1tpbmRleF0gJiYgdGhpcy5wcmV2aW91c1tpbmRleF1baV0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYnV0dG9uIHdhcyByZWxlYXNlZCBzaW5jZSB0aGUgbGFzdCBmcmFtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIFRoZSBpbmRleCBvZiB0aGUgcGFkIHRvIGNoZWNrLCB1c2UgY29uc3RhbnRzIHtAbGluayBQQURfMX0sXG4gICAgICoge0BsaW5rIFBBRF8yfSwgZXRjLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBidXR0b24gLSBUaGUgYnV0dG9uIHRvIHRlc3QsIHVzZSBjb25zdGFudHMge0BsaW5rIFBBRF9GQUNFXzF9LCBldGMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIGJ1dHRvbiB3YXMgcmVsZWFzZWQgc2luY2UgdGhlIGxhc3QgZnJhbWUuXG4gICAgICovXG4gICAgd2FzUmVsZWFzZWQoaW5kZXgsIGJ1dHRvbikge1xuICAgICAgICBpZiAoIXRoaXMuY3VycmVudFtpbmRleF0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuY3VycmVudFtpbmRleF0ubWFwLmJ1dHRvbnNbYnV0dG9uXTtcbiAgICAgICAgY29uc3QgaSA9IHBjW2tleV07XG5cbiAgICAgICAgLy8gUHJldmlvdXMgcGFkIGJ1dHRvbnMgbWF5IG5vdCBoYXZlIGJlZW4gcG9wdWxhdGVkIHlldFxuICAgICAgICAvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIGZyYW1lIGEgcGFkIGhhcyBiZWVuIGRldGVjdGVkXG4gICAgICAgIHJldHVybiAhdGhpcy5jdXJyZW50W2luZGV4XS5wYWQuYnV0dG9uc1tpXS5wcmVzc2VkICYmICh0aGlzLnByZXZpb3VzW2luZGV4XSAmJiB0aGlzLnByZXZpb3VzW2luZGV4XVtpXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2YWx1ZSBvZiBvbmUgb2YgdGhlIGFuYWxvZ3VlIGF4ZXMgb2YgdGhlIHBhZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIFRoZSBpbmRleCBvZiB0aGUgcGFkIHRvIGNoZWNrLCB1c2UgY29uc3RhbnRzIHtAbGluayBQQURfMX0sXG4gICAgICoge0BsaW5rIFBBRF8yfSwgZXRjLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBheGVzIC0gVGhlIGF4ZXMgdG8gZ2V0IHRoZSB2YWx1ZSBvZiwgdXNlIGNvbnN0YW50cyB7QGxpbmsgUEFEX0xfU1RJQ0tfWH0sXG4gICAgICogZXRjLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSB2YWx1ZSBvZiB0aGUgYXhpcyBiZXR3ZWVuIC0xIGFuZCAxLlxuICAgICAqL1xuICAgIGdldEF4aXMoaW5kZXgsIGF4ZXMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRbaW5kZXhdKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuY3VycmVudFtpbmRleF0ubWFwLmF4ZXNbYXhlc107XG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuY3VycmVudFtpbmRleF0ucGFkLmF4ZXNbcGNba2V5XV07XG5cbiAgICAgICAgaWYgKE1hdGguYWJzKHZhbHVlKSA8IHRoaXMuZGVhZFpvbmUpIHtcbiAgICAgICAgICAgIHZhbHVlID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxufVxuXG5leHBvcnQgeyBHYW1lUGFkcyB9O1xuIl0sIm5hbWVzIjpbIk1BUFMiLCJERUZBVUxUIiwiYnV0dG9ucyIsImF4ZXMiLCJQUzMiLCJQUk9EVUNUX0NPREVTIiwiR2FtZVBhZHMiLCJjb25zdHJ1Y3RvciIsImdhbWVwYWRzU3VwcG9ydGVkIiwibmF2aWdhdG9yIiwiZ2V0R2FtZXBhZHMiLCJ3ZWJraXRHZXRHYW1lcGFkcyIsImN1cnJlbnQiLCJwcmV2aW91cyIsImRlYWRab25lIiwidXBkYXRlIiwiaSIsImwiLCJsZW5ndGgiLCJwYWQiLCJidXR0b25zTGVuIiwiaiIsInVuZGVmaW5lZCIsInByZXNzZWQiLCJwb2xsIiwicGFkcyIsInBhZERldmljZXMiLCJsZW4iLCJwdXNoIiwibWFwIiwiZ2V0TWFwIiwiY29kZSIsImlkIiwiaW5kZXhPZiIsImlzUHJlc3NlZCIsImluZGV4IiwiYnV0dG9uIiwia2V5IiwicGMiLCJ3YXNQcmVzc2VkIiwid2FzUmVsZWFzZWQiLCJnZXRBeGlzIiwidmFsdWUiLCJNYXRoIiwiYWJzIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE1BQU1BLElBQUksR0FBRztBQUNUQyxFQUFBQSxPQUFPLEVBQUU7QUFDTEMsSUFBQUEsT0FBTyxFQUFFLENBRUwsWUFGSyxFQUdMLFlBSEssRUFJTCxZQUpLLEVBS0wsWUFMSyxFQVFMLGtCQVJLLEVBU0wsa0JBVEssRUFVTCxrQkFWSyxFQVdMLGtCQVhLLEVBY0wsWUFkSyxFQWVMLFdBZkssRUFnQkwsb0JBaEJLLEVBaUJMLG9CQWpCSyxFQW9CTCxRQXBCSyxFQXFCTCxVQXJCSyxFQXNCTCxVQXRCSyxFQXVCTCxXQXZCSyxFQTBCTCxZQTFCSyxDQURKO0lBOEJMQyxJQUFJLEVBQUUsQ0FFRixlQUZFLEVBR0YsZUFIRSxFQUlGLGVBSkUsRUFLRixlQUxFLENBQUE7R0EvQkQ7QUF3Q1RDLEVBQUFBLEdBQUcsRUFBRTtBQUNERixJQUFB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
