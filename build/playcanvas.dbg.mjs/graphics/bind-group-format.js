/**
 * @license
 * PlayCanvas Engine v1.58.0-dev revision e102f2b2a (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { TEXTUREDIMENSION_2D, SAMPLETYPE_FLOAT } from './constants.js';

class BindBufferFormat {
  constructor(name, visibility) {
    this.name = name;
    this.visibility = visibility;
  }

}

class BindTextureFormat {
  constructor(name, visibility, textureDimension = TEXTUREDIMENSION_2D, sampleType = SAMPLETYPE_FLOAT) {
    this.scopeId = void 0;
    this.name = name;
    this.visibility = visibility;
    this.textureDimension = textureDimension;
    this.sampleType = sampleType;
  }

}

class BindGroupFormat {
  constructor(graphicsDevice, bufferFormats, textureFormats) {
    this.device = graphicsDevice;
    this.bufferFormats = bufferFormats;
    this.bufferFormatsMap = new Map();
    bufferFormats.forEach((bf, i) => this.bufferFormatsMap.set(bf.name, i));
    this.textureFormats = textureFormats;
    const scope = graphicsDevice.scope;
    this.textureFormatsMap = new Map();
    textureFormats.forEach((tf, i) => {
      this.textureFormatsMap.set(tf.name, i);
      tf.scopeId = scope.resolve(tf.name);
    });
    this.impl = graphicsDevice.createBindGroupFormatImpl(this);
  }

  destroy() {
    this.impl.destroy();
  }

  getTexture(name) {
    const index = this.textureFormatsMap.get(name);

    if (index !== undefined) {
      return this.textureFormats[index];
    }

    return null;
  }

  getShaderDeclarationTextures(bindGroup) {
    let code = '';
    let bindIndex = this.bufferFormats.length;
    this.textureFormats.forEach(format => {
      code += `layout(set = ${bindGroup}, binding = ${bindIndex++}) uniform texture2D ${format.name};\n` + `layout(set = ${bindGroup}, binding = ${bindIndex++}) uniform sampler ${format.name}_sampler;\n`;
    });
    return code;
  }

  loseContext() {}

}

export { BindBufferFormat, BindGroupFormat, BindTextureFormat };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmluZC1ncm91cC1mb3JtYXQuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9ncmFwaGljcy9iaW5kLWdyb3VwLWZvcm1hdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBURVhUVVJFRElNRU5TSU9OXzJELCBTQU1QTEVUWVBFX0ZMT0FUIH0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9ncmFwaGljcy1kZXZpY2UuanMnKS5HcmFwaGljc0RldmljZX0gR3JhcGhpY3NEZXZpY2UgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3Njb3BlLWlkLmpzJykuU2NvcGVJZH0gU2NvcGVJZCAqL1xuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuY2xhc3MgQmluZEJ1ZmZlckZvcm1hdCB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgdmlzaWJpbGl0eSkge1xuICAgICAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcblxuICAgICAgICAvLyBTSEFERVJTVEFHRV9WRVJURVgsIFNIQURFUlNUQUdFX0ZSQUdNRU5ULCBTSEFERVJTVEFHRV9DT01QVVRFXG4gICAgICAgIHRoaXMudmlzaWJpbGl0eSA9IHZpc2liaWxpdHk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuY2xhc3MgQmluZFRleHR1cmVGb3JtYXQge1xuICAgIC8qKiBAdHlwZSB7U2NvcGVJZH0gKi9cbiAgICBzY29wZUlkO1xuXG4gICAgY29uc3RydWN0b3IobmFtZSwgdmlzaWJpbGl0eSwgdGV4dHVyZURpbWVuc2lvbiA9IFRFWFRVUkVESU1FTlNJT05fMkQsIHNhbXBsZVR5cGUgPSBTQU1QTEVUWVBFX0ZMT0FUKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuXG4gICAgICAgIC8vIFNIQURFUlNUQUdFX1ZFUlRFWCwgU0hBREVSU1RBR0VfRlJBR01FTlQsIFNIQURFUlNUQUdFX0NPTVBVVEVcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5ID0gdmlzaWJpbGl0eTtcblxuICAgICAgICAvLyBURVhUVVJFRElNRU5TSU9OXyoqKlxuICAgICAgICB0aGlzLnRleHR1cmVEaW1lbnNpb24gPSB0ZXh0dXJlRGltZW5zaW9uO1xuXG4gICAgICAgIC8vIFNBTVBMRVRZUEVfKioqXG4gICAgICAgIHRoaXMuc2FtcGxlVHlwZSA9IHNhbXBsZVR5cGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuY2xhc3MgQmluZEdyb3VwRm9ybWF0IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0dyYXBoaWNzRGV2aWNlfSBncmFwaGljc0RldmljZSAtIFRoZSBncmFwaGljcyBkZXZpY2UgdXNlZCB0byBtYW5hZ2UgdGhpcyB2ZXJ0ZXggZm9ybWF0LlxuICAgICAqIEBwYXJhbSB7QmluZEJ1ZmZlckZvcm1hdFtdfSBidWZmZXJGb3JtYXRzIC1cbiAgICAgKiBAcGFyYW0ge0JpbmRUZXh0dXJlRm9ybWF0W119IHRleHR1cmVGb3JtYXRzIC1cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihncmFwaGljc0RldmljZSwgYnVmZmVyRm9ybWF0cywgdGV4dHVyZUZvcm1hdHMpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtHcmFwaGljc0RldmljZX0gKi9cbiAgICAgICAgdGhpcy5kZXZpY2UgPSBncmFwaGljc0RldmljZTtcblxuICAgICAgICAvKiogQHR5cGUge0JpbmRCdWZmZXJGb3JtYXRbXX0gKi9cbiAgICAgICAgdGhpcy5idWZmZXJGb3JtYXRzID0gYnVmZmVyRm9ybWF0cztcblxuICAgICAgICAvLyBtYXBzIGEgYnVmZmVyIGZvcm1hdCBuYW1lIHRvIGFuIGluZGV4XG4gICAgICAgIC8qKiBAdHlwZSB7TWFwPHN0cmluZywgbnVtYmVyPn0gKi9cbiAgICAgICAgdGhpcy5idWZmZXJGb3JtYXRzTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICBidWZmZXJGb3JtYXRzLmZvckVhY2goKGJmLCBpKSA9PiB0aGlzLmJ1ZmZlckZvcm1hdHNNYXAuc2V0KGJmLm5hbWUsIGkpKTtcblxuICAgICAgICAvKiogQHR5cGUge0JpbmRUZXh0dXJlRm9ybWF0W119ICovXG4gICAgICAgIHRoaXMudGV4dHVyZUZvcm1hdHMgPSB0ZXh0dXJlRm9ybWF0cztcblxuICAgICAgICBjb25zdCBzY29wZSA9IGdyYXBoaWNzRGV2aWNlLnNjb3BlO1xuXG4gICAgICAgIC8vIG1hcHMgYSB0ZXh0dXJlIGZvcm1hdCBuYW1lIHRvIGEgc2xvdCBpbmRleFxuICAgICAgICAvKiogQHR5cGUge01hcDxzdHJpbmcsIG51bWJlcj59ICovXG4gICAgICAgIHRoaXMudGV4dHVyZUZvcm1hdHNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRleHR1cmVGb3JtYXRzLmZvckVhY2goKHRmLCBpKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRleHR1cmVGb3JtYXRzTWFwLnNldCh0Zi5uYW1lLCBpKTtcblxuICAgICAgICAgICAgLy8gcmVzb2x2ZSBzY29wZSBpZFxuICAgICAgICAgICAgdGYuc2NvcGVJZCA9IHNjb3BlLnJlc29sdmUodGYubmFtZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuaW1wbCA9IGdyYXBoaWNzRGV2aWNlLmNyZWF0ZUJpbmRHcm91cEZvcm1hdEltcGwodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnJlZXMgcmVzb3VyY2VzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGJpbmQgZ3JvdXAuXG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5pbXBsLmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGZvcm1hdCBvZiB0ZXh0dXJlIHdpdGggc3BlY2lmaWVkIG5hbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB0ZXh0dXJlIHNsb3QuXG4gICAgICogQHJldHVybnMge0JpbmRUZXh0dXJlRm9ybWF0fSAtIFRoZSBmb3JtYXQuXG4gICAgICovXG4gICAgZ2V0VGV4dHVyZShuYW1lKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy50ZXh0dXJlRm9ybWF0c01hcC5nZXQobmFtZSk7XG4gICAgICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZXh0dXJlRm9ybWF0c1tpbmRleF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBnZXRTaGFkZXJEZWNsYXJhdGlvblRleHR1cmVzKGJpbmRHcm91cCkge1xuICAgICAgICBsZXQgY29kZSA9ICcnO1xuICAgICAgICBsZXQgYmluZEluZGV4ID0gdGhpcy5idWZmZXJGb3JtYXRzLmxlbmd0aDtcbiAgICAgICAgdGhpcy50ZXh0dXJlRm9ybWF0cy5mb3JFYWNoKChmb3JtYXQpID0+IHtcblxuICAgICAgICAgICAgLy8gVE9ETzogc3Vwb3J0IGRpZmZlcmVudCB0eXBlcyBvZiB0ZXh0dXJlcyBhbmQgc2FtcGxlcnNcblxuICAgICAgICAgICAgY29kZSArPSBgbGF5b3V0KHNldCA9ICR7YmluZEdyb3VwfSwgYmluZGluZyA9ICR7YmluZEluZGV4Kyt9KSB1bmlmb3JtIHRleHR1cmUyRCAke2Zvcm1hdC5uYW1lfTtcXG5gICtcbiAgICAgICAgICAgICAgICAgICAgYGxheW91dChzZXQgPSAke2JpbmRHcm91cH0sIGJpbmRpbmcgPSAke2JpbmRJbmRleCsrfSkgdW5pZm9ybSBzYW1wbGVyICR7Zm9ybWF0Lm5hbWV9X3NhbXBsZXI7XFxuYDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNvZGU7XG4gICAgfVxuXG4gICAgbG9zZUNvbnRleHQoKSB7XG4gICAgICAgIC8vIFRPRE86IGltcGxlbWVudFxuICAgIH1cbn1cblxuZXhwb3J0IHsgQmluZEJ1ZmZlckZvcm1hdCwgQmluZFRleHR1cmVGb3JtYXQsIEJpbmRHcm91cEZvcm1hdCB9O1xuIl0sIm5hbWVzIjpbIkJpbmRCdWZmZXJGb3JtYXQiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJ2aXNpYmlsaXR5IiwiQmluZFRleHR1cmVGb3JtYXQiLCJ0ZXh0dXJlRGltZW5zaW9uIiwiVEVYVFVSRURJTUVOU0lPTl8yRCIsInNhbXBsZVR5cGUiLCJTQU1QTEVUWVBFX0ZMT0FUIiwic2NvcGVJZCIsIkJpbmRHcm91cEZvcm1hdCIsImdyYXBoaWNzRGV2aWNlIiwiYnVmZmVyRm9ybWF0cyIsInRleHR1cmVGb3JtYXRzIiwiZGV2aWNlIiwiYnVmZmVyRm9ybWF0c01hcCIsIk1hcCIsImZvckVhY2giLCJiZiIsImkiLCJzZXQiLCJzY29wZSIsInRleHR1cmVGb3JtYXRzTWFwIiwidGYiLCJyZXNvbHZlIiwiaW1wbCIsImNyZWF0ZUJpbmRHcm91cEZvcm1hdEltcGwiLCJkZXN0cm95IiwiZ2V0VGV4dHVyZSIsImluZGV4IiwiZ2V0IiwidW5kZWZpbmVkIiwiZ2V0U2hhZGVyRGVjbGFyYXRpb25UZXh0dXJlcyIsImJpbmRHcm91cCIsImNvZGUiLCJiaW5kSW5kZXgiLCJsZW5ndGgiLCJmb3JtYXQiLCJsb3NlQ29udGV4dCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQVFBLE1BQU1BLGdCQUFOLENBQXVCO0FBQ25CQyxFQUFBQSxXQUFXLENBQUNDLElBQUQsRUFBT0MsVUFBUCxFQUFtQjtJQUUxQixJQUFLRCxDQUFBQSxJQUFMLEdBQVlBLElBQVosQ0FBQTtJQUdBLElBQUtDLENBQUFBLFVBQUwsR0FBa0JBLFVBQWxCLENBQUE7QUFDSCxHQUFBOztBQVBrQixDQUFBOztBQWF2QixNQUFNQyxpQkFBTixDQUF3QjtBQUlwQkgsRUFBQUEsV0FBVyxDQUFDQyxJQUFELEVBQU9DLFVBQVAsRUFBbUJFLGdCQUFnQixHQUFHQyxtQkFBdEMsRUFBMkRDLFVBQVUsR0FBR0MsZ0JBQXhFLEVBQTBGO0FBQUEsSUFBQSxJQUFBLENBRnJHQyxPQUVxRyxHQUFBLEtBQUEsQ0FBQSxD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
