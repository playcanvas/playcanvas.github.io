import"../../core/tracing.js";import{Color as e}from"../../core/math/color.js";class t{constructor(){this.clearValue=new e(0,0,0,1),this.clear=!1,this.store=!1,this.resolve=!0,this.mipmaps=!1}}class s{constructor(){this.clearDepthValue=1,this.clearStencilValue=0,this.clearDepth=!1,this.clearStencil=!1,this.storeDepth=!1,this.storeStencil=!1}}class i{constructor(e,t){this.name=void 0,this.renderTarget=void 0,this.samples=0,this.colorOps=void 0,this.depthStencilOps=void 0,this.requiresCubemaps=!0,this.fullSizeClearRect=!0,this.execute=void 0,this.before=void 0,this.after=void 0,this.device=e,this.execute=t}init(e){var i,r;this.renderTarget=e||null,this.colorOps=new t,this.depthStencilOps=new s,this.samples=Math.max(this.renderTarget?this.renderTarget.samples:this.device.samples,1),1===this.samples&&(this.colorOps.store=!0,this.colorOps.resolve=!1),null!=(i=this.renderTarget)&&null!=(r=i.colorBuffer)&&r.mipmaps&&(this.colorOps.mipmaps=!0)}setClearColor(e){this.colorOps.clearValue.copy(e),this.colorOps.clear=!0}setClearDepth(e){this.depthStencilOps.clearDepthValue=e,this.depthStencilOps.clearDepth=!0}setClearStencil(e){this.depthStencilOps.clearStencilValue=e,this.depthStencilOps.clearStencil=!0}render(){var e,t,s;const i=this.device,r=void 0!==this.renderTarget;null==(e=this.before)||e.call(this),r&&i.startPass(this),null==(t=this.execute)||t.call(this),r&&i.endPass(this),null==(s=this.after)||s.call(this),i.renderPassIndex++}}export{t as ColorAttachmentOps,s as DepthStencilAttachmentOps,i as RenderPass};
