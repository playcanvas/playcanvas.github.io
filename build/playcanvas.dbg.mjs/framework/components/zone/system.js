/**
 * @license
 * PlayCanvas Engine v1.58.0-preview revision 1fec26519 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Vec3 } from '../../../core/math/vec3.js';
import { Component } from '../component.js';
import { ComponentSystem } from '../system.js';
import { ZoneComponent } from './component.js';
import { ZoneComponentData } from './data.js';

const _schema = ['enabled'];

class ZoneComponentSystem extends ComponentSystem {
  constructor(app) {
    super(app);
    this.id = 'zone';
    this.ComponentType = ZoneComponent;
    this.DataType = ZoneComponentData;
    this.schema = _schema;
    this.on('beforeremove', this._onBeforeRemove, this);
  }
  initializeComponentData(component, data, properties) {
    component.enabled = data.hasOwnProperty('enabled') ? !!data.enabled : true;
    if (data.size) {
      if (data.size instanceof Vec3) {
        component.size.copy(data.size);
      } else if (data.size instanceof Array && data.size.length >= 3) {
        component.size.set(data.size[0], data.size[1], data.size[2]);
      }
    }
  }
  cloneComponent(entity, clone) {
    const data = {
      size: entity.zone.size
    };
    return this.addComponent(clone, data);
  }
  _onBeforeRemove(entity, component) {
    component._onBeforeRemove();
  }
}
Component._buildAccessors(ZoneComponent.prototype, _schema);

export { ZoneComponentSystem };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3lzdGVtLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvem9uZS9zeXN0ZW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjMyB9IGZyb20gJy4uLy4uLy4uL2NvcmUvbWF0aC92ZWMzLmpzJztcblxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50LmpzJztcbmltcG9ydCB7IENvbXBvbmVudFN5c3RlbSB9IGZyb20gJy4uL3N5c3RlbS5qcyc7XG5cbmltcG9ydCB7IFpvbmVDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBab25lQ29tcG9uZW50RGF0YSB9IGZyb20gJy4vZGF0YS5qcyc7XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi9hcHAtYmFzZS5qcycpLkFwcEJhc2V9IEFwcEJhc2UgKi9cblxuY29uc3QgX3NjaGVtYSA9IFsnZW5hYmxlZCddO1xuXG4vKipcbiAqIENyZWF0ZXMgYW5kIG1hbmFnZXMge0BsaW5rIFpvbmVDb21wb25lbnR9IGluc3RhbmNlcy5cbiAqXG4gKiBAYXVnbWVudHMgQ29tcG9uZW50U3lzdGVtXG4gKiBAaWdub3JlXG4gKi9cbmNsYXNzIFpvbmVDb21wb25lbnRTeXN0ZW0gZXh0ZW5kcyBDb21wb25lbnRTeXN0ZW0ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBab25lQ29tcG9uZW50U3lzdGVtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcHBCYXNlfSBhcHAgLSBUaGUgYXBwbGljYXRpb24uXG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgICAgICBzdXBlcihhcHApO1xuXG4gICAgICAgIHRoaXMuaWQgPSAnem9uZSc7XG5cbiAgICAgICAgdGhpcy5Db21wb25lbnRUeXBlID0gWm9uZUNvbXBvbmVudDtcbiAgICAgICAgdGhpcy5EYXRhVHlwZSA9IFpvbmVDb21wb25lbnREYXRhO1xuXG4gICAgICAgIHRoaXMuc2NoZW1hID0gX3NjaGVtYTtcblxuICAgICAgICB0aGlzLm9uKCdiZWZvcmVyZW1vdmUnLCB0aGlzLl9vbkJlZm9yZVJlbW92ZSwgdGhpcyk7XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZUNvbXBvbmVudERhdGEoY29tcG9uZW50LCBkYXRhLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGNvbXBvbmVudC5lbmFibGVkID0gZGF0YS5oYXNPd25Qcm9wZXJ0eSgnZW5hYmxlZCcpID8gISFkYXRhLmVuYWJsZWQgOiB0cnVlO1xuXG4gICAgICAgIGlmIChkYXRhLnNpemUpIHtcbiAgICAgICAgICAgIGlmIChkYXRhLnNpemUgaW5zdGFuY2VvZiBWZWMzKSB7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50LnNpemUuY29weShkYXRhLnNpemUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnNpemUgaW5zdGFuY2VvZiBBcnJheSAmJiBkYXRhLnNpemUubGVuZ3RoID49IDMpIHtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuc2l6ZS5zZXQoZGF0YS5zaXplWzBdLCBkYXRhLnNpemVbMV0sIGRhdGEuc2l6ZVsyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbG9uZUNvbXBvbmVudChlbnRpdHksIGNsb25lKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICBzaXplOiBlbnRpdHkuem9uZS5zaXplXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkQ29tcG9uZW50KGNsb25lLCBkYXRhKTtcbiAgICB9XG5cbiAgICBfb25CZWZvcmVSZW1vdmUoZW50aXR5LCBjb21wb25lbnQpIHtcbiAgICAgICAgY29tcG9uZW50Ll9vbkJlZm9yZVJlbW92ZSgpO1xuICAgIH1cbn1cblxuQ29tcG9uZW50Ll9idWlsZEFjY2Vzc29ycyhab25lQ29tcG9uZW50LnByb3RvdHlwZSwgX3NjaGVtYSk7XG5cbmV4cG9ydCB7IFpvbmVDb21wb25lbnRTeXN0ZW0gfTtcbiJdLCJuYW1lcyI6WyJfc2NoZW1hIiwiWm9uZUNvbXBvbmVudFN5c3RlbSIsIkNvbXBvbmVudFN5c3RlbSIsImNvbnN0cnVjdG9yIiwiYXBwIiwiaWQiLCJDb21wb25lbnRUeXBlIiwiWm9uZUNvbXBvbmVudCIsIkRhdGFUeXBlIiwiWm9uZUNvbXBvbmVudERhdGEiLCJzY2hlbWEiLCJvbiIsIl9vbkJlZm9yZVJlbW92ZSIsImluaXRpYWxpemVDb21wb25lbnREYXRhIiwiY29tcG9uZW50IiwiZGF0YSIsInByb3BlcnRpZXMiLCJlbmFibGVkIiwiaGFzT3duUHJvcGVydHkiLCJzaXplIiwiVmVjMyIsImNvcHkiLCJBcnJheSIsImxlbmd0aCIsInNldCIsImNsb25lQ29tcG9uZW50IiwiZW50aXR5IiwiY2xvbmUiLCJ6b25lIiwiYWRkQ29tcG9uZW50IiwiQ29tcG9uZW50IiwiX2J1aWxkQWNjZXNzb3JzIiwicHJvdG90eXBlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQVVBLE1BQU1BLE9BQU8sR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFBOztBQVEzQixNQUFNQyxtQkFBbUIsU0FBU0MsZUFBZSxDQUFDO0VBTzlDQyxXQUFXLENBQUNDLEdBQUcsRUFBRTtJQUNiLEtBQUssQ0FBQ0EsR0FBRyxDQUFDLENBQUE7SUFFVixJQUFJLENBQUNDLEVBQUUsR0FBRyxNQUFNLENBQUE7SUFFaEIsSUFBSSxDQUFDQyxhQUFhLEdBQUdDLGFBQWEsQ0FBQTtJQUNsQyxJQUFJLENBQUNDLFFBQVEsR0FBR0MsaUJBQWlCLENBQUE7SUFFakMsSUFBSSxDQUFDQyxNQUFNLEdBQUdWLE9BQU8sQ0FBQTtJQUVyQixJQUFJLENBQUNXLEVBQUUsQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDQyxlQUFlLEVBQUUsSUFBSSxDQUFDLENBQUE7QUFDdkQsR0FBQTtBQUVBQyxFQUFBQSx1QkFBdUIsQ0FBQ0MsU0FBUyxFQUFFQyxJQUFJLEVBQUVDLFVBQVUsRUFBRTtBQUNqREYsSUFBQUEsU0FBUyxDQUFDRyxPQUFPLEdBQUdGLElBQUksQ0FBQ0csY0FBYyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQ0gsSUFBSSxDQUFDRSxPQUFPLEdBQUcsSUFBSSxDQUFBO0lBRTFFLElBQUlGLElBQUksQ0FBQ0ksSUFBSSxFQUFFO0FBQ1gsTUFBQSxJQUFJSixJQUFJLENBQUNJLElBQUksWUFBWUMsSUFBSSxFQUFFO1FBQzNCTixTQUFTLENBQUNLLElBQUksQ0FBQ0UsSUFBSSxDQUFDTixJQUFJLENBQUNJLElBQUksQ0FBQyxDQUFBO0FBQ2xDLE9BQUMsTUFBTSxJQUFJSixJQUFJLENBQUNJLElBQUksWUFBWUcsS0FBSyxJQUFJUCxJQUFJLENBQUNJLElBQUksQ0FBQ0ksTUFBTSxJQUFJLENBQUMsRUFBRTtRQUM1RFQsU0FBUyxDQUFDSyxJQUFJLENBQUNLLEdBQUcsQ0FBQ1QsSUFBSSxDQUFDSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUVKLElBQUksQ0FBQ0ksSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFSixJQUFJLENBQUNJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ2hFLE9BQUE7QUFDSixLQUFBO0FBQ0osR0FBQTtBQUVBTSxFQUFBQSxjQUFjLENBQUNDLE1BQU0sRUFBRUMsS0FBSyxFQUFFO0FBQzFCLElBQUEsTUFBTVosSUFBSSxHQUFHO0FBQ1RJLE1BQUFBLElBQUksRUFBRU8sTUFBTSxDQUFDRSxJQUFJLENBQUNULElBQUFBO0tBQ3JCLENBQUE7QUFFRCxJQUFBLE9BQU8sSUFBSSxDQUFDVSxZQUFZLENBQUNGLEtBQUssRUFBRVosSUFBSSxDQUFDLENBQUE7QUFDekMsR0FBQTtBQUVBSCxFQUFBQSxlQUFlLENBQUNjLE1BQU0sRUFBRVosU0FBUyxFQUFFO0lBQy9CQSxTQUFTLENBQUNGLGVBQWUsRUFBRSxDQUFBO0FBQy9CLEdBQUE7QUFDSixDQUFBO0FBRUFrQixTQUFTLENBQUNDLGVBQWUsQ0FBQ3hCLGFBQWEsQ0FBQ3lCLFNBQVMsRUFBRWhDLE9BQU8sQ0FBQzs7OzsifQ==
