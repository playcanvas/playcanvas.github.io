function LuminosityEffect(t){pc.PostEffect.call(this,t),this.shader=new pc.Shader(t,{attributes:{aPosition:pc.SEMANTIC_POSITION},vshader:["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),fshader:["precision "+t.precision+" float;","","uniform sampler2D uColorBuffer;","","varying vec2 vUv0;","","void main() {","    vec4 texel = texture2D(uColorBuffer, vUv0);","    vec3 luma = vec3(0.299, 0.587, 0.114);","    float v = dot(texel.xyz, luma);","    gl_FragColor = vec4(v, v, v, texel.w);","}"].join("\n")})}LuminosityEffect.prototype=Object.create(pc.PostEffect.prototype),LuminosityEffect.prototype.constructor=LuminosityEffect,Object.assign(LuminosityEffect.prototype,{render:function(t,e,i){var o=this.device;o.scope.resolve("uColorBuffer").setValue(t.colorBuffer),pc.drawFullscreenQuad(o,e,this.vertexBuffer,this.shader,i)}});var Luminosity=pc.createScript("luminosity");Luminosity.prototype.initialize=function(){this.effect=new LuminosityEffect(this.app.graphicsDevice);var t=this.entity.camera.postEffects;t.addEffect(this.effect),this.on("state",(function(e){e?t.addEffect(this.effect):t.removeEffect(this.effect)})),this.on("destroy",(function(){t.removeEffect(this.effect)}))};