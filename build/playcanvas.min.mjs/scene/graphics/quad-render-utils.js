import"../../core/tracing.js";import{Vec4 as e}from"../../core/math/vec4.js";import{CULLFACE_NONE as t}from"../../platform/graphics/constants.js";import{DepthState as r}from"../../platform/graphics/depth-state.js";import{RenderPass as o}from"../../platform/graphics/render-pass.js";import{QuadRender as s}from"./quad-render.js";const n=new e;function p(e,p,l,i,a){const c=e.getCullMode();e.setCullMode(t),e.setDepthState(r.NODEPTH);const m=new s(l);i||((i=n).x=0,i.y=0,i.z=p?p.width:e.width,i.w=p?p.height:e.height);const d=new o(e,(()=>{m.render(i,a)}));if(d.init(p),d.colorOps.clear=!1,d.depthStencilOps.clearDepth=!1,e.isWebGPU&&null===p){var h;(null!=(h=null==p?void 0:p.samples)?h:e.samples)>1&&(d.colorOps.store=!0)}d.render(),m.destroy(),e.setCullMode(c)}function l(e,t,r,o,s,n){o=o||e.getCopyShader(),e.constantTexSource.setValue(t),p(e,r,o,s,n)}export{p as drawQuadWithShader,l as drawTexture};
