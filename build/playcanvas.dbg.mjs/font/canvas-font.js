/**
 * @license
 * PlayCanvas Engine v1.57.1 revision 256dd83c2 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { string } from '../core/string.js';
import { EventHandler } from '../core/event-handler.js';
import { Color } from '../math/color.js';
import { PIXELFORMAT_R8_G8_B8_A8, FILTER_LINEAR_MIPMAP_LINEAR, FILTER_LINEAR, ADDRESS_CLAMP_TO_EDGE } from '../graphics/constants.js';
import { Texture } from '../graphics/texture.js';

const MAX_TEXTURE_SIZE = 4096;
const DEFAULT_TEXTURE_SIZE = 512;

class CanvasFont extends EventHandler {
  constructor(app, options = {}) {
    super();
    this.type = 'bitmap';
    this.app = app;
    this.intensity = 0;
    this.fontWeight = options.fontWeight || 'normal';
    this.fontSize = parseInt(options.fontSize, 10);
    this.glyphSize = this.fontSize;
    this.fontName = options.fontName || 'Arial';
    this.color = options.color || new Color(1, 1, 1);
    this.padding = options.padding || 0;
    const w = options.width > MAX_TEXTURE_SIZE ? MAX_TEXTURE_SIZE : options.width || DEFAULT_TEXTURE_SIZE;
    const h = options.height > MAX_TEXTURE_SIZE ? MAX_TEXTURE_SIZE : options.height || DEFAULT_TEXTURE_SIZE;
    const canvas = document.createElement('canvas');
    canvas.height = h;
    canvas.width = w;
    const texture = new Texture(this.app.graphicsDevice, {
      name: 'font',
      format: PIXELFORMAT_R8_G8_B8_A8,
      minFilter: FILTER_LINEAR_MIPMAP_LINEAR,
      magFilter: FILTER_LINEAR,
      addressU: ADDRESS_CLAMP_TO_EDGE,
      addressV: ADDRESS_CLAMP_TO_EDGE,
      mipmaps: true
    });
    texture.setSource(canvas);
    this.textures = [texture];
    this.chars = '';
    this.data = {};
  }

  createTextures(text) {
    const _chars = this._normalizeCharsSet(text);

    if (_chars.length !== this.chars.length) {
      this._renderAtlas(_chars);

      return;
    }

    for (let i = 0; i < _chars.length; i++) {
      if (_chars[i] !== this.chars[i]) {
        this._renderAtlas(_chars);

        return;
      }
    }
  }

  updateTextures(text) {
    const _chars = this._normalizeCharsSet(text);

    const newCharsSet = [];

    for (let i = 0; i < _chars.length; i++) {
      const char = _chars[i];

      if (!this.data.chars[char]) {
        newCharsSet.push(char);
      }
    }

    if (newCharsSet.length > 0) {
      this._renderAtlas(this.chars.concat(newCharsSet));
    }
  }

  destroy() {
    for (let i = 0; i < this.textures.length; i++) {
      this.textures[i].destroy();
    }

    this.chars = null;
    this.color = null;
    this.data = null;
    this.fontName = null;
    this.fontSize = null;
    this.glyphSize = null;
    this.intensity = null;
    this.textures = null;
    this.type = null;
    this.fontWeight = null;
  }

  _getAndClearContext(canvas, clearColor) {
    const w = canvas.width;
    const h = canvas.height;
    const ctx = canvas.getContext('2d', {
      alpha: true
    });
    ctx.clearRect(0, 0, w, h);
    ctx.fillStyle = clearColor;
    ctx.fillRect(0, 0, w, h);
    return ctx;
  }

  _colorToRgbString(color, alpha) {
    let str;
    const r = Math.round(255 * color.r);
    const g = Math.round(255 * color.g);
    const b = Math.round(255 * color.b);

    if (alpha) {
      str = `rgba(${r}, ${g}, ${b}, ${color.a})`;
    } else {
      str = `rgb(${r}, ${g}, ${b})`;
    }

    return str;
  }

  renderCharacter(context, char, x, y, color) {
    context.fillStyle = color;
    context.fillText(char, x, y);
  }

  _renderAtlas(charsArray) {
    this.chars = charsArray;
    let numTextures = 1;
    let canvas = this.textures[numTextures - 1].getSource();
    const w = canvas.width;
    const h = canvas.height;

    const color = this._colorToRgbString(this.color, false);

    const a = this.color.a;
    this.color.a = 1 / 255;

    const transparent = this._colorToRgbString(this.color, true);

    this.color.a = a;
    const TEXT_ALIGN = 'center';
    const TEXT_BASELINE = 'alphabetic';

    let ctx = this._getAndClearContext(canvas, transparent);

    ctx.font = this.fontWeight + ' ' + this.fontSize.toString() + 'px ' + this.fontName;
    ctx.textAlign = TEXT_ALIGN;
    ctx.textBaseline = TEXT_BASELINE;
    this.data = this._createJson(this.chars, this.fontName, w, h);
    const symbols = string.getSymbols(this.chars.join(''));
    const prevNumTextures = this.textures.length;
    let maxHeight = 0;
    let maxDescent = 0;
    const metrics = {};

    for (let i = 0; i < symbols.length; i++) {
      const ch = symbols[i];
      metrics[ch] = this._getTextMetrics(ch);
      maxHeight = Math.max(maxHeight, metrics[ch].height);
      maxDescent = Math.max(maxDescent, metrics[ch].descent);
    }

    this.glyphSize = Math.max(this.glyphSize, maxHeight);
    const sx = this.glyphSize + this.padding * 2;
    const sy = this.glyphSize + this.padding * 2;

    const _xOffset = this.glyphSize / 2 + this.padding;

    const _yOffset = sy - maxDescent - this.padding;

    let _x = 0;
    let _y = 0;

    for (let i = 0; i < symbols.length; i++) {
      const ch = symbols[i];
      const code = string.getCodePoint(symbols[i]);
      let fs = this.fontSize;
      ctx.font = this.fontWeight + ' ' + fs.toString() + 'px ' + this.fontName;
      ctx.textAlign = TEXT_ALIGN;
      ctx.textBaseline = TEXT_BASELINE;
      let width = ctx.measureText(ch).width;

      if (width > fs) {
        fs = this.fontSize * this.fontSize / width;
        ctx.font = this.fontWeight + ' ' + fs.toString() + 'px ' + this.fontName;
        width = this.fontSize;
      }

      this.renderCharacter(ctx, ch, _x + _xOffset, _y + _yOffset, color);
      const xoffset = this.padding + (this.glyphSize - width) / 2;
      const yoffset = -this.padding + metrics[ch].descent - maxDescent;
      const xadvance = width;

      this._addChar(this.data, ch, code, _x, _y, sx, sy, xoffset, yoffset, xadvance, numTextures - 1, w, h);

      _x += sx;

      if (_x + sx > w) {
        _x = 0;
        _y += sy;

        if (_y + sy > h) {
          this.textures[numTextures - 1].upload();
          numTextures++;
          _y = 0;

          if (numTextures > prevNumTextures) {
            canvas = document.createElement('canvas');
            canvas.height = h;
            canvas.width = w;
            ctx = this._getAndClearContext(canvas, transparent);
            const texture = new Texture(this.app.graphicsDevice, {
              format: PIXELFORMAT_R8_G8_B8_A8,
              mipmaps: true,
              name: 'font-atlas'
            });
            texture.setSource(canvas);
            texture.minFilter = FILTER_LINEAR_MIPMAP_LINEAR;
            texture.magFilter = FILTER_LINEAR;
            texture.addressU = ADDRESS_CLAMP_TO_EDGE;
            texture.addressV = ADDRESS_CLAMP_TO_EDGE;
            this.textures.push(texture);
          } else {
            canvas = this.textures[numTextures - 1].getSource();
            ctx = this._getAndClearContext(canvas, transparent);
          }
        }
      }
    }

    this.textures[numTextures - 1].upload();

    if (numTextures < prevNumTextures) {
      for (let i = numTextures; i < prevNumTextures; i++) {
        this.textures[i].destroy();
      }

      this.textures.splice(numTextures);
    }

    this.fire('render');
  }

  _createJson(chars, fontName, width, height) {
    const base = {
      'version': 3,
      'intensity': this.intensity,
      'info': {
        'face': fontName,
        'width': width,
        'height': height,
        'maps': [{
          'width': width,
          'height': height
        }]
      },
      'chars': {}
    };
    return base;
  }

  _addChar(json, char, charCode, x, y, w, h, xoffset, yoffset, xadvance, mapNum, mapW, mapH) {
    if (json.info.maps.length < mapNum + 1) {
      json.info.maps.push({
        'width': mapW,
        'height': mapH
      });
    }

    const scale = this.fontSize / 32;
    json.chars[char] = {
      'id': charCode,
      'letter': char,
      'x': x,
      'y': y,
      'width': w,
      'height': h,
      'xadvance': xadvance / scale,
      'xoffset': xoffset / scale,
      'yoffset': (yoffset + this.padding) / scale,
      'scale': scale,
      'range': 1,
      'map': mapNum,
      'bounds': [0, 0, w / scale, h / scale]
    };
  }

  _normalizeCharsSet(text) {
    const unicodeConverterFunc = this.app.systems.element.getUnicodeConverter();

    if (unicodeConverterFunc) {
      text = unicodeConverterFunc(text);
    }

    const set = {};
    const symbols = string.getSymbols(text);

    for (let i = 0; i < symbols.length; i++) {
      const ch = symbols[i];
      if (set[ch]) continue;
      set[ch] = ch;
    }

    const chars = Object.keys(set);
    return chars.sort();
  }

  _getTextMetrics(text) {
    const textSpan = document.createElement('span');
    textSpan.id = 'content-span';
    textSpan.innerHTML = text;
    const block = document.createElement('div');
    block.id = 'content-block';
    block.style.display = 'inline-block';
    block.style.width = '1px';
    block.style.height = '0px';
    const div = document.createElement('div');
    div.appendChild(textSpan);
    div.appendChild(block);
    div.style.font = this.fontSize + 'px ' + this.fontName;
    const body = document.body;
    body.appendChild(div);
    let ascent = -1;
    let descent = -1;
    let height = -1;

    try {
      block.style['vertical-align'] = 'baseline';
      ascent = block.offsetTop - textSpan.offsetTop;
      block.style['vertical-align'] = 'bottom';
      height = block.offsetTop - textSpan.offsetTop;
      descent = height - ascent;
    } finally {
      document.body.removeChild(div);
    }

    return {
      ascent: ascent,
      descent: descent,
      height: height
    };
  }

}

export { CanvasFont };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FudmFzLWZvbnQuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9mb250L2NhbnZhcy1mb250LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN0cmluZyB9IGZyb20gJy4uL2NvcmUvc3RyaW5nLmpzJztcbmltcG9ydCB7IEV2ZW50SGFuZGxlciB9IGZyb20gJy4uL2NvcmUvZXZlbnQtaGFuZGxlci5qcyc7XG5cbmltcG9ydCB7IENvbG9yIH0gZnJvbSAnLi4vbWF0aC9jb2xvci5qcyc7XG5cbmltcG9ydCB7XG4gICAgQUREUkVTU19DTEFNUF9UT19FREdFLFxuICAgIEZJTFRFUl9MSU5FQVIsIEZJTFRFUl9MSU5FQVJfTUlQTUFQX0xJTkVBUixcbiAgICBQSVhFTEZPUk1BVF9SOF9HOF9COF9BOFxufSBmcm9tICcuLi9ncmFwaGljcy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gJy4uL2dyYXBoaWNzL3RleHR1cmUuanMnO1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vZnJhbWV3b3JrL2FwcC1iYXNlLmpzJykuQXBwQmFzZX0gQXBwQmFzZSAqL1xuXG5jb25zdCBNQVhfVEVYVFVSRV9TSVpFID0gNDA5NjtcbmNvbnN0IERFRkFVTFRfVEVYVFVSRV9TSVpFID0gNTEyO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIHJlc291cmNlIG9mIGEgY2FudmFzIGZvbnQgYXNzZXQuXG4gKlxuICogQGF1Z21lbnRzIEV2ZW50SGFuZGxlclxuICogQGlnbm9yZVxuICovXG5jbGFzcyBDYW52YXNGb250IGV4dGVuZHMgRXZlbnRIYW5kbGVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgQ2FudmFzRm9udCBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXBwQmFzZX0gYXBwIC0gVGhlIGFwcGxpY2F0aW9uLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gVGhlIGZvbnQgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuZm9udE5hbWVdIC0gVGhlIG5hbWUgb2YgdGhlIGZvbnQuIENTUyBmb250IG5hbWVzIGFyZSBzdXBwb3J0ZWQuXG4gICAgICogRGVmYXVsdHMgdG8gJ0FyaWFsJy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuZm9udFdlaWdodF0gLSBUaGUgd2VpZ2h0IG9mIHRoZSBmb250LCBlLmcuICdub3JtYWwnLCAnYm9sZCcuXG4gICAgICogRGVmYXVsdHMgdG8gJ25vcm1hbCcuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmZvbnRTaXplXSAtIFRoZSBmb250IHNpemUgaW4gcGl4ZWxzLiBEZWZhdWx0cyB0byAzMi5cbiAgICAgKiBAcGFyYW0ge0NvbG9yfSBbb3B0aW9ucy5jb2xvcl0gLSBUaGUgZm9udCBjb2xvci5EZWZhdWx0cyB0byB3aGl0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMud2lkdGhdIC0gVGhlIHdpZHRoIG9mIGVhY2ggdGV4dHVyZSBhdGxhcy4gRGVmYXVsdHMgdG8gNTEyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5oZWlnaHRdIC0gVGhlIGhlaWdodCBvZiBlYWNoIHRleHR1cmUgYXRsYXMuIERlZmF1bHRzIHRvIDUxMi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucGFkZGluZ10gLSBBbW91bnQgb2YgZ2x5cGggcGFkZGluZyBpbiBwaXhlbHMgdGhhdCBpcyBhZGRlZCB0byBlYWNoXG4gICAgICogZ2x5cGggaW4gdGhlIGF0bGFzLiBEZWZhdWx0cyB0byAwLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFwcCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy50eXBlID0gJ2JpdG1hcCc7XG5cbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG5cbiAgICAgICAgdGhpcy5pbnRlbnNpdHkgPSAwO1xuXG4gICAgICAgIHRoaXMuZm9udFdlaWdodCA9IG9wdGlvbnMuZm9udFdlaWdodCB8fCAnbm9ybWFsJztcbiAgICAgICAgdGhpcy5mb250U2l6ZSA9IHBhcnNlSW50KG9wdGlvbnMuZm9udFNpemUsIDEwKTtcbiAgICAgICAgdGhpcy5nbHlwaFNpemUgPSB0aGlzLmZvbnRTaXplO1xuICAgICAgICB0aGlzLmZvbnROYW1lID0gb3B0aW9ucy5mb250TmFtZSB8fCAnQXJpYWwnO1xuICAgICAgICB0aGlzLmNvbG9yID0gb3B0aW9ucy5jb2xvciB8fCBuZXcgQ29sb3IoMSwgMSwgMSk7XG4gICAgICAgIHRoaXMucGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyB8fCAwO1xuXG4gICAgICAgIGNvbnN0IHcgPSBvcHRpb25zLndpZHRoID4gTUFYX1RFWFRVUkVfU0laRSA/IE1BWF9URVhUVVJFX1NJWkUgOiAob3B0aW9ucy53aWR0aCB8fCBERUZBVUxUX1RFWFRVUkVfU0laRSk7XG4gICAgICAgIGNvbnN0IGggPSBvcHRpb25zLmhlaWdodCA+IE1BWF9URVhUVVJFX1NJWkUgPyBNQVhfVEVYVFVSRV9TSVpFIDogKG9wdGlvbnMuaGVpZ2h0IHx8IERFRkFVTFRfVEVYVFVSRV9TSVpFKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBjYW52YXMgdG8gZG8gdGhlIHRleHQgcmVuZGVyaW5nXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaDtcbiAgICAgICAgY2FudmFzLndpZHRoID0gdztcblxuICAgICAgICBjb25zdCB0ZXh0dXJlID0gbmV3IFRleHR1cmUodGhpcy5hcHAuZ3JhcGhpY3NEZXZpY2UsIHtcbiAgICAgICAgICAgIG5hbWU6ICdmb250JyxcbiAgICAgICAgICAgIGZvcm1hdDogUElYRUxGT1JNQVRfUjhfRzhfQjhfQTgsXG4gICAgICAgICAgICBtaW5GaWx0ZXI6IEZJTFRFUl9MSU5FQVJfTUlQTUFQX0xJTkVBUixcbiAgICAgICAgICAgIG1hZ0ZpbHRlcjogRklMVEVSX0xJTkVBUixcbiAgICAgICAgICAgIGFkZHJlc3NVOiBBRERSRVNTX0NMQU1QX1RPX0VER0UsXG4gICAgICAgICAgICBhZGRyZXNzVjogQUREUkVTU19DTEFNUF9UT19FREdFLFxuICAgICAgICAgICAgbWlwbWFwczogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICB0ZXh0dXJlLnNldFNvdXJjZShjYW52YXMpO1xuXG4gICAgICAgIHRoaXMudGV4dHVyZXMgPSBbdGV4dHVyZV07XG5cbiAgICAgICAgdGhpcy5jaGFycyA9ICcnO1xuICAgICAgICB0aGlzLmRhdGEgPSB7fTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgdGhlIG5lY2Vzc2FyeSB0ZXh0dXJlcyBmb3IgYWxsIGNoYXJhY3RlcnMgaW4gYSBzdHJpbmcgdG8gYmUgdXNlZCBmb3IgdGhlIGNhbnZhcyBmb250LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgbGlzdCBvZiBjaGFyYWN0ZXJzIHRvIHJlbmRlciBpbnRvIHRoZSB0ZXh0dXJlIGF0bGFzLlxuICAgICAqL1xuICAgIGNyZWF0ZVRleHR1cmVzKHRleHQpIHtcbiAgICAgICAgY29uc3QgX2NoYXJzID0gdGhpcy5fbm9ybWFsaXplQ2hhcnNTZXQodGV4dCk7XG5cbiAgICAgICAgLy8gZGlmZmVyZW50IGxlbmd0aCBzbyBkZWZpbml0ZWx5IHVwZGF0ZVxuICAgICAgICBpZiAoX2NoYXJzLmxlbmd0aCAhPT0gdGhpcy5jaGFycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlckF0bGFzKF9jaGFycyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjb21wYXJlIHNvcnRlZCBjaGFyYWN0ZXJzIGZvciBkaWZmZXJlbmNlXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgX2NoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoX2NoYXJzW2ldICE9PSB0aGlzLmNoYXJzW2ldKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyQXRsYXMoX2NoYXJzKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGxpc3Qgb2YgY2hhcmFjdGVycyB0byBpbmNsdWRlIGluIHRoZSBhdGxhcyB0byBpbmNsdWRlIHRob3NlIHByb3ZpZGVkIGFuZFxuICAgICAqIHJlLXJlbmRlciB0aGUgdGV4dHVyZSBhdGxhcyB0byBpbmNsdWRlIGFsbCB0aGUgY2hhcmFjdGVycyB0aGF0IGhhdmUgYmVlbiBzdXBwbGllZCBzbyBmYXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRoZSBsaXN0IG9mIGNoYXJhY3RlcnMgdG8gYWRkIHRvIHRoZSB0ZXh0dXJlIGF0bGFzLlxuICAgICAqL1xuICAgIHVwZGF0ZVRleHR1cmVzKHRleHQpIHtcbiAgICAgICAgY29uc3QgX2NoYXJzID0gdGhpcy5fbm9ybWFsaXplQ2hhcnNTZXQodGV4dCk7XG4gICAgICAgIGNvbnN0IG5ld0NoYXJzU2V0ID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBfY2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYXIgPSBfY2hhcnNbaV07XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGF0YS5jaGFyc1tjaGFyXSkge1xuICAgICAgICAgICAgICAgIG5ld0NoYXJzU2V0LnB1c2goY2hhcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV3Q2hhcnNTZXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyQXRsYXModGhpcy5jaGFycy5jb25jYXQobmV3Q2hhcnNTZXQpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3lzIHRoZSBmb250LiBUaGlzIGFsc28gZGVzdHJveXMgdGhlIHRleHR1cmVzIG93bmVkIGJ5IHRoZSBmb250LlxuICAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIC8vIGNhbGwgdGV4dHVyZS5kZXN0cm95IG9uIGFueSBjcmVhdGVkIHRleHR1cmVzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50ZXh0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy50ZXh0dXJlc1tpXS5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbnVsbCBpbnN0YW5jZSB2YXJpYWJsZXMgdG8gbWFrZSBpdCBvYnZpb3VzIHRoaXMgZm9udCBpcyBubyBsb25nZXIgdmFsaWRcbiAgICAgICAgdGhpcy5jaGFycyA9IG51bGw7XG4gICAgICAgIHRoaXMuY29sb3IgPSBudWxsO1xuICAgICAgICB0aGlzLmRhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLmZvbnROYW1lID0gbnVsbDtcbiAgICAgICAgdGhpcy5mb250U2l6ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZ2x5cGhTaXplID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbnRlbnNpdHkgPSBudWxsO1xuICAgICAgICB0aGlzLnRleHR1cmVzID0gbnVsbDtcbiAgICAgICAgdGhpcy50eXBlID0gbnVsbDtcbiAgICAgICAgdGhpcy5mb250V2VpZ2h0ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fSBjYW52YXMgLSBUaGUgY2FudmFzIHVzZWQgdG8gcmVuZGVyIHRoZSBmb250LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGVhckNvbG9yIC0gVGhlIGNvbG9yIHRvIGNsZWFyIHRoZSBjYW52YXMgd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSAtIEEgMkQgcmVuZGVyaW5nIGNvbnR4dC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9nZXRBbmRDbGVhckNvbnRleHQoY2FudmFzLCBjbGVhckNvbG9yKSB7XG4gICAgICAgIGNvbnN0IHcgPSBjYW52YXMud2lkdGg7XG4gICAgICAgIGNvbnN0IGggPSBjYW52YXMuaGVpZ2h0O1xuXG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHtcbiAgICAgICAgICAgIGFscGhhOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgdywgaCk7ICAvLyBjbGVhciB0byBibGFjayBmaXJzdCB0byByZW1vdmUgZXZlcnl0aGluZyBhcyBjbGVhciBjb2xvciBpcyB0cmFuc3BhcmVudFxuICAgICAgICBjdHguZmlsbFN0eWxlID0gY2xlYXJDb2xvcjtcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIHcsIGgpOyAgIC8vIGNsZWFyIHRvIGNvbG9yXG5cbiAgICAgICAgcmV0dXJuIGN0eDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NvbG9yfSBjb2xvciAtIFRoZSBjb2xvciB0byBjb3ZlcnQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBhbHBoYSAtIFdoZXRoZXIgdG8gaW5jbHVkZSB0aGUgYWxwaGEgY2hhbm5lbC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgaGV4IHN0cmluZyBmb3IgdGhlIGNvbG9yLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2NvbG9yVG9SZ2JTdHJpbmcoY29sb3IsIGFscGhhKSB7XG4gICAgICAgIGxldCBzdHI7XG4gICAgICAgIGNvbnN0IHIgPSBNYXRoLnJvdW5kKDI1NSAqIGNvbG9yLnIpO1xuICAgICAgICBjb25zdCBnID0gTWF0aC5yb3VuZCgyNTUgKiBjb2xvci5nKTtcbiAgICAgICAgY29uc3QgYiA9IE1hdGgucm91bmQoMjU1ICogY29sb3IuYik7XG5cbiAgICAgICAgaWYgKGFscGhhKSB7XG4gICAgICAgICAgICBzdHIgPSBgcmdiYSgke3J9LCAke2d9LCAke2J9LCAke2NvbG9yLmF9KWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHIgPSBgcmdiKCR7cn0sICR7Z30sICR7Yn0pYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgLSBUaGUgY2FudmFzIDJEIGNvbnRleHQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNoYXIgLSBUaGUgY2hhcmFjdGVyIHRvIHJlbmRlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCAtIFRoZSB4IHBvc2l0aW9uIHRvIHJlbmRlciB0aGUgY2hhcmFjdGVyIGF0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gVGhlIHkgcG9zaXRpb24gdG8gcmVuZGVyIHRoZSBjaGFyYWN0ZXIgYXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvbG9yIC0gVGhlIGNvbG9yIHRvIHJlbmRlciB0aGUgY2hhcmFjdGVyIGluLlxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICByZW5kZXJDaGFyYWN0ZXIoY29udGV4dCwgY2hhciwgeCwgeSwgY29sb3IpIHtcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgY29udGV4dC5maWxsVGV4dChjaGFyLCB4LCB5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIGFuIGFycmF5IG9mIGNoYXJhY3RlcnMgaW50byBvbmUgb3IgbW9yZSB0ZXh0dXJlcyBhdGxhc2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gY2hhcnNBcnJheSAtIFRoZSBsaXN0IG9mIGNoYXJhY3RlcnMgdG8gcmVuZGVyLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3JlbmRlckF0bGFzKGNoYXJzQXJyYXkpIHtcbiAgICAgICAgdGhpcy5jaGFycyA9IGNoYXJzQXJyYXk7XG5cbiAgICAgICAgbGV0IG51bVRleHR1cmVzID0gMTtcblxuICAgICAgICBsZXQgY2FudmFzID0gdGhpcy50ZXh0dXJlc1tudW1UZXh0dXJlcyAtIDFdLmdldFNvdXJjZSgpO1xuICAgICAgICBjb25zdCB3ID0gY2FudmFzLndpZHRoO1xuICAgICAgICBjb25zdCBoID0gY2FudmFzLmhlaWdodDtcblxuICAgICAgICAvLyBmaWxsIGNvbG9yXG4gICAgICAgIGNvbnN0IGNvbG9yID0gdGhpcy5fY29sb3JUb1JnYlN0cmluZyh0aGlzLmNvbG9yLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gZ2VuZXJhdGUgYSBcInRyYW5zcGFyZW50XCIgY29sb3IgZm9yIHRoZSBiYWNrZ3JvdW5kXG4gICAgICAgIC8vIGJyb3dzZXJzIHNlZW0gdG8gb3B0aW1pemUgYXdheSBhbGwgY29sb3IgZGF0YSBpZiBhbHBoYT0wXG4gICAgICAgIC8vIHNvIHNldHRpbmcgYWxwaGEgdG8gbWluIHZhbHVlIGFuZCBob3BlIHRoaXMgaXNuJ3Qgbm90aWNlYWJsZVxuICAgICAgICBjb25zdCBhID0gdGhpcy5jb2xvci5hO1xuICAgICAgICB0aGlzLmNvbG9yLmEgPSAxIC8gMjU1O1xuICAgICAgICBjb25zdCB0cmFuc3BhcmVudCA9IHRoaXMuX2NvbG9yVG9SZ2JTdHJpbmcodGhpcy5jb2xvciwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuY29sb3IuYSA9IGE7XG5cbiAgICAgICAgY29uc3QgVEVYVF9BTElHTiA9ICdjZW50ZXInO1xuICAgICAgICBjb25zdCBURVhUX0JBU0VMSU5FID0gJ2FscGhhYmV0aWMnO1xuXG4gICAgICAgIGxldCBjdHggPSB0aGlzLl9nZXRBbmRDbGVhckNvbnRleHQoY2FudmFzLCB0cmFuc3BhcmVudCk7XG5cbiAgICAgICAgY3R4LmZvbnQgPSB0aGlzLmZvbnRXZWlnaHQgKyAnICcgKyB0aGlzLmZvbnRTaXplLnRvU3RyaW5nKCkgKyAncHggJyArIHRoaXMuZm9udE5hbWU7XG4gICAgICAgIGN0eC50ZXh0QWxpZ24gPSBURVhUX0FMSUdOO1xuICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gVEVYVF9CQVNFTElORTtcblxuICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLl9jcmVhdGVKc29uKHRoaXMuY2hhcnMsIHRoaXMuZm9udE5hbWUsIHcsIGgpO1xuXG4gICAgICAgIGNvbnN0IHN5bWJvbHMgPSBzdHJpbmcuZ2V0U3ltYm9scyh0aGlzLmNoYXJzLmpvaW4oJycpKTtcbiAgICAgICAgY29uc3QgcHJldk51bVRleHR1cmVzID0gdGhpcy50ZXh0dXJlcy5sZW5ndGg7XG5cbiAgICAgICAgbGV0IG1heEhlaWdodCA9IDA7XG4gICAgICAgIGxldCBtYXhEZXNjZW50ID0gMDtcbiAgICAgICAgY29uc3QgbWV0cmljcyA9IHt9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN5bWJvbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNoID0gc3ltYm9sc1tpXTtcbiAgICAgICAgICAgIG1ldHJpY3NbY2hdID0gdGhpcy5fZ2V0VGV4dE1ldHJpY3MoY2gpO1xuICAgICAgICAgICAgbWF4SGVpZ2h0ID0gTWF0aC5tYXgobWF4SGVpZ2h0LCBtZXRyaWNzW2NoXS5oZWlnaHQpO1xuICAgICAgICAgICAgbWF4RGVzY2VudCA9IE1hdGgubWF4KG1heERlc2NlbnQsIG1ldHJpY3NbY2hdLmRlc2NlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5nbHlwaFNpemUgPSBNYXRoLm1heCh0aGlzLmdseXBoU2l6ZSwgbWF4SGVpZ2h0KTtcblxuICAgICAgICBjb25zdCBzeCA9IHRoaXMuZ2x5cGhTaXplICsgdGhpcy5wYWRkaW5nICogMjtcbiAgICAgICAgY29uc3Qgc3kgPSB0aGlzLmdseXBoU2l6ZSArIHRoaXMucGFkZGluZyAqIDI7XG4gICAgICAgIGNvbnN0IF94T2Zmc2V0ID0gdGhpcy5nbHlwaFNpemUgLyAyICsgdGhpcy5wYWRkaW5nO1xuICAgICAgICBjb25zdCBfeU9mZnNldCA9IHN5IC0gbWF4RGVzY2VudCAtIHRoaXMucGFkZGluZztcbiAgICAgICAgbGV0IF94ID0gMDtcbiAgICAgICAgbGV0IF95ID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN5bWJvbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNoID0gc3ltYm9sc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBzdHJpbmcuZ2V0Q29kZVBvaW50KHN5bWJvbHNbaV0pO1xuXG4gICAgICAgICAgICBsZXQgZnMgPSB0aGlzLmZvbnRTaXplO1xuICAgICAgICAgICAgY3R4LmZvbnQgPSB0aGlzLmZvbnRXZWlnaHQgKyAnICcgKyBmcy50b1N0cmluZygpICsgJ3B4ICcgKyB0aGlzLmZvbnROYW1lO1xuICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9IFRFWFRfQUxJR047XG4gICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gVEVYVF9CQVNFTElORTtcblxuICAgICAgICAgICAgbGV0IHdpZHRoID0gY3R4Lm1lYXN1cmVUZXh0KGNoKS53aWR0aDtcblxuICAgICAgICAgICAgaWYgKHdpZHRoID4gZnMpIHtcbiAgICAgICAgICAgICAgICBmcyA9IHRoaXMuZm9udFNpemUgKiB0aGlzLmZvbnRTaXplIC8gd2lkdGg7XG4gICAgICAgICAgICAgICAgY3R4LmZvbnQgPSB0aGlzLmZvbnRXZWlnaHQgKyAnICcgKyBmcy50b1N0cmluZygpICsgJ3B4ICcgKyB0aGlzLmZvbnROYW1lO1xuICAgICAgICAgICAgICAgIHdpZHRoID0gdGhpcy5mb250U2l6ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5yZW5kZXJDaGFyYWN0ZXIoY3R4LCBjaCwgX3ggKyBfeE9mZnNldCwgX3kgKyBfeU9mZnNldCwgY29sb3IpO1xuXG4gICAgICAgICAgICBjb25zdCB4b2Zmc2V0ID0gdGhpcy5wYWRkaW5nICsgKHRoaXMuZ2x5cGhTaXplIC0gd2lkdGgpIC8gMjtcbiAgICAgICAgICAgIGNvbnN0IHlvZmZzZXQgPSAtdGhpcy5wYWRkaW5nICsgbWV0cmljc1tjaF0uZGVzY2VudCAtIG1heERlc2NlbnQ7XG4gICAgICAgICAgICBjb25zdCB4YWR2YW5jZSA9IHdpZHRoO1xuXG4gICAgICAgICAgICB0aGlzLl9hZGRDaGFyKHRoaXMuZGF0YSwgY2gsIGNvZGUsIF94LCBfeSwgc3gsIHN5LCB4b2Zmc2V0LCB5b2Zmc2V0LCB4YWR2YW5jZSwgbnVtVGV4dHVyZXMgLSAxLCB3LCBoKTtcblxuICAgICAgICAgICAgX3ggKz0gc3g7XG4gICAgICAgICAgICBpZiAoX3ggKyBzeCA+IHcpIHtcbiAgICAgICAgICAgICAgICAvLyBXcmFwIHRvIHRoZSBuZXh0IHJvdyBvZiB0aGlzIGNhbnZhcyBpZiB0aGUgcmlnaHQgZWRnZSBvZiB0aGUgbmV4dCBnbHlwaCB3b3VsZCBvdmVyZmxvd1xuICAgICAgICAgICAgICAgIF94ID0gMDtcbiAgICAgICAgICAgICAgICBfeSArPSBzeTtcbiAgICAgICAgICAgICAgICBpZiAoX3kgKyBzeSA+IGgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgcmFuIG91dCBvZiBzcGFjZSBvbiB0aGlzIHRleHR1cmUhXG4gICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGNhbnZhcyBpbnRvIHRoZSB0ZXh0dXJlIGFuZCB1cGxvYWQgaXRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0dXJlc1tudW1UZXh0dXJlcyAtIDFdLnVwbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgdGV4dHVyZSAoaWYgbmVlZGVkKSBhbmQgY29udGludWUgb25cbiAgICAgICAgICAgICAgICAgICAgbnVtVGV4dHVyZXMrKztcbiAgICAgICAgICAgICAgICAgICAgX3kgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVtVGV4dHVyZXMgPiBwcmV2TnVtVGV4dHVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSB3O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRBbmRDbGVhckNvbnRleHQoY2FudmFzLCB0cmFuc3BhcmVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSBuZXcgVGV4dHVyZSh0aGlzLmFwcC5ncmFwaGljc0RldmljZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogUElYRUxGT1JNQVRfUjhfRzhfQjhfQTgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlwbWFwczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZm9udC1hdGxhcydcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5zZXRTb3VyY2UoY2FudmFzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUubWluRmlsdGVyID0gRklMVEVSX0xJTkVBUl9NSVBNQVBfTElORUFSO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5tYWdGaWx0ZXIgPSBGSUxURVJfTElORUFSO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5hZGRyZXNzVSA9IEFERFJFU1NfQ0xBTVBfVE9fRURHRTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUuYWRkcmVzc1YgPSBBRERSRVNTX0NMQU1QX1RPX0VER0U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHR1cmVzLnB1c2godGV4dHVyZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMgPSB0aGlzLnRleHR1cmVzW251bVRleHR1cmVzIC0gMV0uZ2V0U291cmNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRBbmRDbGVhckNvbnRleHQoY2FudmFzLCB0cmFuc3BhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29weSBhbnkgcmVtYWluaW5nIGNoYXJhY3RlcnMgaW4gdGhlIGNhbnZhcyBpbnRvIHRoZSBsYXN0IHRleHR1cmUgYW5kIHVwbG9hZCBpdFxuICAgICAgICB0aGlzLnRleHR1cmVzW251bVRleHR1cmVzIC0gMV0udXBsb2FkKCk7XG5cbiAgICAgICAgLy8gQ2xlYW51cCBhbnkgcmVtYWluaW5nICh1bnVzZWQpIHRleHR1cmVzXG4gICAgICAgIGlmIChudW1UZXh0dXJlcyA8IHByZXZOdW1UZXh0dXJlcykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IG51bVRleHR1cmVzOyBpIDwgcHJldk51bVRleHR1cmVzOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHR1cmVzW2ldLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGV4dHVyZXMuc3BsaWNlKG51bVRleHR1cmVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFsZXJ0IHRleHQtZWxlbWVudHMgdGhhdCB0aGUgZm9udCBoYXMgYmVlbiByZS1yZW5kZXJlZFxuICAgICAgICB0aGlzLmZpcmUoJ3JlbmRlcicpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IGNoYXJzIC0gQSBsaXN0IG9mIGNoYXJhY3RlcnMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZvbnROYW1lIC0gVGhlIGZvbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGggLSBUaGUgd2lkdGggb2YgdGhlIHRleHR1cmUgYXRsYXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCAtIFRoZSBoZWlnaHQgb2YgdGhlIHRleHR1cmUgYXRsYXMuXG4gICAgICogQHJldHVybnMge29iamVjdH0gVGhlIGZvbnQgSlNPTiBvYmplY3QuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfY3JlYXRlSnNvbihjaGFycywgZm9udE5hbWUsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgY29uc3QgYmFzZSA9IHtcbiAgICAgICAgICAgICd2ZXJzaW9uJzogMyxcbiAgICAgICAgICAgICdpbnRlbnNpdHknOiB0aGlzLmludGVuc2l0eSxcbiAgICAgICAgICAgICdpbmZvJzoge1xuICAgICAgICAgICAgICAgICdmYWNlJzogZm9udE5hbWUsXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogd2lkdGgsXG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6IGhlaWdodCxcbiAgICAgICAgICAgICAgICAnbWFwcyc6IFt7XG4gICAgICAgICAgICAgICAgICAgICd3aWR0aCc6IHdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogaGVpZ2h0XG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnY2hhcnMnOiB7fVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBiYXNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBqc29uIC0gRm9udCBkYXRhLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjaGFyIC0gVGhlIGNoYXJhY3RlciB0byBhZGQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNoYXJDb2RlIC0gVGhlIGNvZGUgcG9pbnQgbnVtYmVyIG9mIHRoZSBjaGFyYWN0ZXIgdG8gYWRkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gVGhlIHggcG9zaXRpb24gb2YgdGhlIGNoYXJhY3Rlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSAtIFRoZSB5IHBvc2l0aW9uIG9mIHRoZSBjaGFyYWN0ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHcgLSBUaGUgd2lkdGggb2YgdGhlIGNoYXJhY3Rlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaCAtIFRoZSBoZWlnaHQgb2YgdGhlIGNoYXJhY3Rlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geG9mZnNldCAtIFRoZSB4IG9mZnNldCBvZiB0aGUgY2hhcmFjdGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5b2Zmc2V0IC0gVGhlIHkgb2Zmc2V0IG9mIHRoZSBjaGFyYWN0ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHhhZHZhbmNlIC0gVGhlIHggYWR2YW5jZSBvZiB0aGUgY2hhcmFjdGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXBOdW0gLSBUaGUgbWFwIG51bWJlciBvZiB0aGUgY2hhcmFjdGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXBXIC0gVGhlIHdpZHRoIG9mIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1hcEggLSBUaGUgaGVpZ2h0IG9mIHRoZSBtYXAuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfYWRkQ2hhcihqc29uLCBjaGFyLCBjaGFyQ29kZSwgeCwgeSwgdywgaCwgeG9mZnNldCwgeW9mZnNldCwgeGFkdmFuY2UsIG1hcE51bSwgbWFwVywgbWFwSCkge1xuICAgICAgICBpZiAoanNvbi5pbmZvLm1hcHMubGVuZ3RoIDwgbWFwTnVtICsgMSkge1xuICAgICAgICAgICAganNvbi5pbmZvLm1hcHMucHVzaCh7ICd3aWR0aCc6IG1hcFcsICdoZWlnaHQnOiBtYXBIIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLmZvbnRTaXplIC8gMzI7XG5cbiAgICAgICAganNvbi5jaGFyc1tjaGFyXSA9IHtcbiAgICAgICAgICAgICdpZCc6IGNoYXJDb2RlLFxuICAgICAgICAgICAgJ2xldHRlcic6IGNoYXIsXG4gICAgICAgICAgICAneCc6IHgsXG4gICAgICAgICAgICAneSc6IHksXG4gICAgICAgICAgICAnd2lkdGgnOiB3LFxuICAgICAgICAgICAgJ2hlaWdodCc6IGgsXG4gICAgICAgICAgICAneGFkdmFuY2UnOiB4YWR2YW5jZSAvIHNjYWxlLFxuICAgICAgICAgICAgJ3hvZmZzZXQnOiB4b2Zmc2V0IC8gc2NhbGUsXG4gICAgICAgICAgICAneW9mZnNldCc6ICh5b2Zmc2V0ICsgdGhpcy5wYWRkaW5nKSAvIHNjYWxlLFxuICAgICAgICAgICAgJ3NjYWxlJzogc2NhbGUsXG4gICAgICAgICAgICAncmFuZ2UnOiAxLFxuICAgICAgICAgICAgJ21hcCc6IG1hcE51bSxcbiAgICAgICAgICAgICdib3VuZHMnOiBbMCwgMCwgdyAvIHNjYWxlLCBoIC8gc2NhbGVdXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGFrZSBhIHVuaWNvZGUgc3RyaW5nIGFuZCBwcm9kdWNlIHRoZSBzZXQgb2YgY2hhcmFjdGVycyB1c2VkIHRvIGNyZWF0ZSB0aGF0IHN0cmluZy5cbiAgICAgKiBlLmcuIFwiYWJjYWJjYWJjXCIgLT4gWydhJywgJ2InLCAnYyddXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRoZSB1bmljb2RlIHN0cmluZyB0byBwcm9jZXNzLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmdbXX0gVGhlIHNldCBvZiBjaGFyYWN0ZXJzIHVzZWQgdG8gY3JlYXRlIHRoZSBzdHJpbmcuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfbm9ybWFsaXplQ2hhcnNTZXQodGV4dCkge1xuICAgICAgICAvLyBub3JtYWxpemUgdW5pY29kZSBpZiBuZWVkZWRcbiAgICAgICAgY29uc3QgdW5pY29kZUNvbnZlcnRlckZ1bmMgPSB0aGlzLmFwcC5zeXN0ZW1zLmVsZW1lbnQuZ2V0VW5pY29kZUNvbnZlcnRlcigpO1xuICAgICAgICBpZiAodW5pY29kZUNvbnZlcnRlckZ1bmMpIHtcbiAgICAgICAgICAgIHRleHQgPSB1bmljb2RlQ29udmVydGVyRnVuYyh0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzdHJpcCBkdXBsaWNhdGVzXG4gICAgICAgIGNvbnN0IHNldCA9IHt9O1xuICAgICAgICBjb25zdCBzeW1ib2xzID0gc3RyaW5nLmdldFN5bWJvbHModGV4dCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3ltYm9scy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY2ggPSBzeW1ib2xzW2ldO1xuICAgICAgICAgICAgaWYgKHNldFtjaF0pIGNvbnRpbnVlO1xuICAgICAgICAgICAgc2V0W2NoXSA9IGNoO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoYXJzID0gT2JqZWN0LmtleXMoc2V0KTtcbiAgICAgICAgLy8gc29ydFxuICAgICAgICByZXR1cm4gY2hhcnMuc29ydCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBzb21lIG1ldHJpY3MgdGhhdCBhcmVuJ3QgYXZhaWxhYmxlIHZpYSB0aGUgYnJvd3NlciBBUEksIG5vdGFibHkgY2hhcmFjdGVyIGhlaWdodFxuICAgICAqIGFuZCBkZXNjZW50IHNpemUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRoZSB0ZXh0IHRvIG1lYXN1cmUuXG4gICAgICogQHJldHVybnMge3thc2NlbnQ6IG51bWJlciwgZGVzY2VudDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcn19IFRoZSBtZXRyaWNzIG9mIHRoZSB0ZXh0LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2dldFRleHRNZXRyaWNzKHRleHQpIHtcbiAgICAgICAgY29uc3QgdGV4dFNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIHRleHRTcGFuLmlkID0gJ2NvbnRlbnQtc3Bhbic7XG4gICAgICAgIHRleHRTcGFuLmlubmVySFRNTCA9IHRleHQ7XG5cbiAgICAgICAgY29uc3QgYmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgYmxvY2suaWQgPSAnY29udGVudC1ibG9jayc7XG4gICAgICAgIGJsb2NrLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICAgICAgYmxvY2suc3R5bGUud2lkdGggPSAnMXB4JztcbiAgICAgICAgYmxvY2suc3R5bGUuaGVpZ2h0ID0gJzBweCc7XG5cbiAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZCh0ZXh0U3Bhbik7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChibG9jayk7XG4gICAgICAgIGRpdi5zdHlsZS5mb250ID0gdGhpcy5mb250U2l6ZSArICdweCAnICsgdGhpcy5mb250TmFtZTtcblxuICAgICAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuXG4gICAgICAgIGxldCBhc2NlbnQgPSAtMTtcbiAgICAgICAgbGV0IGRlc2NlbnQgPSAtMTtcbiAgICAgICAgbGV0IGhlaWdodCA9IC0xO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBibG9jay5zdHlsZVsndmVydGljYWwtYWxpZ24nXSA9ICdiYXNlbGluZSc7XG4gICAgICAgICAgICBhc2NlbnQgPSBibG9jay5vZmZzZXRUb3AgLSB0ZXh0U3Bhbi5vZmZzZXRUb3A7XG4gICAgICAgICAgICBibG9jay5zdHlsZVsndmVydGljYWwtYWxpZ24nXSA9ICdib3R0b20nO1xuICAgICAgICAgICAgaGVpZ2h0ID0gYmxvY2sub2Zmc2V0VG9wIC0gdGV4dFNwYW4ub2Zmc2V0VG9wO1xuICAgICAgICAgICAgZGVzY2VudCA9IGhlaWdodCAtIGFzY2VudDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhc2NlbnQ6IGFzY2VudCxcbiAgICAgICAgICAgIGRlc2NlbnQ6IGRlc2NlbnQsXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuZXhwb3J0IHsgQ2FudmFzRm9udCB9O1xuIl0sIm5hbWVzIjpbIk1BWF9URVhUVVJFX1NJWkUiLCJERUZBVUxUX1RFWFRVUkVfU0laRSIsIkNhbnZhc0ZvbnQiLCJFdmVudEhhbmRsZXIiLCJjb25zdHJ1Y3RvciIsImFwcCIsIm9wdGlvbnMiLCJ0eXBlIiwiaW50ZW5zaXR5IiwiZm9udFdlaWdodCIsImZvbnRTaXplIiwicGFyc2VJbnQiLCJnbHlwaFNpemUiLCJmb250TmFtZSIsImNvbG9yIiwiQ29sb3IiLCJwYWRkaW5nIiwidyIsIndpZHRoIiwiaCIsImhlaWdodCIsImNhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInRleHR1cmUiLCJUZXh0dXJlIiwiZ3JhcGhpY3NEZXZpY2UiLCJuYW1lIiwiZm9ybWF0IiwiUElYRUxGT1JNQVRfUjhfRzhfQjhfQTgiLCJtaW5GaWx0ZXIiLCJGSUxURVJfTElORUFSX01JUE1BUF9MSU5FQVIiLCJtYWdGaWx0ZXIiLCJGSUxURVJfTElORUFSIiwiYWRkcmVzc1UiLCJBRERSRVNTX0NMQU1QX1RPX0VER0UiLCJhZGRyZXNzViIsIm1pcG1hcHMiLCJzZXRTb3VyY2UiLCJ0ZXh0dXJlcyIsImNoYXJzIiwiZGF0YSIsImNyZWF0ZVRleHR1cmVzIiwidGV4dCIsIl9jaGFycyIsIl9ub3JtYWxpemVDaGFyc1NldCIsImxlbmd0aCIsIl9yZW5kZXJBdGxhcyIsImkiLCJ1cGRhdGVUZXh0dXJlcyIsIm5ld0NoYXJzU2V0IiwiY2hhciIsInB1c2giLCJjb25jYXQiLCJkZXN0cm95IiwiX2dldEFuZENsZWFyQ29udGV4dCIsImNsZWFyQ29sb3IiLCJjdHgiLCJnZXRDb250ZXh0IiwiYWxwaGEiLCJjbGVhclJlY3QiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsIl9jb2xvclRvUmdiU3RyaW5nIiwic3RyIiwiciIsIk1hdGgiLCJyb3VuZCIsImciLCJiIiwiYSIsInJlbmRlckNoYXJhY3RlciIsImNvbnRleHQiLCJ4IiwieSIsImZpbGxUZXh0IiwiY2hhcnNBcnJheSIsIm51bVRleHR1cmVzIiwiZ2V0U291cmNlIiwidHJhbnNwYXJlbnQiLCJURVhUX0FMSUdOIiwiVEVYVF9CQVNFTElORSIsImZvbnQiLCJ0b1N0cmluZyIsInRleHRBbGlnbiIsInRleHRCYXNlbGluZSIsIl9jcmVhdGVKc29uIiwic3ltYm9scyIsInN0cmluZyIsImdldFN5bWJvbHMiLCJqb2luIiwicHJldk51bVRleHR1cmVzIiwibWF4SGVpZ2h0IiwibWF4RGVzY2VudCIsIm1ldHJpY3MiLCJjaCIsIl9nZXRUZXh0TWV0cmljcyIsIm1heCIsImRlc2NlbnQiLCJzeCIsInN5IiwiX3hPZmZzZXQiLCJfeU9mZnNldCIsIl94IiwiX3kiLCJjb2RlIiwiZ2V0Q29kZVBvaW50IiwiZnMiLCJtZWFzdXJlVGV4dCIsInhvZmZzZXQiLCJ5b2Zmc2V0IiwieGFkdmFuY2UiLCJfYWRkQ2hhciIsInVwbG9hZCIsInNwbGljZSIsImZpcmUiLCJiYXNlIiwianNvbiIsImNoYXJDb2RlIiwibWFwTnVtIiwibWFwVyIsIm1hcEgiLCJpbmZvIiwibWFwcyIsInNjYWxlIiwidW5pY29kZUNvbnZlcnRlckZ1bmMiLCJzeXN0ZW1zIiwiZWxlbWVudCIsImdldFVuaWNvZGVDb252ZXJ0ZXIiLCJzZXQiLCJPYmplY3QiLCJrZXlzIiwic29ydCIsInRleHRTcGFuIiwiaWQiLCJpbm5lckhUTUwiLCJibG9jayIsInN0eWxlIiwiZGlzcGxheSIsImRpdiIsImFwcGVuZENoaWxkIiwiYm9keSIsImFzY2VudCIsIm9mZnNldFRvcCIsInJlbW92ZUNoaWxkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQWNB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
