function VerticalTiltShiftEffect(t){pc.PostEffect.call(this,t),this.shader=new pc.Shader(t,{attributes:{aPosition:pc.SEMANTIC_POSITION},vshader:["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),fshader:["precision "+t.precision+" float;","","uniform sampler2D uColorBuffer;","uniform float uV;","uniform float uR;","","varying vec2 vUv0;","","void main() {","    vec4 sum = vec4( 0.0 );","    float vv = uV * abs( uR - vUv0.y );","","    sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y - 4.0 * vv ) ) * 0.051;","    sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y - 3.0 * vv ) ) * 0.0918;","    sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y - 2.0 * vv ) ) * 0.12245;","    sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y - 1.0 * vv ) ) * 0.1531;","    sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y ) ) * 0.1633;","    sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y + 1.0 * vv ) ) * 0.1531;","    sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y + 2.0 * vv ) ) * 0.12245;","    sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y + 3.0 * vv ) ) * 0.0918;","    sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y + 4.0 * vv ) ) * 0.051;","","    gl_FragColor = sum;","}"].join("\n")}),this.focus=.35}VerticalTiltShiftEffect.prototype=Object.create(pc.PostEffect.prototype),VerticalTiltShiftEffect.prototype.constructor=VerticalTiltShiftEffect,Object.assign(VerticalTiltShiftEffect.prototype,{render:function(t,e,i){var f=this.device,v=f.scope;v.resolve("uV").setValue(1/t.height),v.resolve("uR").setValue(this.focus),v.resolve("uColorBuffer").setValue(t.colorBuffer),pc.drawFullscreenQuad(f,e,this.vertexBuffer,this.shader,i)}});var VerticalTiltShift=pc.createScript("verticalTiltShift");VerticalTiltShift.attributes.add("focus",{type:"number",default:.35,min:0,max:1,title:"Focus"}),VerticalTiltShift.prototype.initialize=function(){this.effect=new VerticalTiltShiftEffect(this.app.graphicsDevice),this.effect.focus=this.focus,this.on("attr:focus",(function(t){this.effect.focus=t}),this);var t=this.entity.camera.postEffects;t.addEffect(this.effect),this.on("state",(function(e){e?t.addEffect(this.effect):t.removeEffect(this.effect)})),this.on("destroy",(function(){t.removeEffect(this.effect)}))};