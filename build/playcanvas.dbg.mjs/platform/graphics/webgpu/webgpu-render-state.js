/**
 * @license
 * PlayCanvas Engine v1.61.0-dev revision 4ea78c6d0 (DEBUG PROFILER)
 * Copyright 2011-2023 PlayCanvas Ltd. All rights reserved.
 */
import { BLENDMODE_ONE, BLENDMODE_ZERO, BLENDEQUATION_ADD } from '../constants.js';

class WebgpuRenderState {
  constructor() {
    this.reset();
  }

  // TODO: When setDepthTest is implemented, a webgpu only workaround should be removed in drawQuadWithShader function.

  reset() {
    // blend state
    this.blendStateDirty = true;
    this.blendStateKey = '';
    this.blending = false;
    this.blendSrcColor = BLENDMODE_ONE;
    this.blendDstColor = BLENDMODE_ZERO;
    this.blendEquationColor = BLENDEQUATION_ADD;
    this.blendEquationAlpha = BLENDEQUATION_ADD;
    this.blendSrcAlpha = BLENDMODE_ONE;
    this.blendDstAlpha = BLENDMODE_ZERO;
    //        this.blendColor = new Color(0, 0, 0, 0);
    this.writeRed = true;
    this.writeGreen = true;
    this.writeBlue = true;
    this.writeAlpha = true;
  }
  get blendKey() {
    if (this.blendStateDirty) {
      this.blendStateDirty = false;
      this.blendStateKey = `${this.blending}_${this.blendSrcColor}_${this.blendSrcAlpha}`;
      this.blendStateKey += `_${this.blendDstColor}_${this.blendDstAlpha}`;
      this.blendStateKey += `_${this.blendEquationColor}_${this.blendEquationAlpha}`;
    }
    return this.blendStateKey;
  }
  setBlending(blending) {
    if (this.blending !== blending) {
      this.blending = blending;
      this.blendStateDirty = true;
    }
  }
  setBlendFunction(blendSrc, blendDst) {
    if (this.blendSrcColor !== blendSrc || this.blendDstColor !== blendDst || this.blendSrcAlpha !== blendSrc || this.blendDstAlpha !== blendDst) {
      this.blendSrcColor = blendSrc;
      this.blendSrcAlpha = blendSrc;
      this.blendDstColor = blendDst;
      this.blendDstAlpha = blendDst;
      this.blendStateDirty = true;
    }
  }
  setBlendEquation(blendEquation) {
    if (this.blendEquationColor !== blendEquation || this.blendEquationAlpha !== blendEquation) {
      this.blendEquationColor = blendEquation;
      this.blendEquationAlpha = blendEquation;
      this.blendStateDirty = true;
    }
  }
}

export { WebgpuRenderState };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViZ3B1LXJlbmRlci1zdGF0ZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3BsYXRmb3JtL2dyYXBoaWNzL3dlYmdwdS93ZWJncHUtcmVuZGVyLXN0YXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQkxFTkRFUVVBVElPTl9BREQsXG4gICAgQkxFTkRNT0RFX1pFUk8sIEJMRU5ETU9ERV9PTkVcbn0gZnJvbSAnLi4vY29uc3RhbnRzLmpzJztcblxuY2xhc3MgV2ViZ3B1UmVuZGVyU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogV2hlbiBzZXREZXB0aFRlc3QgaXMgaW1wbGVtZW50ZWQsIGEgd2ViZ3B1IG9ubHkgd29ya2Fyb3VuZCBzaG91bGQgYmUgcmVtb3ZlZCBpbiBkcmF3UXVhZFdpdGhTaGFkZXIgZnVuY3Rpb24uXG5cbiAgICByZXNldCgpIHtcblxuICAgICAgICAvLyBibGVuZCBzdGF0ZVxuICAgICAgICB0aGlzLmJsZW5kU3RhdGVEaXJ0eSA9IHRydWU7XG4gICAgICAgIHRoaXMuYmxlbmRTdGF0ZUtleSA9ICcnO1xuICAgICAgICB0aGlzLmJsZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYmxlbmRTcmNDb2xvciA9IEJMRU5ETU9ERV9PTkU7XG4gICAgICAgIHRoaXMuYmxlbmREc3RDb2xvciA9IEJMRU5ETU9ERV9aRVJPO1xuICAgICAgICB0aGlzLmJsZW5kRXF1YXRpb25Db2xvciA9IEJMRU5ERVFVQVRJT05fQUREO1xuICAgICAgICB0aGlzLmJsZW5kRXF1YXRpb25BbHBoYSA9IEJMRU5ERVFVQVRJT05fQUREO1xuICAgICAgICB0aGlzLmJsZW5kU3JjQWxwaGEgPSBCTEVORE1PREVfT05FO1xuICAgICAgICB0aGlzLmJsZW5kRHN0QWxwaGEgPSBCTEVORE1PREVfWkVSTztcbi8vICAgICAgICB0aGlzLmJsZW5kQ29sb3IgPSBuZXcgQ29sb3IoMCwgMCwgMCwgMCk7XG4gICAgICAgIHRoaXMud3JpdGVSZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLndyaXRlR3JlZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLndyaXRlQmx1ZSA9IHRydWU7XG4gICAgICAgIHRoaXMud3JpdGVBbHBoYSA9IHRydWU7XG4gICAgfVxuXG4gICAgZ2V0IGJsZW5kS2V5KCkge1xuXG4gICAgICAgIGlmICh0aGlzLmJsZW5kU3RhdGVEaXJ0eSkge1xuICAgICAgICAgICAgdGhpcy5ibGVuZFN0YXRlRGlydHkgPSBmYWxzZTtcblxuICAgICAgICAgICAgdGhpcy5ibGVuZFN0YXRlS2V5ID0gYCR7dGhpcy5ibGVuZGluZ31fJHt0aGlzLmJsZW5kU3JjQ29sb3J9XyR7dGhpcy5ibGVuZFNyY0FscGhhfWA7XG4gICAgICAgICAgICB0aGlzLmJsZW5kU3RhdGVLZXkgKz0gYF8ke3RoaXMuYmxlbmREc3RDb2xvcn1fJHt0aGlzLmJsZW5kRHN0QWxwaGF9YDtcbiAgICAgICAgICAgIHRoaXMuYmxlbmRTdGF0ZUtleSArPSBgXyR7dGhpcy5ibGVuZEVxdWF0aW9uQ29sb3J9XyR7dGhpcy5ibGVuZEVxdWF0aW9uQWxwaGF9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ibGVuZFN0YXRlS2V5O1xuXG4gICAgfVxuXG4gICAgc2V0QmxlbmRpbmcoYmxlbmRpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMuYmxlbmRpbmcgIT09IGJsZW5kaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmJsZW5kaW5nID0gYmxlbmRpbmc7XG5cbiAgICAgICAgICAgIHRoaXMuYmxlbmRTdGF0ZURpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEJsZW5kRnVuY3Rpb24oYmxlbmRTcmMsIGJsZW5kRHN0KSB7XG4gICAgICAgIGlmICh0aGlzLmJsZW5kU3JjQ29sb3IgIT09IGJsZW5kU3JjIHx8IHRoaXMuYmxlbmREc3RDb2xvciAhPT0gYmxlbmREc3QgfHxcbiAgICAgICAgICAgIHRoaXMuYmxlbmRTcmNBbHBoYSAhPT0gYmxlbmRTcmMgfHwgdGhpcy5ibGVuZERzdEFscGhhICE9PSBibGVuZERzdCkge1xuXG4gICAgICAgICAgICB0aGlzLmJsZW5kU3JjQ29sb3IgPSBibGVuZFNyYztcbiAgICAgICAgICAgIHRoaXMuYmxlbmRTcmNBbHBoYSA9IGJsZW5kU3JjO1xuICAgICAgICAgICAgdGhpcy5ibGVuZERzdENvbG9yID0gYmxlbmREc3Q7XG4gICAgICAgICAgICB0aGlzLmJsZW5kRHN0QWxwaGEgPSBibGVuZERzdDtcblxuICAgICAgICAgICAgdGhpcy5ibGVuZFN0YXRlRGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0QmxlbmRFcXVhdGlvbihibGVuZEVxdWF0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLmJsZW5kRXF1YXRpb25Db2xvciAhPT0gYmxlbmRFcXVhdGlvbiB8fCB0aGlzLmJsZW5kRXF1YXRpb25BbHBoYSAhPT0gYmxlbmRFcXVhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5ibGVuZEVxdWF0aW9uQ29sb3IgPSBibGVuZEVxdWF0aW9uO1xuICAgICAgICAgICAgdGhpcy5ibGVuZEVxdWF0aW9uQWxwaGEgPSBibGVuZEVxdWF0aW9uO1xuXG4gICAgICAgICAgICB0aGlzLmJsZW5kU3RhdGVEaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IFdlYmdwdVJlbmRlclN0YXRlIH07XG4iXSwibmFtZXMiOlsiV2ViZ3B1UmVuZGVyU3RhdGUiLCJjb25zdHJ1Y3RvciIsInJlc2V0IiwiYmxlbmRTdGF0ZURpcnR5IiwiYmxlbmRTdGF0ZUtleSIsImJsZW5kaW5nIiwiYmxlbmRTcmNDb2xvciIsIkJMRU5ETU9ERV9PTkUiLCJibGVuZERzdENvbG9yIiwiQkxFTkRNT0RFX1pFUk8iLCJibGVuZEVxdWF0aW9uQ29sb3IiLCJCTEVOREVRVUFUSU9OX0FERCIsImJsZW5kRXF1YXRpb25BbHBoYSIsImJsZW5kU3JjQWxwaGEiLCJibGVuZERzdEFscGhhIiwid3JpdGVSZWQiLCJ3cml0ZUdyZWVuIiwid3JpdGVCbHVlIiwid3JpdGVBbHBoYSIsImJsZW5kS2V5Iiwic2V0QmxlbmRpbmciLCJzZXRCbGVuZEZ1bmN0aW9uIiwiYmxlbmRTcmMiLCJibGVuZERzdCIsInNldEJsZW5kRXF1YXRpb24iLCJibGVuZEVxdWF0aW9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBS0EsTUFBTUEsaUJBQWlCLENBQUM7QUFDcEJDLEVBQUFBLFdBQVcsR0FBRztJQUNWLElBQUksQ0FBQ0MsS0FBSyxFQUFFLENBQUE7QUFDaEIsR0FBQTs7QUFFQTs7QUFFQUEsRUFBQUEsS0FBSyxHQUFHO0FBRUo7SUFDQSxJQUFJLENBQUNDLGVBQWUsR0FBRyxJQUFJLENBQUE7SUFDM0IsSUFBSSxDQUFDQyxhQUFhLEdBQUcsRUFBRSxDQUFBO0lBQ3ZCLElBQUksQ0FBQ0MsUUFBUSxHQUFHLEtBQUssQ0FBQTtJQUNyQixJQUFJLENBQUNDLGFBQWEsR0FBR0MsYUFBYSxDQUFBO0lBQ2xDLElBQUksQ0FBQ0MsYUFBYSxHQUFHQyxjQUFjLENBQUE7SUFDbkMsSUFBSSxDQUFDQyxrQkFBa0IsR0FBR0MsaUJBQWlCLENBQUE7SUFDM0MsSUFBSSxDQUFDQyxrQkFBa0IsR0FBR0QsaUJBQWlCLENBQUE7SUFDM0MsSUFBSSxDQUFDRSxhQUFhLEdBQUdOLGFBQWEsQ0FBQTtJQUNsQyxJQUFJLENBQUNPLGFBQWEsR0FBR0wsY0FBYyxDQUFBO0FBQzNDO0lBQ1EsSUFBSSxDQUFDTSxRQUFRLEdBQUcsSUFBSSxDQUFBO0lBQ3BCLElBQUksQ0FBQ0MsVUFBVSxHQUFHLElBQUksQ0FBQTtJQUN0QixJQUFJLENBQUNDLFNBQVMsR0FBRyxJQUFJLENBQUE7SUFDckIsSUFBSSxDQUFDQyxVQUFVLEdBQUcsSUFBSSxDQUFBO0FBQzFCLEdBQUE7QUFFQSxFQUFBLElBQUlDLFFBQVEsR0FBRztJQUVYLElBQUksSUFBSSxDQUFDaEIsZUFBZSxFQUFFO01BQ3RCLElBQUksQ0FBQ0EsZUFBZSxHQUFHLEtBQUssQ0FBQTtBQUU1QixNQUFBLElBQUksQ0FBQ0MsYUFBYSxHQUFJLENBQUEsRUFBRSxJQUFJLENBQUNDLFFBQVMsQ0FBRyxDQUFBLEVBQUEsSUFBSSxDQUFDQyxhQUFjLENBQUEsQ0FBQSxFQUFHLElBQUksQ0FBQ08sYUFBYyxDQUFDLENBQUEsQ0FBQTtNQUNuRixJQUFJLENBQUNULGFBQWEsSUFBSyxDQUFHLENBQUEsRUFBQSxJQUFJLENBQUNJLGFBQWMsQ0FBRyxDQUFBLEVBQUEsSUFBSSxDQUFDTSxhQUFjLENBQUMsQ0FBQSxDQUFBO01BQ3BFLElBQUksQ0FBQ1YsYUFBYSxJQUFLLENBQUcsQ0FBQSxFQUFBLElBQUksQ0FBQ00sa0JBQW1CLENBQUcsQ0FBQSxFQUFBLElBQUksQ0FBQ0Usa0JBQW1CLENBQUMsQ0FBQSxDQUFBO0FBQ2xGLEtBQUE7SUFDQSxPQUFPLElBQUksQ0FBQ1IsYUFBYSxDQUFBO0FBRTdCLEdBQUE7RUFFQWdCLFdBQVcsQ0FBQ2YsUUFBUSxFQUFFO0FBQ2xCLElBQUEsSUFBSSxJQUFJLENBQUNBLFFBQVEsS0FBS0EsUUFBUSxFQUFFO01BQzVCLElBQUksQ0FBQ0EsUUFBUSxHQUFHQSxRQUFRLENBQUE7TUFFeEIsSUFBSSxDQUFDRixlQUFlLEdBQUcsSUFBSSxDQUFBO0FBQy9CLEtBQUE7QUFDSixHQUFBO0FBRUFrQixFQUFBQSxnQkFBZ0IsQ0FBQ0MsUUFBUSxFQUFFQyxRQUFRLEVBQUU7SUFDakMsSUFBSSxJQUFJLENBQUNqQixhQUFhLEtBQUtnQixRQUFRLElBQUksSUFBSSxDQUFDZCxhQUFhLEtBQUtlLFFBQVEsSUFDbEUsSUFBSSxDQUFDVixhQUFhLEtBQUtTLFFBQVEsSUFBSSxJQUFJLENBQUNSLGFBQWEsS0FBS1MsUUFBUSxFQUFFO01BRXBFLElBQUksQ0FBQ2pCLGFBQWEsR0FBR2dCLFFBQVEsQ0FBQTtNQUM3QixJQUFJLENBQUNULGFBQWEsR0FBR1MsUUFBUSxDQUFBO01BQzdCLElBQUksQ0FBQ2QsYUFBYSxHQUFHZSxRQUFRLENBQUE7TUFDN0IsSUFBSSxDQUFDVCxhQUFhLEdBQUdTLFFBQVEsQ0FBQTtNQUU3QixJQUFJLENBQUNwQixlQUFlLEdBQUcsSUFBSSxDQUFBO0FBQy9CLEtBQUE7QUFDSixHQUFBO0VBRUFxQixnQkFBZ0IsQ0FBQ0MsYUFBYSxFQUFFO0lBQzVCLElBQUksSUFBSSxDQUFDZixrQkFBa0IsS0FBS2UsYUFBYSxJQUFJLElBQUksQ0FBQ2Isa0JBQWtCLEtBQUthLGFBQWEsRUFBRTtNQUN4RixJQUFJLENBQUNmLGtCQUFrQixHQUFHZSxhQUFhLENBQUE7TUFDdkMsSUFBSSxDQUFDYixrQkFBa0IsR0FBR2EsYUFBYSxDQUFBO01BRXZDLElBQUksQ0FBQ3RCLGVBQWUsR0FBRyxJQUFJLENBQUE7QUFDL0IsS0FBQTtBQUNKLEdBQUE7QUFDSjs7OzsifQ==
