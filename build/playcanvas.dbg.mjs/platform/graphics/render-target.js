/**
 * @license
 * PlayCanvas Engine v1.58.0-preview revision 1fec26519 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../../core/debug.js';
import { TRACEID_RENDER_TARGET_ALLOC } from '../../core/constants.js';
import { PIXELFORMAT_DEPTH, PIXELFORMAT_DEPTHSTENCIL } from './constants.js';
import { DebugGraphics } from './debug-graphics.js';
import { GraphicsDevice } from './graphics-device.js';

const defaultOptions = {
  depth: true,
  face: 0
};
let id = 0;

class RenderTarget {
  constructor(options) {
    var _this$_colorBuffer, _this$_depthBuffer;
    this.id = id++;
    const _arg2 = arguments[1];
    const _arg3 = arguments[2];
    if (options instanceof GraphicsDevice) {
      this._colorBuffer = _arg2;
      options = _arg3;
      Debug.deprecated('pc.RenderTarget constructor no longer accepts GraphicsDevice parameter.');
    } else {
      this._colorBuffer = options.colorBuffer;
    }

    if (this._colorBuffer) {
      this._colorBuffer._isRenderTarget = true;
    }

    options = options !== undefined ? options : defaultOptions;
    this._depthBuffer = options.depthBuffer;
    this._face = options.face !== undefined ? options.face : 0;
    if (this._depthBuffer) {
      const format = this._depthBuffer._format;
      if (format === PIXELFORMAT_DEPTH) {
        this._depth = true;
        this._stencil = false;
      } else if (format === PIXELFORMAT_DEPTHSTENCIL) {
        this._depth = true;
        this._stencil = true;
      } else {
        Debug.warn('Incorrect depthBuffer format. Must be pc.PIXELFORMAT_DEPTH or pc.PIXELFORMAT_DEPTHSTENCIL');
        this._depth = false;
        this._stencil = false;
      }
    } else {
      this._depth = options.depth !== undefined ? options.depth : true;
      this._stencil = options.stencil !== undefined ? options.stencil : false;
    }

    const device = ((_this$_colorBuffer = this._colorBuffer) == null ? void 0 : _this$_colorBuffer.device) || ((_this$_depthBuffer = this._depthBuffer) == null ? void 0 : _this$_depthBuffer.device) || options.graphicsDevice;
    Debug.assert(device, "Failed to obtain the device, colorBuffer nor depthBuffer store it.");
    this._device = device;
    this._samples = options.samples !== undefined ? Math.min(options.samples, this._device.maxSamples) : 1;
    this.autoResolve = options.autoResolve !== undefined ? options.autoResolve : true;

    this.name = options.name;
    if (!this.name) {
      var _this$_colorBuffer2;
      this.name = (_this$_colorBuffer2 = this._colorBuffer) == null ? void 0 : _this$_colorBuffer2.name;
    }
    if (!this.name) {
      var _this$_depthBuffer2;
      this.name = (_this$_depthBuffer2 = this._depthBuffer) == null ? void 0 : _this$_depthBuffer2.name;
    }
    if (!this.name) {
      this.name = "Untitled";
    }

    this.flipY = !!options.flipY;

    this.impl = device.createRenderTargetImpl(this);
    Debug.trace(TRACEID_RENDER_TARGET_ALLOC, `Alloc: Id ${this.id} ${this.name}: ${this.width}x${this.height} samples: ${this.samples} ` + `${this.colorBuffer ? '[Color]' : ''}` + `${this.depth ? '[Depth]' : ''}` + `${this.stencil ? '[Stencil]' : ''}` + `[Face:${this.face}]`);
  }

  destroy() {
    Debug.trace(TRACEID_RENDER_TARGET_ALLOC, `DeAlloc: Id ${this.id} ${this.name}`);
    const device = this._device;
    if (device) {
      const idx = device.targets.indexOf(this);
      if (idx !== -1) {
        device.targets.splice(idx, 1);
      }
      if (device.renderTarget === this) {
        device.setRenderTarget(null);
      }
      this.destroyFrameBuffers();
    }
  }

  destroyFrameBuffers() {
    const device = this._device;
    if (device) {
      this.impl.destroy(device);
    }
  }

  destroyTextureBuffers() {
    if (this._depthBuffer) {
      this._depthBuffer.destroy();
      this._depthBuffer = null;
    }
    if (this._colorBuffer) {
      this._colorBuffer.destroy();
      this._colorBuffer = null;
    }
  }

  init() {
    this.impl.init(this._device, this);
  }
  get initialized() {
    return this.impl.initialized;
  }

  loseContext() {
    this.impl.loseContext();
  }

  resolve(color = true, depth = !!this._depthBuffer) {
    if (this._device && this._samples > 1) {
      DebugGraphics.pushGpuMarker(this._device, `RESOLVE-RT:${this.name}`);
      this.impl.resolve(this._device, this, color, depth);
      DebugGraphics.popGpuMarker(this._device);
    }
  }

  copy(source, color, depth) {
    if (!this._device) {
      if (source._device) {
        this._device = source._device;
      } else {
        Debug.error("Render targets are not initialized");
        return false;
      }
    }
    DebugGraphics.pushGpuMarker(this._device, `COPY-RT:${source.name}->${this.name}`);
    const success = this._device.copyRenderTarget(source, this, color, depth);
    DebugGraphics.popGpuMarker(this._device);
    return success;
  }

  get samples() {
    return this._samples;
  }

  get depth() {
    return this._depth;
  }

  get stencil() {
    return this._stencil;
  }

  get colorBuffer() {
    return this._colorBuffer;
  }

  get depthBuffer() {
    return this._depthBuffer;
  }

  get face() {
    return this._face;
  }

  get width() {
    var _this$_colorBuffer3, _this$_depthBuffer3;
    return ((_this$_colorBuffer3 = this._colorBuffer) == null ? void 0 : _this$_colorBuffer3.width) || ((_this$_depthBuffer3 = this._depthBuffer) == null ? void 0 : _this$_depthBuffer3.width) || this._device.width;
  }

  get height() {
    var _this$_colorBuffer4, _this$_depthBuffer4;
    return ((_this$_colorBuffer4 = this._colorBuffer) == null ? void 0 : _this$_colorBuffer4.height) || ((_this$_depthBuffer4 = this._depthBuffer) == null ? void 0 : _this$_depthBuffer4.height) || this._device.height;
  }
}

export { RenderTarget };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyLXRhcmdldC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL3BsYXRmb3JtL2dyYXBoaWNzL3JlbmRlci10YXJnZXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVidWcgfSBmcm9tICcuLi8uLi9jb3JlL2RlYnVnLmpzJztcbmltcG9ydCB7IFRSQUNFSURfUkVOREVSX1RBUkdFVF9BTExPQyB9IGZyb20gJy4uLy4uL2NvcmUvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IFBJWEVMRk9STUFUX0RFUFRILCBQSVhFTEZPUk1BVF9ERVBUSFNURU5DSUwgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBEZWJ1Z0dyYXBoaWNzIH0gZnJvbSAnLi9kZWJ1Zy1ncmFwaGljcy5qcyc7XG5pbXBvcnQgeyBHcmFwaGljc0RldmljZSB9IGZyb20gJy4vZ3JhcGhpY3MtZGV2aWNlLmpzJztcblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vdGV4dHVyZS5qcycpLlRleHR1cmV9IFRleHR1cmUgKi9cblxuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgZGVwdGg6IHRydWUsXG4gICAgZmFjZTogMFxufTtcblxubGV0IGlkID0gMDtcblxuLyoqXG4gKiBBIHJlbmRlciB0YXJnZXQgaXMgYSByZWN0YW5ndWxhciByZW5kZXJpbmcgc3VyZmFjZS5cbiAqL1xuY2xhc3MgUmVuZGVyVGFyZ2V0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFJlbmRlclRhcmdldCBpbnN0YW5jZS4gQSBjb2xvciBidWZmZXIgb3IgYSBkZXB0aCBidWZmZXIgbXVzdCBiZSBzZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9iamVjdCBmb3IgcGFzc2luZyBvcHRpb25hbCBhcmd1bWVudHMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5hdXRvUmVzb2x2ZV0gLSBJZiBzYW1wbGVzID4gMSwgZW5hYmxlcyBvciBkaXNhYmxlcyBhdXRvbWF0aWMgTVNBQVxuICAgICAqIHJlc29sdmUgYWZ0ZXIgcmVuZGVyaW5nIHRvIHRoaXMgUlQgKHNlZSB7QGxpbmsgUmVuZGVyVGFyZ2V0I3Jlc29sdmV9KS4gRGVmYXVsdHMgdG8gdHJ1ZS5cbiAgICAgKiBAcGFyYW0ge1RleHR1cmV9IFtvcHRpb25zLmNvbG9yQnVmZmVyXSAtIFRoZSB0ZXh0dXJlIHRoYXQgdGhpcyByZW5kZXIgdGFyZ2V0IHdpbGwgdHJlYXQgYXMgYVxuICAgICAqIHJlbmRlcmluZyBzdXJmYWNlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuZGVwdGhdIC0gSWYgc2V0IHRvIHRydWUsIGRlcHRoIGJ1ZmZlciB3aWxsIGJlIGNyZWF0ZWQuIERlZmF1bHRzIHRvXG4gICAgICogdHJ1ZS4gSWdub3JlZCBpZiBkZXB0aEJ1ZmZlciBpcyBkZWZpbmVkLlxuICAgICAqIEBwYXJhbSB7VGV4dHVyZX0gW29wdGlvbnMuZGVwdGhCdWZmZXJdIC0gVGhlIHRleHR1cmUgdGhhdCB0aGlzIHJlbmRlciB0YXJnZXQgd2lsbCB0cmVhdCBhcyBhXG4gICAgICogZGVwdGgvc3RlbmNpbCBzdXJmYWNlIChXZWJHTDIgb25seSkuIElmIHNldCwgdGhlICdkZXB0aCcgYW5kICdzdGVuY2lsJyBwcm9wZXJ0aWVzIGFyZVxuICAgICAqIGlnbm9yZWQuIFRleHR1cmUgbXVzdCBoYXZlIHtAbGluayBQSVhFTEZPUk1BVF9ERVBUSH0gb3Ige0BsaW5rIFBJWEVMRk9STUFUX0RFUFRIU1RFTkNJTH1cbiAgICAgKiBmb3JtYXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmZhY2VdIC0gSWYgdGhlIGNvbG9yQnVmZmVyIHBhcmFtZXRlciBpcyBhIGN1YmVtYXAsIHVzZSB0aGlzIG9wdGlvblxuICAgICAqIHRvIHNwZWNpZnkgdGhlIGZhY2Ugb2YgdGhlIGN1YmVtYXAgdG8gcmVuZGVyIHRvLiBDYW4gYmU6XG4gICAgICpcbiAgICAgKiAtIHtAbGluayBDVUJFRkFDRV9QT1NYfVxuICAgICAqIC0ge0BsaW5rIENVQkVGQUNFX05FR1h9XG4gICAgICogLSB7QGxpbmsgQ1VCRUZBQ0VfUE9TWX1cbiAgICAgKiAtIHtAbGluayBDVUJFRkFDRV9ORUdZfVxuICAgICAqIC0ge0BsaW5rIENVQkVGQUNFX1BPU1p9XG4gICAgICogLSB7QGxpbmsgQ1VCRUZBQ0VfTkVHWn1cbiAgICAgKlxuICAgICAqIERlZmF1bHRzIHRvIHtAbGluayBDVUJFRkFDRV9QT1NYfS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmZsaXBZXSAtIFdoZW4gc2V0IHRvIHRydWUgdGhlIGltYWdlIHdpbGwgYmUgZmxpcHBlZCBpbiBZLiBEZWZhdWx0XG4gICAgICogaXMgZmFsc2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLm5hbWVdIC0gVGhlIG5hbWUgb2YgdGhlIHJlbmRlciB0YXJnZXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnNhbXBsZXNdIC0gTnVtYmVyIG9mIGhhcmR3YXJlIGFudGktYWxpYXNpbmcgc2FtcGxlcyAoV2ViR0wyIG9ubHkpLlxuICAgICAqIERlZmF1bHQgaXMgMS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnN0ZW5jaWxdIC0gSWYgc2V0IHRvIHRydWUsIGRlcHRoIGJ1ZmZlciB3aWxsIGluY2x1ZGUgc3RlbmNpbC5cbiAgICAgKiBEZWZhdWx0cyB0byBmYWxzZS4gSWdub3JlZCBpZiBkZXB0aEJ1ZmZlciBpcyBkZWZpbmVkIG9yIGRlcHRoIGlzIGZhbHNlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogLy8gQ3JlYXRlIGEgNTEyeDUxMngyNC1iaXQgcmVuZGVyIHRhcmdldCB3aXRoIGEgZGVwdGggYnVmZmVyXG4gICAgICogdmFyIGNvbG9yQnVmZmVyID0gbmV3IHBjLlRleHR1cmUoZ3JhcGhpY3NEZXZpY2UsIHtcbiAgICAgKiAgICAgd2lkdGg6IDUxMixcbiAgICAgKiAgICAgaGVpZ2h0OiA1MTIsXG4gICAgICogICAgIGZvcm1hdDogcGMuUElYRUxGT1JNQVRfUjhfRzhfQjhcbiAgICAgKiB9KTtcbiAgICAgKiB2YXIgcmVuZGVyVGFyZ2V0ID0gbmV3IHBjLlJlbmRlclRhcmdldCh7XG4gICAgICogICAgIGNvbG9yQnVmZmVyOiBjb2xvckJ1ZmZlcixcbiAgICAgKiAgICAgZGVwdGg6IHRydWVcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIC8vIFNldCB0aGUgcmVuZGVyIHRhcmdldCBvbiBhIGNhbWVyYSBjb21wb25lbnRcbiAgICAgKiBjYW1lcmEucmVuZGVyVGFyZ2V0ID0gcmVuZGVyVGFyZ2V0O1xuICAgICAqXG4gICAgICogLy8gRGVzdHJveSByZW5kZXIgdGFyZ2V0IGF0IGEgbGF0ZXIgc3RhZ2UuIE5vdGUgdGhhdCB0aGUgY29sb3IgYnVmZmVyIG5lZWRzXG4gICAgICogLy8gdG8gYmUgZGVzdHJveWVkIHNlcGFyYXRlbHkuXG4gICAgICogcmVuZGVyVGFyZ2V0LmNvbG9yQnVmZmVyLmRlc3Ryb3koKTtcbiAgICAgKiByZW5kZXJUYXJnZXQuZGVzdHJveSgpO1xuICAgICAqIGNhbWVyYS5yZW5kZXJUYXJnZXQgPSBudWxsO1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkKys7XG5cbiAgICAgICAgY29uc3QgX2FyZzIgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIGNvbnN0IF9hcmczID0gYXJndW1lbnRzWzJdO1xuXG4gICAgICAgIGlmIChvcHRpb25zIGluc3RhbmNlb2YgR3JhcGhpY3NEZXZpY2UpIHtcbiAgICAgICAgICAgIC8vIG9sZCBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgdGhpcy5fY29sb3JCdWZmZXIgPSBfYXJnMjtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBfYXJnMztcblxuICAgICAgICAgICAgRGVidWcuZGVwcmVjYXRlZCgncGMuUmVuZGVyVGFyZ2V0IGNvbnN0cnVjdG9yIG5vIGxvbmdlciBhY2NlcHRzIEdyYXBoaWNzRGV2aWNlIHBhcmFtZXRlci4nKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gbmV3IGNvbnN0cnVjdG9yXG4gICAgICAgICAgICB0aGlzLl9jb2xvckJ1ZmZlciA9IG9wdGlvbnMuY29sb3JCdWZmZXI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYXJrIGNvbG9yIGJ1ZmZlciB0ZXh0dXJlIGFzIHJlbmRlciB0YXJnZXRcbiAgICAgICAgaWYgKHRoaXMuX2NvbG9yQnVmZmVyKSB7XG4gICAgICAgICAgICB0aGlzLl9jb2xvckJ1ZmZlci5faXNSZW5kZXJUYXJnZXQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJvY2VzcyBvcHRpb25hbCBhcmd1bWVudHNcbiAgICAgICAgb3B0aW9ucyA9IChvcHRpb25zICE9PSB1bmRlZmluZWQpID8gb3B0aW9ucyA6IGRlZmF1bHRPcHRpb25zO1xuICAgICAgICB0aGlzLl9kZXB0aEJ1ZmZlciA9IG9wdGlvbnMuZGVwdGhCdWZmZXI7XG4gICAgICAgIHRoaXMuX2ZhY2UgPSAob3B0aW9ucy5mYWNlICE9PSB1bmRlZmluZWQpID8gb3B0aW9ucy5mYWNlIDogMDtcblxuICAgICAgICBpZiAodGhpcy5fZGVwdGhCdWZmZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdCA9IHRoaXMuX2RlcHRoQnVmZmVyLl9mb3JtYXQ7XG4gICAgICAgICAgICBpZiAoZm9ybWF0ID09PSBQSVhFTEZPUk1BVF9ERVBUSCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2RlcHRoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGVuY2lsID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZvcm1hdCA9PT0gUElYRUxGT1JNQVRfREVQVEhTVEVOQ0lMKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZGVwdGggPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0ZW5jaWwgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBEZWJ1Zy53YXJuKCdJbmNvcnJlY3QgZGVwdGhCdWZmZXIgZm9ybWF0LiBNdXN0IGJlIHBjLlBJWEVMRk9STUFUX0RFUFRIIG9yIHBjLlBJWEVMRk9STUFUX0RFUFRIU1RFTkNJTCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2RlcHRoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3RlbmNpbCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZGVwdGggPSAob3B0aW9ucy5kZXB0aCAhPT0gdW5kZWZpbmVkKSA/IG9wdGlvbnMuZGVwdGggOiB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fc3RlbmNpbCA9IChvcHRpb25zLnN0ZW5jaWwgIT09IHVuZGVmaW5lZCkgPyBvcHRpb25zLnN0ZW5jaWwgOiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRldmljZSwgZnJvbSBvbmUgb2YgdGhlIGJ1ZmZlcnNcbiAgICAgICAgY29uc3QgZGV2aWNlID0gdGhpcy5fY29sb3JCdWZmZXI/LmRldmljZSB8fCB0aGlzLl9kZXB0aEJ1ZmZlcj8uZGV2aWNlIHx8IG9wdGlvbnMuZ3JhcGhpY3NEZXZpY2U7XG4gICAgICAgIERlYnVnLmFzc2VydChkZXZpY2UsIFwiRmFpbGVkIHRvIG9idGFpbiB0aGUgZGV2aWNlLCBjb2xvckJ1ZmZlciBub3IgZGVwdGhCdWZmZXIgc3RvcmUgaXQuXCIpO1xuICAgICAgICB0aGlzLl9kZXZpY2UgPSBkZXZpY2U7XG5cbiAgICAgICAgdGhpcy5fc2FtcGxlcyA9IChvcHRpb25zLnNhbXBsZXMgIT09IHVuZGVmaW5lZCkgPyBNYXRoLm1pbihvcHRpb25zLnNhbXBsZXMsIHRoaXMuX2RldmljZS5tYXhTYW1wbGVzKSA6IDE7XG4gICAgICAgIHRoaXMuYXV0b1Jlc29sdmUgPSAob3B0aW9ucy5hdXRvUmVzb2x2ZSAhPT0gdW5kZWZpbmVkKSA/IG9wdGlvbnMuYXV0b1Jlc29sdmUgOiB0cnVlO1xuXG4gICAgICAgIC8vIHVzZSBzcGVjaWZpZWQgbmFtZSwgb3RoZXJ3aXNlIGdldCBvbmUgZnJvbSBjb2xvciBvciBkZXB0aCBidWZmZXJcbiAgICAgICAgdGhpcy5uYW1lID0gb3B0aW9ucy5uYW1lO1xuICAgICAgICBpZiAoIXRoaXMubmFtZSkge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5fY29sb3JCdWZmZXI/Lm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHRoaXMuX2RlcHRoQnVmZmVyPy5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5uYW1lKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBcIlVudGl0bGVkXCI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW5kZXIgaW1hZ2UgZmxpcHBlZCBpbiBZXG4gICAgICAgIHRoaXMuZmxpcFkgPSAhIW9wdGlvbnMuZmxpcFk7XG5cbiAgICAgICAgLy8gZGV2aWNlIHNwZWNpZmljIGltcGxlbWVudGF0aW9uXG4gICAgICAgIHRoaXMuaW1wbCA9IGRldmljZS5jcmVhdGVSZW5kZXJUYXJnZXRJbXBsKHRoaXMpO1xuXG4gICAgICAgIERlYnVnLnRyYWNlKFRSQUNFSURfUkVOREVSX1RBUkdFVF9BTExPQywgYEFsbG9jOiBJZCAke3RoaXMuaWR9ICR7dGhpcy5uYW1lfTogJHt0aGlzLndpZHRofXgke3RoaXMuaGVpZ2h0fSBzYW1wbGVzOiAke3RoaXMuc2FtcGxlc30gYCArXG4gICAgICAgICAgICBgJHt0aGlzLmNvbG9yQnVmZmVyID8gJ1tDb2xvcl0nIDogJyd9YCArXG4gICAgICAgICAgICBgJHt0aGlzLmRlcHRoID8gJ1tEZXB0aF0nIDogJyd9YCArXG4gICAgICAgICAgICBgJHt0aGlzLnN0ZW5jaWwgPyAnW1N0ZW5jaWxdJyA6ICcnfWAgK1xuICAgICAgICAgICAgYFtGYWNlOiR7dGhpcy5mYWNlfV1gKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGcmVlcyByZXNvdXJjZXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcmVuZGVyIHRhcmdldC5cbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuXG4gICAgICAgIERlYnVnLnRyYWNlKFRSQUNFSURfUkVOREVSX1RBUkdFVF9BTExPQywgYERlQWxsb2M6IElkICR7dGhpcy5pZH0gJHt0aGlzLm5hbWV9YCk7XG5cbiAgICAgICAgY29uc3QgZGV2aWNlID0gdGhpcy5fZGV2aWNlO1xuICAgICAgICBpZiAoZGV2aWNlKSB7XG4gICAgICAgICAgICBjb25zdCBpZHggPSBkZXZpY2UudGFyZ2V0cy5pbmRleE9mKHRoaXMpO1xuICAgICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBkZXZpY2UudGFyZ2V0cy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRldmljZS5yZW5kZXJUYXJnZXQgPT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICBkZXZpY2Uuc2V0UmVuZGVyVGFyZ2V0KG51bGwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lGcmFtZUJ1ZmZlcnMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZyZWUgZGV2aWNlIHJlc291cmNlcyBhc3NvY2lhdGVkIHdpdGggdGhpcyByZW5kZXIgdGFyZ2V0LlxuICAgICAqXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIGRlc3Ryb3lGcmFtZUJ1ZmZlcnMoKSB7XG5cbiAgICAgICAgY29uc3QgZGV2aWNlID0gdGhpcy5fZGV2aWNlO1xuICAgICAgICBpZiAoZGV2aWNlKSB7XG4gICAgICAgICAgICB0aGlzLmltcGwuZGVzdHJveShkZXZpY2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnJlZSB0ZXh0dXJlcyBhc3NvY2lhdGVkIHdpdGggdGhpcyByZW5kZXIgdGFyZ2V0LlxuICAgICAqXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIGRlc3Ryb3lUZXh0dXJlQnVmZmVycygpIHtcblxuICAgICAgICBpZiAodGhpcy5fZGVwdGhCdWZmZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2RlcHRoQnVmZmVyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuX2RlcHRoQnVmZmVyID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9jb2xvckJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5fY29sb3JCdWZmZXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5fY29sb3JCdWZmZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGlzZXMgdGhlIHJlc291cmNlcyBhc3NvY2lhdGVkIHdpdGggdGhpcyByZW5kZXIgdGFyZ2V0LlxuICAgICAqXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuaW1wbC5pbml0KHRoaXMuX2RldmljZSwgdGhpcyk7XG4gICAgfVxuXG4gICAgZ2V0IGluaXRpYWxpemVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbXBsLmluaXRpYWxpemVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aGVuIHRoZSBkZXZpY2UgY29udGV4dCB3YXMgbG9zdC4gSXQgcmVsZWFzZXMgYWxsIGNvbnRleHQgcmVsYXRlZCByZXNvdXJjZXMuXG4gICAgICpcbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgbG9zZUNvbnRleHQoKSB7XG4gICAgICAgIHRoaXMuaW1wbC5sb3NlQ29udGV4dCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIHNhbXBsZXMgPiAxLCByZXNvbHZlcyB0aGUgYW50aS1hbGlhc2VkIHJlbmRlciB0YXJnZXQgKFdlYkdMMiBvbmx5KS4gV2hlbiB5b3UncmUgcmVuZGVyaW5nXG4gICAgICogdG8gYW4gYW50aS1hbGlhc2VkIHJlbmRlciB0YXJnZXQsIHBpeGVscyBhcmVuJ3Qgd3JpdHRlbiBkaXJlY3RseSB0byB0aGUgcmVhZGFibGUgdGV4dHVyZS5cbiAgICAgKiBJbnN0ZWFkLCB0aGV5J3JlIGZpcnN0IHdyaXR0ZW4gdG8gYSBNU0FBIGJ1ZmZlciwgd2hlcmUgZWFjaCBzYW1wbGUgZm9yIGVhY2ggcGl4ZWwgaXMgc3RvcmVkXG4gICAgICogaW5kZXBlbmRlbnRseS4gSW4gb3JkZXIgdG8gcmVhZCB0aGUgcmVzdWx0cywgeW91IGZpcnN0IG5lZWQgdG8gJ3Jlc29sdmUnIHRoZSBidWZmZXIgLSB0b1xuICAgICAqIGF2ZXJhZ2UgYWxsIHNhbXBsZXMgYW5kIGNyZWF0ZSBhIHNpbXBsZSB0ZXh0dXJlIHdpdGggb25lIGNvbG9yIHBlciBwaXhlbC4gVGhpcyBmdW5jdGlvblxuICAgICAqIHBlcmZvcm1zIHRoaXMgYXZlcmFnaW5nIGFuZCB1cGRhdGVzIHRoZSBjb2xvckJ1ZmZlciBhbmQgdGhlIGRlcHRoQnVmZmVyLiBJZiBhdXRvUmVzb2x2ZSBpc1xuICAgICAqIHNldCB0byB0cnVlLCB0aGUgcmVzb2x2ZSB3aWxsIGhhcHBlbiBhZnRlciBldmVyeSByZW5kZXJpbmcgdG8gdGhpcyByZW5kZXIgdGFyZ2V0LCBvdGhlcndpc2VcbiAgICAgKiB5b3UgY2FuIGRvIGl0IG1hbnVhbGx5LCBkdXJpbmcgdGhlIGFwcCB1cGRhdGUgb3IgaW5zaWRlIGEge0BsaW5rIENvbW1hbmR9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbY29sb3JdIC0gUmVzb2x2ZSBjb2xvciBidWZmZXIuIERlZmF1bHRzIHRvIHRydWUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZGVwdGhdIC0gUmVzb2x2ZSBkZXB0aCBidWZmZXIuIERlZmF1bHRzIHRvIHRydWUgaWYgdGhlIHJlbmRlciB0YXJnZXQgaGFzIGFcbiAgICAgKiBkZXB0aCBidWZmZXIuXG4gICAgICovXG4gICAgcmVzb2x2ZShjb2xvciA9IHRydWUsIGRlcHRoID0gISF0aGlzLl9kZXB0aEJ1ZmZlcikge1xuICAgICAgICBpZiAodGhpcy5fZGV2aWNlICYmIHRoaXMuX3NhbXBsZXMgPiAxKSB7XG4gICAgICAgICAgICBEZWJ1Z0dyYXBoaWNzLnB1c2hHcHVNYXJrZXIodGhpcy5fZGV2aWNlLCBgUkVTT0xWRS1SVDoke3RoaXMubmFtZX1gKTtcbiAgICAgICAgICAgIHRoaXMuaW1wbC5yZXNvbHZlKHRoaXMuX2RldmljZSwgdGhpcywgY29sb3IsIGRlcHRoKTtcbiAgICAgICAgICAgIERlYnVnR3JhcGhpY3MucG9wR3B1TWFya2VyKHRoaXMuX2RldmljZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3BpZXMgY29sb3IgYW5kL29yIGRlcHRoIGNvbnRlbnRzIG9mIHNvdXJjZSByZW5kZXIgdGFyZ2V0IHRvIHRoaXMgb25lLiBGb3JtYXRzLCBzaXplcyBhbmRcbiAgICAgKiBhbnRpLWFsaWFzaW5nIHNhbXBsZXMgbXVzdCBtYXRjaC4gRGVwdGggYnVmZmVyIGNhbiBvbmx5IGJlIGNvcGllZCBvbiBXZWJHTCAyLjAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlbmRlclRhcmdldH0gc291cmNlIC0gU291cmNlIHJlbmRlciB0YXJnZXQgdG8gY29weSBmcm9tLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NvbG9yXSAtIElmIHRydWUgd2lsbCBjb3B5IHRoZSBjb2xvciBidWZmZXIuIERlZmF1bHRzIHRvIGZhbHNlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2RlcHRoXSAtIElmIHRydWUgd2lsbCBjb3B5IHRoZSBkZXB0aCBidWZmZXIuIERlZmF1bHRzIHRvIGZhbHNlLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBjb3B5IHdhcyBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgY29weShzb3VyY2UsIGNvbG9yLCBkZXB0aCkge1xuICAgICAgICBpZiAoIXRoaXMuX2RldmljZSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZS5fZGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZGV2aWNlID0gc291cmNlLl9kZXZpY2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIERlYnVnLmVycm9yKFwiUmVuZGVyIHRhcmdldHMgYXJlIG5vdCBpbml0aWFsaXplZFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBEZWJ1Z0dyYXBoaWNzLnB1c2hHcHVNYXJrZXIodGhpcy5fZGV2aWNlLCBgQ09QWS1SVDoke3NvdXJjZS5uYW1lfS0+JHt0aGlzLm5hbWV9YCk7XG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSB0aGlzLl9kZXZpY2UuY29weVJlbmRlclRhcmdldChzb3VyY2UsIHRoaXMsIGNvbG9yLCBkZXB0aCk7XG4gICAgICAgIERlYnVnR3JhcGhpY3MucG9wR3B1TWFya2VyKHRoaXMuX2RldmljZSk7XG5cbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTnVtYmVyIG9mIGFudGlhbGlhc2luZyBzYW1wbGVzIHRoZSByZW5kZXIgdGFyZ2V0IHVzZXMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCBzYW1wbGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2FtcGxlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcnVlIGlmIHRoZSByZW5kZXIgdGFyZ2V0IGNvbnRhaW5zIHRoZSBkZXB0aCBhdHRhY2htZW50LlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IGRlcHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVwdGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiB0aGUgcmVuZGVyIHRhcmdldCBjb250YWlucyB0aGUgc3RlbmNpbCBhdHRhY2htZW50LlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IHN0ZW5jaWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdGVuY2lsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbG9yIGJ1ZmZlciBzZXQgdXAgb24gdGhlIHJlbmRlciB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7VGV4dHVyZX1cbiAgICAgKi9cbiAgICBnZXQgY29sb3JCdWZmZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb2xvckJ1ZmZlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXB0aCBidWZmZXIgc2V0IHVwIG9uIHRoZSByZW5kZXIgdGFyZ2V0LiBPbmx5IGF2YWlsYWJsZSwgaWYgZGVwdGhCdWZmZXIgd2FzIHNldCBpblxuICAgICAqIGNvbnN0cnVjdG9yLiBOb3QgYXZhaWxhYmxlIGlmIGRlcHRoIHByb3BlcnR5IHdhcyB1c2VkIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7VGV4dHVyZX1cbiAgICAgKi9cbiAgICBnZXQgZGVwdGhCdWZmZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZXB0aEJ1ZmZlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgcmVuZGVyIHRhcmdldCBpcyBib3VuZCB0byBhIGN1YmVtYXAsIHRoaXMgcHJvcGVydHkgc3BlY2lmaWVzIHdoaWNoIGZhY2Ugb2YgdGhlXG4gICAgICogY3ViZW1hcCBpcyByZW5kZXJlZCB0by4gQ2FuIGJlOlxuICAgICAqXG4gICAgICogLSB7QGxpbmsgQ1VCRUZBQ0VfUE9TWH1cbiAgICAgKiAtIHtAbGluayBDVUJFRkFDRV9ORUdYfVxuICAgICAqIC0ge0BsaW5rIENVQkVGQUNFX1BPU1l9XG4gICAgICogLSB7QGxpbmsgQ1VCRUZBQ0VfTkVHWX1cbiAgICAgKiAtIHtAbGluayBDVUJFRkFDRV9QT1NafVxuICAgICAqIC0ge0BsaW5rIENVQkVGQUNFX05FR1p9XG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCBmYWNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmFjZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaWR0aCBvZiB0aGUgcmVuZGVyIHRhcmdldCBpbiBwaXhlbHMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCB3aWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9yQnVmZmVyPy53aWR0aCB8fCB0aGlzLl9kZXB0aEJ1ZmZlcj8ud2lkdGggfHwgdGhpcy5fZGV2aWNlLndpZHRoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlaWdodCBvZiB0aGUgcmVuZGVyIHRhcmdldCBpbiBwaXhlbHMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCBoZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb2xvckJ1ZmZlcj8uaGVpZ2h0IHx8IHRoaXMuX2RlcHRoQnVmZmVyPy5oZWlnaHQgfHwgdGhpcy5fZGV2aWNlLmhlaWdodDtcbiAgICB9XG59XG5cbmV4cG9ydCB7IFJlbmRlclRhcmdldCB9O1xuIl0sIm5hbWVzIjpbImRlZmF1bHRPcHRpb25zIiwiZGVwdGgiLCJmYWNlIiwiaWQiLCJSZW5kZXJUYXJnZXQiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJfYXJnMiIsImFyZ3VtZW50cyIsIl9hcmczIiwiR3JhcGhpY3NEZXZpY2UiLCJfY29sb3JCdWZmZXIiLCJEZWJ1ZyIsImRlcHJlY2F0ZWQiLCJjb2xvckJ1ZmZlciIsIl9pc1JlbmRlclRhcmdldCIsInVuZGVmaW5lZCIsIl9kZXB0aEJ1ZmZlciIsImRlcHRoQnVmZmVyIiwiX2ZhY2UiLCJmb3JtYXQiLCJfZm9ybWF0IiwiUElYRUxGT1JNQVRfREVQVEgiLCJfZGVwdGgiLCJfc3RlbmNpbCIsIlBJWEVMRk9STUFUX0RFUFRIU1RFTkNJTCIsIndhcm4iLCJzdGVuY2lsIiwiZGV2aWNlIiwiZ3JhcGhpY3NEZXZpY2UiLCJhc3NlcnQiLCJfZGV2aWNlIiwiX3NhbXBsZXMiLCJzYW1wbGVzIiwiTWF0aCIsIm1pbiIsIm1heFNhbXBsZXMiLCJhdXRvUmVzb2x2ZSIsIm5hbWUiLCJmbGlwWSIsImltcGwiLCJjcmVhdGVSZW5kZXJUYXJnZXRJbXBsIiwidHJhY2UiLCJUUkFDRUlEX1JFTkRFUl9UQVJHRVRfQUxMT0MiLCJ3aWR0aCIsImhlaWdodCIsImRlc3Ryb3kiLCJpZHgiLCJ0YXJnZXRzIiwiaW5kZXhPZiIsInNwbGljZSIsInJlbmRlclRhcmdldCIsInNldFJlbmRlclRhcmdldCIsImRlc3Ryb3lGcmFtZUJ1ZmZlcnMiLCJkZXN0cm95VGV4dHVyZUJ1ZmZlcnMiLCJpbml0IiwiaW5pdGlhbGl6ZWQiLCJsb3NlQ29udGV4dCIsInJlc29sdmUiLCJjb2xvciIsIkRlYnVnR3JhcGhpY3MiLCJwdXNoR3B1TWFya2VyIiwicG9wR3B1TWFya2VyIiwiY29weSIsInNvdXJjZSIsImVycm9yIiwic3VjY2VzcyIsImNvcHlSZW5kZXJUYXJnZXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBUUEsTUFBTUEsY0FBYyxHQUFHO0FBQ25CQyxFQUFBQSxLQUFLLEVBQUUsSUFBSTtBQUNYQyxFQUFBQSxJQUFJLEVBQUUsQ0FBQTtBQUNWLENBQUMsQ0FBQTtBQUVELElBQUlDLEVBQUUsR0FBRyxDQUFDLENBQUE7O0FBS1YsTUFBTUMsWUFBWSxDQUFDO0VBc0RmQyxXQUFXLENBQUNDLE9BQU8sRUFBRTtBQUFBLElBQUEsSUFBQSxrQkFBQSxFQUFBLGtCQUFBLENBQUE7QUFDakIsSUFBQSxJQUFJLENBQUNILEVBQUUsR0FBR0EsRUFBRSxFQUFFLENBQUE7QUFFZCxJQUFBLE1BQU1JLEtBQUssR0FBR0MsU0FBUyxDQUFDLENBQUMsQ0FBQyxD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
