import { Vec4 } from '../../core/math/vec4.js';
import { Texture } from '../../platform/graphics/texture.js';
import { reprojectTexture } from './reproject-texture.js';
import { PIXELFORMAT_RGBA8, TEXTURETYPE_RGBP, TEXTURETYPE_DEFAULT, ADDRESS_CLAMP_TO_EDGE, TEXTUREPROJECTION_EQUIRECT, PIXELFORMAT_RGBA16F, PIXELFORMAT_RGBA32F } from '../../platform/graphics/constants.js';
import { DebugGraphics } from '../../platform/graphics/debug-graphics.js';

const fixCubemapSeams = true;

// calculate the number of mipmap levels given texture dimensions
const calcLevels = (width, height = 0) => {
  return 1 + Math.floor(Math.log2(Math.max(width, height)));
};
const supportsFloat16 = device => {
  return device.extTextureHalfFloat && device.textureHalfFloatRenderable;
};
const supportsFloat32 = device => {
  return device.extTextureFloat && device.textureFloatRenderable;
};

// lighting source should be stored HDR
const lightingSourcePixelFormat = device => {
  return supportsFloat16(device) ? PIXELFORMAT_RGBA16F : supportsFloat32(device) ? PIXELFORMAT_RGBA32F : PIXELFORMAT_RGBA8;
};

// runtime lighting can be RGBM
const lightingPixelFormat = device => {
  return PIXELFORMAT_RGBA8;
};
const createCubemap = (device, size, format, mipmaps) => {
  return new Texture(device, {
    name: `lighting-${size}`,
    cubemap: true,
    width: size,
    height: size,
    format: format,
    type: format === PIXELFORMAT_RGBA8 ? TEXTURETYPE_RGBP : TEXTURETYPE_DEFAULT,
    addressU: ADDRESS_CLAMP_TO_EDGE,
    addressV: ADDRESS_CLAMP_TO_EDGE,
    fixCubemapSeams: fixCubemapSeams,
    mipmaps: !!mipmaps
  });
};

/**
 * Helper functions to support prefiltering lighting data.
 *
 * @ignore
 */
class EnvLighting {
  /**
   * Generate a skybox cubemap in the correct pixel format from the source texture.
   *
   * @param {Texture} source - The source texture. This is either a 2d texture in equirect format
   * or a cubemap.
   * @param {number} [size] - Size of the resulting texture. Otherwise use automatic sizing.
   * @returns {Texture} The resulting cubemap.
   */
  static generateSkyboxCubemap(source, size) {
    const device = source.device;
    DebugGraphics.pushGpuMarker(device, "genSkyboxCubemap");
    const result = createCubemap(device, size || (source.cubemap ? source.width : source.width / 4), PIXELFORMAT_RGBA8, false);
    reprojectTexture(source, result, {
      numSamples: 1024
    });
    DebugGraphics.popGpuMarker(device);
    return result;
  }

  /**
   * Create a texture in the format needed to precalculate lighting data.
   *
   * @param {Texture} source - The source texture. This is either a 2d texture in equirect format
   * or a cubemap.
   * @param {object} [options] - Specify generation options.
   * @param {Texture} [options.target] - The target texture. If one is not provided then a
   * new texture will be created and returned.
   * @param {number} [options.size] - Size of the lighting source cubemap texture. Only used
   * if target isn't specified. Defaults to 128.
   * @returns {Texture} The resulting cubemap.
   */
  static generateLightingSource(source, options) {
    const device = source.device;
    DebugGraphics.pushGpuMarker(device, "genLightingSource");
    const format = lightingSourcePixelFormat(device);
    const result = (options == null ? void 0 : options.target) || new Texture(device, {
      name: `lighting-source`,
      cubemap: true,
      width: (options == null ? void 0 : options.size) || 128,
      height: (options == null ? void 0 : options.size) || 128,
      format: format,
      type: format === PIXELFORMAT_RGBA8 ? TEXTURETYPE_RGBP : TEXTURETYPE_DEFAULT,
      addressU: ADDRESS_CLAMP_TO_EDGE,
      addressV: ADDRESS_CLAMP_TO_EDGE,
      fixCubemapSeams: false,
      mipmaps: true
    });

    // copy into top level
    reprojectTexture(source, result, {
      numSamples: source.mipmaps ? 1 : 1024
    });
    DebugGraphics.popGpuMarker(device);

    // generate mipmaps
    return result;
  }

  /**
   * Generate the environment lighting atlas containing prefiltered reflections and ambient.
   *
   * @param {Texture} source - The source lighting texture, generated by generateLightingSource.
   * @param {object} [options] - Specify prefilter options.
   * @param {Texture} [options.target] - The target texture. If one is not provided then a
   * new texture will be created and returned.
   * @param {number} [options.size] - Size of the target texture to create. Only used if
   * target isn't specified. Defaults to 512.
   * @param {number} [options.numReflectionSamples] - Number of samples to use when generating
   * rough reflections. Defaults to 1024.
   * @param {number} [options.numAmbientSamples] - Number of samples to use when generating ambient
   * lighting. Defaults to 2048.
   * @returns {Texture} The resulting atlas
   */
  static generateAtlas(source, options) {
    const device = source.device;
    const format = lightingPixelFormat();
    DebugGraphics.pushGpuMarker(device, "genAtlas");
    const result = (options == null ? void 0 : options.target) || new Texture(device, {
      name: 'envAtlas',
      width: (options == null ? void 0 : options.size) || 512,
      height: (options == null ? void 0 : options.size) || 512,
      format: format,
      type: TEXTURETYPE_RGBP ,
      projection: TEXTUREPROJECTION_EQUIRECT,
      addressU: ADDRESS_CLAMP_TO_EDGE,
      addressV: ADDRESS_CLAMP_TO_EDGE,
      mipmaps: false
    });
    DebugGraphics.pushGpuMarker(device, "mipmaps");
    const s = result.width / 512;

    // generate mipmaps
    const rect = new Vec4(0, 0, 512 * s, 256 * s);
    const levels = calcLevels(256) - calcLevels(4);
    for (let i = 0; i < levels; ++i) {
      reprojectTexture(source, result, {
        numSamples: 1,
        rect: rect,
        seamPixels: s
      });
      rect.x += rect.w;
      rect.y += rect.w;
      rect.z = Math.max(1, Math.floor(rect.z * 0.5));
      rect.w = Math.max(1, Math.floor(rect.w * 0.5));
    }
    DebugGraphics.popGpuMarker(device);
    DebugGraphics.pushGpuMarker(device, "reflections");

    // generate blurry reflections
    rect.set(0, 256 * s, 256 * s, 128 * s);
    for (let i = 1; i < 7; ++i) {
      reprojectTexture(source, result, {
        numSamples: (options == null ? void 0 : options.numReflectionSamples) || 1024,
        distribution: (options == null ? void 0 : options.distribution) || 'ggx',
        specularPower: Math.max(1, 2048 >> i * 2),
        rect: rect,
        seamPixels: s
      });
      rect.y += rect.w;
      rect.z = Math.max(1, Math.floor(rect.z * 0.5));
      rect.w = Math.max(1, Math.floor(rect.w * 0.5));
    }
    DebugGraphics.popGpuMarker(device);
    DebugGraphics.pushGpuMarker(device, "ambient");

    // generate ambient
    rect.set(128 * s, (256 + 128) * s, 64 * s, 32 * s);
    reprojectTexture(source, result, {
      numSamples: (options == null ? void 0 : options.numAmbientSamples) || 2048,
      distribution: 'lambert',
      rect: rect,
      seamPixels: s
    });
    DebugGraphics.popGpuMarker(device);
    DebugGraphics.popGpuMarker(device);
    return result;
  }

  /**
   * Generate the environment lighting atlas from prefiltered cubemap data.
   *
   * @param {Texture[]} sources - Array of 6 prefiltered textures.
   * @param {object} [options] - The options object
   * @param {Texture} [options.target] - The target texture. If one is not provided then a
   * new texture will be created and returned.
   * @param {number} [options.size] - Size of the target texture to create. Only used if
   * target isn't specified. Defaults to 512.
   * @param {boolean} [options.legacyAmbient] - Enable generating legacy ambient lighting.
   * Default is false.
   * @param {number} [options.numSamples] - Number of samples to use when generating ambient
   * lighting. Default is 2048.
   * @returns {Texture} The resulting atlas texture.
   */
  static generatePrefilteredAtlas(sources, options) {
    const device = sources[0].device;
    const format = sources[0].format;
    const type = sources[0].type;
    DebugGraphics.pushGpuMarker(device, "genPrefilteredAtlas");
    const result = (options == null ? void 0 : options.target) || new Texture(device, {
      name: 'envPrefilteredAtlas',
      width: (options == null ? void 0 : options.size) || 512,
      height: (options == null ? void 0 : options.size) || 512,
      format: format,
      type: type,
      projection: TEXTUREPROJECTION_EQUIRECT,
      addressU: ADDRESS_CLAMP_TO_EDGE,
      addressV: ADDRESS_CLAMP_TO_EDGE,
      mipmaps: false
    });
    DebugGraphics.pushGpuMarker(device, "mipmaps");
    const s = result.width / 512;

    // generate mipmaps
    const rect = new Vec4(0, 0, 512 * s, 256 * s);
    const levels = calcLevels(512);
    for (let i = 0; i < levels; ++i) {
      reprojectTexture(sources[0], result, {
        numSamples: 1,
        rect: rect,
        seamPixels: s
      });
      rect.x += rect.w;
      rect.y += rect.w;
      rect.z = Math.max(1, Math.floor(rect.z * 0.5));
      rect.w = Math.max(1, Math.floor(rect.w * 0.5));
    }
    DebugGraphics.popGpuMarker(device);
    DebugGraphics.pushGpuMarker(device, "reflections");

    // copy blurry reflections
    rect.set(0, 256 * s, 256 * s, 128 * s);
    for (let i = 1; i < sources.length; ++i) {
      reprojectTexture(sources[i], result, {
        numSamples: 1,
        rect: rect,
        seamPixels: s
      });
      rect.y += rect.w;
      rect.z = Math.max(1, Math.floor(rect.z * 0.5));
      rect.w = Math.max(1, Math.floor(rect.w * 0.5));
    }
    DebugGraphics.popGpuMarker(device);
    DebugGraphics.pushGpuMarker(device, "ambient");

    // generate ambient
    rect.set(128 * s, (256 + 128) * s, 64 * s, 32 * s);
    if (options != null && options.legacyAmbient) {
      reprojectTexture(sources[5], result, {
        numSamples: 1,
        rect: rect,
        seamPixels: s
      });
    } else {
      reprojectTexture(sources[0], result, {
        numSamples: (options == null ? void 0 : options.numSamples) || 2048,
        distribution: 'lambert',
        rect: rect,
        seamPixels: s
      });
    }
    DebugGraphics.popGpuMarker(device);
    DebugGraphics.popGpuMarker(device);
    return result;
  }
}

export { EnvLighting };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW52LWxpZ2h0aW5nLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvc2NlbmUvZ3JhcGhpY3MvZW52LWxpZ2h0aW5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYzQgfSBmcm9tICcuLi8uLi9jb3JlL21hdGgvdmVjNC5qcyc7XG5pbXBvcnQgeyBUZXh0dXJlIH0gZnJvbSAnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvdGV4dHVyZS5qcyc7XG5pbXBvcnQgeyByZXByb2plY3RUZXh0dXJlIH0gZnJvbSAnLi9yZXByb2plY3QtdGV4dHVyZS5qcyc7XG5pbXBvcnQge1xuICAgIFRFWFRVUkVUWVBFX0RFRkFVTFQsIFRFWFRVUkVUWVBFX1JHQlAgYXMgUkdCQThfVFlQRSxcbiAgICBURVhUVVJFUFJPSkVDVElPTl9FUVVJUkVDVCxcbiAgICBBRERSRVNTX0NMQU1QX1RPX0VER0UsXG4gICAgUElYRUxGT1JNQVRfUkdCQTgsIFBJWEVMRk9STUFUX1JHQkExNkYsIFBJWEVMRk9STUFUX1JHQkEzMkZcbn0gZnJvbSAnLi4vLi4vcGxhdGZvcm0vZ3JhcGhpY3MvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IERlYnVnR3JhcGhpY3MgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9kZWJ1Zy1ncmFwaGljcy5qcyc7XG5cbmNvbnN0IGZpeEN1YmVtYXBTZWFtcyA9IHRydWU7XG5cbi8vIGNhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIG1pcG1hcCBsZXZlbHMgZ2l2ZW4gdGV4dHVyZSBkaW1lbnNpb25zXG5jb25zdCBjYWxjTGV2ZWxzID0gKHdpZHRoLCBoZWlnaHQgPSAwKSA9PiB7XG4gICAgcmV0dXJuIDEgKyBNYXRoLmZsb29yKE1hdGgubG9nMihNYXRoLm1heCh3aWR0aCwgaGVpZ2h0KSkpO1xufTtcblxuY29uc3Qgc3VwcG9ydHNGbG9hdDE2ID0gKGRldmljZSkgPT4ge1xuICAgIHJldHVybiBkZXZpY2UuZXh0VGV4dHVyZUhhbGZGbG9hdCAmJiBkZXZpY2UudGV4dHVyZUhhbGZGbG9hdFJlbmRlcmFibGU7XG59O1xuXG5jb25zdCBzdXBwb3J0c0Zsb2F0MzIgPSAoZGV2aWNlKSA9PiB7XG4gICAgcmV0dXJuIGRldmljZS5leHRUZXh0dXJlRmxvYXQgJiYgZGV2aWNlLnRleHR1cmVGbG9hdFJlbmRlcmFibGU7XG59O1xuXG4vLyBsaWdodGluZyBzb3VyY2Ugc2hvdWxkIGJlIHN0b3JlZCBIRFJcbmNvbnN0IGxpZ2h0aW5nU291cmNlUGl4ZWxGb3JtYXQgPSAoZGV2aWNlKSA9PiB7XG4gICAgcmV0dXJuIHN1cHBvcnRzRmxvYXQxNihkZXZpY2UpID8gUElYRUxGT1JNQVRfUkdCQTE2RiA6XG4gICAgICAgIHN1cHBvcnRzRmxvYXQzMihkZXZpY2UpID8gUElYRUxGT1JNQVRfUkdCQTMyRiA6XG4gICAgICAgICAgICBQSVhFTEZPUk1BVF9SR0JBODtcbn07XG5cbi8vIHJ1bnRpbWUgbGlnaHRpbmcgY2FuIGJlIFJHQk1cbmNvbnN0IGxpZ2h0aW5nUGl4ZWxGb3JtYXQgPSAoZGV2aWNlKSA9PiB7XG4gICAgcmV0dXJuIFBJWEVMRk9STUFUX1JHQkE4O1xufTtcblxuY29uc3QgY3JlYXRlQ3ViZW1hcCA9IChkZXZpY2UsIHNpemUsIGZvcm1hdCwgbWlwbWFwcykgPT4ge1xuICAgIHJldHVybiBuZXcgVGV4dHVyZShkZXZpY2UsIHtcbiAgICAgICAgbmFtZTogYGxpZ2h0aW5nLSR7c2l6ZX1gLFxuICAgICAgICBjdWJlbWFwOiB0cnVlLFxuICAgICAgICB3aWR0aDogc2l6ZSxcbiAgICAgICAgaGVpZ2h0OiBzaXplLFxuICAgICAgICBmb3JtYXQ6IGZvcm1hdCxcbiAgICAgICAgdHlwZTogZm9ybWF0ID09PSBQSVhFTEZPUk1BVF9SR0JBOCA/IFJHQkE4X1RZUEUgOiBURVhUVVJFVFlQRV9ERUZBVUxULFxuICAgICAgICBhZGRyZXNzVTogQUREUkVTU19DTEFNUF9UT19FREdFLFxuICAgICAgICBhZGRyZXNzVjogQUREUkVTU19DTEFNUF9UT19FREdFLFxuICAgICAgICBmaXhDdWJlbWFwU2VhbXM6IGZpeEN1YmVtYXBTZWFtcyxcbiAgICAgICAgbWlwbWFwczogISFtaXBtYXBzXG4gICAgfSk7XG59O1xuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbnMgdG8gc3VwcG9ydCBwcmVmaWx0ZXJpbmcgbGlnaHRpbmcgZGF0YS5cbiAqXG4gKiBAaWdub3JlXG4gKi9cbmNsYXNzIEVudkxpZ2h0aW5nIHtcbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBhIHNreWJveCBjdWJlbWFwIGluIHRoZSBjb3JyZWN0IHBpeGVsIGZvcm1hdCBmcm9tIHRoZSBzb3VyY2UgdGV4dHVyZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGV4dHVyZX0gc291cmNlIC0gVGhlIHNvdXJjZSB0ZXh0dXJlLiBUaGlzIGlzIGVpdGhlciBhIDJkIHRleHR1cmUgaW4gZXF1aXJlY3QgZm9ybWF0XG4gICAgICogb3IgYSBjdWJlbWFwLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc2l6ZV0gLSBTaXplIG9mIHRoZSByZXN1bHRpbmcgdGV4dHVyZS4gT3RoZXJ3aXNlIHVzZSBhdXRvbWF0aWMgc2l6aW5nLlxuICAgICAqIEByZXR1cm5zIHtUZXh0dXJlfSBUaGUgcmVzdWx0aW5nIGN1YmVtYXAuXG4gICAgICovXG4gICAgc3RhdGljIGdlbmVyYXRlU2t5Ym94Q3ViZW1hcChzb3VyY2UsIHNpemUpIHtcbiAgICAgICAgY29uc3QgZGV2aWNlID0gc291cmNlLmRldmljZTtcblxuICAgICAgICBEZWJ1Z0dyYXBoaWNzLnB1c2hHcHVNYXJrZXIoZGV2aWNlLCBcImdlblNreWJveEN1YmVtYXBcIik7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gY3JlYXRlQ3ViZW1hcChkZXZpY2UsIHNpemUgfHwgKHNvdXJjZS5jdWJlbWFwID8gc291cmNlLndpZHRoIDogc291cmNlLndpZHRoIC8gNCksIFBJWEVMRk9STUFUX1JHQkE4LCBmYWxzZSk7XG5cbiAgICAgICAgcmVwcm9qZWN0VGV4dHVyZShzb3VyY2UsIHJlc3VsdCwge1xuICAgICAgICAgICAgbnVtU2FtcGxlczogMTAyNFxuICAgICAgICB9KTtcblxuICAgICAgICBEZWJ1Z0dyYXBoaWNzLnBvcEdwdU1hcmtlcihkZXZpY2UpO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgdGV4dHVyZSBpbiB0aGUgZm9ybWF0IG5lZWRlZCB0byBwcmVjYWxjdWxhdGUgbGlnaHRpbmcgZGF0YS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGV4dHVyZX0gc291cmNlIC0gVGhlIHNvdXJjZSB0ZXh0dXJlLiBUaGlzIGlzIGVpdGhlciBhIDJkIHRleHR1cmUgaW4gZXF1aXJlY3QgZm9ybWF0XG4gICAgICogb3IgYSBjdWJlbWFwLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBTcGVjaWZ5IGdlbmVyYXRpb24gb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0ge1RleHR1cmV9IFtvcHRpb25zLnRhcmdldF0gLSBUaGUgdGFyZ2V0IHRleHR1cmUuIElmIG9uZSBpcyBub3QgcHJvdmlkZWQgdGhlbiBhXG4gICAgICogbmV3IHRleHR1cmUgd2lsbCBiZSBjcmVhdGVkIGFuZCByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuc2l6ZV0gLSBTaXplIG9mIHRoZSBsaWdodGluZyBzb3VyY2UgY3ViZW1hcCB0ZXh0dXJlLiBPbmx5IHVzZWRcbiAgICAgKiBpZiB0YXJnZXQgaXNuJ3Qgc3BlY2lmaWVkLiBEZWZhdWx0cyB0byAxMjguXG4gICAgICogQHJldHVybnMge1RleHR1cmV9IFRoZSByZXN1bHRpbmcgY3ViZW1hcC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2VuZXJhdGVMaWdodGluZ1NvdXJjZShzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZGV2aWNlID0gc291cmNlLmRldmljZTtcblxuICAgICAgICBEZWJ1Z0dyYXBoaWNzLnB1c2hHcHVNYXJrZXIoZGV2aWNlLCBcImdlbkxpZ2h0aW5nU291cmNlXCIpO1xuXG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IGxpZ2h0aW5nU291cmNlUGl4ZWxGb3JtYXQoZGV2aWNlKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gb3B0aW9ucz8udGFyZ2V0IHx8IG5ldyBUZXh0dXJlKGRldmljZSwge1xuICAgICAgICAgICAgbmFtZTogYGxpZ2h0aW5nLXNvdXJjZWAsXG4gICAgICAgICAgICBjdWJlbWFwOiB0cnVlLFxuICAgICAgICAgICAgd2lkdGg6IG9wdGlvbnM/LnNpemUgfHwgMTI4LFxuICAgICAgICAgICAgaGVpZ2h0OiBvcHRpb25zPy5zaXplIHx8IDEyOCxcbiAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0LFxuICAgICAgICAgICAgdHlwZTogZm9ybWF0ID09PSBQSVhFTEZPUk1BVF9SR0JBOCA/IFJHQkE4X1RZUEUgOiBURVhUVVJFVFlQRV9ERUZBVUxULFxuICAgICAgICAgICAgYWRkcmVzc1U6IEFERFJFU1NfQ0xBTVBfVE9fRURHRSxcbiAgICAgICAgICAgIGFkZHJlc3NWOiBBRERSRVNTX0NMQU1QX1RPX0VER0UsXG4gICAgICAgICAgICBmaXhDdWJlbWFwU2VhbXM6IGZhbHNlLFxuICAgICAgICAgICAgbWlwbWFwczogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjb3B5IGludG8gdG9wIGxldmVsXG4gICAgICAgIHJlcHJvamVjdFRleHR1cmUoc291cmNlLCByZXN1bHQsIHtcbiAgICAgICAgICAgIG51bVNhbXBsZXM6IHNvdXJjZS5taXBtYXBzID8gMSA6IDEwMjRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgRGVidWdHcmFwaGljcy5wb3BHcHVNYXJrZXIoZGV2aWNlKTtcblxuICAgICAgICAvLyBnZW5lcmF0ZSBtaXBtYXBzXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgdGhlIGVudmlyb25tZW50IGxpZ2h0aW5nIGF0bGFzIGNvbnRhaW5pbmcgcHJlZmlsdGVyZWQgcmVmbGVjdGlvbnMgYW5kIGFtYmllbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RleHR1cmV9IHNvdXJjZSAtIFRoZSBzb3VyY2UgbGlnaHRpbmcgdGV4dHVyZSwgZ2VuZXJhdGVkIGJ5IGdlbmVyYXRlTGlnaHRpbmdTb3VyY2UuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIFNwZWNpZnkgcHJlZmlsdGVyIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIHtUZXh0dXJlfSBbb3B0aW9ucy50YXJnZXRdIC0gVGhlIHRhcmdldCB0ZXh0dXJlLiBJZiBvbmUgaXMgbm90IHByb3ZpZGVkIHRoZW4gYVxuICAgICAqIG5ldyB0ZXh0dXJlIHdpbGwgYmUgY3JlYXRlZCBhbmQgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnNpemVdIC0gU2l6ZSBvZiB0aGUgdGFyZ2V0IHRleHR1cmUgdG8gY3JlYXRlLiBPbmx5IHVzZWQgaWZcbiAgICAgKiB0YXJnZXQgaXNuJ3Qgc3BlY2lmaWVkLiBEZWZhdWx0cyB0byA1MTIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm51bVJlZmxlY3Rpb25TYW1wbGVzXSAtIE51bWJlciBvZiBzYW1wbGVzIHRvIHVzZSB3aGVuIGdlbmVyYXRpbmdcbiAgICAgKiByb3VnaCByZWZsZWN0aW9ucy4gRGVmYXVsdHMgdG8gMTAyNC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubnVtQW1iaWVudFNhbXBsZXNdIC0gTnVtYmVyIG9mIHNhbXBsZXMgdG8gdXNlIHdoZW4gZ2VuZXJhdGluZyBhbWJpZW50XG4gICAgICogbGlnaHRpbmcuIERlZmF1bHRzIHRvIDIwNDguXG4gICAgICogQHJldHVybnMge1RleHR1cmV9IFRoZSByZXN1bHRpbmcgYXRsYXNcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2VuZXJhdGVBdGxhcyhzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZGV2aWNlID0gc291cmNlLmRldmljZTtcbiAgICAgICAgY29uc3QgZm9ybWF0ID0gbGlnaHRpbmdQaXhlbEZvcm1hdChkZXZpY2UpO1xuXG4gICAgICAgIERlYnVnR3JhcGhpY3MucHVzaEdwdU1hcmtlcihkZXZpY2UsIFwiZ2VuQXRsYXNcIik7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gb3B0aW9ucz8udGFyZ2V0IHx8IG5ldyBUZXh0dXJlKGRldmljZSwge1xuICAgICAgICAgICAgbmFtZTogJ2VudkF0bGFzJyxcbiAgICAgICAgICAgIHdpZHRoOiBvcHRpb25zPy5zaXplIHx8IDUxMixcbiAgICAgICAgICAgIGhlaWdodDogb3B0aW9ucz8uc2l6ZSB8fCA1MTIsXG4gICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdCxcbiAgICAgICAgICAgIHR5cGU6IGZvcm1hdCA9PT0gUElYRUxGT1JNQVRfUkdCQTggPyBSR0JBOF9UWVBFIDogVEVYVFVSRVRZUEVfREVGQVVMVCxcbiAgICAgICAgICAgIHByb2plY3Rpb246IFRFWFRVUkVQUk9KRUNUSU9OX0VRVUlSRUNULFxuICAgICAgICAgICAgYWRkcmVzc1U6IEFERFJFU1NfQ0xBTVBfVE9fRURHRSxcbiAgICAgICAgICAgIGFkZHJlc3NWOiBBRERSRVNTX0NMQU1QX1RPX0VER0UsXG4gICAgICAgICAgICBtaXBtYXBzOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgICAgICBEZWJ1Z0dyYXBoaWNzLnB1c2hHcHVNYXJrZXIoZGV2aWNlLCBcIm1pcG1hcHNcIik7XG5cbiAgICAgICAgY29uc3QgcyA9IHJlc3VsdC53aWR0aCAvIDUxMjtcblxuICAgICAgICAvLyBnZW5lcmF0ZSBtaXBtYXBzXG4gICAgICAgIGNvbnN0IHJlY3QgPSBuZXcgVmVjNCgwLCAwLCA1MTIgKiBzLCAyNTYgKiBzKTtcbiAgICAgICAgY29uc3QgbGV2ZWxzID0gY2FsY0xldmVscygyNTYpIC0gY2FsY0xldmVscyg0KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZXZlbHM7ICsraSkge1xuICAgICAgICAgICAgcmVwcm9qZWN0VGV4dHVyZShzb3VyY2UsIHJlc3VsdCwge1xuICAgICAgICAgICAgICAgIG51bVNhbXBsZXM6IDEsXG4gICAgICAgICAgICAgICAgcmVjdDogcmVjdCxcbiAgICAgICAgICAgICAgICBzZWFtUGl4ZWxzOiBzXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmVjdC54ICs9IHJlY3QudztcbiAgICAgICAgICAgIHJlY3QueSArPSByZWN0Lnc7XG4gICAgICAgICAgICByZWN0LnogPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHJlY3QueiAqIDAuNSkpO1xuICAgICAgICAgICAgcmVjdC53ID0gTWF0aC5tYXgoMSwgTWF0aC5mbG9vcihyZWN0LncgKiAwLjUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIERlYnVnR3JhcGhpY3MucG9wR3B1TWFya2VyKGRldmljZSk7XG4gICAgICAgIERlYnVnR3JhcGhpY3MucHVzaEdwdU1hcmtlcihkZXZpY2UsIFwicmVmbGVjdGlvbnNcIik7XG5cbiAgICAgICAgLy8gZ2VuZXJhdGUgYmx1cnJ5IHJlZmxlY3Rpb25zXG4gICAgICAgIHJlY3Quc2V0KDAsIDI1NiAqIHMsIDI1NiAqIHMsIDEyOCAqIHMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IDc7ICsraSkge1xuICAgICAgICAgICAgcmVwcm9qZWN0VGV4dHVyZShzb3VyY2UsIHJlc3VsdCwge1xuICAgICAgICAgICAgICAgIG51bVNhbXBsZXM6IG9wdGlvbnM/Lm51bVJlZmxlY3Rpb25TYW1wbGVzIHx8IDEwMjQsXG4gICAgICAgICAgICAgICAgZGlzdHJpYnV0aW9uOiBvcHRpb25zPy5kaXN0cmlidXRpb24gfHwgJ2dneCcsXG4gICAgICAgICAgICAgICAgc3BlY3VsYXJQb3dlcjogTWF0aC5tYXgoMSwgMjA0OCA+PiAoaSAqIDIpKSxcbiAgICAgICAgICAgICAgICByZWN0OiByZWN0LFxuICAgICAgICAgICAgICAgIHNlYW1QaXhlbHM6IHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVjdC55ICs9IHJlY3QudztcbiAgICAgICAgICAgIHJlY3QueiA9IE1hdGgubWF4KDEsIE1hdGguZmxvb3IocmVjdC56ICogMC41KSk7XG4gICAgICAgICAgICByZWN0LncgPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHJlY3QudyAqIDAuNSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgRGVidWdHcmFwaGljcy5wb3BHcHVNYXJrZXIoZGV2aWNlKTtcbiAgICAgICAgRGVidWdHcmFwaGljcy5wdXNoR3B1TWFya2VyKGRldmljZSwgXCJhbWJpZW50XCIpO1xuXG4gICAgICAgIC8vIGdlbmVyYXRlIGFtYmllbnRcbiAgICAgICAgcmVjdC5zZXQoMTI4ICogcywgKDI1NiArIDEyOCkgKiBzLCA2NCAqIHMsIDMyICogcyk7XG4gICAgICAgIHJlcHJvamVjdFRleHR1cmUoc291cmNlLCByZXN1bHQsIHtcbiAgICAgICAgICAgIG51bVNhbXBsZXM6IG9wdGlvbnM/Lm51bUFtYmllbnRTYW1wbGVzIHx8IDIwNDgsXG4gICAgICAgICAgICBkaXN0cmlidXRpb246ICdsYW1iZXJ0JyxcbiAgICAgICAgICAgIHJlY3Q6IHJlY3QsXG4gICAgICAgICAgICBzZWFtUGl4ZWxzOiBzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIERlYnVnR3JhcGhpY3MucG9wR3B1TWFya2VyKGRldmljZSk7XG4gICAgICAgIERlYnVnR3JhcGhpY3MucG9wR3B1TWFya2VyKGRldmljZSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSB0aGUgZW52aXJvbm1lbnQgbGlnaHRpbmcgYXRsYXMgZnJvbSBwcmVmaWx0ZXJlZCBjdWJlbWFwIGRhdGEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RleHR1cmVbXX0gc291cmNlcyAtIEFycmF5IG9mIDYgcHJlZmlsdGVyZWQgdGV4dHVyZXMuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIFRoZSBvcHRpb25zIG9iamVjdFxuICAgICAqIEBwYXJhbSB7VGV4dHVyZX0gW29wdGlvbnMudGFyZ2V0XSAtIFRoZSB0YXJnZXQgdGV4dHVyZS4gSWYgb25lIGlzIG5vdCBwcm92aWRlZCB0aGVuIGFcbiAgICAgKiBuZXcgdGV4dHVyZSB3aWxsIGJlIGNyZWF0ZWQgYW5kIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5zaXplXSAtIFNpemUgb2YgdGhlIHRhcmdldCB0ZXh0dXJlIHRvIGNyZWF0ZS4gT25seSB1c2VkIGlmXG4gICAgICogdGFyZ2V0IGlzbid0IHNwZWNpZmllZC4gRGVmYXVsdHMgdG8gNTEyLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVnYWN5QW1iaWVudF0gLSBFbmFibGUgZ2VuZXJhdGluZyBsZWdhY3kgYW1iaWVudCBsaWdodGluZy5cbiAgICAgKiBEZWZhdWx0IGlzIGZhbHNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5udW1TYW1wbGVzXSAtIE51bWJlciBvZiBzYW1wbGVzIHRvIHVzZSB3aGVuIGdlbmVyYXRpbmcgYW1iaWVudFxuICAgICAqIGxpZ2h0aW5nLiBEZWZhdWx0IGlzIDIwNDguXG4gICAgICogQHJldHVybnMge1RleHR1cmV9IFRoZSByZXN1bHRpbmcgYXRsYXMgdGV4dHVyZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2VuZXJhdGVQcmVmaWx0ZXJlZEF0bGFzKHNvdXJjZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZGV2aWNlID0gc291cmNlc1swXS5kZXZpY2U7XG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IHNvdXJjZXNbMF0uZm9ybWF0O1xuICAgICAgICBjb25zdCB0eXBlID0gc291cmNlc1swXS50eXBlO1xuXG4gICAgICAgIERlYnVnR3JhcGhpY3MucHVzaEdwdU1hcmtlcihkZXZpY2UsIFwiZ2VuUHJlZmlsdGVyZWRBdGxhc1wiKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb25zPy50YXJnZXQgfHwgbmV3IFRleHR1cmUoZGV2aWNlLCB7XG4gICAgICAgICAgICBuYW1lOiAnZW52UHJlZmlsdGVyZWRBdGxhcycsXG4gICAgICAgICAgICB3aWR0aDogb3B0aW9ucz8uc2l6ZSB8fCA1MTIsXG4gICAgICAgICAgICBoZWlnaHQ6IG9wdGlvbnM/LnNpemUgfHwgNTEyLFxuICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXQsXG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogVEVYVFVSRVBST0pFQ1RJT05fRVFVSVJFQ1QsXG4gICAgICAgICAgICBhZGRyZXNzVTogQUREUkVTU19DTEFNUF9UT19FREdFLFxuICAgICAgICAgICAgYWRkcmVzc1Y6IEFERFJFU1NfQ0xBTVBfVE9fRURHRSxcbiAgICAgICAgICAgIG1pcG1hcHM6IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIERlYnVnR3JhcGhpY3MucHVzaEdwdU1hcmtlcihkZXZpY2UsIFwibWlwbWFwc1wiKTtcblxuICAgICAgICBjb25zdCBzID0gcmVzdWx0LndpZHRoIC8gNTEyO1xuXG4gICAgICAgIC8vIGdlbmVyYXRlIG1pcG1hcHNcbiAgICAgICAgY29uc3QgcmVjdCA9IG5ldyBWZWM0KDAsIDAsIDUxMiAqIHMsIDI1NiAqIHMpO1xuICAgICAgICBjb25zdCBsZXZlbHMgPSBjYWxjTGV2ZWxzKDUxMik7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGV2ZWxzOyArK2kpIHtcbiAgICAgICAgICAgIHJlcHJvamVjdFRleHR1cmUoc291cmNlc1swXSwgcmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgbnVtU2FtcGxlczogMSxcbiAgICAgICAgICAgICAgICByZWN0OiByZWN0LFxuICAgICAgICAgICAgICAgIHNlYW1QaXhlbHM6IHNcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZWN0LnggKz0gcmVjdC53O1xuICAgICAgICAgICAgcmVjdC55ICs9IHJlY3QudztcbiAgICAgICAgICAgIHJlY3QueiA9IE1hdGgubWF4KDEsIE1hdGguZmxvb3IocmVjdC56ICogMC41KSk7XG4gICAgICAgICAgICByZWN0LncgPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHJlY3QudyAqIDAuNSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgRGVidWdHcmFwaGljcy5wb3BHcHVNYXJrZXIoZGV2aWNlKTtcbiAgICAgICAgRGVidWdHcmFwaGljcy5wdXNoR3B1TWFya2VyKGRldmljZSwgXCJyZWZsZWN0aW9uc1wiKTtcblxuICAgICAgICAvLyBjb3B5IGJsdXJyeSByZWZsZWN0aW9uc1xuICAgICAgICByZWN0LnNldCgwLCAyNTYgKiBzLCAyNTYgKiBzLCAxMjggKiBzKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzb3VyY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICByZXByb2plY3RUZXh0dXJlKHNvdXJjZXNbaV0sIHJlc3VsdCwge1xuICAgICAgICAgICAgICAgIG51bVNhbXBsZXM6IDEsXG4gICAgICAgICAgICAgICAgcmVjdDogcmVjdCxcbiAgICAgICAgICAgICAgICBzZWFtUGl4ZWxzOiBzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlY3QueSArPSByZWN0Lnc7XG4gICAgICAgICAgICByZWN0LnogPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHJlY3QueiAqIDAuNSkpO1xuICAgICAgICAgICAgcmVjdC53ID0gTWF0aC5tYXgoMSwgTWF0aC5mbG9vcihyZWN0LncgKiAwLjUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIERlYnVnR3JhcGhpY3MucG9wR3B1TWFya2VyKGRldmljZSk7XG4gICAgICAgIERlYnVnR3JhcGhpY3MucHVzaEdwdU1hcmtlcihkZXZpY2UsIFwiYW1iaWVudFwiKTtcblxuICAgICAgICAvLyBnZW5lcmF0ZSBhbWJpZW50XG4gICAgICAgIHJlY3Quc2V0KDEyOCAqIHMsICgyNTYgKyAxMjgpICogcywgNjQgKiBzLCAzMiAqIHMpO1xuICAgICAgICBpZiAob3B0aW9ucz8ubGVnYWN5QW1iaWVudCkge1xuICAgICAgICAgICAgcmVwcm9qZWN0VGV4dHVyZShzb3VyY2VzWzVdLCByZXN1bHQsIHtcbiAgICAgICAgICAgICAgICBudW1TYW1wbGVzOiAxLFxuICAgICAgICAgICAgICAgIHJlY3Q6IHJlY3QsXG4gICAgICAgICAgICAgICAgc2VhbVBpeGVsczogc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXByb2plY3RUZXh0dXJlKHNvdXJjZXNbMF0sIHJlc3VsdCwge1xuICAgICAgICAgICAgICAgIG51bVNhbXBsZXM6IG9wdGlvbnM/Lm51bVNhbXBsZXMgfHwgMjA0OCxcbiAgICAgICAgICAgICAgICBkaXN0cmlidXRpb246ICdsYW1iZXJ0JyxcbiAgICAgICAgICAgICAgICByZWN0OiByZWN0LFxuICAgICAgICAgICAgICAgIHNlYW1QaXhlbHM6IHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgRGVidWdHcmFwaGljcy5wb3BHcHVNYXJrZXIoZGV2aWNlKTtcbiAgICAgICAgRGVidWdHcmFwaGljcy5wb3BHcHVNYXJrZXIoZGV2aWNlKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cblxuZXhwb3J0IHtcbiAgICBFbnZMaWdodGluZ1xufTtcbiJdLCJuYW1lcyI6WyJmaXhDdWJlbWFwU2VhbXMiLCJjYWxjTGV2ZWxzIiwid2lkdGgiLCJoZWlnaHQiLCJNYXRoIiwiZmxvb3IiLCJsb2cyIiwibWF4Iiwic3VwcG9ydHNGbG9hdDE2IiwiZGV2aWNlIiwiZXh0VGV4dHVyZUhhbGZGbG9hdCIsInRleHR1cmVIYWxmRmxvYXRSZW5kZXJhYmxlIiwic3VwcG9ydHNGbG9hdDMyIiwiZXh0VGV4dHVyZUZsb2F0IiwidGV4dHVyZUZsb2F0UmVuZGVyYWJsZSIsImxpZ2h0aW5nU291cmNlUGl4ZWxGb3JtYXQiLCJQSVhFTEZPUk1BVF9SR0JBMTZGIiwiUElYRUxGT1JNQVRfUkdCQTMyRiIsIlBJWEVMRk9STUFUX1JHQkE4IiwibGlnaHRpbmdQaXhlbEZvcm1hdCIsImNyZWF0ZUN1YmVtYXAiLCJzaXplIiwiZm9ybWF0IiwibWlwbWFwcyIsIlRleHR1cmUiLCJuYW1lIiwiY3ViZW1hcCIsInR5cGUiLCJSR0JBOF9UWVBFIiwiVEVYVFVSRVRZUEVfREVGQVVMVCIsImFkZHJlc3NVIiwiQUREUkVTU19DTEFNUF9UT19FREdFIiwiYWRkcmVzc1YiLCJFbnZMaWdodGluZyIsImdlbmVyYXRlU2t5Ym94Q3ViZW1hcCIsInNvdXJjZSIsIkRlYnVnR3JhcGhpY3MiLCJwdXNoR3B1TWFya2VyIiwicmVzdWx0IiwicmVwcm9qZWN0VGV4dHVyZSIsIm51bVNhbXBsZXMiLCJwb3BHcHVNYXJrZXIiLCJnZW5lcmF0ZUxpZ2h0aW5nU291cmNlIiwib3B0aW9ucyIsInRhcmdldCIsImdlbmVyYXRlQXRsYXMiLCJwcm9qZWN0aW9uIiwiVEVYVFVSRVBST0pFQ1RJT05fRVFVSVJFQ1QiLCJzIiwicmVjdCIsIlZlYzQiLCJsZXZlbHMiLCJpIiwic2VhbVBpeGVscyIsIngiLCJ3IiwieSIsInoiLCJzZXQiLCJudW1SZWZsZWN0aW9uU2FtcGxlcyIsImRpc3RyaWJ1dGlvbiIsInNwZWN1bGFyUG93ZXIiLCJudW1BbWJpZW50U2FtcGxlcyIsImdlbmVyYXRlUHJlZmlsdGVyZWRBdGxhcyIsInNvdXJjZXMiLCJsZW5ndGgiLCJsZWdhY3lBbWJpZW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFXQSxNQUFNQSxlQUFlLEdBQUcsSUFBSSxDQUFBOztBQUU1QjtBQUNBLE1BQU1DLFVBQVUsR0FBR0EsQ0FBQ0MsS0FBSyxFQUFFQyxNQUFNLEdBQUcsQ0FBQyxLQUFLO0FBQ3RDLEVBQUEsT0FBTyxDQUFDLEdBQUdDLElBQUksQ0FBQ0MsS0FBSyxDQUFDRCxJQUFJLENBQUNFLElBQUksQ0FBQ0YsSUFBSSxDQUFD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
