/**
 * @license
 * PlayCanvas Engine v1.57.1 revision 256dd83c2 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { ADDRESS_CLAMP_TO_EDGE, PIXELFORMAT_R8_G8_B8, PIXELFORMAT_R8_G8_B8_A8, TEXTURETYPE_RGBM, TEXTURETYPE_DEFAULT } from '../graphics/constants.js';
import { Asset } from '../asset/asset.js';
import { Texture } from '../graphics/texture.js';

class CubemapHandler {
  constructor(app) {
    this.handlerType = "cubemap";
    this._device = app.graphicsDevice;
    this._registry = app.assets;
    this._loader = app.loader;
  }

  load(url, callback, asset) {
    this.loadAssets(asset, callback);
  }

  open(url, data, asset) {
    return asset ? asset.resource : null;
  }

  patch(asset, registry) {
    this.loadAssets(asset, function (err, result) {
      if (err) {
        registry.fire('error', asset);
        registry.fire('error:' + asset.id, err, asset);
        asset.fire('error', asset);
      }
    });
  }

  getAssetIds(cubemapAsset) {
    const result = [];
    result[0] = cubemapAsset.file;

    if ((cubemapAsset.loadFaces || !cubemapAsset.file) && cubemapAsset.data && cubemapAsset.data.textures) {
      for (let i = 0; i < 6; ++i) {
        result[i + 1] = cubemapAsset.data.textures[i];
      }
    } else {
      result[1] = result[2] = result[3] = result[4] = result[5] = result[6] = null;
    }

    return result;
  }

  compareAssetIds(assetIdA, assetIdB) {
    if (assetIdA && assetIdB) {
      if (parseInt(assetIdA, 10) === assetIdA || typeof assetIdA === 'string') {
        return assetIdA === assetIdB;
      }

      return assetIdA.url === assetIdB.url;
    }

    return assetIdA !== null === (assetIdB !== null);
  }

  update(cubemapAsset, assetIds, assets) {
    const assetData = cubemapAsset.data || {};
    const oldAssets = cubemapAsset._handlerState.assets;
    const oldResources = cubemapAsset._resources;
    let tex, mip, i;
    const resources = [null, null, null, null, null, null, null];

    const getType = function getType() {
      if (assetData.hasOwnProperty('type')) {
        return assetData.type;
      }

      if (assetData.hasOwnProperty('rgbm')) {
        return assetData.rgbm ? TEXTURETYPE_RGBM : TEXTURETYPE_DEFAULT;
      }

      return null;
    };

    if (!cubemapAsset.loaded || assets[0] !== oldAssets[0]) {
      if (assets[0]) {
        tex = assets[0].resource;

        for (i = 0; i < 6; ++i) {
          resources[i + 1] = new Texture(this._device, {
            name: cubemapAsset.name + '_prelitCubemap' + (tex.width >> i),
            cubemap: true,
            type: getType() || tex.type,
            width: tex.width >> i,
            height: tex.height >> i,
            format: tex.format,
            levels: [tex._levels[i]],
            fixCubemapSeams: true,
            addressU: ADDRESS_CLAMP_TO_EDGE,
            addressV: ADDRESS_CLAMP_TO_EDGE,
            mipmaps: i === 0
          });
        }
      }
    } else {
      resources[1] = oldResources[1] || null;
      resources[2] = oldResources[2] || null;
      resources[3] = oldResources[3] || null;
      resources[4] = oldResources[4] || null;
      resources[5] = oldResources[5] || null;
      resources[6] = oldResources[6] || null;
    }

    const faceAssets = assets.slice(1);

    if (!cubemapAsset.loaded || !this.cmpArrays(faceAssets, oldAssets.slice(1))) {
      if (faceAssets.indexOf(null) === -1) {
        const faceTextures = faceAssets.map(function (asset) {
          return asset.resource;
        });
        const faceLevels = [];

        for (mip = 0; mip < faceTextures[0]._levels.length; ++mip) {
          faceLevels.push(faceTextures.map(function (faceTexture) {
            return faceTexture._levels[mip];
          }));
        }

        const format = faceTextures[0].format;
        const faces = new Texture(this._device, {
          name: cubemapAsset.name + '_faces',
          cubemap: true,
          type: getType() || faceTextures[0].type,
          width: faceTextures[0].width,
          height: faceTextures[0].height,
          format: format === PIXELFORMAT_R8_G8_B8 ? PIXELFORMAT_R8_G8_B8_A8 : format,
          levels: faceLevels,
          minFilter: assetData.hasOwnProperty('minFilter') ? assetData.minFilter : faceTextures[0].minFilter,
          magFilter: assetData.hasOwnProperty('magFilter') ? assetData.magFilter : faceTextures[0].magFilter,
          anisotropy: assetData.hasOwnProperty('anisotropy') ? assetData.anisotropy : 1,
          addressU: ADDRESS_CLAMP_TO_EDGE,
          addressV: ADDRESS_CLAMP_TO_EDGE,
          fixCubemapSeams: !!assets[0]
        });
        resources[0] = faces;
      }
    } else {
      resources[0] = oldResources[0] || null;
    }

    if (!this.cmpArrays(resources, oldResources)) {
      cubemapAsset.resources = resources;
      cubemapAsset._handlerState.assetIds = assetIds;
      cubemapAsset._handlerState.assets = assets;

      for (i = 0; i < oldResources.length; ++i) {
        if (oldResources[i] !== null && resources.indexOf(oldResources[i]) === -1) {
          oldResources[i].destroy();
        }
      }
    }

    for (i = 0; i < oldAssets.length; ++i) {
      if (oldAssets[i] !== null && assets.indexOf(oldAssets[i]) === -1) {
        oldAssets[i].unload();
      }
    }
  }

  cmpArrays(arr1, arr2) {
    if (arr1.length !== arr2.length) {
      return false;
    }

    for (let i = 0; i < arr1.length; ++i) {
      if (arr1[i] !== arr2[i]) {
        return false;
      }
    }

    return true;
  }

  resolveId(value) {
    const valueInt = parseInt(value, 10);
    return valueInt === value || valueInt.toString() === value ? valueInt : value;
  }

  loadAssets(cubemapAsset, callback) {
    if (!cubemapAsset.hasOwnProperty('_handlerState')) {
      cubemapAsset._handlerState = {
        assetIds: [null, null, null, null, null, null, null],
        assets: [null, null, null, null, null, null, null]
      };
    }

    const self = this;
    const assetIds = self.getAssetIds(cubemapAsset);
    const assets = [null, null, null, null, null, null, null];
    const loadedAssetIds = cubemapAsset._handlerState.assetIds;
    const loadedAssets = cubemapAsset._handlerState.assets;
    const registry = self._registry;
    let awaiting = 7;

    const onLoad = function onLoad(index, asset) {
      assets[index] = asset;
      awaiting--;

      if (awaiting === 0) {
        self.update(cubemapAsset, assetIds, assets);
        callback(null, cubemapAsset.resources);
      }
    };

    const onError = function onError(index, err, asset) {
      callback(err);
    };

    const processTexAsset = function processTexAsset(index, texAsset) {
      if (texAsset.loaded) {
        onLoad(index, texAsset);
      } else {
        registry.once('load:' + texAsset.id, onLoad.bind(self, index));
        registry.once('error:' + texAsset.id, onError.bind(self, index));

        if (!texAsset.loading) {
          registry.load(texAsset);
        }
      }
    };

    let texAsset;

    for (let i = 0; i < 7; ++i) {
      const assetId = this.resolveId(assetIds[i]);

      if (!assetId) {
        onLoad(i, null);
      } else if (self.compareAssetIds(assetId, loadedAssetIds[i])) {
        onLoad(i, loadedAssets[i]);
      } else if (parseInt(assetId, 10) === assetId) {
        texAsset = registry.get(assetId);

        if (texAsset) {
          processTexAsset(i, texAsset);
        } else {
          setTimeout(function (index, assetId_) {
            const texAsset = registry.get(assetId_);

            if (texAsset) {
              processTexAsset(index, texAsset);
            } else {
              onError(index, 'failed to find dependent cubemap asset=' + assetId_);
            }
          }.bind(null, i, assetId));
        }
      } else {
        const file = typeof assetId === 'string' ? {
          url: assetId,
          filename: assetId
        } : assetId;
        texAsset = new Asset(cubemapAsset.name + '_part_' + i, 'texture', file);
        registry.add(texAsset);
        registry.once('load:' + texAsset.id, onLoad.bind(self, i));
        registry.once('error:' + texAsset.id, onError.bind(self, i));
        registry.load(texAsset);
      }
    }
  }

}

export { CubemapHandler };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3ViZW1hcC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3Jlc291cmNlcy9jdWJlbWFwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQUREUkVTU19DTEFNUF9UT19FREdFLCBQSVhFTEZPUk1BVF9SOF9HOF9COCwgUElYRUxGT1JNQVRfUjhfRzhfQjhfQTgsXG4gICAgVEVYVFVSRVRZUEVfREVGQVVMVCwgVEVYVFVSRVRZUEVfUkdCTVxufSBmcm9tICcuLi9ncmFwaGljcy9jb25zdGFudHMuanMnO1xuXG5pbXBvcnQgeyBBc3NldCB9IGZyb20gJy4uL2Fzc2V0L2Fzc2V0LmpzJztcbmltcG9ydCB7IFRleHR1cmUgfSBmcm9tICcuLi9ncmFwaGljcy90ZXh0dXJlLmpzJztcblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vaGFuZGxlci5qcycpLlJlc291cmNlSGFuZGxlcn0gUmVzb3VyY2VIYW5kbGVyICovXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vZnJhbWV3b3JrL2FwcC1iYXNlLmpzJykuQXBwQmFzZX0gQXBwQmFzZSAqL1xuXG4vKipcbiAqIFJlc291cmNlIGhhbmRsZXIgdXNlZCBmb3IgbG9hZGluZyBjdWJlbWFwIHtAbGluayBUZXh0dXJlfSByZXNvdXJjZXMuXG4gKlxuICogQGltcGxlbWVudHMge1Jlc291cmNlSGFuZGxlcn1cbiAqL1xuY2xhc3MgQ3ViZW1hcEhhbmRsZXIge1xuICAgIC8qKlxuICAgICAqIFR5cGUgb2YgdGhlIHJlc291cmNlIHRoZSBoYW5kbGVyIGhhbmRsZXMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIGhhbmRsZXJUeXBlID0gXCJjdWJlbWFwXCI7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgQ3ViZW1hcEhhbmRsZXIgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FwcEJhc2V9IGFwcCAtIFRoZSBydW5uaW5nIHtAbGluayBBcHBCYXNlfS5cbiAgICAgKiBAaGlkZWNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHRoaXMuX2RldmljZSA9IGFwcC5ncmFwaGljc0RldmljZTtcbiAgICAgICAgdGhpcy5fcmVnaXN0cnkgPSBhcHAuYXNzZXRzO1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBhcHAubG9hZGVyO1xuICAgIH1cblxuICAgIGxvYWQodXJsLCBjYWxsYmFjaywgYXNzZXQpIHtcbiAgICAgICAgdGhpcy5sb2FkQXNzZXRzKGFzc2V0LCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgb3Blbih1cmwsIGRhdGEsIGFzc2V0KSB7XG4gICAgICAgIC8vIGNhbGxlciB3aWxsIHNldCBvdXIgcmV0dXJuIHZhbHVlIHRvIGFzc2V0LnJlc291cmNlc1swXS4gV2UndmUgYWxyZWFkeSBzZXQgcmVzb3VyY2VzWzBdLFxuICAgICAgICAvLyBidXQgd2UgbXVzdCByZXR1cm4gaXQgYWdhaW4gaGVyZSBzbyBpdCBkb2Vzbid0IGdldCBvdmVyd3JpdHRlbi5cbiAgICAgICAgcmV0dXJuIGFzc2V0ID8gYXNzZXQucmVzb3VyY2UgOiBudWxsO1xuICAgIH1cblxuICAgIHBhdGNoKGFzc2V0LCByZWdpc3RyeSkge1xuICAgICAgICB0aGlzLmxvYWRBc3NldHMoYXNzZXQsIGZ1bmN0aW9uIChlcnIsIHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIC8vIGZpcmUgZXJyb3IgZXZlbnQgaWYgcGF0Y2ggZmFpbGVkXG4gICAgICAgICAgICAgICAgcmVnaXN0cnkuZmlyZSgnZXJyb3InLCBhc3NldCk7XG4gICAgICAgICAgICAgICAgcmVnaXN0cnkuZmlyZSgnZXJyb3I6JyArIGFzc2V0LmlkLCBlcnIsIGFzc2V0KTtcbiAgICAgICAgICAgICAgICBhc3NldC5maXJlKCdlcnJvcicsIGFzc2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG5vdGhpbmcgdG8gZG8gc2luY2UgYXNzZXQ6Y2hhbmdlIHdvdWxkIGhhdmUgYmVlbiByYWlzZWQgaWZcbiAgICAgICAgICAgIC8vIHJlc291cmNlcyB3ZXJlIGNoYW5nZWQuXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGdldCB0aGUgbGlzdCBvZiBkZXBlbmRlbnQgYXNzZXQgaWRzIGZvciB0aGUgY3ViZW1hcFxuICAgIGdldEFzc2V0SWRzKGN1YmVtYXBBc3NldCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcblxuICAgICAgICAvLyBwcmVmaWx0ZXJlZCBjdWJlbWFwIGlzIHN0b3JlZCBhdCBpbmRleCAwXG4gICAgICAgIHJlc3VsdFswXSA9IGN1YmVtYXBBc3NldC5maWxlO1xuXG4gICAgICAgIC8vIGZhY2VzIGFyZSBzdG9yZWQgYXQgaW5kZXggMS4uNlxuICAgICAgICBpZiAoKGN1YmVtYXBBc3NldC5sb2FkRmFjZXMgfHwgIWN1YmVtYXBBc3NldC5maWxlKSAmJiBjdWJlbWFwQXNzZXQuZGF0YSAmJiBjdWJlbWFwQXNzZXQuZGF0YS50ZXh0dXJlcykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyArK2kpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbaSArIDFdID0gY3ViZW1hcEFzc2V0LmRhdGEudGV4dHVyZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRbMV0gPSByZXN1bHRbMl0gPSByZXN1bHRbM10gPSByZXN1bHRbNF0gPSByZXN1bHRbNV0gPSByZXN1bHRbNl0gPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvLyB0ZXN0IHdoZXRoZXIgdHdvIGFzc2V0cyBpZHMgYXJlIHRoZSBzYW1lXG4gICAgY29tcGFyZUFzc2V0SWRzKGFzc2V0SWRBLCBhc3NldElkQikge1xuICAgICAgICBpZiAoYXNzZXRJZEEgJiYgYXNzZXRJZEIpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZUludChhc3NldElkQSwgMTApID09PSBhc3NldElkQSB8fCB0eXBlb2YgYXNzZXRJZEEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFzc2V0SWRBID09PSBhc3NldElkQjsgICAgICAgICAgIC8vIGlkIG9yIHVybFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYXNzZXRJZEEudXJsID09PSBhc3NldElkQi51cmw7ICAgICAgIC8vIGZpbGUvdXJsIHN0cnVjdHVyZSB3aXRoIHVybCBhbmQgZmlsZW5hbWVcbiAgICAgICAgfVxuICAgICAgICAvLyBlbHNlIHtcbiAgICAgICAgcmV0dXJuIChhc3NldElkQSAhPT0gbnVsbCkgPT09IChhc3NldElkQiAhPT0gbnVsbCk7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIHRoZSBjdWJlbWFwIHJlc291cmNlcyBnaXZlbiBhIG5ld2x5IGxvYWRlZCBzZXQgb2YgYXNzZXRzIHdpdGggdGhlaXIgY29ycmVzcG9uZGluZyBpZHNcbiAgICB1cGRhdGUoY3ViZW1hcEFzc2V0LCBhc3NldElkcywgYXNzZXRzKSB7XG4gICAgICAgIGNvbnN0IGFzc2V0RGF0YSA9IGN1YmVtYXBBc3NldC5kYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCBvbGRBc3NldHMgPSBjdWJlbWFwQXNzZXQuX2hhbmRsZXJTdGF0ZS5hc3NldHM7XG4gICAgICAgIGNvbnN0IG9sZFJlc291cmNlcyA9IGN1YmVtYXBBc3NldC5fcmVzb3VyY2VzO1xuICAgICAgICBsZXQgdGV4LCBtaXAsIGk7XG5cbiAgICAgICAgLy8gZmFjZXMsIHByZWxpdCBjdWJlbWFwIDEyOCwgNjQsIDMyLCAxNiwgOCwgNFxuICAgICAgICBjb25zdCByZXNvdXJjZXMgPSBbbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbF07XG5cbiAgICAgICAgLy8gdGV4dHVyZSB0eXBlIHVzZWQgZm9yIGZhY2VzIGFuZCBwcmVsaXQgY3ViZW1hcHMgYXJlIGJvdGggdGFrZW4gZnJvbVxuICAgICAgICAvLyBjdWJlbWFwLmRhdGEucmdibVxuICAgICAgICBjb25zdCBnZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGFzc2V0RGF0YS5oYXNPd25Qcm9wZXJ0eSgndHlwZScpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFzc2V0RGF0YS50eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFzc2V0RGF0YS5oYXNPd25Qcm9wZXJ0eSgncmdibScpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFzc2V0RGF0YS5yZ2JtID8gVEVYVFVSRVRZUEVfUkdCTSA6IFRFWFRVUkVUWVBFX0RFRkFVTFQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBoYW5kbGUgdGhlIHByZWxpdCBkYXRhXG4gICAgICAgIGlmICghY3ViZW1hcEFzc2V0LmxvYWRlZCB8fCBhc3NldHNbMF0gIT09IG9sZEFzc2V0c1swXSkge1xuICAgICAgICAgICAgLy8gcHJlbGl0IGFzc2V0IGNoYW5nZWRcbiAgICAgICAgICAgIGlmIChhc3NldHNbMF0pIHtcbiAgICAgICAgICAgICAgICB0ZXggPSBhc3NldHNbMF0ucmVzb3VyY2U7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDY7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXNbaSArIDFdID0gbmV3IFRleHR1cmUodGhpcy5fZGV2aWNlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBjdWJlbWFwQXNzZXQubmFtZSArICdfcHJlbGl0Q3ViZW1hcCcgKyAodGV4LndpZHRoID4+IGkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3ViZW1hcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzc3VtZSBwcmVmaWx0ZXJlZCBkYXRhIGhhcyBzYW1lIGVuY29kaW5nIGFzIHRoZSBmYWNlcyBhc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZ2V0VHlwZSgpIHx8IHRleC50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRleC53aWR0aCA+PiBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0ZXguaGVpZ2h0ID4+IGksXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IHRleC5mb3JtYXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbHM6IFt0ZXguX2xldmVsc1tpXV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXhDdWJlbWFwU2VhbXM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzVTogQUREUkVTU19DTEFNUF9UT19FREdFLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzc1Y6IEFERFJFU1NfQ0xBTVBfVE9fRURHRSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdlbmVyYXRlIGN1YmVtYXBzIG9uIHRoZSB0b3AgbGV2ZWwgb25seVxuICAgICAgICAgICAgICAgICAgICAgICAgbWlwbWFwczogaSA9PT0gMFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBwcmVsaXQgYXNzZXQgZGlkbid0IGNoYW5nZSBzbyBrZWVwIHRoZSBleGlzdGluZyBjdWJlbWFwIHJlc291cmNlc1xuICAgICAgICAgICAgcmVzb3VyY2VzWzFdID0gb2xkUmVzb3VyY2VzWzFdIHx8IG51bGw7XG4gICAgICAgICAgICByZXNvdXJjZXNbMl0gPSBvbGRSZXNvdXJjZXNbMl0gfHwgbnVsbDtcbiAgICAgICAgICAgIHJlc291cmNlc1szXSA9IG9sZFJlc291cmNlc1szXSB8fCBudWxsO1xuICAgICAgICAgICAgcmVzb3VyY2VzWzRdID0gb2xkUmVzb3VyY2VzWzRdIHx8IG51bGw7XG4gICAgICAgICAgICByZXNvdXJjZXNbNV0gPSBvbGRSZXNvdXJjZXNbNV0gfHwgbnVsbDtcbiAgICAgICAgICAgIHJlc291cmNlc1s2XSA9IG9sZFJlc291cmNlc1s2XSB8fCBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmFjZUFzc2V0cyA9IGFzc2V0cy5zbGljZSgxKTtcbiAgICAgICAgaWYgKCFjdWJlbWFwQXNzZXQubG9hZGVkIHx8ICF0aGlzLmNtcEFycmF5cyhmYWNlQXNzZXRzLCBvbGRBc3NldHMuc2xpY2UoMSkpKSB7XG4gICAgICAgICAgICAvLyBmYWNlIGFzc2V0cyBoYXZlIGNoYW5nZWRcbiAgICAgICAgICAgIGlmIChmYWNlQXNzZXRzLmluZGV4T2YobnVsbCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgLy8gZXh0cmFjdCBjdWJlbWFwIGxldmVsIGRhdGEgZnJvbSBmYWNlIHRleHR1cmVzXG4gICAgICAgICAgICAgICAgY29uc3QgZmFjZVRleHR1cmVzID0gZmFjZUFzc2V0cy5tYXAoZnVuY3Rpb24gKGFzc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhc3NldC5yZXNvdXJjZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBmYWNlTGV2ZWxzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChtaXAgPSAwOyBtaXAgPCBmYWNlVGV4dHVyZXNbMF0uX2xldmVscy5sZW5ndGg7ICsrbWlwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZhY2VMZXZlbHMucHVzaChmYWNlVGV4dHVyZXMubWFwKGZ1bmN0aW9uIChmYWNlVGV4dHVyZSkgeyAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1sb29wLWZ1bmNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWNlVGV4dHVyZS5fbGV2ZWxzW21pcF07XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBGb3JjZSBSR0JBOCBpZiB3ZSBhcmUgbG9hZGluZyBhIFJHQjggdGV4dHVyZSBkdWUgdG8gYSBidWcgb24gTTEgTWFjcyBNb250ZXJleSBhbmQgQ2hyb21lIG5vdFxuICAgICAgICAgICAgICAgIC8vIHJlbmRlcmluZyB0aGUgZmFjZSBvbiByaWdodCBvZiB0aGUgY3ViZW1hcCAoYGZhY2VBc3NldHNbMF1gIGFuZCBgcmVzb3VyY2VzWzFdYCkuXG4gICAgICAgICAgICAgICAgLy8gVXNpbmcgYSBSR0JBOCB0ZXh0dXJlIHdvcmtzIGFyb3VuZCB0aGUgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3BsYXljYW52YXMvZW5naW5lL2lzc3Vlcy80MDkxXG4gICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0ID0gZmFjZVRleHR1cmVzWzBdLmZvcm1hdDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGZhY2VzID0gbmV3IFRleHR1cmUodGhpcy5fZGV2aWNlLCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGN1YmVtYXBBc3NldC5uYW1lICsgJ19mYWNlcycsXG4gICAgICAgICAgICAgICAgICAgIGN1YmVtYXA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGdldFR5cGUoKSB8fCBmYWNlVGV4dHVyZXNbMF0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGZhY2VUZXh0dXJlc1swXS53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBmYWNlVGV4dHVyZXNbMF0uaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdCA9PT0gUElYRUxGT1JNQVRfUjhfRzhfQjggPyBQSVhFTEZPUk1BVF9SOF9HOF9COF9BOCA6IGZvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWxzOiBmYWNlTGV2ZWxzLFxuICAgICAgICAgICAgICAgICAgICBtaW5GaWx0ZXI6IGFzc2V0RGF0YS5oYXNPd25Qcm9wZXJ0eSgnbWluRmlsdGVyJykgPyBhc3NldERhdGEubWluRmlsdGVyIDogZmFjZVRleHR1cmVzWzBdLm1pbkZpbHRlcixcbiAgICAgICAgICAgICAgICAgICAgbWFnRmlsdGVyOiBhc3NldERhdGEuaGFzT3duUHJvcGVydHkoJ21hZ0ZpbHRlcicpID8gYXNzZXREYXRhLm1hZ0ZpbHRlciA6IGZhY2VUZXh0dXJlc1swXS5tYWdGaWx0ZXIsXG4gICAgICAgICAgICAgICAgICAgIGFuaXNvdHJvcHk6IGFzc2V0RGF0YS5oYXNPd25Qcm9wZXJ0eSgnYW5pc290cm9weScpID8gYXNzZXREYXRhLmFuaXNvdHJvcHkgOiAxLFxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzVTogQUREUkVTU19DTEFNUF9UT19FREdFLFxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzVjogQUREUkVTU19DTEFNUF9UT19FREdFLFxuICAgICAgICAgICAgICAgICAgICBmaXhDdWJlbWFwU2VhbXM6ICEhYXNzZXRzWzBdXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXNvdXJjZXNbMF0gPSBmYWNlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIG5vIGZhY2VzIGNoYW5nZWQgc28ga2VlcCBleGlzdGluZyBmYWNlcyBjdWJlbWFwXG4gICAgICAgICAgICByZXNvdXJjZXNbMF0gPSBvbGRSZXNvdXJjZXNbMF0gfHwgbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoZWNrIGlmIGFueSByZXNvdXJjZSBjaGFuZ2VkXG4gICAgICAgIGlmICghdGhpcy5jbXBBcnJheXMocmVzb3VyY2VzLCBvbGRSZXNvdXJjZXMpKSB7XG4gICAgICAgICAgICAvLyBzZXQgdGhlIG5ldyByZXNvdXJjZXMsIGNoYW5nZSBldmVudHMgd2lsbCBmaXJlXG4gICAgICAgICAgICBjdWJlbWFwQXNzZXQucmVzb3VyY2VzID0gcmVzb3VyY2VzO1xuICAgICAgICAgICAgY3ViZW1hcEFzc2V0Ll9oYW5kbGVyU3RhdGUuYXNzZXRJZHMgPSBhc3NldElkcztcbiAgICAgICAgICAgIGN1YmVtYXBBc3NldC5faGFuZGxlclN0YXRlLmFzc2V0cyA9IGFzc2V0cztcblxuICAgICAgICAgICAgLy8gZGVzdHJveSB0aGUgb2xkIGN1YmVtYXAgcmVzb3VyY2VzIHRoYXQgYXJlIG5vdCBsb25nZXIgbmVlZGVkXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgb2xkUmVzb3VyY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9sZFJlc291cmNlc1tpXSAhPT0gbnVsbCAmJiByZXNvdXJjZXMuaW5kZXhPZihvbGRSZXNvdXJjZXNbaV0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBvbGRSZXNvdXJjZXNbaV0uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRlc3Ryb3kgb2xkIGFzc2V0cyB3aGljaCBoYXZlIGJlZW4gcmVwbGFjZWRcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG9sZEFzc2V0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKG9sZEFzc2V0c1tpXSAhPT0gbnVsbCAmJiBhc3NldHMuaW5kZXhPZihvbGRBc3NldHNbaV0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgIG9sZEFzc2V0c1tpXS51bmxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNtcEFycmF5cyhhcnIxLCBhcnIyKSB7XG4gICAgICAgIGlmIChhcnIxLmxlbmd0aCAhPT0gYXJyMi5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycjEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChhcnIxW2ldICE9PSBhcnIyW2ldKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIGNvbnZlcnQgc3RyaW5nIGlkIHRvIGludFxuICAgIHJlc29sdmVJZCh2YWx1ZSkge1xuICAgICAgICBjb25zdCB2YWx1ZUludCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgIHJldHVybiAoKHZhbHVlSW50ID09PSB2YWx1ZSkgfHwgKHZhbHVlSW50LnRvU3RyaW5nKCkgPT09IHZhbHVlKSkgPyB2YWx1ZUludCA6IHZhbHVlO1xuICAgIH1cblxuICAgIGxvYWRBc3NldHMoY3ViZW1hcEFzc2V0LCBjYWxsYmFjaykge1xuICAgICAgICAvLyBpbml0aWFsaXplIGFzc2V0IHN0cnVjdHVyZXMgZm9yIHRyYWNraW5nIGxvYWQgcmVxdWVzdHNcbiAgICAgICAgaWYgKCFjdWJlbWFwQXNzZXQuaGFzT3duUHJvcGVydHkoJ19oYW5kbGVyU3RhdGUnKSkge1xuICAgICAgICAgICAgY3ViZW1hcEFzc2V0Ll9oYW5kbGVyU3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgLy8gdGhlIGxpc3Qgb2YgcmVxdWVzdGVkIGFzc2V0IGlkcyBpbiBvcmRlciBvZiBbcHJlbGl0IGN1YmVtYXAsIDYgZmFjZXNdXG4gICAgICAgICAgICAgICAgYXNzZXRJZHM6IFtudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsXSxcbiAgICAgICAgICAgICAgICAvLyB0aGUgZGVwZW5kZW50IChsb2FkZWQsIGFjdGl2ZSkgdGV4dHVyZSBhc3NldHNcbiAgICAgICAgICAgICAgICBhc3NldHM6IFtudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBjb25zdCBhc3NldElkcyA9IHNlbGYuZ2V0QXNzZXRJZHMoY3ViZW1hcEFzc2V0KTtcbiAgICAgICAgY29uc3QgYXNzZXRzID0gW251bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGxdO1xuICAgICAgICBjb25zdCBsb2FkZWRBc3NldElkcyA9IGN1YmVtYXBBc3NldC5faGFuZGxlclN0YXRlLmFzc2V0SWRzO1xuICAgICAgICBjb25zdCBsb2FkZWRBc3NldHMgPSBjdWJlbWFwQXNzZXQuX2hhbmRsZXJTdGF0ZS5hc3NldHM7XG4gICAgICAgIGNvbnN0IHJlZ2lzdHJ5ID0gc2VsZi5fcmVnaXN0cnk7XG5cbiAgICAgICAgLy8gb25lIG9mIHRoZSBkZXBlbmRlbnQgYXNzZXRzIGhhcyBmaW5pc2hlZCBsb2FkaW5nXG4gICAgICAgIGxldCBhd2FpdGluZyA9IDc7XG4gICAgICAgIGNvbnN0IG9uTG9hZCA9IGZ1bmN0aW9uIChpbmRleCwgYXNzZXQpIHtcbiAgICAgICAgICAgIGFzc2V0c1tpbmRleF0gPSBhc3NldDtcbiAgICAgICAgICAgIGF3YWl0aW5nLS07XG5cbiAgICAgICAgICAgIGlmIChhd2FpdGluZyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIGFsbCBkZXBlbmRlbnQgYXNzZXRzIGFyZSBmaW5pc2hlZCBsb2FkaW5nLCBzZXQgdGhlbSBhcyB0aGUgYWN0aXZlIHJlc291cmNlc1xuICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlKGN1YmVtYXBBc3NldCwgYXNzZXRJZHMsIGFzc2V0cyk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgY3ViZW1hcEFzc2V0LnJlc291cmNlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gaGFuZGxlIGFuIGFzc2V0IGxvYWQgZmFpbHVyZVxuICAgICAgICBjb25zdCBvbkVycm9yID0gZnVuY3Rpb24gKGluZGV4LCBlcnIsIGFzc2V0KSB7XG4gICAgICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIHByb2Nlc3MgdGhlIHRleHR1cmUgYXNzZXRcbiAgICAgICAgY29uc3QgcHJvY2Vzc1RleEFzc2V0ID0gZnVuY3Rpb24gKGluZGV4LCB0ZXhBc3NldCkge1xuICAgICAgICAgICAgaWYgKHRleEFzc2V0LmxvYWRlZCkge1xuICAgICAgICAgICAgICAgIC8vIGFzc2V0IGFscmVhZHkgZXhpc3RzXG4gICAgICAgICAgICAgICAgb25Mb2FkKGluZGV4LCB0ZXhBc3NldCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGFzc2V0IGlzIG5vdCBsb2FkZWQsIHJlZ2lzdGVyIGZvciBsb2FkIGFuZCBlcnJvciBldmVudHNcbiAgICAgICAgICAgICAgICByZWdpc3RyeS5vbmNlKCdsb2FkOicgKyB0ZXhBc3NldC5pZCwgb25Mb2FkLmJpbmQoc2VsZiwgaW5kZXgpKTtcbiAgICAgICAgICAgICAgICByZWdpc3RyeS5vbmNlKCdlcnJvcjonICsgdGV4QXNzZXQuaWQsIG9uRXJyb3IuYmluZChzZWxmLCBpbmRleCkpO1xuICAgICAgICAgICAgICAgIGlmICghdGV4QXNzZXQubG9hZGluZykge1xuICAgICAgICAgICAgICAgICAgICAvLyBraWNrIG9mZiBsb2FkIGlmIGl0J3Mgbm90IGFscmVhZHlcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0cnkubG9hZCh0ZXhBc3NldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCB0ZXhBc3NldDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA3OyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGFzc2V0SWQgPSB0aGlzLnJlc29sdmVJZChhc3NldElkc1tpXSk7XG5cbiAgICAgICAgICAgIGlmICghYXNzZXRJZCkge1xuICAgICAgICAgICAgICAgIC8vIG5vIGFzc2V0XG4gICAgICAgICAgICAgICAgb25Mb2FkKGksIG51bGwpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxmLmNvbXBhcmVBc3NldElkcyhhc3NldElkLCBsb2FkZWRBc3NldElkc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAvLyBhc3NldCBpZCBoYXNuJ3QgY2hhbmdlZCBmcm9tIHdoYXQgaXMgY3VycmVudGx5IHNldFxuICAgICAgICAgICAgICAgIG9uTG9hZChpLCBsb2FkZWRBc3NldHNbaV0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZUludChhc3NldElkLCAxMCkgPT09IGFzc2V0SWQpIHtcbiAgICAgICAgICAgICAgICAvLyBhc3NldElkIGlzIGFuIGFzc2V0IGlkXG4gICAgICAgICAgICAgICAgdGV4QXNzZXQgPSByZWdpc3RyeS5nZXQoYXNzZXRJZCk7XG4gICAgICAgICAgICAgICAgaWYgKHRleEFzc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NUZXhBc3NldChpLCB0ZXhBc3NldCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UgYXJlIHVuYWJsZSB0byBmaW5kIHRoZSBkZXBlbmRlbnQgYXNzZXQsIHRoZW4gd2UgaW50cm9kdWNlIGhlcmUgYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gYXN5bmNocm9ub3VzIHN0ZXAuIHRoaXMgZ2l2ZXMgdGhlIGNhbGxlciAoZm9yIGV4YW1wbGUgdGhlIHNjZW5lIGxvYWRlcilcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBjaGFuY2UgdG8gYWRkIHRoZSBkZXBlbmRlbnQgc2NlbmUgdGV4dHVyZSB0byByZWdpc3RyeSBiZWZvcmUgd2UgYXR0ZW1wdFxuICAgICAgICAgICAgICAgICAgICAvLyB0byBnZXQgdGhlIGFzc2V0IGFnYWluLlxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIChpbmRleCwgYXNzZXRJZF8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleEFzc2V0ID0gcmVnaXN0cnkuZ2V0KGFzc2V0SWRfKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXhBc3NldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NUZXhBc3NldChpbmRleCwgdGV4QXNzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yKGluZGV4LCAnZmFpbGVkIHRvIGZpbmQgZGVwZW5kZW50IGN1YmVtYXAgYXNzZXQ9JyArIGFzc2V0SWRfKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKG51bGwsIGksIGFzc2V0SWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGFzc2V0SWQgaXMgYSB1cmwgb3IgZmlsZSBvYmplY3QgYW5kIHdlJ3JlIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyBpdFxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSAodHlwZW9mIGFzc2V0SWQgPT09ICdzdHJpbmcnKSA/IHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBhc3NldElkLFxuICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogYXNzZXRJZFxuICAgICAgICAgICAgICAgIH0gOiBhc3NldElkO1xuICAgICAgICAgICAgICAgIHRleEFzc2V0ID0gbmV3IEFzc2V0KGN1YmVtYXBBc3NldC5uYW1lICsgJ19wYXJ0XycgKyBpLCAndGV4dHVyZScsIGZpbGUpO1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJ5LmFkZCh0ZXhBc3NldCk7XG4gICAgICAgICAgICAgICAgcmVnaXN0cnkub25jZSgnbG9hZDonICsgdGV4QXNzZXQuaWQsIG9uTG9hZC5iaW5kKHNlbGYsIGkpKTtcbiAgICAgICAgICAgICAgICByZWdpc3RyeS5vbmNlKCdlcnJvcjonICsgdGV4QXNzZXQuaWQsIG9uRXJyb3IuYmluZChzZWxmLCBpKSk7XG4gICAgICAgICAgICAgICAgcmVnaXN0cnkubG9hZCh0ZXhBc3NldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IEN1YmVtYXBIYW5kbGVyIH07XG4iXSwibmFtZXMiOlsiQ3ViZW1hcEhhbmRsZXIiLCJjb25zdHJ1Y3RvciIsImFwcCIsImhhbmRsZXJUeXBlIiwiX2RldmljZSIsImdyYXBoaWNzRGV2aWNlIiwiX3JlZ2lzdHJ5IiwiYXNzZXRzIiwiX2xvYWRlciIsImxvYWRlciIsImxvYWQiLCJ1cmwiLCJjYWxsYmFjayIsImFzc2V0IiwibG9hZEFzc2V0cyIsIm9wZW4iLCJkYXRhIiwicmVzb3VyY2UiLCJwYXRjaCIsInJlZ2lzdHJ5IiwiZXJyIiwicmVzdWx0IiwiZmlyZSIsImlkIiwiZ2V0QXNzZXRJZHMiLCJjdWJlbWFwQXNzZXQiLCJmaWxlIiwibG9hZEZhY2VzIiwidGV4dHVyZXMiLCJpIiwiY29tcGFyZUFzc2V0SWRzIiwiYXNzZXRJZEEiLCJhc3NldElkQiIsInBhcnNlSW50IiwidXBkYXRlIiwiYXNzZXRJZHMiLCJhc3NldERhdGEiLCJvbGRBc3NldHMiLCJfaGFuZGxlclN0YXRlIiwib2xkUmVzb3VyY2VzIiwiX3Jlc291cmNlcyIsInRleCIsIm1pcCIsInJlc291cmNlcyIsImdldFR5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInR5cGUiLCJyZ2JtIiwiVEVYVFVSRVRZUEVfUkdCTSIsIlRFWFRVUkVUWVBFX0RFRkFVTFQiLCJsb2FkZWQiLCJUZXh0dXJlIiwibmFtZSIsIndpZHRoIiwiY3ViZW1hcCIsImhlaWdodCIsImZvcm1hdCIsImxldmVscyIsIl9sZXZlbHMiLCJmaXhDdWJlbWFwU2VhbXMiLCJhZGRyZXNzVSIsIkFERFJFU1NfQ0xBTVBfVE9fRURHRSIsImFkZHJlc3NWIiwibWlwbWFwcyIsImZhY2VBc3NldHMiLCJzbGljZSIsImNtcEFycmF5cyIsImluZGV4T2YiLCJmYWNlVGV4dHVyZXMiLCJtYXAiLCJmYWNlTGV2ZWxzIiwibGVuZ3RoIiwicHVzaCIsImZhY2VUZXh0dXJlIiwiZmFjZXMiLCJQSVhFTEZPUk1BVF9SOF9HOF9COCIsIlBJWEVMRk9STUFUX1I4X0c4X0I4X0E4IiwibWluRmlsdGVyIiwibWFnRmlsdGVyIiwiYW5pc290cm9weSIsImRlc3Ryb3kiLCJ1bmxvYWQiLCJhcnIxIiwiYXJyMiIsInJlc29sdmVJZCIsInZhbHVlIiwidmFsdWVJbnQiLCJ0b1N0cmluZyIsInNlbGYiLCJsb2FkZWRBc3NldElkcyIsImxvYWRlZEFzc2V0cyIsImF3YWl0aW5nIiwib25Mb2FkIiwiaW5kZXgiLCJvbkVycm9yIiwicHJvY2Vzc1RleEFzc2V0IiwidGV4QXNzZXQiLCJvbmNlIiwiYmluZCIsImxvYWRpbmciLCJhc3NldElkIiwiZ2V0Iiwic2V0VGltZW91dCIsImFzc2V0SWRfIiwiZmlsZW5hbWUiLCJBc3NldCIsImFkZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBZ0JBLE1BQU1BLGNBQU4sQ0FBcUI7RUFjakJDLFdBQVcsQ0FBQ0MsR0FBRCxFQUFNO0lBQUEsSUFSakJDLENBQUFBLFdBUWlCLEdBUkgsU0FRRyxDQUFBO0FBQ2IsSUFBQSxJQUFBLENBQUtDLE9BQUwsR0FBZUYsR0FBRyxDQUFDRyxjQUFuQixDQUFBO0FBQ0EsSUFBQSxJQUFBLENBQUtDLFNBQUwsR0FBaUJKLEdBQUcsQ0FBQ0ssTUFBckIsQ0FBQTtBQUNBLElBQUEsSUFBQSxDQUFLQyxPQUFMLEdBQWVOLEdBQUcsQ0FBQ08sTUFBbkIsQ0FBQTtBQUNILEdBQUE7O0FBRURDLEVBQUFBLElBQUksQ0FBQ0MsR0FBRCxFQUFNQyxRQUFOLEVBQWdCQyxLQUFoQixFQUF1QjtBQUN2QixJQUFBLElBQUEsQ0FBS0MsVUFBTCxDQUFnQkQsS0FBaEIsRUFBdUJELFFBQXZCLENBQUEsQ0FBQTtBQUNILEdBQUE7O0FBRURHLEVBQUFBLElBQUksQ0FBQ0osR0FBRCxFQUFNSyxJQUFOLEVBQVlILEtBQVosRUFBbUI7QUFHbkIsSUFBQSxPQUFPQSxLQUFLLEdBQUdB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
