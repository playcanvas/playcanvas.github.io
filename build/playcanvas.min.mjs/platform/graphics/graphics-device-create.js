import"../../core/tracing.js";import{WebgpuGraphicsDevice as e}from"./webgpu/webgpu-graphics-device.js";import{DEVICETYPE_WEBGL2 as r,DEVICETYPE_WEBGL1 as i,DEVICETYPE_WEBGPU as l}from"./constants.js";import{WebglGraphicsDevice as n}from"./webgl/webgl-graphics-device.js";function t(t,s={}){var o;null!=s.antialias||(s.antialias=!0);const a=null!=(o=s.deviceTypes)?o:[];let c;a.includes(r)||a.push(r),a.includes(i)||a.push(i);for(let i=0;i<a.length;i++){var p,u;const o=a[i];if(o===l&&null!=(p=window)&&null!=(u=p.navigator)&&u.gpu)return c=new e(t,s),c.initWebGpu(s.glslangUrl,s.twgslUrl);if(o!==l)return s.preferWebGl2=o===r,c=new n(t,s),Promise.resolve(c)}return Promise.reject(new Error("Failed to allocate graphics device"))}export{t as createGraphicsDevice};
