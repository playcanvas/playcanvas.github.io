/**
 * @license
 * PlayCanvas Engine v1.58.0-preview revision 1fec26519 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../../core/debug.js';
import { Vec3 } from '../../core/math/vec3.js';
import { Mat4 } from '../../core/math/mat4.js';

class Listener {
  constructor(manager) {
    this._manager = manager;

    this.position = new Vec3();
    this.velocity = new Vec3();
    this.orientation = new Mat4();
  }

  getPosition() {
    return this.position;
  }

  setPosition(position) {
    this.position.copy(position);
    const listener = this.listener;
    if (listener) {
      if ('positionX' in listener) {
        listener.positionX.value = position.x;
        listener.positionY.value = position.y;
        listener.positionZ.value = position.z;
      } else if (listener.setPosition) {
        listener.setPosition(position.x, position.y, position.z);
      }
    }
  }

  getVelocity() {
    Debug.warn('Listener#getVelocity is not implemented.');
    return this.velocity;
  }

  setVelocity(velocity) {
    Debug.warn('Listener#setVelocity is not implemented.');
  }

  setOrientation(orientation) {
    this.orientation.copy(orientation);
    const listener = this.listener;
    if (listener) {
      const m = orientation.data;
      if ('forwardX' in listener) {
        listener.forwardX.value = -m[8];
        listener.forwardY.value = -m[9];
        listener.forwardZ.value = -m[10];
        listener.upX.value = m[4];
        listener.upY.value = m[5];
        listener.upZ.value = m[6];
      } else if (listener.setOrientation) {
        listener.setOrientation(-m[8], -m[9], -m[10], m[4], m[5], m[6]);
      }
    }
  }

  getOrientation() {
    return this.orientation;
  }

  get listener() {
    const context = this._manager.context;
    return context ? context.listener : null;
  }
}

export { Listener };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdGVuZXIuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9wbGF0Zm9ybS9zb3VuZC9saXN0ZW5lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWJ1ZyB9IGZyb20gJy4uLy4uL2NvcmUvZGVidWcuanMnO1xuXG5pbXBvcnQgeyBWZWMzIH0gZnJvbSAnLi4vLi4vY29yZS9tYXRoL3ZlYzMuanMnO1xuaW1wb3J0IHsgTWF0NCB9IGZyb20gJy4uLy4uL2NvcmUvbWF0aC9tYXQ0LmpzJztcblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vbWFuYWdlci5qcycpLlNvdW5kTWFuYWdlcn0gU291bmRNYW5hZ2VyICovXG5cbi8qKlxuICogUmVwcmVzZW50cyBhbiBhdWRpbyBsaXN0ZW5lciAtIHVzZWQgaW50ZXJuYWxseS5cbiAqXG4gKiBAaWdub3JlXG4gKi9cbmNsYXNzIExpc3RlbmVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgbGlzdGVuZXIgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1NvdW5kTWFuYWdlcn0gbWFuYWdlciAtIFRoZSBzb3VuZCBtYW5hZ2VyLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG1hbmFnZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtTb3VuZE1hbmFnZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9tYW5hZ2VyID0gbWFuYWdlcjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge1ZlYzN9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFZlYzMoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtWZWMzfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IG5ldyBWZWMzKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7TWF0NH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3JpZW50YXRpb24gPSBuZXcgTWF0NCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgICAqXG4gICAgICogQHJldHVybnMge1ZlYzN9IFRoZSBwb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAgICovXG4gICAgZ2V0UG9zaXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtWZWMzfSBwb3NpdGlvbiAtIFRoZSBuZXcgcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgICAqL1xuICAgIHNldFBvc2l0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24uY29weShwb3NpdGlvbik7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVyID0gdGhpcy5saXN0ZW5lcjtcbiAgICAgICAgaWYgKGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBpZiAoJ3Bvc2l0aW9uWCcgaW4gbGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5wb3NpdGlvblgudmFsdWUgPSBwb3NpdGlvbi54O1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyLnBvc2l0aW9uWS52YWx1ZSA9IHBvc2l0aW9uLnk7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIucG9zaXRpb25aLnZhbHVlID0gcG9zaXRpb24uejtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdGVuZXIuc2V0UG9zaXRpb24pIHsgLy8gRmlyZWZveCAoYW5kIGxlZ2FjeSBicm93c2VycylcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5zZXRQb3NpdGlvbihwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi56KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmVsb2NpdHkgb2YgdGhlIGxpc3RlbmVyLlxuICAgICAqXG4gICAgICogQHJldHVybnMge1ZlYzN9IFRoZSB2ZWxvY2l0eSBvZiB0aGUgbGlzdGVuZXIuXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKi9cbiAgICBnZXRWZWxvY2l0eSgpIHtcbiAgICAgICAgRGVidWcud2FybignTGlzdGVuZXIjZ2V0VmVsb2NpdHkgaXMgbm90IGltcGxlbWVudGVkLicpO1xuICAgICAgICByZXR1cm4gdGhpcy52ZWxvY2l0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHZlbG9jaXR5IG9mIHRoZSBsaXN0ZW5lci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VmVjM30gdmVsb2NpdHkgLSBUaGUgbmV3IHZlbG9jaXR5IG9mIHRoZSBsaXN0ZW5lci5cbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIHNldFZlbG9jaXR5KHZlbG9jaXR5KSB7XG4gICAgICAgIERlYnVnLndhcm4oJ0xpc3RlbmVyI3NldFZlbG9jaXR5IGlzIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG9yaWVudGF0aW9uIG1hdHJpeCBvZiB0aGUgbGlzdGVuZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge01hdDR9IG9yaWVudGF0aW9uIC0gVGhlIG5ldyBvcmllbnRhdGlvbiBtYXRyaXggb2YgdGhlIGxpc3RlbmVyLlxuICAgICAqL1xuICAgIHNldE9yaWVudGF0aW9uKG9yaWVudGF0aW9uKSB7XG4gICAgICAgIHRoaXMub3JpZW50YXRpb24uY29weShvcmllbnRhdGlvbik7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVyID0gdGhpcy5saXN0ZW5lcjtcbiAgICAgICAgaWYgKGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBjb25zdCBtID0gb3JpZW50YXRpb24uZGF0YTtcbiAgICAgICAgICAgIGlmICgnZm9yd2FyZFgnIGluIGxpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIuZm9yd2FyZFgudmFsdWUgPSAtbVs4XTtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5mb3J3YXJkWS52YWx1ZSA9IC1tWzldO1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyLmZvcndhcmRaLnZhbHVlID0gLW1bMTBdO1xuXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIudXBYLnZhbHVlID0gbVs0XTtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci51cFkudmFsdWUgPSBtWzVdO1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyLnVwWi52YWx1ZSA9IG1bNl07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RlbmVyLnNldE9yaWVudGF0aW9uKSB7IC8vIEZpcmVmb3ggKGFuZCBsZWdhY3kgYnJvd3NlcnMpXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIuc2V0T3JpZW50YXRpb24oLW1bOF0sIC1tWzldLCAtbVsxMF0sIG1bNF0sIG1bNV0sIG1bNl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBvcmllbnRhdGlvbiBtYXRyaXggb2YgdGhlIGxpc3RlbmVyLlxuICAgICAqXG4gICAgICogQHJldHVybnMge01hdDR9IFRoZSBvcmllbnRhdGlvbiBtYXRyaXggb2YgdGhlIGxpc3RlbmVyLlxuICAgICAqL1xuICAgIGdldE9yaWVudGF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcmllbnRhdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxpc3RlbmVyLlxuICAgICAqXG4gICAgICogQHR5cGUge0F1ZGlvTGlzdGVuZXJ8bnVsbH1cbiAgICAgKi9cbiAgICBnZXQgbGlzdGVuZXIoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLl9tYW5hZ2VyLmNvbnRleHQ7XG4gICAgICAgIHJldHVybiBjb250ZXh0ID8gY29udGV4dC5saXN0ZW5lciA6IG51bGw7XG4gICAgfVxufVxuXG5leHBvcnQgeyBMaXN0ZW5lciB9O1xuIl0sIm5hbWVzIjpbIkxpc3RlbmVyIiwiY29uc3RydWN0b3IiLCJtYW5hZ2VyIiwiX21hbmFnZXIiLCJwb3NpdGlvbiIsIlZlYzMiLCJ2ZWxvY2l0eSIsIm9yaWVudGF0aW9uIiwiTWF0NCIsImdldFBvc2l0aW9uIiwic2V0UG9zaXRpb24iLCJjb3B5IiwibGlzdGVuZXIiLCJwb3NpdGlvblgiLCJ2YWx1ZSIsIngiLCJwb3NpdGlvblkiLCJ5IiwicG9zaXRpb25aIiwieiIsImdldFZlbG9jaXR5IiwiRGVidWciLCJ3YXJuIiwic2V0VmVsb2NpdHkiLCJzZXRPcmllbnRhdGlvbiIsIm0iLCJkYXRhIiwiZm9yd2FyZFgiLCJmb3J3YXJkWSIsImZvcndhcmRaIiwidXBYIiwidXBZIiwidXBaIiwiZ2V0T3JpZW50YXRpb24iLCJjb250ZXh0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFZQSxNQUFNQSxRQUFRLENBQUM7RUFNWEMsV0FBVyxDQUFDQyxPQUFPLEVBQUU7SUFLakIsSUFBSSxDQUFDQyxRQUFRLEdBQUdELE9BQU8sQ0FBQTs7QUFNdkIsSUFBQSxJQUFJLENBQUNFLFFBQVEsR0FBRyxJQUFJQyxJQUFJLEVBQUUsQ0FBQTtBQUsxQixJQUFBLElBQUksQ0FBQ0MsUUFBUSxHQUFHLElBQUlELElBQUksRUFBRSxDQUFBO0FBSzFCLElBQUEsSUFBSSxDQUFDRSxXQUFXLEdBQUcsSUFBSUMsSUFBSSxFQUFFLENBQUE7QUFDakMsR0FBQTs7QUFPQUMsRUFBQUEsV0FBVyxHQUFHO0lBQ1YsT0FBTyxJQUFJLENBQUNMLFFBQVEsQ0FBQTtBQUN4QixHQUFBOztFQU9BTSxXQUFXLENBQUNOLFFBQVEsRUFBRTtBQUNsQixJQUFBLElBQUksQ0FBQ0EsUUFBUSxDQUFD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
