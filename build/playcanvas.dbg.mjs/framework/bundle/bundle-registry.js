/**
 * @license
 * PlayCanvas Engine v1.62.0 revision 818511d2b (DEBUG PROFILER)
 * Copyright 2011-2023 PlayCanvas Ltd. All rights reserved.
 */
/**
 * Keeps track of which assets are in bundles and loads files from bundles.
 *
 * @ignore
 */
class BundleRegistry {
  /**
   * Create a new BundleRegistry instance.
   *
   * @param {import('../asset/asset-registry.js').AssetRegistry} assets - The asset registry.
   */
  constructor(assets) {
    this._assets = assets;

    // index of bundle assets
    this._bundleAssets = {};
    // index asset id to one more bundle assets
    this._assetsInBundles = {};
    // index file urls to one or more bundle assets
    this._urlsInBundles = {};
    // contains requests to load file URLs indexed by URL
    this._fileRequests = {};
    this._assets.on('add', this._onAssetAdded, this);
    this._assets.on('remove', this._onAssetRemoved, this);
  }

  // Add asset in internal indexes
  _onAssetAdded(asset) {
    // if this is a bundle asset then add it and
    // index its referenced assets
    if (asset.type === 'bundle') {
      this._bundleAssets[asset.id] = asset;
      this._registerBundleEventListeners(asset.id);
      for (let i = 0, len = asset.data.assets.length; i < len; i++) {
        this._indexAssetInBundle(asset.data.assets[i], asset);
      }
    } else {
      // if this is not a bundle then index its URLs
      if (this._assetsInBundles[asset.id]) {
        this._indexAssetFileUrls(asset);
      }
    }
  }
  _registerBundleEventListeners(bundleAssetId) {
    this._assets.on('load:' + bundleAssetId, this._onBundleLoaded, this);
    this._assets.on('error:' + bundleAssetId, this._onBundleError, this);
  }
  _unregisterBundleEventListeners(bundleAssetId) {
    this._assets.off('load:' + bundleAssetId, this._onBundleLoaded, this);
    this._assets.off('error:' + bundleAssetId, this._onBundleError, this);
  }

  // Index the specified asset id and its file URLs so that
  // the registry knows that the asset is in that bundle
  _indexAssetInBundle(assetId, bundleAsset) {
    if (!this._assetsInBundles[assetId]) {
      this._assetsInBundles[assetId] = [bundleAsset];
    } else {
      const bundles = this._assetsInBundles[assetId];
      const idx = bundles.indexOf(bundleAsset);
      if (idx === -1) {
        bundles.push(bundleAsset);
      }
    }
    const asset = this._assets.get(assetId);
    if (asset) {
      this._indexAssetFileUrls(asset);
    }
  }

  // Index the file URLs of the specified asset
  _indexAssetFileUrls(asset) {
    const urls = this._getAssetFileUrls(asset);
    if (!urls) return;
    for (let i = 0, len = urls.length; i < len; i++) {
      const url = urls[i];
      // Just set the URL to point to the same bundles as the asset does.
      // This is a performance/memory optimization and it assumes that
      // the URL will not exist in any other asset. If that does happen then
      // this will not work as expected if the asset is removed, as the URL will
      // be removed too.
      this._urlsInBundles[url] = this._assetsInBundles[asset.id];
    }
  }

  // Get all the possible URLs of an asset
  _getAssetFileUrls(asset) {
    let url = asset.getFileUrl();
    if (!url) return null;
    url = this._normalizeUrl(url);
    const urls = [url];

    // a font might have additional files
    // so add them in the list
    if (asset.type === 'font') {
      const numFiles = asset.data.info.maps.length;
      for (let i = 1; i < numFiles; i++) {
        urls.push(url.replace('.png', i + '.png'));
      }
    }
    return urls;
  }

  // Removes query parameters from a URL
  _normalizeUrl(url) {
    return url && url.split('?')[0];
  }

  // Remove asset from internal indexes
  _onAssetRemoved(asset) {
    if (asset.type === 'bundle') {
      // remove bundle from index
      delete this._bundleAssets[asset.id];

      // remove event listeners
      this._unregisterBundleEventListeners(asset.id);

      // remove bundle from _assetsInBundles and _urlInBundles indexes
      for (const id in this._assetsInBundles) {
        const array = this._assetsInBundles[id];
        const idx = array.indexOf(asset);
        if (idx !== -1) {
          array.splice(idx, 1);
          if (!array.length) {
            delete this._assetsInBundles[id];

            // make sure we do not leave that array in
            // any _urlInBundles entries
            for (const url in this._urlsInBundles) {
              if (this._urlsInBundles[url] === array) {
                delete this._urlsInBundles[url];
              }
            }
          }
        }
      }

      // fail any pending requests for this bundle
      this._onBundleError(`Bundle ${asset.id} was removed`, asset);
    } else if (this._assetsInBundles[asset.id]) {
      // remove asset from _assetInBundles
      delete this._assetsInBundles[asset.id];

      // remove asset urls from _urlsInBundles
      const urls = this._getAssetFileUrls(asset);
      for (let i = 0, len = urls.length; i < len; i++) {
        delete this._urlsInBundles[urls[i]];
      }
    }
  }

  // If we have any pending file requests
  // that can be satisfied by the specified bundle
  // then resolve them
  _onBundleLoaded(bundleAsset) {
    // this can happen if the bundleAsset failed
    // to create its resource
    if (!bundleAsset.resource) {
      this._onBundleError(`Bundle ${bundleAsset.id} failed to load`, bundleAsset);
      return;
    }

    // on next tick resolve the pending asset requests
    // don't do it on the same tick because that ties the loading
    // of the bundle to the loading of all the assets
    requestAnimationFrame(() => {
      // make sure the registry hasn't been destroyed already
      if (!this._fileRequests) {
        return;
      }
      for (const url in this._fileRequests) {
        const bundles = this._urlsInBundles[url];
        if (!bundles || bundles.indexOf(bundleAsset) === -1) continue;
        const decodedUrl = decodeURIComponent(url);
        let err = null;
        if (!bundleAsset.resource.hasBlobUrl(decodedUrl)) {
          err = `Bundle ${bundleAsset.id} does not contain URL ${url}`;
        }
        const requests = this._fileRequests[url];
        for (let i = 0, len = requests.length; i < len; i++) {
          if (err) {
            requests[i](err);
          } else {
            requests[i](null, bundleAsset.resource.getBlobUrl(decodedUrl));
          }
        }
        delete this._fileRequests[url];
      }
    });
  }

  // If we have outstanding file requests for any
  // of the URLs in the specified bundle then search for
  // other bundles that can satisfy these requests.
  // If we do not find any other bundles then fail
  // those pending file requests with the specified error.
  _onBundleError(err, bundleAsset) {
    for (const url in this._fileRequests) {
      const bundle = this._findLoadedOrLoadingBundleForUrl(url);
      if (!bundle) {
        const requests = this._fileRequests[url];
        for (let i = 0, len = requests.length; i < len; i++) {
          requests[i](err);
        }
        delete this._fileRequests[url];
      }
    }
  }

  // Finds a bundle that contains the specified URL but
  // only returns the bundle if it's either loaded or being loaded
  _findLoadedOrLoadingBundleForUrl(url) {
    const bundles = this._urlsInBundles[url];
    if (!bundles) return null;

    // look for loaded bundle first...
    const len = bundles.length;
    for (let i = 0; i < len; i++) {
      // 'loaded' can be true but if there was an error
      // then 'resource' would be null
      if (bundles[i].loaded && bundles[i].resource) {
        return bundles[i];
      }
    }

    // ...then look for loading bundles
    for (let i = 0; i < len; i++) {
      if (bundles[i].loading) {
        return bundles[i];
      }
    }
    return null;
  }

  /**
   * Lists all of the available bundles that reference the specified asset id.
   *
   * @param {import('../asset/asset.js').Asset} asset - The asset.
   * @returns {import('../asset/asset.js').Asset[]} An array of bundle assets or null if the
   * asset is not in any bundle.
   */
  listBundlesForAsset(asset) {
    return this._assetsInBundles[asset.id] || null;
  }

  /**
   * Lists all of the available bundles. This includes bundles that are not loaded.
   *
   * @returns {import('../asset/asset.js').Asset[]} An array of bundle assets.
   */
  list() {
    const result = [];
    for (const id in this._bundleAssets) {
      result.push(this._bundleAssets[id]);
    }
    return result;
  }

  /**
   * Returns true if there is a bundle that contains the specified URL.
   *
   * @param {string} url - The url.
   * @returns {boolean} True or false.
   */
  hasUrl(url) {
    return !!this._urlsInBundles[url];
  }

  /**
   * Returns true if there is a bundle that contains the specified URL and that bundle is either
   * loaded or currently being loaded.
   *
   * @param {string} url - The url.
   * @returns {boolean} True or false.
   */
  canLoadUrl(url) {
    return !!this._findLoadedOrLoadingBundleForUrl(url);
  }

  /**
   * Loads the specified file URL from a bundle that is either loaded or currently being loaded.
   *
   * @param {string} url - The URL. Make sure you are using a relative URL that does not contain
   * any query parameters.
   * @param {Function} callback - The callback is called when the file has been loaded or if an
   * error occurs. The callback expects the first argument to be the error message (if any) and
   * the second argument is the file blob URL.
   * @example
   * var url = asset.getFileUrl().split('?')[0]; // get normalized asset URL
   * this.app.bundles.loadFile(url, function (err, blobUrl) {
   *     // do something with the blob URL
   * });
   */
  loadUrl(url, callback) {
    const bundle = this._findLoadedOrLoadingBundleForUrl(url);
    if (!bundle) {
      callback(`URL ${url} not found in any bundles`);
      return;
    }

    // Only load files from bundles that're explicitly requested to be loaded.
    if (bundle.loaded) {
      const decodedUrl = decodeURIComponent(url);
      if (!bundle.resource.hasBlobUrl(decodedUrl)) {
        callback(`Bundle ${bundle.id} does not contain URL ${url}`);
        return;
      }
      callback(null, bundle.resource.getBlobUrl(decodedUrl));
    } else if (this._fileRequests.hasOwnProperty(url)) {
      this._fileRequests[url].push(callback);
    } else {
      this._fileRequests[url] = [callback];
    }
  }

  /**
   * Destroys the registry, and releases its resources. Does not unload bundle assets as these
   * should be unloaded by the {@link AssetRegistry}.
   */
  destroy() {
    this._assets.off('add', this._onAssetAdded, this);
    this._assets.off('remove', this._onAssetRemoved, this);
    for (const id in this._bundleAssets) {
      this._unregisterBundleEventListeners(id);
    }
    this._assets = null;
    this._bundleAssets = null;
    this._assetsInBundles = null;
    this._urlsInBundles = null;
    this._fileRequests = null;
  }
}

export { BundleRegistry };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLXJlZ2lzdHJ5LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2J1bmRsZS9idW5kbGUtcmVnaXN0cnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBLZWVwcyB0cmFjayBvZiB3aGljaCBhc3NldHMgYXJlIGluIGJ1bmRsZXMgYW5kIGxvYWRzIGZpbGVzIGZyb20gYnVuZGxlcy5cbiAqXG4gKiBAaWdub3JlXG4gKi9cbmNsYXNzIEJ1bmRsZVJlZ2lzdHJ5IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgQnVuZGxlUmVnaXN0cnkgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vYXNzZXQvYXNzZXQtcmVnaXN0cnkuanMnKS5Bc3NldFJlZ2lzdHJ5fSBhc3NldHMgLSBUaGUgYXNzZXQgcmVnaXN0cnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXNzZXRzKSB7XG4gICAgICAgIHRoaXMuX2Fzc2V0cyA9IGFzc2V0cztcblxuICAgICAgICAvLyBpbmRleCBvZiBidW5kbGUgYXNzZXRzXG4gICAgICAgIHRoaXMuX2J1bmRsZUFzc2V0cyA9IHt9O1xuICAgICAgICAvLyBpbmRleCBhc3NldCBpZCB0byBvbmUgbW9yZSBidW5kbGUgYXNzZXRzXG4gICAgICAgIHRoaXMuX2Fzc2V0c0luQnVuZGxlcyA9IHt9O1xuICAgICAgICAvLyBpbmRleCBmaWxlIHVybHMgdG8gb25lIG9yIG1vcmUgYnVuZGxlIGFzc2V0c1xuICAgICAgICB0aGlzLl91cmxzSW5CdW5kbGVzID0ge307XG4gICAgICAgIC8vIGNvbnRhaW5zIHJlcXVlc3RzIHRvIGxvYWQgZmlsZSBVUkxzIGluZGV4ZWQgYnkgVVJMXG4gICAgICAgIHRoaXMuX2ZpbGVSZXF1ZXN0cyA9IHt9O1xuXG4gICAgICAgIHRoaXMuX2Fzc2V0cy5vbignYWRkJywgdGhpcy5fb25Bc3NldEFkZGVkLCB0aGlzKTtcbiAgICAgICAgdGhpcy5fYXNzZXRzLm9uKCdyZW1vdmUnLCB0aGlzLl9vbkFzc2V0UmVtb3ZlZCwgdGhpcyk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGFzc2V0IGluIGludGVybmFsIGluZGV4ZXNcbiAgICBfb25Bc3NldEFkZGVkKGFzc2V0KSB7XG4gICAgICAgIC8vIGlmIHRoaXMgaXMgYSBidW5kbGUgYXNzZXQgdGhlbiBhZGQgaXQgYW5kXG4gICAgICAgIC8vIGluZGV4IGl0cyByZWZlcmVuY2VkIGFzc2V0c1xuICAgICAgICBpZiAoYXNzZXQudHlwZSA9PT0gJ2J1bmRsZScpIHtcbiAgICAgICAgICAgIHRoaXMuX2J1bmRsZUFzc2V0c1thc3NldC5pZF0gPSBhc3NldDtcblxuICAgICAgICAgICAgdGhpcy5fcmVnaXN0ZXJCdW5kbGVFdmVudExpc3RlbmVycyhhc3NldC5pZCk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBhc3NldC5kYXRhLmFzc2V0cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuX2luZGV4QXNzZXRJbkJ1bmRsZShhc3NldC5kYXRhLmFzc2V0c1tpXSwgYXNzZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBub3QgYSBidW5kbGUgdGhlbiBpbmRleCBpdHMgVVJMc1xuICAgICAgICAgICAgaWYgKHRoaXMuX2Fzc2V0c0luQnVuZGxlc1thc3NldC5pZF0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbmRleEFzc2V0RmlsZVVybHMoYXNzZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3JlZ2lzdGVyQnVuZGxlRXZlbnRMaXN0ZW5lcnMoYnVuZGxlQXNzZXRJZCkge1xuICAgICAgICB0aGlzLl9hc3NldHMub24oJ2xvYWQ6JyArIGJ1bmRsZUFzc2V0SWQsIHRoaXMuX29uQnVuZGxlTG9hZGVkLCB0aGlzKTtcbiAgICAgICAgdGhpcy5fYXNzZXRzLm9uKCdlcnJvcjonICsgYnVuZGxlQXNzZXRJZCwgdGhpcy5fb25CdW5kbGVFcnJvciwgdGhpcyk7XG4gICAgfVxuXG4gICAgX3VucmVnaXN0ZXJCdW5kbGVFdmVudExpc3RlbmVycyhidW5kbGVBc3NldElkKSB7XG4gICAgICAgIHRoaXMuX2Fzc2V0cy5vZmYoJ2xvYWQ6JyArIGJ1bmRsZUFzc2V0SWQsIHRoaXMuX29uQnVuZGxlTG9hZGVkLCB0aGlzKTtcbiAgICAgICAgdGhpcy5fYXNzZXRzLm9mZignZXJyb3I6JyArIGJ1bmRsZUFzc2V0SWQsIHRoaXMuX29uQnVuZGxlRXJyb3IsIHRoaXMpO1xuICAgIH1cblxuICAgIC8vIEluZGV4IHRoZSBzcGVjaWZpZWQgYXNzZXQgaWQgYW5kIGl0cyBmaWxlIFVSTHMgc28gdGhhdFxuICAgIC8vIHRoZSByZWdpc3RyeSBrbm93cyB0aGF0IHRoZSBhc3NldCBpcyBpbiB0aGF0IGJ1bmRsZVxuICAgIF9pbmRleEFzc2V0SW5CdW5kbGUoYXNzZXRJZCwgYnVuZGxlQXNzZXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9hc3NldHNJbkJ1bmRsZXNbYXNzZXRJZF0pIHtcbiAgICAgICAgICAgIHRoaXMuX2Fzc2V0c0luQnVuZGxlc1thc3NldElkXSA9IFtidW5kbGVBc3NldF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBidW5kbGVzID0gdGhpcy5fYXNzZXRzSW5CdW5kbGVzW2Fzc2V0SWRdO1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gYnVuZGxlcy5pbmRleE9mKGJ1bmRsZUFzc2V0KTtcbiAgICAgICAgICAgIGlmIChpZHggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgYnVuZGxlcy5wdXNoKGJ1bmRsZUFzc2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFzc2V0ID0gdGhpcy5fYXNzZXRzLmdldChhc3NldElkKTtcbiAgICAgICAgaWYgKGFzc2V0KSB7XG4gICAgICAgICAgICB0aGlzLl9pbmRleEFzc2V0RmlsZVVybHMoYXNzZXQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gSW5kZXggdGhlIGZpbGUgVVJMcyBvZiB0aGUgc3BlY2lmaWVkIGFzc2V0XG4gICAgX2luZGV4QXNzZXRGaWxlVXJscyhhc3NldCkge1xuICAgICAgICBjb25zdCB1cmxzID0gdGhpcy5fZ2V0QXNzZXRGaWxlVXJscyhhc3NldCk7XG4gICAgICAgIGlmICghdXJscykgcmV0dXJuO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB1cmxzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB1cmwgPSB1cmxzW2ldO1xuICAgICAgICAgICAgLy8gSnVzdCBzZXQgdGhlIFVSTCB0byBwb2ludCB0byB0aGUgc2FtZSBidW5kbGVzIGFzIHRoZSBhc3NldCBkb2VzLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHBlcmZvcm1hbmNlL21lbW9yeSBvcHRpbWl6YXRpb24gYW5kIGl0IGFzc3VtZXMgdGhhdFxuICAgICAgICAgICAgLy8gdGhlIFVSTCB3aWxsIG5vdCBleGlzdCBpbiBhbnkgb3RoZXIgYXNzZXQuIElmIHRoYXQgZG9lcyBoYXBwZW4gdGhlblxuICAgICAgICAgICAgLy8gdGhpcyB3aWxsIG5vdCB3b3JrIGFzIGV4cGVjdGVkIGlmIHRoZSBhc3NldCBpcyByZW1vdmVkLCBhcyB0aGUgVVJMIHdpbGxcbiAgICAgICAgICAgIC8vIGJlIHJlbW92ZWQgdG9vLlxuICAgICAgICAgICAgdGhpcy5fdXJsc0luQnVuZGxlc1t1cmxdID0gdGhpcy5fYXNzZXRzSW5CdW5kbGVzW2Fzc2V0LmlkXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdldCBhbGwgdGhlIHBvc3NpYmxlIFVSTHMgb2YgYW4gYXNzZXRcbiAgICBfZ2V0QXNzZXRGaWxlVXJscyhhc3NldCkge1xuICAgICAgICBsZXQgdXJsID0gYXNzZXQuZ2V0RmlsZVVybCgpO1xuICAgICAgICBpZiAoIXVybCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgdXJsID0gdGhpcy5fbm9ybWFsaXplVXJsKHVybCk7XG4gICAgICAgIGNvbnN0IHVybHMgPSBbdXJsXTtcblxuICAgICAgICAvLyBhIGZvbnQgbWlnaHQgaGF2ZSBhZGRpdGlvbmFsIGZpbGVzXG4gICAgICAgIC8vIHNvIGFkZCB0aGVtIGluIHRoZSBsaXN0XG4gICAgICAgIGlmIChhc3NldC50eXBlID09PSAnZm9udCcpIHtcbiAgICAgICAgICAgIGNvbnN0IG51bUZpbGVzID0gYXNzZXQuZGF0YS5pbmZvLm1hcHMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBudW1GaWxlczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdXJscy5wdXNoKHVybC5yZXBsYWNlKCcucG5nJywgaSArICcucG5nJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVybHM7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlcyBxdWVyeSBwYXJhbWV0ZXJzIGZyb20gYSBVUkxcbiAgICBfbm9ybWFsaXplVXJsKHVybCkge1xuICAgICAgICByZXR1cm4gdXJsICYmIHVybC5zcGxpdCgnPycpWzBdO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBhc3NldCBmcm9tIGludGVybmFsIGluZGV4ZXNcbiAgICBfb25Bc3NldFJlbW92ZWQoYXNzZXQpIHtcbiAgICAgICAgaWYgKGFzc2V0LnR5cGUgPT09ICdidW5kbGUnKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgYnVuZGxlIGZyb20gaW5kZXhcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9idW5kbGVBc3NldHNbYXNzZXQuaWRdO1xuXG4gICAgICAgICAgICAvLyByZW1vdmUgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgICAgICB0aGlzLl91bnJlZ2lzdGVyQnVuZGxlRXZlbnRMaXN0ZW5lcnMoYXNzZXQuaWQpO1xuXG4gICAgICAgICAgICAvLyByZW1vdmUgYnVuZGxlIGZyb20gX2Fzc2V0c0luQnVuZGxlcyBhbmQgX3VybEluQnVuZGxlcyBpbmRleGVzXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlkIGluIHRoaXMuX2Fzc2V0c0luQnVuZGxlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5ID0gdGhpcy5fYXNzZXRzSW5CdW5kbGVzW2lkXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpZHggPSBhcnJheS5pbmRleE9mKGFzc2V0KTtcbiAgICAgICAgICAgICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBhcnJheS5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9hc3NldHNJbkJ1bmRsZXNbaWRdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgd2UgZG8gbm90IGxlYXZlIHRoYXQgYXJyYXkgaW5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFueSBfdXJsSW5CdW5kbGVzIGVudHJpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdXJsIGluIHRoaXMuX3VybHNJbkJ1bmRsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fdXJsc0luQnVuZGxlc1t1cmxdID09PSBhcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fdXJsc0luQnVuZGxlc1t1cmxdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZmFpbCBhbnkgcGVuZGluZyByZXF1ZXN0cyBmb3IgdGhpcyBidW5kbGVcbiAgICAgICAgICAgIHRoaXMuX29uQnVuZGxlRXJyb3IoYEJ1bmRsZSAke2Fzc2V0LmlkfSB3YXMgcmVtb3ZlZGAsIGFzc2V0KTtcblxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2Fzc2V0c0luQnVuZGxlc1thc3NldC5pZF0pIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBhc3NldCBmcm9tIF9hc3NldEluQnVuZGxlc1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2Fzc2V0c0luQnVuZGxlc1thc3NldC5pZF07XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSBhc3NldCB1cmxzIGZyb20gX3VybHNJbkJ1bmRsZXNcbiAgICAgICAgICAgIGNvbnN0IHVybHMgPSB0aGlzLl9nZXRBc3NldEZpbGVVcmxzKGFzc2V0KTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB1cmxzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3VybHNJbkJ1bmRsZXNbdXJsc1tpXV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBoYXZlIGFueSBwZW5kaW5nIGZpbGUgcmVxdWVzdHNcbiAgICAvLyB0aGF0IGNhbiBiZSBzYXRpc2ZpZWQgYnkgdGhlIHNwZWNpZmllZCBidW5kbGVcbiAgICAvLyB0aGVuIHJlc29sdmUgdGhlbVxuICAgIF9vbkJ1bmRsZUxvYWRlZChidW5kbGVBc3NldCkge1xuICAgICAgICAvLyB0aGlzIGNhbiBoYXBwZW4gaWYgdGhlIGJ1bmRsZUFzc2V0IGZhaWxlZFxuICAgICAgICAvLyB0byBjcmVhdGUgaXRzIHJlc291cmNlXG4gICAgICAgIGlmICghYnVuZGxlQXNzZXQucmVzb3VyY2UpIHtcbiAgICAgICAgICAgIHRoaXMuX29uQnVuZGxlRXJyb3IoYEJ1bmRsZSAke2J1bmRsZUFzc2V0LmlkfSBmYWlsZWQgdG8gbG9hZGAsIGJ1bmRsZUFzc2V0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG9uIG5leHQgdGljayByZXNvbHZlIHRoZSBwZW5kaW5nIGFzc2V0IHJlcXVlc3RzXG4gICAgICAgIC8vIGRvbid0IGRvIGl0IG9uIHRoZSBzYW1lIHRpY2sgYmVjYXVzZSB0aGF0IHRpZXMgdGhlIGxvYWRpbmdcbiAgICAgICAgLy8gb2YgdGhlIGJ1bmRsZSB0byB0aGUgbG9hZGluZyBvZiBhbGwgdGhlIGFzc2V0c1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSByZWdpc3RyeSBoYXNuJ3QgYmVlbiBkZXN0cm95ZWQgYWxyZWFkeVxuICAgICAgICAgICAgaWYgKCF0aGlzLl9maWxlUmVxdWVzdHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgdXJsIGluIHRoaXMuX2ZpbGVSZXF1ZXN0cykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1bmRsZXMgPSB0aGlzLl91cmxzSW5CdW5kbGVzW3VybF07XG4gICAgICAgICAgICAgICAgaWYgKCFidW5kbGVzIHx8IGJ1bmRsZXMuaW5kZXhPZihidW5kbGVBc3NldCkgPT09IC0xKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZWRVcmwgPSBkZWNvZGVVUklDb21wb25lbnQodXJsKTtcbiAgICAgICAgICAgICAgICBsZXQgZXJyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoIWJ1bmRsZUFzc2V0LnJlc291cmNlLmhhc0Jsb2JVcmwoZGVjb2RlZFVybCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyID0gYEJ1bmRsZSAke2J1bmRsZUFzc2V0LmlkfSBkb2VzIG5vdCBjb250YWluIFVSTCAke3VybH1gO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RzID0gdGhpcy5fZmlsZVJlcXVlc3RzW3VybF07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHJlcXVlc3RzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RzW2ldKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0c1tpXShudWxsLCBidW5kbGVBc3NldC5yZXNvdXJjZS5nZXRCbG9iVXJsKGRlY29kZWRVcmwpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9maWxlUmVxdWVzdHNbdXJsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgaGF2ZSBvdXRzdGFuZGluZyBmaWxlIHJlcXVlc3RzIGZvciBhbnlcbiAgICAvLyBvZiB0aGUgVVJMcyBpbiB0aGUgc3BlY2lmaWVkIGJ1bmRsZSB0aGVuIHNlYXJjaCBmb3JcbiAgICAvLyBvdGhlciBidW5kbGVzIHRoYXQgY2FuIHNhdGlzZnkgdGhlc2UgcmVxdWVzdHMuXG4gICAgLy8gSWYgd2UgZG8gbm90IGZpbmQgYW55IG90aGVyIGJ1bmRsZXMgdGhlbiBmYWlsXG4gICAgLy8gdGhvc2UgcGVuZGluZyBmaWxlIHJlcXVlc3RzIHdpdGggdGhlIHNwZWNpZmllZCBlcnJvci5cbiAgICBfb25CdW5kbGVFcnJvcihlcnIsIGJ1bmRsZUFzc2V0KSB7XG4gICAgICAgIGZvciAoY29uc3QgdXJsIGluIHRoaXMuX2ZpbGVSZXF1ZXN0cykge1xuICAgICAgICAgICAgY29uc3QgYnVuZGxlID0gdGhpcy5fZmluZExvYWRlZE9yTG9hZGluZ0J1bmRsZUZvclVybCh1cmwpO1xuICAgICAgICAgICAgaWYgKCFidW5kbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0cyA9IHRoaXMuX2ZpbGVSZXF1ZXN0c1t1cmxdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSByZXF1ZXN0cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0c1tpXShlcnIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9maWxlUmVxdWVzdHNbdXJsXTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmluZHMgYSBidW5kbGUgdGhhdCBjb250YWlucyB0aGUgc3BlY2lmaWVkIFVSTCBidXRcbiAgICAvLyBvbmx5IHJldHVybnMgdGhlIGJ1bmRsZSBpZiBpdCdzIGVpdGhlciBsb2FkZWQgb3IgYmVpbmcgbG9hZGVkXG4gICAgX2ZpbmRMb2FkZWRPckxvYWRpbmdCdW5kbGVGb3JVcmwodXJsKSB7XG4gICAgICAgIGNvbnN0IGJ1bmRsZXMgPSB0aGlzLl91cmxzSW5CdW5kbGVzW3VybF07XG4gICAgICAgIGlmICghYnVuZGxlcykgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgLy8gbG9vayBmb3IgbG9hZGVkIGJ1bmRsZSBmaXJzdC4uLlxuICAgICAgICBjb25zdCBsZW4gPSBidW5kbGVzLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgLy8gJ2xvYWRlZCcgY2FuIGJlIHRydWUgYnV0IGlmIHRoZXJlIHdhcyBhbiBlcnJvclxuICAgICAgICAgICAgLy8gdGhlbiAncmVzb3VyY2UnIHdvdWxkIGJlIG51bGxcbiAgICAgICAgICAgIGlmIChidW5kbGVzW2ldLmxvYWRlZCAmJiBidW5kbGVzW2ldLnJlc291cmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1bmRsZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyAuLi50aGVuIGxvb2sgZm9yIGxvYWRpbmcgYnVuZGxlc1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYnVuZGxlc1tpXS5sb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1bmRsZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXN0cyBhbGwgb2YgdGhlIGF2YWlsYWJsZSBidW5kbGVzIHRoYXQgcmVmZXJlbmNlIHRoZSBzcGVjaWZpZWQgYXNzZXQgaWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vYXNzZXQvYXNzZXQuanMnKS5Bc3NldH0gYXNzZXQgLSBUaGUgYXNzZXQuXG4gICAgICogQHJldHVybnMge2ltcG9ydCgnLi4vYXNzZXQvYXNzZXQuanMnKS5Bc3NldFtdfSBBbiBhcnJheSBvZiBidW5kbGUgYXNzZXRzIG9yIG51bGwgaWYgdGhlXG4gICAgICogYXNzZXQgaXMgbm90IGluIGFueSBidW5kbGUuXG4gICAgICovXG4gICAgbGlzdEJ1bmRsZXNGb3JBc3NldChhc3NldCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXNzZXRzSW5CdW5kbGVzW2Fzc2V0LmlkXSB8fCBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpc3RzIGFsbCBvZiB0aGUgYXZhaWxhYmxlIGJ1bmRsZXMuIFRoaXMgaW5jbHVkZXMgYnVuZGxlcyB0aGF0IGFyZSBub3QgbG9hZGVkLlxuICAgICAqXG4gICAgICogQHJldHVybnMge2ltcG9ydCgnLi4vYXNzZXQvYXNzZXQuanMnKS5Bc3NldFtdfSBBbiBhcnJheSBvZiBidW5kbGUgYXNzZXRzLlxuICAgICAqL1xuICAgIGxpc3QoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGlkIGluIHRoaXMuX2J1bmRsZUFzc2V0cykge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5fYnVuZGxlQXNzZXRzW2lkXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSBpcyBhIGJ1bmRsZSB0aGF0IGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgVVJMLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFRoZSB1cmwuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgb3IgZmFsc2UuXG4gICAgICovXG4gICAgaGFzVXJsKHVybCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl91cmxzSW5CdW5kbGVzW3VybF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZXJlIGlzIGEgYnVuZGxlIHRoYXQgY29udGFpbnMgdGhlIHNwZWNpZmllZCBVUkwgYW5kIHRoYXQgYnVuZGxlIGlzIGVpdGhlclxuICAgICAqIGxvYWRlZCBvciBjdXJyZW50bHkgYmVpbmcgbG9hZGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFRoZSB1cmwuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgb3IgZmFsc2UuXG4gICAgICovXG4gICAgY2FuTG9hZFVybCh1cmwpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZmluZExvYWRlZE9yTG9hZGluZ0J1bmRsZUZvclVybCh1cmwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSBzcGVjaWZpZWQgZmlsZSBVUkwgZnJvbSBhIGJ1bmRsZSB0aGF0IGlzIGVpdGhlciBsb2FkZWQgb3IgY3VycmVudGx5IGJlaW5nIGxvYWRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBUaGUgVVJMLiBNYWtlIHN1cmUgeW91IGFyZSB1c2luZyBhIHJlbGF0aXZlIFVSTCB0aGF0IGRvZXMgbm90IGNvbnRhaW5cbiAgICAgKiBhbnkgcXVlcnkgcGFyYW1ldGVycy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgZmlsZSBoYXMgYmVlbiBsb2FkZWQgb3IgaWYgYW5cbiAgICAgKiBlcnJvciBvY2N1cnMuIFRoZSBjYWxsYmFjayBleHBlY3RzIHRoZSBmaXJzdCBhcmd1bWVudCB0byBiZSB0aGUgZXJyb3IgbWVzc2FnZSAoaWYgYW55KSBhbmRcbiAgICAgKiB0aGUgc2Vjb25kIGFyZ3VtZW50IGlzIHRoZSBmaWxlIGJsb2IgVVJMLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogdmFyIHVybCA9IGFzc2V0LmdldEZpbGVVcmwoKS5zcGxpdCgnPycpWzBdOyAvLyBnZXQgbm9ybWFsaXplZCBhc3NldCBVUkxcbiAgICAgKiB0aGlzLmFwcC5idW5kbGVzLmxvYWRGaWxlKHVybCwgZnVuY3Rpb24gKGVyciwgYmxvYlVybCkge1xuICAgICAqICAgICAvLyBkbyBzb21ldGhpbmcgd2l0aCB0aGUgYmxvYiBVUkxcbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICBsb2FkVXJsKHVybCwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgYnVuZGxlID0gdGhpcy5fZmluZExvYWRlZE9yTG9hZGluZ0J1bmRsZUZvclVybCh1cmwpO1xuICAgICAgICBpZiAoIWJ1bmRsZSkge1xuICAgICAgICAgICAgY2FsbGJhY2soYFVSTCAke3VybH0gbm90IGZvdW5kIGluIGFueSBidW5kbGVzYCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPbmx5IGxvYWQgZmlsZXMgZnJvbSBidW5kbGVzIHRoYXQncmUgZXhwbGljaXRseSByZXF1ZXN0ZWQgdG8gYmUgbG9hZGVkLlxuICAgICAgICBpZiAoYnVuZGxlLmxvYWRlZCkge1xuICAgICAgICAgICAgY29uc3QgZGVjb2RlZFVybCA9IGRlY29kZVVSSUNvbXBvbmVudCh1cmwpO1xuICAgICAgICAgICAgaWYgKCFidW5kbGUucmVzb3VyY2UuaGFzQmxvYlVybChkZWNvZGVkVXJsKSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGBCdW5kbGUgJHtidW5kbGUuaWR9IGRvZXMgbm90IGNvbnRhaW4gVVJMICR7dXJsfWApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgYnVuZGxlLnJlc291cmNlLmdldEJsb2JVcmwoZGVjb2RlZFVybCkpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2ZpbGVSZXF1ZXN0cy5oYXNPd25Qcm9wZXJ0eSh1cmwpKSB7XG4gICAgICAgICAgICB0aGlzLl9maWxlUmVxdWVzdHNbdXJsXS5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2ZpbGVSZXF1ZXN0c1t1cmxdID0gW2NhbGxiYWNrXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3lzIHRoZSByZWdpc3RyeSwgYW5kIHJlbGVhc2VzIGl0cyByZXNvdXJjZXMuIERvZXMgbm90IHVubG9hZCBidW5kbGUgYXNzZXRzIGFzIHRoZXNlXG4gICAgICogc2hvdWxkIGJlIHVubG9hZGVkIGJ5IHRoZSB7QGxpbmsgQXNzZXRSZWdpc3RyeX0uXG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fYXNzZXRzLm9mZignYWRkJywgdGhpcy5fb25Bc3NldEFkZGVkLCB0aGlzKTtcbiAgICAgICAgdGhpcy5fYXNzZXRzLm9mZigncmVtb3ZlJywgdGhpcy5fb25Bc3NldFJlbW92ZWQsIHRoaXMpO1xuXG4gICAgICAgIGZvciAoY29uc3QgaWQgaW4gdGhpcy5fYnVuZGxlQXNzZXRzKSB7XG4gICAgICAgICAgICB0aGlzLl91bnJlZ2lzdGVyQnVuZGxlRXZlbnRMaXN0ZW5lcnMoaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fYXNzZXRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYnVuZGxlQXNzZXRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYXNzZXRzSW5CdW5kbGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdXJsc0luQnVuZGxlcyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2ZpbGVSZXF1ZXN0cyA9IG51bGw7XG4gICAgfVxufVxuXG5leHBvcnQgeyBCdW5kbGVSZWdpc3RyeSB9O1xuIl0sIm5hbWVzIjpbIkJ1bmRsZVJlZ2lzdHJ5IiwiY29uc3RydWN0b3IiLCJhc3NldHMiLCJfYXNzZXRzIiwiX2J1bmRsZUFzc2V0cyIsIl9hc3NldHNJbkJ1bmRsZXMiLCJfdXJsc0luQnVuZGxlcyIsIl9maWxlUmVxdWVzdHMiLCJvbiIsIl9vbkFzc2V0QWRkZWQiLCJfb25Bc3NldFJlbW92ZWQiLCJhc3NldCIsInR5cGUiLCJpZCIsIl9yZWdpc3RlckJ1bmRsZUV2ZW50TGlzdGVuZXJzIiwiaSIsImxlbiIsImRhdGEiLCJsZW5ndGgiLCJfaW5kZXhBc3NldEluQnVuZGxlIiwiX2luZGV4QXNzZXRGaWxlVXJscyIsImJ1bmRsZUFzc2V0SWQiLCJfb25CdW5kbGVMb2FkZWQiLCJfb25CdW5kbGVFcnJvciIsIl91bnJlZ2lzdGVyQnVuZGxlRXZlbnRMaXN0ZW5lcnMiLCJvZmYiLCJhc3NldElkIiwiYnVuZGxlQXNzZXQiLCJidW5kbGVzIiwiaWR4IiwiaW5kZXhPZiIsInB1c2giLCJnZXQiLCJ1cmxzIiwiX2dldEFzc2V0RmlsZVVybHMiLCJ1cmwiLCJnZXRGaWxlVXJsIiwiX25vcm1hbGl6ZVVybCIsIm51bUZpbGVzIiwiaW5mbyIsIm1hcHMiLCJyZXBsYWNlIiwic3BsaXQiLCJhcnJheSIsInNwbGljZSIsInJlc291cmNlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZGVjb2RlZFVybCIsImRlY29kZVVSSUNvbXBvbmVudCIsImVyciIsImhhc0Jsb2JVcmwiLCJyZXF1ZXN0cyIsImdldEJsb2JVcmwiLCJidW5kbGUiLCJfZmluZExvYWRlZE9yTG9hZGluZ0J1bmRsZUZvclVybCIsImxvYWRlZCIsImxvYWRpbmciLCJsaXN0QnVuZGxlc0ZvckFzc2V0IiwibGlzdCIsInJlc3VsdCIsImhhc1VybCIsImNhbkxvYWRVcmwiLCJsb2FkVXJsIiwiY2FsbGJhY2siLCJoYXNPd25Qcm9wZXJ0eSIsImRlc3Ryb3kiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1BLGNBQWMsQ0FBQztBQUNqQjtBQUNKO0FBQ0E7QUFDQTtBQUNBO0VBQ0lDLFdBQVcsQ0FBQ0MsTUFBTSxFQUFFO0lBQ2hCLElBQUksQ0FBQ0MsT0FBTyxHQUFHRCxNQUFNLENBQUE7O0FBRXJCO0FBQ0EsSUFBQSxJQUFJLENBQUNFLGFBQWEsR0FBRyxFQUFFLENBQUE7QUFDdkI7QUFDQSxJQUFBLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUcsRUFBRSxDQUFBO0FBQzFCO0FBQ0EsSUFBQSxJQUFJLENBQUNDLGNBQWMsR0FBRyxFQUFFLENBQUE7QUFDeEI7QUFDQSxJQUFBLElBQUksQ0FBQ0MsYUFBYSxHQUFHLEVBQUUsQ0FBQTtBQUV2QixJQUFBLElBQUksQ0FBQ0osT0FBTyxDQUFDSyxFQUFFLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQ0MsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFBO0FBQ2hELElBQUEsSUFBSSxDQUFDTixPQUFPLENBQUNLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDRSxlQUFlLEVBQUUsSUFBSSxDQUFDLENBQUE7QUFDekQsR0FBQTs7QUFFQTtFQUNBRCxhQUFhLENBQUNFLEtBQUssRUFBRTtBQUNqQjtBQUNBO0FBQ0EsSUFBQSxJQUFJQSxLQUFLLENBQUNDLElBQUksS0FBSyxRQUFRLEVBQUU7TUFDekIsSUFBSSxDQUFDUixhQUFhLENBQUNPLEtBQUssQ0FBQ0UsRUFBRSxDQUFDLEdBQUdGLEtBQUssQ0FBQTtBQUVwQyxNQUFBLElBQUksQ0FBQ0csNkJBQTZCLENBQUNILEtBQUssQ0FBQ0UsRUFBRSxDQUFDLENB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
