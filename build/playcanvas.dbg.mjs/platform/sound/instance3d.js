/**
 * @license
 * PlayCanvas Engine v1.58.0-preview revision 1fec26519 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../../core/debug.js';
import { math } from '../../core/math/math.js';
import { Vec3 } from '../../core/math/vec3.js';
import { DISTANCE_LINEAR, DISTANCE_INVERSE, DISTANCE_EXPONENTIAL } from '../audio/constants.js';
import { hasAudioContext } from '../audio/capabilities.js';
import { SoundInstance } from './instance.js';

const MAX_DISTANCE = 10000;

class SoundInstance3d extends SoundInstance {

  constructor(manager, sound, options = {}) {
    super(manager, sound, options);
    this._position = new Vec3();
    this._velocity = new Vec3();
    if (options.position) this.position = options.position;
    this.maxDistance = options.maxDistance !== undefined ? Number(options.maxDistance) : MAX_DISTANCE;
    this.refDistance = options.refDistance !== undefined ? Number(options.refDistance) : 1;
    this.rollOffFactor = options.rollOffFactor !== undefined ? Number(options.rollOffFactor) : 1;
    this.distanceModel = options.distanceModel !== undefined ? options.distanceModel : DISTANCE_LINEAR;
  }

  _initializeNodes() {
    this.gain = this._manager.context.createGain();
    this.panner = this._manager.context.createPanner();
    this.panner.connect(this.gain);
    this._inputNode = this.panner;
    this._connectorNode = this.gain;
    this._connectorNode.connect(this._manager.context.destination);
  }

  set position(value) {
    this._position.copy(value);
    const panner = this.panner;
    if ('positionX' in panner) {
      panner.positionX.value = value.x;
      panner.positionY.value = value.y;
      panner.positionZ.value = value.z;
    } else if (panner.setPosition) {
      panner.setPosition(value.x, value.y, value.z);
    }
  }
  get position() {
    return this._position;
  }

  set velocity(velocity) {
    Debug.warn('SoundInstance3d#velocity is not implemented.');
    this._velocity.copy(velocity);
  }
  get velocity() {
    Debug.warn('SoundInstance3d#velocity is not implemented.');
    return this._velocity;
  }

  set maxDistance(value) {
    this.panner.maxDistance = value;
  }
  get maxDistance() {
    return this.panner.maxDistance;
  }

  set refDistance(value) {
    this.panner.refDistance = value;
  }
  get refDistance() {
    return this.panner.refDistance;
  }

  set rollOffFactor(value) {
    this.panner.rolloffFactor = value;
  }
  get rollOffFactor() {
    return this.panner.rolloffFactor;
  }

  set distanceModel(value) {
    this.panner.distanceModel = value;
  }
  get distanceModel() {
    return this.panner.distanceModel;
  }
}
if (!hasAudioContext()) {
  let offset = new Vec3();

  const fallOff = function fallOff(posOne, posTwo, refDistance, maxDistance, rollOffFactor, distanceModel) {
    offset = offset.sub2(posOne, posTwo);
    const distance = offset.length();
    if (distance < refDistance) {
      return 1;
    } else if (distance > maxDistance) {
      return 0;
    }
    let result = 0;
    if (distanceModel === DISTANCE_LINEAR) {
      result = 1 - rollOffFactor * (distance - refDistance) / (maxDistance - refDistance);
    } else if (distanceModel === DISTANCE_INVERSE) {
      result = refDistance / (refDistance + rollOffFactor * (distance - refDistance));
    } else if (distanceModel === DISTANCE_EXPONENTIAL) {
      result = Math.pow(distance / refDistance, -rollOffFactor);
    }
    return math.clamp(result, 0, 1);
  };
  Object.defineProperty(SoundInstance3d.prototype, 'position', {
    get: function () {
      return this._position;
    },
    set: function (position) {
      this._position.copy(position);
      if (this.source) {
        const listener = this._manager.listener;
        const lpos = listener.getPosition();
        const factor = fallOff(lpos, this._position, this.refDistance, this.maxDistance, this.rollOffFactor, this.distanceModel);
        const v = this.volume;
        this.source.volume = v * factor * this._manager.volume;
      }
    }
  });
  Object.defineProperty(SoundInstance3d.prototype, 'maxDistance', {
    get: function () {
      return this._maxDistance;
    },
    set: function (value) {
      this._maxDistance = value;
    }
  });
  Object.defineProperty(SoundInstance3d.prototype, 'refDistance', {
    get: function () {
      return this._refDistance;
    },
    set: function (value) {
      this._refDistance = value;
    }
  });
  Object.defineProperty(SoundInstance3d.prototype, 'rollOffFactor', {
    get: function () {
      return this._rollOffFactor;
    },
    set: function (value) {
      this._rollOffFactor = value;
    }
  });
  Object.defineProperty(SoundInstance3d.prototype, 'distanceModel', {
    get: function () {
      return this._distanceModel;
    },
    set: function (value) {
      this._distanceModel = value;
    }
  });
}

export { SoundInstance3d };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5zdGFuY2UzZC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL3BsYXRmb3JtL3NvdW5kL2luc3RhbmNlM2QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVidWcgfSBmcm9tICcuLi8uLi9jb3JlL2RlYnVnLmpzJztcblxuaW1wb3J0IHsgbWF0aCB9IGZyb20gJy4uLy4uL2NvcmUvbWF0aC9tYXRoLmpzJztcbmltcG9ydCB7IFZlYzMgfSBmcm9tICcuLi8uLi9jb3JlL21hdGgvdmVjMy5qcyc7XG5cbmltcG9ydCB7IERJU1RBTkNFX0VYUE9ORU5USUFMLCBESVNUQU5DRV9JTlZFUlNFLCBESVNUQU5DRV9MSU5FQVIgfSBmcm9tICcuLi9hdWRpby9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgaGFzQXVkaW9Db250ZXh0IH0gZnJvbSAnLi4vYXVkaW8vY2FwYWJpbGl0aWVzLmpzJztcblxuaW1wb3J0IHsgU291bmRJbnN0YW5jZSB9IGZyb20gJy4vaW5zdGFuY2UuanMnO1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9zb3VuZC5qcycpLlNvdW5kfSBTb3VuZCAqL1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vbWFuYWdlci5qcycpLlNvdW5kTWFuYWdlcn0gU291bmRNYW5hZ2VyICovXG5cbi8vIGRlZmF1bHQgbWF4RGlzdGFuY2UsIHNhbWUgYXMgV2ViIEF1ZGlvIEFQSVxuY29uc3QgTUFYX0RJU1RBTkNFID0gMTAwMDA7XG5cbi8qKlxuICogQSBTb3VuZEluc3RhbmNlM2QgcGxheXMgYSB7QGxpbmsgU291bmR9IGluIDNELlxuICpcbiAqIEBhdWdtZW50cyBTb3VuZEluc3RhbmNlXG4gKi9cbmNsYXNzIFNvdW5kSW5zdGFuY2UzZCBleHRlbmRzIFNvdW5kSW5zdGFuY2Uge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtWZWMzfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3Bvc2l0aW9uID0gbmV3IFZlYzMoKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtWZWMzfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3ZlbG9jaXR5ID0gbmV3IFZlYzMoKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBTb3VuZEluc3RhbmNlM2QgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1NvdW5kTWFuYWdlcn0gbWFuYWdlciAtIFRoZSBzb3VuZCBtYW5hZ2VyLlxuICAgICAqIEBwYXJhbSB7U291bmR9IHNvdW5kIC0gVGhlIHNvdW5kIHRvIHBsYXkuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnZvbHVtZT0xXSAtIFRoZSBwbGF5YmFjayB2b2x1bWUsIGJldHdlZW4gMCBhbmQgMS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucGl0Y2g9MV0gLSBUaGUgcmVsYXRpdmUgcGl0Y2gsIGRlZmF1bHQgb2YgMSwgcGxheXMgYXQgbm9ybWFsIHBpdGNoLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubG9vcD1mYWxzZV0gLSBXaGV0aGVyIHRoZSBzb3VuZCBzaG91bGQgbG9vcCB3aGVuIGl0IHJlYWNoZXMgdGhlXG4gICAgICogZW5kIG9yIG5vdC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuc3RhcnRUaW1lPTBdIC0gVGhlIHRpbWUgZnJvbSB3aGljaCB0aGUgcGxheWJhY2sgd2lsbCBzdGFydC4gRGVmYXVsdFxuICAgICAqIGlzIDAgdG8gc3RhcnQgYXQgdGhlIGJlZ2lubmluZy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuZHVyYXRpb249bnVsbF0gLSBUaGUgdG90YWwgdGltZSBhZnRlciB0aGUgc3RhcnRUaW1lIHdoZW4gcGxheWJhY2tcbiAgICAgKiB3aWxsIHN0b3Agb3IgcmVzdGFydCBpZiBsb29wIGlzIHRydWUuXG4gICAgICogQHBhcmFtIHtWZWMzfSBbb3B0aW9ucy5wb3NpdGlvbj1udWxsXSAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgc291bmQgaW4gM0Qgc3BhY2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmRpc3RhbmNlTW9kZWw9RElTVEFOQ0VfTElORUFSXSAtIERldGVybWluZXMgd2hpY2ggYWxnb3JpdGhtIHRvIHVzZVxuICAgICAqIHRvIHJlZHVjZSB0aGUgdm9sdW1lIG9mIHRoZSBhdWRpbyBhcyBpdCBtb3ZlcyBhd2F5IGZyb20gdGhlIGxpc3RlbmVyLiBDYW4gYmU6XG4gICAgICpcbiAgICAgKiAtIHtAbGluayBESVNUQU5DRV9MSU5FQVJ9XG4gICAgICogLSB7QGxpbmsgRElTVEFOQ0VfSU5WRVJTRX1cbiAgICAgKiAtIHtAbGluayBESVNUQU5DRV9FWFBPTkVOVElBTH1cbiAgICAgKlxuICAgICAqIERlZmF1bHQgaXMge0BsaW5rIERJU1RBTkNFX0xJTkVBUn0uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnJlZkRpc3RhbmNlPTFdIC0gVGhlIHJlZmVyZW5jZSBkaXN0YW5jZSBmb3IgcmVkdWNpbmcgdm9sdW1lIGFzIHRoZVxuICAgICAqIHNvdW5kIHNvdXJjZSBtb3ZlcyBmdXJ0aGVyIGZyb20gdGhlIGxpc3RlbmVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhEaXN0YW5jZT0xMDAwMF0gLSBUaGUgbWF4aW11bSBkaXN0YW5jZSBmcm9tIHRoZSBsaXN0ZW5lciBhdCB3aGljaFxuICAgICAqIGF1ZGlvIGZhbGxvZmYgc3RvcHMuIE5vdGUgdGhlIHZvbHVtZSBvZiB0aGUgYXVkaW8gaXMgbm90IDAgYWZ0ZXIgdGhpcyBkaXN0YW5jZSwgYnV0IGp1c3RcbiAgICAgKiBkb2Vzbid0IGZhbGwgb2ZmIGFueW1vcmUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnJvbGxPZmZGYWN0b3I9MV0gLSBUaGUgZmFjdG9yIHVzZWQgaW4gdGhlIGZhbGxvZmYgZXF1YXRpb24uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobWFuYWdlciwgc291bmQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcihtYW5hZ2VyLCBzb3VuZCwgb3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gb3B0aW9ucy5wb3NpdGlvbjtcblxuICAgICAgICB0aGlzLm1heERpc3RhbmNlID0gb3B0aW9ucy5tYXhEaXN0YW5jZSAhPT0gdW5kZWZpbmVkID8gTnVtYmVyKG9wdGlvbnMubWF4RGlzdGFuY2UpIDogTUFYX0RJU1RBTkNFO1xuICAgICAgICB0aGlzLnJlZkRpc3RhbmNlID0gb3B0aW9ucy5yZWZEaXN0YW5jZSAhPT0gdW5kZWZpbmVkID8gTnVtYmVyKG9wdGlvbnMucmVmRGlzdGFuY2UpIDogMTtcbiAgICAgICAgdGhpcy5yb2xsT2ZmRmFjdG9yID0gb3B0aW9ucy5yb2xsT2ZmRmFjdG9yICE9PSB1bmRlZmluZWQgPyBOdW1iZXIob3B0aW9ucy5yb2xsT2ZmRmFjdG9yKSA6IDE7XG4gICAgICAgIHRoaXMuZGlzdGFuY2VNb2RlbCA9IG9wdGlvbnMuZGlzdGFuY2VNb2RlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kaXN0YW5jZU1vZGVsIDogRElTVEFOQ0VfTElORUFSO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFsbG9jYXRlIFdlYiBBdWRpbyByZXNvdXJjZXMgZm9yIHRoaXMgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9pbml0aWFsaXplTm9kZXMoKSB7XG4gICAgICAgIHRoaXMuZ2FpbiA9IHRoaXMuX21hbmFnZXIuY29udGV4dC5jcmVhdGVHYWluKCk7XG4gICAgICAgIHRoaXMucGFubmVyID0gdGhpcy5fbWFuYWdlci5jb250ZXh0LmNyZWF0ZVBhbm5lcigpO1xuICAgICAgICB0aGlzLnBhbm5lci5jb25uZWN0KHRoaXMuZ2Fpbik7XG4gICAgICAgIHRoaXMuX2lucHV0Tm9kZSA9IHRoaXMucGFubmVyO1xuICAgICAgICB0aGlzLl9jb25uZWN0b3JOb2RlID0gdGhpcy5nYWluO1xuICAgICAgICB0aGlzLl9jb25uZWN0b3JOb2RlLmNvbm5lY3QodGhpcy5fbWFuYWdlci5jb250ZXh0LmRlc3RpbmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcG9zaXRpb24gb2YgdGhlIHNvdW5kIGluIDNEIHNwYWNlLlxuICAgICAqXG4gICAgICogQHR5cGUge1ZlYzN9XG4gICAgICovXG4gICAgc2V0IHBvc2l0aW9uKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uLmNvcHkodmFsdWUpO1xuICAgICAgICBjb25zdCBwYW5uZXIgPSB0aGlzLnBhbm5lcjtcbiAgICAgICAgaWYgKCdwb3NpdGlvblgnIGluIHBhbm5lcikge1xuICAgICAgICAgICAgcGFubmVyLnBvc2l0aW9uWC52YWx1ZSA9IHZhbHVlLng7XG4gICAgICAgICAgICBwYW5uZXIucG9zaXRpb25ZLnZhbHVlID0gdmFsdWUueTtcbiAgICAgICAgICAgIHBhbm5lci5wb3NpdGlvbloudmFsdWUgPSB2YWx1ZS56O1xuICAgICAgICB9IGVsc2UgaWYgKHBhbm5lci5zZXRQb3NpdGlvbikgeyAvLyBGaXJlZm94IChhbmQgbGVnYWN5IGJyb3dzZXJzKVxuICAgICAgICAgICAgcGFubmVyLnNldFBvc2l0aW9uKHZhbHVlLngsIHZhbHVlLnksIHZhbHVlLnopO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHBvc2l0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHZlbG9jaXR5IG9mIHRoZSBzb3VuZC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtWZWMzfVxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIHNldCB2ZWxvY2l0eSh2ZWxvY2l0eSkge1xuICAgICAgICBEZWJ1Zy53YXJuKCdTb3VuZEluc3RhbmNlM2QjdmVsb2NpdHkgaXMgbm90IGltcGxlbWVudGVkLicpO1xuICAgICAgICB0aGlzLl92ZWxvY2l0eS5jb3B5KHZlbG9jaXR5KTtcbiAgICB9XG5cbiAgICBnZXQgdmVsb2NpdHkoKSB7XG4gICAgICAgIERlYnVnLndhcm4oJ1NvdW5kSW5zdGFuY2UzZCN2ZWxvY2l0eSBpcyBub3QgaW1wbGVtZW50ZWQuJyk7XG4gICAgICAgIHJldHVybiB0aGlzLl92ZWxvY2l0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBkaXN0YW5jZSBmcm9tIHRoZSBsaXN0ZW5lciBhdCB3aGljaCBhdWRpbyBmYWxsb2ZmIHN0b3BzLiBOb3RlIHRoZSB2b2x1bWUgb2YgdGhlXG4gICAgICogYXVkaW8gaXMgbm90IDAgYWZ0ZXIgdGhpcyBkaXN0YW5jZSwgYnV0IGp1c3QgZG9lc24ndCBmYWxsIG9mZiBhbnltb3JlLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBzZXQgbWF4RGlzdGFuY2UodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wYW5uZXIubWF4RGlzdGFuY2UgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgbWF4RGlzdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhbm5lci5tYXhEaXN0YW5jZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcmVmZXJlbmNlIGRpc3RhbmNlIGZvciByZWR1Y2luZyB2b2x1bWUgYXMgdGhlIHNvdW5kIHNvdXJjZSBtb3ZlcyBmdXJ0aGVyIGZyb20gdGhlXG4gICAgICogbGlzdGVuZXIuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNldCByZWZEaXN0YW5jZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnBhbm5lci5yZWZEaXN0YW5jZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCByZWZEaXN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFubmVyLnJlZkRpc3RhbmNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBmYWN0b3IgdXNlZCBpbiB0aGUgZmFsbG9mZiBlcXVhdGlvbi5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IHJvbGxPZmZGYWN0b3IodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wYW5uZXIucm9sbG9mZkZhY3RvciA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCByb2xsT2ZmRmFjdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYW5uZXIucm9sbG9mZkZhY3RvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHdoaWNoIGFsZ29yaXRobSB0byB1c2UgdG8gcmVkdWNlIHRoZSB2b2x1bWUgb2YgdGhlIGF1ZGlvIGFzIGl0IG1vdmVzIGF3YXkgZnJvbVxuICAgICAqIHRoZSBsaXN0ZW5lci4gQ2FuIGJlOlxuICAgICAqXG4gICAgICogLSB7QGxpbmsgRElTVEFOQ0VfTElORUFSfVxuICAgICAqIC0ge0BsaW5rIERJU1RBTkNFX0lOVkVSU0V9XG4gICAgICogLSB7QGxpbmsgRElTVEFOQ0VfRVhQT05FTlRJQUx9XG4gICAgICpcbiAgICAgKiBEZWZhdWx0IGlzIHtAbGluayBESVNUQU5DRV9MSU5FQVJ9LlxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBzZXQgZGlzdGFuY2VNb2RlbCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnBhbm5lci5kaXN0YW5jZU1vZGVsID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGRpc3RhbmNlTW9kZWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhbm5lci5kaXN0YW5jZU1vZGVsO1xuICAgIH1cbn1cblxuaWYgKCFoYXNBdWRpb0NvbnRleHQoKSkge1xuICAgIC8vIHRlbXAgdmVjdG9yIHN0b3JhZ2VcbiAgICBsZXQgb2Zmc2V0ID0gbmV3IFZlYzMoKTtcblxuICAgIC8vIEZhbGwgb2ZmIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSB0aGUgc2FtZSBhcyB0aGUgb25lIGluIHRoZSBXZWIgQXVkaW8gQVBJXG4gICAgLy8gVGFrZW4gZnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvUGFubmVyTm9kZS9kaXN0YW5jZU1vZGVsXG4gICAgY29uc3QgZmFsbE9mZiA9IGZ1bmN0aW9uIChwb3NPbmUsIHBvc1R3bywgcmVmRGlzdGFuY2UsIG1heERpc3RhbmNlLCByb2xsT2ZmRmFjdG9yLCBkaXN0YW5jZU1vZGVsKSB7XG4gICAgICAgIG9mZnNldCA9IG9mZnNldC5zdWIyKHBvc09uZSwgcG9zVHdvKTtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBvZmZzZXQubGVuZ3RoKCk7XG5cbiAgICAgICAgaWYgKGRpc3RhbmNlIDwgcmVmRGlzdGFuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9IGVsc2UgaWYgKGRpc3RhbmNlID4gbWF4RGlzdGFuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3VsdCA9IDA7XG4gICAgICAgIGlmIChkaXN0YW5jZU1vZGVsID09PSBESVNUQU5DRV9MSU5FQVIpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IDEgLSByb2xsT2ZmRmFjdG9yICogKGRpc3RhbmNlIC0gcmVmRGlzdGFuY2UpIC8gKG1heERpc3RhbmNlIC0gcmVmRGlzdGFuY2UpO1xuICAgICAgICB9IGVsc2UgaWYgKGRpc3RhbmNlTW9kZWwgPT09IERJU1RBTkNFX0lOVkVSU0UpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlZkRpc3RhbmNlIC8gKHJlZkRpc3RhbmNlICsgcm9sbE9mZkZhY3RvciAqIChkaXN0YW5jZSAtIHJlZkRpc3RhbmNlKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlzdGFuY2VNb2RlbCA9PT0gRElTVEFOQ0VfRVhQT05FTlRJQUwpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IE1hdGgucG93KGRpc3RhbmNlIC8gcmVmRGlzdGFuY2UsIC1yb2xsT2ZmRmFjdG9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF0aC5jbGFtcChyZXN1bHQsIDAsIDEpO1xuICAgIH07XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU291bmRJbnN0YW5jZTNkLnByb3RvdHlwZSwgJ3Bvc2l0aW9uJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uLmNvcHkocG9zaXRpb24pO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0ZW5lciA9IHRoaXMuX21hbmFnZXIubGlzdGVuZXI7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBscG9zID0gbGlzdGVuZXIuZ2V0UG9zaXRpb24oKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IGZhbGxPZmYobHBvcywgdGhpcy5fcG9zaXRpb24sIHRoaXMucmVmRGlzdGFuY2UsIHRoaXMubWF4RGlzdGFuY2UsIHRoaXMucm9sbE9mZkZhY3RvciwgdGhpcy5kaXN0YW5jZU1vZGVsKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLnZvbHVtZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc291cmNlLnZvbHVtZSA9IHYgKiBmYWN0b3IgKiB0aGlzLl9tYW5hZ2VyLnZvbHVtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNvdW5kSW5zdGFuY2UzZC5wcm90b3R5cGUsICdtYXhEaXN0YW5jZScsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWF4RGlzdGFuY2U7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9tYXhEaXN0YW5jZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU291bmRJbnN0YW5jZTNkLnByb3RvdHlwZSwgJ3JlZkRpc3RhbmNlJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWZEaXN0YW5jZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlZkRpc3RhbmNlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTb3VuZEluc3RhbmNlM2QucHJvdG90eXBlLCAncm9sbE9mZkZhY3RvcicsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcm9sbE9mZkZhY3RvcjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3JvbGxPZmZGYWN0b3IgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNvdW5kSW5zdGFuY2UzZC5wcm90b3R5cGUsICdkaXN0YW5jZU1vZGVsJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kaXN0YW5jZU1vZGVsO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fZGlzdGFuY2VNb2RlbCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmV4cG9ydCB7IFNvdW5kSW5zdGFuY2UzZCB9O1xuIl0sIm5hbWVzIjpbIk1BWF9ESVNUQU5DRSIsIlNvdW5kSW5zdGFuY2UzZCIsIlNvdW5kSW5zdGFuY2UiLCJjb25zdHJ1Y3RvciIsIm1hbmFnZXIiLCJzb3VuZCIsIm9wdGlvbnMiLCJfcG9zaXRpb24iLCJWZWMzIiwiX3ZlbG9jaXR5IiwicG9zaXRpb24iLCJtYXhEaXN0YW5jZSIsInVuZGVmaW5lZCIsIk51bWJlciIsInJlZkRpc3RhbmNlIiwicm9sbE9mZkZhY3RvciIsImRpc3RhbmNlTW9kZWwiLCJESVNUQU5DRV9MSU5FQVIiLCJfaW5pdGlhbGl6ZU5vZGVzIiwiZ2FpbiIsIl9tYW5hZ2VyIiwiY29udGV4dCIsImNyZWF0ZUdhaW4iLCJwYW5uZXIiLCJjcmVhdGVQYW5uZXIiLCJjb25uZWN0IiwiX2lucHV0Tm9kZSIsIl9jb25uZWN0b3JOb2RlIiwiZGVzdGluYXRpb24iLCJ2YWx1ZSIsImNvcHkiLCJwb3NpdGlvblgiLCJ4IiwicG9zaXRpb25ZIiwieSIsInBvc2l0aW9uWiIsInoiLCJzZXRQb3NpdGlvbiIsInZlbG9jaXR5IiwiRGVidWciLCJ3YXJuIiwicm9sbG9mZkZhY3RvciIsImhhc0F1ZGlvQ29udGV4dCIsIm9mZnNldCIsImZhbGxPZmYiLCJwb3NPbmUiLCJwb3NUd28iLCJzdWIyIiwiZGlzdGFuY2UiLCJsZW5ndGgiLCJyZXN1bHQiLCJESVNUQU5DRV9JTlZFUlNFIiwiRElTVEFOQ0VfRVhQT05FTlRJQUwiLCJNYXRoIiwicG93IiwibWF0aCIsImNsYW1wIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJwcm90b3R5cGUiLCJnZXQiLCJzZXQiLCJzb3VyY2UiLCJsaXN0ZW5lciIsImxwb3MiLCJnZXRQb3NpdGlvbiIsImZhY3RvciIsInYiLCJ2b2x1bWUiLCJfbWF4RGlzdGFuY2UiLCJfcmVmRGlzdGFuY2UiLCJfcm9sbE9mZkZhY3RvciIsIl9kaXN0YW5jZU1v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
