/**
 * @license
 * PlayCanvas Engine v1.57.1 revision 256dd83c2 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { http } from '../net/http.js';

const SceneUtils = {
  load: function (url, maxRetries, callback) {
    if (typeof url === 'string') {
      url = {
        load: url,
        original: url
      };
    }

    http.get(url.load, {
      retry: maxRetries > 0,
      maxRetries: maxRetries
    }, function (err, response) {
      if (!err) {
        callback(err, response);
      } else {
        let errMsg = 'Error while loading scene JSON ' + url.original;

        if (err.message) {
          errMsg += ': ' + err.message;

          if (err.stack) {
            errMsg += '\n' + err.stack;
          }
        } else {
          errMsg += ': ' + err;
        }

        callback(errMsg);
      }
    });
  }
};

export { SceneUtils };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NlbmUtdXRpbHMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9yZXNvdXJjZXMvc2NlbmUtdXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaHR0cCB9IGZyb20gJy4uL25ldC9odHRwLmpzJztcblxuY29uc3QgU2NlbmVVdGlscyA9IHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbmFtZSBTY2VuZVV0aWxzLmxvYWRcbiAgICAgKiBAZGVzY3JpcHRpb24gTG9hZHMgdGhlIHNjZW5lIEpTT04gZmlsZSBmcm9tIGEgVVJMLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBVUkwgdG8gc2NlbmUgSlNPTi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4UmV0cmllcyAtIE51bWJlciBvZiBodHRwIGxvYWQgcmV0cnkgYXR0ZW1wdHMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBUaGUgY2FsbGJhY2sgdG8gdGhlIEpTT04gZmlsZSBpcyBsb2FkZWQuXG4gICAgICovXG4gICAgbG9hZDogZnVuY3Rpb24gKHVybCwgbWF4UmV0cmllcywgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB1cmwgPSB7XG4gICAgICAgICAgICAgICAgbG9hZDogdXJsLFxuICAgICAgICAgICAgICAgIG9yaWdpbmFsOiB1cmxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBodHRwLmdldCh1cmwubG9hZCwge1xuICAgICAgICAgICAgcmV0cnk6IG1heFJldHJpZXMgPiAwLFxuICAgICAgICAgICAgbWF4UmV0cmllczogbWF4UmV0cmllc1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyLCByZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGVyck1zZyA9ICdFcnJvciB3aGlsZSBsb2FkaW5nIHNjZW5lIEpTT04gJyArIHVybC5vcmlnaW5hbDtcbiAgICAgICAgICAgICAgICBpZiAoZXJyLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyTXNnICs9ICc6ICcgKyBlcnIubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVyci5zdGFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyTXNnICs9ICdcXG4nICsgZXJyLnN0YWNrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyTXNnICs9ICc6ICcgKyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyTXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuZXhwb3J0IHsgU2NlbmVVdGlscyB9O1xuIl0sIm5hbWVzIjpbIlNjZW5lVXRpbHMiLCJsb2FkIiwidXJsIiwibWF4UmV0cmllcyIsImNhbGxiYWNrIiwib3JpZ2luYWwiLCJodHRwIiwiZ2V0IiwicmV0cnkiLCJlcnIiLCJyZXNwb25zZSIsImVyck1zZyIsIm1lc3NhZ2UiLCJzdGFjayJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBLE1BQU1BLFVBQVUsR0FBRztBQVdmQyxFQUFBQSxJQUFJLEVBQUUsVUFBVUMsR0FBVixFQUFlQyxVQUFmLEVBQTJCQyxRQUEzQixFQUFxQztBQUN2QyxJQUFBLElBQUksT0FBT0YsR0FBUCxLQUFlLFFBQW5CLEVBQTZCO0FBQ3pCQSxNQUFBQSxHQUFHLEdBQUc7QUFDRkQsUUFBQUEsSUFBSSxFQUFFQyxHQURKO0FBRUZHLFFBQUFBLFFBQVEsRUFBRUgsR0FBQUE7T0FGZCxDQUFBO0FBSUgsS0FBQTs7QUFFREksSUFBQUEsSUFBSSxDQUFDQyxHQUFMLENBQVNMLEdBQUcsQ0FBQ0QsSUFBYixFQUFtQjtNQUNmTyxLQUFLLEVBQUVMLFVBQVUsR0FBRyxDQURMO0FBRWZBLE1BQUFBLFVBQVUsRUFBRUEsVUFBQUE7QUFGRyxLQUFuQixFQUdHLFVBQVVNLEdBQVYsRUFBZUMsUUFBZixFQUF5QjtNQUN4QixJQUFJLENBQUNELEdBQUwsRUFBVTtBQUNOTCxRQUFBQSxRQUFRLENBQUNLLEdBQUQsRUFBTUMsUUFBTixDQUFSLENBQUE7QUFDSCxPQUZELE1BRU87QUFDSCxRQUFBLElBQUlDLE1BQU0sR0FBRyxpQ0FBb0NULEdBQUFBLEdBQUcsQ0FBQ0csUUFBckQsQ0FBQTs7UUFDQSxJQUFJSSxHQUFHLENBQUNHLE9BQVIsRUFBaUI7QUFDYkQsVUFBQUEsTUFBTSxJQUFJLElBQUEsR0FBT0YsR0FBRyxDQUFDRyxPQUFyQixDQUFBOztVQUNBLElBQUlILEdBQUcsQ0FBQ0ksS0FBUixFQUFlO0FBQ1hGLFlBQUFBLE1BQU0sSUFBSSxJQUFBLEdBQU9GLEdBQUcsQ0FBQ0ksS0FBckIsQ0FBQTtBQUNILFdBQUE7QUFDSixTQUxELE1BS087VUFDSEYsTUFBTSxJQUFJLE9BQU9GLEdBQWpCLENBQUE7QUFDSCxTQUFBOztRQUVETCxRQUFRLENBQUNPLE1BQUQsQ0FBUixDQUFBO0FBQ0gsT0FBQTtLQWxCTCxDQUFBLENBQUE7QUFvQkgsR0FBQTtBQXZDYzs7OzsifQ==
