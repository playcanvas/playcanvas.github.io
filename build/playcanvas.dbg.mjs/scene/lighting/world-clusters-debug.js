import { Color } from '../../core/math/color.js';
import { Mat4 } from '../../core/math/mat4.js';
import { Vec3 } from '../../core/math/vec3.js';
import { PRIMITIVE_TRIANGLES } from '../../platform/graphics/constants.js';
import { BLEND_ADDITIVEALPHA } from '../constants.js';
import { GraphNode } from '../graph-node.js';
import { Mesh } from '../mesh.js';
import { MeshInstance } from '../mesh-instance.js';
import { StandardMaterial } from '../materials/standard-material.js';

class WorldClustersDebug {
  static render(worldClusters, scene) {
    const device = scene.device;
    const cells = worldClusters.cells;
    const lightsBuffer = worldClusters.lightsBuffer;
    const boundsMin = lightsBuffer.boundsMin;
    const boundsDelta = lightsBuffer.boundsDelta;
    const boundsMax = boundsMin.clone().add(boundsDelta);
    const cellDelta = lightsBuffer.boundsDelta.clone().div(cells);
    const gridPositions = WorldClustersDebug.gridPositions;
    const gridColors = WorldClustersDebug.gridColors;
    const c1 = new Color(0.3, 0.3, 0.3);
    const renderCellLines = (countA, countB, minA, deltaA, minB, deltaB, minC, maxC, order) => {
      for (let a = 0; a <= countA; a++) {
        for (let b = 0; b <= countB; b++) {
          const aa = minA + a * deltaA;
          const bb = minB + b * deltaB;
          if (order === 0) gridPositions.push(aa, minC, bb, aa, maxC, bb);else if (order === 1) gridPositions.push(aa, bb, minC, aa, bb, maxC);else if (order === 2) gridPositions.push(minC, aa, bb, maxC, aa, bb);
        }
      }
    };

    // generate grid lines
    renderCellLines(cells.x, cells.z, boundsMin.x, cellDelta.x, boundsMin.z, cellDelta.z, boundsMin.y, boundsMax.y, 0);
    renderCellLines(cells.x, cells.y, boundsMin.x, cellDelta.x, boundsMin.y, cellDelta.y, boundsMin.z, boundsMax.z, 1);
    renderCellLines(cells.y, cells.z, boundsMin.y, cellDelta.y, boundsMin.z, cellDelta.z, boundsMin.x, boundsMax.x, 2);

    // render grid lines
    if (gridPositions.length) {
      // update colors only when needed
      const numVerts = gridPositions.length / 3;
      if (numVerts !== gridColors.length / 4) {
        gridColors.length = 0;
        for (let i = 0; i < numVerts; i++) {
          gridColors.push(c1.r, c1.g, c1.b, c1.a);
        }
      }
      scene.drawLineArrays(gridPositions, gridColors);
      gridPositions.length = 0;
    }

    // render cell occupancy
    let mesh = WorldClustersDebug.mesh;
    if (!mesh) {
      mesh = new Mesh(device);
      mesh.clear(true, true);
      WorldClustersDebug.mesh = mesh;
    }
    const positions = [];
    const colors = [];
    const indices = [];
    const divX = worldClusters._cells.x;
    const divZ = worldClusters._cells.z;
    const counts = worldClusters.counts;
    const limit = worldClusters._maxCellLightCount;
    const min = new Vec3();
    const max = new Vec3();
    const col = new Vec3();
    const step = boundsDelta.clone().div(cells);

    // add cubes with a color representing cell occupancy to the dynamic mesh
    let cubes = 0;
    for (let x = 0; x < cells.x; x++) {
      for (let z = 0; z < cells.z; z++) {
        for (let y = 0; y < cells.y; y++) {
          const clusterIndex = x + divX * (z + y * divZ);
          const count = counts[clusterIndex];
          if (count > 0) {
            // cube corners
            min.x = boundsMin.x + step.x * x;
            min.y = boundsMin.y + step.y * y;
            min.z = boundsMin.z + step.z * z;
            max.add2(min, step);
            positions.push(min.x, min.y, max.z);
            positions.push(max.x, min.y, max.z);
            positions.push(max.x, max.y, max.z);
            positions.push(min.x, max.y, max.z);
            positions.push(max.x, min.y, min.z);
            positions.push(min.x, min.y, min.z);
            positions.push(min.x, max.y, min.z);
            positions.push(max.x, max.y, min.z);
            col.lerp(WorldClustersDebug.colorLow, WorldClustersDebug.colorHigh, count / limit).round();
            for (let c = 0; c < 8; c++) {
              colors.push(col.x, col.y, col.z, 1);
            }

            // back
            indices.push(cubes * 8 + 0, cubes * 8 + 1, cubes * 8 + 3);
            indices.push(cubes * 8 + 3, cubes * 8 + 1, cubes * 8 + 2);

            // front
            indices.push(cubes * 8 + 4, cubes * 8 + 5, cubes * 8 + 7);
            indices.push(cubes * 8 + 7, cubes * 8 + 5, cubes * 8 + 6);

            // top
            indices.push(cubes * 8 + 3, cubes * 8 + 2, cubes * 8 + 6);
            indices.push(cubes * 8 + 2, cubes * 8 + 7, cubes * 8 + 6);

            // bottom
            indices.push(cubes * 8 + 1, cubes * 8 + 0, cubes * 8 + 4);
            indices.push(cubes * 8 + 0, cubes * 8 + 5, cubes * 8 + 4);

            // right
            indices.push(cubes * 8 + 1, cubes * 8 + 4, cubes * 8 + 2);
            indices.push(cubes * 8 + 4, cubes * 8 + 7, cubes * 8 + 2);

            // left
            indices.push(cubes * 8 + 5, cubes * 8 + 0, cubes * 8 + 6);
            indices.push(cubes * 8 + 0, cubes * 8 + 3, cubes * 8 + 6);
            cubes++;
          }
        }
      }
    }
    if (cubes) {
      mesh.setPositions(positions);
      mesh.setColors32(colors);
      mesh.setIndices(indices);
      mesh.update(PRIMITIVE_TRIANGLES, false);
      if (!WorldClustersDebug.meshInstance) {
        const material = new StandardMaterial();
        material.useLighting = false;
        material.emissive = new Color(1, 1, 1);
        material.emissiveVertexColor = true;
        material.emissiveTint = false;
        material.blendType = BLEND_ADDITIVEALPHA;
        material.depthWrite = false;
        material.update();
        const node = new GraphNode('WorldClustersDebug');
        node.worldTransform = Mat4.IDENTITY;
        node._dirtyWorld = node._dirtyNormal = false;
        WorldClustersDebug.meshInstance = new MeshInstance(mesh, material, node);
        WorldClustersDebug.meshInstance.cull = false;
      }

      // render
      const meshInstance = WorldClustersDebug.meshInstance;
      scene.immediate.drawMesh(meshInstance.material, meshInstance.node.worldTransform, null, meshInstance, scene.defaultDrawLayer);
    }
  }
}
WorldClustersDebug.gridPositions = [];
WorldClustersDebug.gridColors = [];
WorldClustersDebug.mesh = null;
WorldClustersDebug.meshInstance = null;
WorldClustersDebug.colorLow = new Vec3(1, 1, 1);
WorldClustersDebug.colorHigh = new Vec3(40, 0, 0);

export { WorldClustersDebug };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ybGQtY2x1c3RlcnMtZGVidWcuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9zY2VuZS9saWdodGluZy93b3JsZC1jbHVzdGVycy1kZWJ1Zy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb2xvciB9IGZyb20gJy4uLy4uL2NvcmUvbWF0aC9jb2xvci5qcyc7XG5pbXBvcnQgeyBNYXQ0IH0gZnJvbSAnLi4vLi4vY29yZS9tYXRoL21hdDQuanMnO1xuaW1wb3J0IHsgVmVjMyB9IGZyb20gJy4uLy4uL2NvcmUvbWF0aC92ZWMzLmpzJztcblxuaW1wb3J0IHsgUFJJTUlUSVZFX1RSSUFOR0xFUyB9IGZyb20gJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL2NvbnN0YW50cy5qcyc7XG5cbmltcG9ydCB7IEJMRU5EX0FERElUSVZFQUxQSEEgfSBmcm9tICcuLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgR3JhcGhOb2RlIH0gZnJvbSAnLi4vZ3JhcGgtbm9kZS5qcyc7XG5pbXBvcnQgeyBNZXNoIH0gZnJvbSAnLi4vbWVzaC5qcyc7XG5pbXBvcnQgeyBNZXNoSW5zdGFuY2UgfSBmcm9tICcuLi9tZXNoLWluc3RhbmNlLmpzJztcbmltcG9ydCB7IFN0YW5kYXJkTWF0ZXJpYWwgfSBmcm9tICcuLi9tYXRlcmlhbHMvc3RhbmRhcmQtbWF0ZXJpYWwuanMnO1xuXG5jbGFzcyBXb3JsZENsdXN0ZXJzRGVidWcge1xuICAgIHN0YXRpYyBncmlkUG9zaXRpb25zID0gW107XG5cbiAgICBzdGF0aWMgZ3JpZENvbG9ycyA9IFtdO1xuXG4gICAgc3RhdGljIG1lc2ggPSBudWxsO1xuXG4gICAgc3RhdGljIG1lc2hJbnN0YW5jZSA9IG51bGw7XG5cbiAgICBzdGF0aWMgY29sb3JMb3cgPSBuZXcgVmVjMygxLCAxLCAxKTtcblxuICAgIHN0YXRpYyBjb2xvckhpZ2ggPSBuZXcgVmVjMyg0MCwgMCwgMCk7XG5cbiAgICBzdGF0aWMgcmVuZGVyKHdvcmxkQ2x1c3RlcnMsIHNjZW5lKSB7XG5cbiAgICAgICAgY29uc3QgZGV2aWNlID0gc2NlbmUuZGV2aWNlO1xuICAgICAgICBjb25zdCBjZWxscyA9IHdvcmxkQ2x1c3RlcnMuY2VsbHM7XG4gICAgICAgIGNvbnN0IGxpZ2h0c0J1ZmZlciA9IHdvcmxkQ2x1c3RlcnMubGlnaHRzQnVmZmVyO1xuICAgICAgICBjb25zdCBib3VuZHNNaW4gPSBsaWdodHNCdWZmZXIuYm91bmRzTWluO1xuICAgICAgICBjb25zdCBib3VuZHNEZWx0YSA9IGxpZ2h0c0J1ZmZlci5ib3VuZHNEZWx0YTtcbiAgICAgICAgY29uc3QgYm91bmRzTWF4ID0gYm91bmRzTWluLmNsb25lKCkuYWRkKGJvdW5kc0RlbHRhKTtcbiAgICAgICAgY29uc3QgY2VsbERlbHRhID0gbGlnaHRzQnVmZmVyLmJvdW5kc0RlbHRhLmNsb25lKCkuZGl2KGNlbGxzKTtcblxuICAgICAgICBjb25zdCBncmlkUG9zaXRpb25zID0gV29ybGRDbHVzdGVyc0RlYnVnLmdyaWRQb3NpdGlvbnM7XG4gICAgICAgIGNvbnN0IGdyaWRDb2xvcnMgPSBXb3JsZENsdXN0ZXJzRGVidWcuZ3JpZENvbG9ycztcblxuICAgICAgICBjb25zdCBjMSA9IG5ldyBDb2xvcigwLjMsIDAuMywgMC4zKTtcblxuICAgICAgICBjb25zdCByZW5kZXJDZWxsTGluZXMgPSAoY291bnRBLCBjb3VudEIsIG1pbkEsIGRlbHRhQSwgbWluQiwgZGVsdGFCLCBtaW5DLCBtYXhDLCBvcmRlcikgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgYSA9IDA7IGEgPD0gY291bnRBOyBhKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8PSBjb3VudEI7IGIrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhYSA9IG1pbkEgKyBhICogZGVsdGFBO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYiA9IG1pbkIgKyBiICogZGVsdGFCO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkUG9zaXRpb25zLnB1c2goYWEsIG1pbkMsIGJiLCBhYSwgbWF4QywgYmIpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvcmRlciA9PT0gMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRQb3NpdGlvbnMucHVzaChhYSwgYmIsIG1pbkMsIGFhLCBiYiwgbWF4Qyk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9yZGVyID09PSAyKVxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFBvc2l0aW9ucy5wdXNoKG1pbkMsIGFhLCBiYiwgbWF4QywgYWEsIGJiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gZ2VuZXJhdGUgZ3JpZCBsaW5lc1xuICAgICAgICByZW5kZXJDZWxsTGluZXMoY2VsbHMueCwgY2VsbHMueiwgYm91bmRzTWluLngsIGNlbGxEZWx0YS54LCBib3VuZHNNaW4ueiwgY2VsbERlbHRhLnosIGJvdW5kc01pbi55LCBib3VuZHNNYXgueSwgMCk7XG4gICAgICAgIHJlbmRlckNlbGxMaW5lcyhjZWxscy54LCBjZWxscy55LCBib3VuZHNNaW4ueCwgY2VsbERlbHRhLngsIGJvdW5kc01pbi55LCBjZWxsRGVsdGEueSwgYm91bmRzTWluLnosIGJvdW5kc01heC56LCAxKTtcbiAgICAgICAgcmVuZGVyQ2VsbExpbmVzKGNlbGxzLnksIGNlbGxzLnosIGJvdW5kc01pbi55LCBjZWxsRGVsdGEueSwgYm91bmRzTWluLnosIGNlbGxEZWx0YS56LCBib3VuZHNNaW4ueCwgYm91bmRzTWF4LngsIDIpO1xuXG4gICAgICAgIC8vIHJlbmRlciBncmlkIGxpbmVzXG4gICAgICAgIGlmIChncmlkUG9zaXRpb25zLmxlbmd0aCkge1xuXG4gICAgICAgICAgICAvLyB1cGRhdGUgY29sb3JzIG9ubHkgd2hlbiBuZWVkZWRcbiAgICAgICAgICAgIGNvbnN0IG51bVZlcnRzID0gZ3JpZFBvc2l0aW9ucy5sZW5ndGggLyAzO1xuICAgICAgICAgICAgaWYgKG51bVZlcnRzICE9PSBncmlkQ29sb3JzLmxlbmd0aCAvIDQpIHtcbiAgICAgICAgICAgICAgICBncmlkQ29sb3JzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1WZXJ0czsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGdyaWRDb2xvcnMucHVzaChjMS5yLCBjMS5nLCBjMS5iLCBjMS5hKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNjZW5lLmRyYXdMaW5lQXJyYXlzKGdyaWRQb3NpdGlvbnMsIGdyaWRDb2xvcnMpO1xuICAgICAgICAgICAgZ3JpZFBvc2l0aW9ucy5sZW5ndGggPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVuZGVyIGNlbGwgb2NjdXBhbmN5XG4gICAgICAgIGxldCBtZXNoID0gV29ybGRDbHVzdGVyc0RlYnVnLm1lc2g7XG4gICAgICAgIGlmICghbWVzaCkge1xuICAgICAgICAgICAgbWVzaCA9IG5ldyBNZXNoKGRldmljZSk7XG4gICAgICAgICAgICBtZXNoLmNsZWFyKHRydWUsIHRydWUpO1xuICAgICAgICAgICAgV29ybGRDbHVzdGVyc0RlYnVnLm1lc2ggPSBtZXNoO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcG9zaXRpb25zID0gW107XG4gICAgICAgIGNvbnN0IGNvbG9ycyA9IFtdO1xuICAgICAgICBjb25zdCBpbmRpY2VzID0gW107XG5cbiAgICAgICAgY29uc3QgZGl2WCA9IHdvcmxkQ2x1c3RlcnMuX2NlbGxzLng7XG4gICAgICAgIGNvbnN0IGRpdlogPSB3b3JsZENsdXN0ZXJzLl9jZWxscy56O1xuICAgICAgICBjb25zdCBjb3VudHMgPSB3b3JsZENsdXN0ZXJzLmNvdW50cztcbiAgICAgICAgY29uc3QgbGltaXQgPSB3b3JsZENsdXN0ZXJzLl9tYXhDZWxsTGlnaHRDb3VudDtcblxuICAgICAgICBjb25zdCBtaW4gPSBuZXcgVmVjMygpO1xuICAgICAgICBjb25zdCBtYXggPSBuZXcgVmVjMygpO1xuICAgICAgICBjb25zdCBjb2wgPSBuZXcgVmVjMygpO1xuICAgICAgICBjb25zdCBzdGVwID0gYm91bmRzRGVsdGEuY2xvbmUoKS5kaXYoY2VsbHMpO1xuXG4gICAgICAgIC8vIGFkZCBjdWJlcyB3aXRoIGEgY29sb3IgcmVwcmVzZW50aW5nIGNlbGwgb2NjdXBhbmN5IHRvIHRoZSBkeW5hbWljIG1lc2hcbiAgICAgICAgbGV0IGN1YmVzID0gMDtcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBjZWxscy54OyB4KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IHogPSAwOyB6IDwgY2VsbHMuejsgeisrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBjZWxscy55OyB5KyspIHtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbHVzdGVySW5kZXggPSB4ICsgZGl2WCAqICh6ICsgeSAqIGRpdlopO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IGNvdW50c1tjbHVzdGVySW5kZXhdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA+IDApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3ViZSBjb3JuZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW4ueCA9IGJvdW5kc01pbi54ICsgc3RlcC54ICogeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbi55ID0gYm91bmRzTWluLnkgKyBzdGVwLnkgKiB5O1xuICAgICAgICAgICAgICAgICAgICAgICAgbWluLnogPSBib3VuZHNNaW4ueiArIHN0ZXAueiAqIHo7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXguYWRkMihtaW4sIHN0ZXApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnMucHVzaChtaW4ueCwgbWluLnksIG1heC56KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKG1heC54LCBtaW4ueSwgbWF4LnopO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25zLnB1c2gobWF4LngsIG1heC55LCBtYXgueik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnMucHVzaChtaW4ueCwgbWF4LnksIG1heC56KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25zLnB1c2gobWF4LngsIG1pbi55LCBtaW4ueik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnMucHVzaChtaW4ueCwgbWluLnksIG1pbi56KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKG1pbi54LCBtYXgueSwgbWluLnopO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25zLnB1c2gobWF4LngsIG1heC55LCBtaW4ueik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5sZXJwKFdvcmxkQ2x1c3RlcnNEZWJ1Zy5jb2xvckxvdywgV29ybGRDbHVzdGVyc0RlYnVnLmNvbG9ySGlnaCwgY291bnQgLyBsaW1pdCkucm91bmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgODsgYysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JzLnB1c2goY29sLngsIGNvbC55LCBjb2wueiwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZXMucHVzaChjdWJlcyAqIDggKyAwLCBjdWJlcyAqIDggKyAxLCBjdWJlcyAqIDggKyAzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZXMucHVzaChjdWJlcyAqIDggKyAzLCBjdWJlcyAqIDggKyAxLCBjdWJlcyAqIDggKyAyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZnJvbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZXMucHVzaChjdWJlcyAqIDggKyA0LCBjdWJlcyAqIDggKyA1LCBjdWJlcyAqIDggKyA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZXMucHVzaChjdWJlcyAqIDggKyA3LCBjdWJlcyAqIDggKyA1LCBjdWJlcyAqIDggKyA2KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9wXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzLnB1c2goY3ViZXMgKiA4ICsgMywgY3ViZXMgKiA4ICsgMiwgY3ViZXMgKiA4ICsgNik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzLnB1c2goY3ViZXMgKiA4ICsgMiwgY3ViZXMgKiA4ICsgNywgY3ViZXMgKiA4ICsgNik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJvdHRvbVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlcy5wdXNoKGN1YmVzICogOCArIDEsIGN1YmVzICogOCArIDAsIGN1YmVzICogOCArIDQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlcy5wdXNoKGN1YmVzICogOCArIDAsIGN1YmVzICogOCArIDUsIGN1YmVzICogOCArIDQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlcy5wdXNoKGN1YmVzICogOCArIDEsIGN1YmVzICogOCArIDQsIGN1YmVzICogOCArIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlcy5wdXNoKGN1YmVzICogOCArIDQsIGN1YmVzICogOCArIDcsIGN1YmVzICogOCArIDIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsZWZ0XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzLnB1c2goY3ViZXMgKiA4ICsgNSwgY3ViZXMgKiA4ICsgMCwgY3ViZXMgKiA4ICsgNik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzLnB1c2goY3ViZXMgKiA4ICsgMCwgY3ViZXMgKiA4ICsgMywgY3ViZXMgKiA4ICsgNik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1YmVzKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY3ViZXMpIHtcbiAgICAgICAgICAgIG1lc2guc2V0UG9zaXRpb25zKHBvc2l0aW9ucyk7XG4gICAgICAgICAgICBtZXNoLnNldENvbG9yczMyKGNvbG9ycyk7XG4gICAgICAgICAgICBtZXNoLnNldEluZGljZXMoaW5kaWNlcyk7XG4gICAgICAgICAgICBtZXNoLnVwZGF0ZShQUklNSVRJVkVfVFJJQU5HTEVTLCBmYWxzZSk7XG5cblxuICAgICAgICAgICAgaWYgKCFXb3JsZENsdXN0ZXJzRGVidWcubWVzaEluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgU3RhbmRhcmRNYXRlcmlhbCgpO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsLnVzZUxpZ2h0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuZW1pc3NpdmUgPSBuZXcgQ29sb3IoMSwgMSwgMSk7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuZW1pc3NpdmVWZXJ0ZXhDb2xvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuZW1pc3NpdmVUaW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuYmxlbmRUeXBlID0gQkxFTkRfQURESVRJVkVBTFBIQTtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5kZXB0aFdyaXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwudXBkYXRlKCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gbmV3IEdyYXBoTm9kZSgnV29ybGRDbHVzdGVyc0RlYnVnJyk7XG4gICAgICAgICAgICAgICAgbm9kZS53b3JsZFRyYW5zZm9ybSA9IE1hdDQuSURFTlRJVFk7XG4gICAgICAgICAgICAgICAgbm9kZS5fZGlydHlXb3JsZCA9IG5vZGUuX2RpcnR5Tm9ybWFsID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBXb3JsZENsdXN0ZXJzRGVidWcubWVzaEluc3RhbmNlID0gbmV3IE1lc2hJbnN0YW5jZShtZXNoLCBtYXRlcmlhbCwgbm9kZSk7XG4gICAgICAgICAgICAgICAgV29ybGRDbHVzdGVyc0RlYnVnLm1lc2hJbnN0YW5jZS5jdWxsID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJlbmRlclxuICAgICAgICAgICAgY29uc3QgbWVzaEluc3RhbmNlID0gV29ybGRDbHVzdGVyc0RlYnVnLm1lc2hJbnN0YW5jZTtcbiAgICAgICAgICAgIHNjZW5lLmltbWVkaWF0ZS5kcmF3TWVzaChtZXNoSW5zdGFuY2UubWF0ZXJpYWwsIG1lc2hJbnN0YW5jZS5ub2RlLndvcmxkVHJhbnNmb3JtLCBudWxsLCBtZXNoSW5zdGFuY2UsIHNjZW5lLmRlZmF1bHREcmF3TGF5ZXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgeyBXb3JsZENsdXN0ZXJzRGVidWcgfTtcbiJdLCJuYW1lcyI6WyJXb3JsZENsdXN0ZXJzRGVidWciLCJyZW5kZXIiLCJ3b3JsZENsdXN0ZXJzIiwic2NlbmUiLCJkZXZpY2UiLCJjZWxscyIsImxpZ2h0c0J1ZmZlciIsImJvdW5kc01pbiIsImJvdW5kc0RlbHRhIiwiYm91bmRzTWF4IiwiY2xvbmUiLCJhZGQiLCJjZWxsRGVsdGEiLCJkaXYiLCJncmlkUG9zaXRpb25zIiwiZ3JpZENvbG9ycyIsImMxIiwiQ29sb3IiLCJyZW5kZXJDZWxsTGluZXMiLCJjb3VudEEiLCJjb3VudEIiLCJtaW5BIiwiZGVsdGFBIiwibWluQiIsImRlbHRhQiIsIm1pbkMiLCJtYXhDIiwib3JkZXIiLCJhIiwiYiIsImFhIiwiYmIiLCJwdXNoIiwieCIsInoiLCJ5IiwibGVuZ3RoIiwibnVtVmVydHMiLCJpIiwiciIsImciLCJkcmF3TGluZUFycmF5cyIsIm1lc2giLCJNZXNoIiwiY2xlYXIiLCJwb3NpdGlvbnMiLCJjb2xvcnMiLCJpbmRpY2VzIiwiZGl2WCIsIl9jZWxscyIsImRpdloiLCJjb3VudHMiLCJsaW1pdCIsIl9tYXhDZWxsTGlnaHRDb3VudCIsIm1pbiIsIlZlYzMiLCJtYXgiLCJjb2wiLCJzdGVwIiwiY3ViZXMiLCJjbHVzdGVySW5kZXgiLCJjb3VudCIsImFkZDIiLCJsZXJwIiwiY29sb3JMb3ciLCJjb2xvckhpZ2giLCJyb3VuZCIsImMiLCJzZXRQb3NpdGlvbnMiLCJzZXRDb2xvcnMzMiIsInNldEluZGljZXMiLCJ1cGRhdGUiLCJQUklNSVRJVkVfVFJJQU5HTEVTIiwibWVzaEluc3RhbmNlIiwibWF0ZXJpYWwiLCJTdGFuZGFyZE1hdGVyaWFsIiwidXNlTGlnaHRpbmciLCJlbWlzc2l2ZSIsImVtaXNzaXZlVmVydGV4Q29sb3IiLCJlbWlzc2l2ZVRpbnQiLCJibGVuZFR5cGUiLCJCTEVORF9BRERJVElWRUFMUEhBIiwiZGVwdGhXcml0ZSIsIm5vZGUiLCJHcmFwaE5vZGUiLCJ3b3JsZFRyYW5zZm9ybSIsIk1hdDQiLCJJREVOVElUWSIsIl9kaXJ0eVdvcmxkIiwiX2RpcnR5Tm9ybWFsIiwiTWVzaEluc3RhbmNlIiwiY3VsbCIsImltbWVkaWF0ZSIsImRyYXdNZXNoIiwiZGVmYXVsdERyYXdMYXllciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQVlBLE1BQU1BLGtCQUFrQixDQUFDO0FBYXJCLEVBQUEsT0FBT0MsTUFBTUEsQ0FBQ0MsYUFBYSxFQUFFQyxLQUFLLEVBQUU7QUFFaEMsSUFBQSxNQUFNQyxNQUFNLEdBQUdELEtBQUssQ0FBQ0MsTUFB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
