/**
 * @license
 * PlayCanvas Engine v1.58.0-preview revision 1fec26519 (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../core/debug.js';
import { EventHandler } from '../core/event-handler.js';
import { Color } from '../core/math/color.js';
import { Vec3 } from '../core/math/vec3.js';
import { Quat } from '../core/math/quat.js';
import { math } from '../core/math/math.js';
import { Mat3 } from '../core/math/mat3.js';
import { Mat4 } from '../core/math/mat4.js';
import { GraphicsDeviceAccess } from '../platform/graphics/graphics-device-access.js';
import { BAKE_COLORDIR, FOG_NONE, GAMMA_SRGB, LAYERID_IMMEDIATE } from './constants.js';
import { Sky } from './sky.js';
import { LightingParams } from './lighting/lighting-params.js';
import { Immediate } from './immediate/immediate.js';
import { EnvLighting } from './graphics/env-lighting.js';

class Scene extends EventHandler {

  constructor(graphicsDevice) {
    super();
    this.ambientBake = false;
    this.ambientBakeOcclusionBrightness = 0;
    this.ambientBakeOcclusionContrast = 0;
    this.ambientLight = new Color(0, 0, 0);
    this.ambientLuminance = 0;
    this.exposure = 1;
    this.fogColor = new Color(0, 0, 0);
    this.fogDensity = 0;
    this.fogEnd = 1000;
    this.fogStart = 1;
    this.lightmapSizeMultiplier = 1;
    this.lightmapMaxResolution = 2048;
    this.lightmapMode = BAKE_COLORDIR;
    this.lightmapFilterEnabled = false;
    this.root = null;
    this.sky = null;
    this.physicalUnits = false;
    Debug.assertDeprecated(graphicsDevice, "Scene constructor takes a GraphicsDevice as a parameter, and it was not provided.");
    this.device = graphicsDevice || GraphicsDeviceAccess.get();
    this._gravity = new Vec3(0, -9.8, 0);

    this._layers = null;
    this._fog = FOG_NONE;
    this._gammaCorrection = GAMMA_SRGB;
    this._toneMapping = 0;

    this._skyboxCubeMap = null;

    this._prefilteredCubemaps = [null, null, null, null, null, null];

    this._envAtlas = null;

    this._internalEnvAtlas = null;
    this._skyboxIntensity = 1;
    this._skyboxLuminance = 0;
    this._skyboxMip = 0;
    this._skyboxRotation = new Quat();
    this._skyboxRotationMat3 = new Mat3();
    this._skyboxRotationMat4 = new Mat4();

    this._ambientBakeNumSamples = 1;
    this._ambientBakeSpherePart = 0.4;
    this._lightmapFilterRange = 10;
    this._lightmapFilterSmoothness = 0.2;

    this._clusteredLightingEnabled = true;
    this._lightingParams = new LightingParams(this.device.supportsAreaLights, this.device.maxTextureSize, () => {
      this._layers._dirtyLights = true;
    });
    this._stats = {
      meshInstances: 0,
      lights: 0,
      dynamicLights: 0,
      bakedLights: 0,
      lastStaticPrepareFullTime: 0,
      lastStaticPrepareSearchTime: 0,
      lastStaticPrepareWriteTime: 0,
      lastStaticPrepareTriAabbTime: 0,
      lastStaticPrepareCombineTime: 0,
      updateShadersTime: 0
    };

    this.updateShaders = true;
    this._shaderVersion = 0;
    this._statsUpdated = false;

    this.immediate = new Immediate(this.device);
  }

  get defaultDrawLayer() {
    return this.layers.getLayerById(LAYERID_IMMEDIATE);
  }

  set ambientBakeNumSamples(value) {
    this._ambientBakeNumSamples = math.clamp(Math.floor(value), 1, 255);
  }
  get ambientBakeNumSamples() {
    return this._ambientBakeNumSamples;
  }

  set ambientBakeSpherePart(value) {
    this._ambientBakeSpherePart = math.clamp(value, 0.001, 1);
  }
  get ambientBakeSpherePart() {
    return this._ambientBakeSpherePart;
  }

  set clusteredLightingEnabled(value) {
    if (!this._clusteredLightingEnabled && value) {
      console.error('Turning on disabled clustered lighting is not currently supported');
      return;
    }
    this._clusteredLightingEnabled = value;
  }
  get clusteredLightingEnabled() {
    return this._clusteredLightingEnabled;
  }

  set drawCalls(value) {}
  get drawCalls() {
    let drawCalls = this.layers._meshInstances;
    if (!drawCalls.length) {
      this.layers._update(this.device, this.clusteredLightingEnabled);
      drawCalls = this.layers._meshInstances;
    }
    return drawCalls;
  }

  set envAtlas(value) {
    if (value !== this._envAtlas) {
      this._envAtlas = value;
      this.updateShaders = true;
    }
  }
  get envAtlas() {
    return this._envAtlas;
  }

  set fog(type) {
    if (type !== this._fog) {
      this._fog = type;
      this.updateShaders = true;
    }
  }
  get fog() {
    return this._fog;
  }

  set gammaCorrection(value) {
    if (value !== this._gammaCorrection) {
      this._gammaCorrection = value;
      this.updateShaders = true;
    }
  }
  get gammaCorrection() {
    return this._gammaCorrection;
  }

  set layers(layers) {
    const prev = this._layers;
    this._layers = layers;
    this.fire('set:layers', prev, layers);
  }
  get layers() {
    return this._layers;
  }

  get lighting() {
    return this._lightingParams;
  }

  set lightmapFilterRange(value) {
    this._lightmapFilterRange = Math.max(value, 0.001);
  }
  get lightmapFilterRange() {
    return this._lightmapFilterRange;
  }

  set lightmapFilterSmoothness(value) {
    this._lightmapFilterSmoothness = Math.max(value, 0.001);
  }
  get lightmapFilterSmoothness() {
    return this._lightmapFilterSmoothness;
  }

  set prefilteredCubemaps(value) {
    const cubemaps = this._prefilteredCubemaps;
    value = value || [];
    let changed = false;
    let complete = true;
    for (let i = 0; i < 6; ++i) {
      const v = value[i] || null;
      if (cubemaps[i] !== v) {
        cubemaps[i] = v;
        changed = true;
      }
      complete = complete && !!cubemaps[i];
    }
    if (changed) {
      this._resetSky();
      if (complete) {
        this._internalEnvAtlas = EnvLighting.generatePrefilteredAtlas(cubemaps, {
          target: this._internalEnvAtlas
        });
        if (!this._envAtlas) {
          this.envAtlas = this._internalEnvAtlas;
        }
      } else if (this._internalEnvAtlas) {
        if (this._envAtlas === this._internalEnvAtlas) {
          this.envAtlas = null;
        }
        this._internalEnvAtlas.destroy();
        this._internalEnvAtlas = null;
      }
    }
  }
  get prefilteredCubemaps() {
    return this._prefilteredCubemaps;
  }

  set skybox(value) {
    if (value !== this._skyboxCubeMap) {
      this._skyboxCubeMap = value;
      this._resetSky();
    }
  }
  get skybox() {
    return this._skyboxCubeMap;
  }

  set skyboxIntensity(value) {
    if (value !== this._skyboxIntensity) {
      this._skyboxIntensity = value;
      this._resetSky();
    }
  }
  get skyboxIntensity() {
    return this._skyboxIntensity;
  }

  set skyboxLuminance(value) {
    if (value !== this._skyboxLuminance) {
      this._skyboxLuminance = value;
      this._resetSky();
    }
  }
  get skyboxLuminance() {
    return this._skyboxLuminance;
  }

  set skyboxMip(value) {
    if (value !== this._skyboxMip) {
      this._skyboxMip = value;
      this._resetSky();
    }
  }
  get skyboxMip() {
    return this._skyboxMip;
  }

  set skyboxRotation(value) {
    if (!this._skyboxRotation.equals(value)) {
      this._skyboxRotation.copy(value);
      if (value.equals(Quat.IDENTITY)) {
        this._skyboxRotationMat3.setIdentity();
      } else {
        this._skyboxRotationMat4.setTRS(Vec3.ZERO, value, Vec3.ONE);
        this._skyboxRotationMat4.invertTo3x3(this._skyboxRotationMat3);
      }
      this._resetSky();
    }
  }
  get skyboxRotation() {
    return this._skyboxRotation;
  }

  set toneMapping(value) {
    if (value !== this._toneMapping) {
      this._toneMapping = value;
      this.updateShaders = true;
    }
  }
  get toneMapping() {
    return this._toneMapping;
  }
  destroy() {
    this._resetSky();
    this.root = null;
    this.off();
  }
  drawLine(start, end, color = Color.WHITE, depthTest = true, layer = this.defaultDrawLayer) {
    const batch = this.immediate.getBatch(layer, depthTest);
    batch.addLines([start, end], [color, color]);
  }
  drawLines(positions, colors, depthTest = true, layer = this.defaultDrawLayer) {
    const batch = this.immediate.getBatch(layer, depthTest);
    batch.addLines(positions, colors);
  }
  drawLineArrays(positions, colors, depthTest = true, layer = this.defaultDrawLayer) {
    const batch = this.immediate.getBatch(layer, depthTest);
    batch.addLinesArrays(positions, colors);
  }
  applySettings(settings) {
    const physics = settings.physics;
    const render = settings.render;

    this._gravity.set(physics.gravity[0], physics.gravity[1], physics.gravity[2]);
    this.ambientLight.set(render.global_ambient[0], render.global_ambient[1], render.global_ambient[2]);
    this.ambientLuminance = render.ambientLuminance;
    this._fog = render.fog;
    this.fogColor.set(render.fog_color[0], render.fog_color[1], render.fog_color[2]);
    this.fogStart = render.fog_start;
    this.fogEnd = render.fog_end;
    this.fogDensity = render.fog_density;
    this._gammaCorrection = render.gamma_correction;
    this._toneMapping = render.tonemapping;
    this.lightmapSizeMultiplier = render.lightmapSizeMultiplier;
    this.lightmapMaxResolution = render.lightmapMaxResolution;
    this.lightmapMode = render.lightmapMode;
    this.exposure = render.exposure;
    this._skyboxIntensity = render.skyboxIntensity === undefined ? 1 : render.skyboxIntensity;
    this._skyboxLuminance = render.skyboxLuminance === undefined ? 20000 : render.skyboxLuminance;
    this._skyboxMip = render.skyboxMip === undefined ? 0 : render.skyboxMip;
    if (render.skyboxRotation) {
      this._skyboxRotation.setFromEulerAngles(render.skyboxRotation[0], render.skyboxRotation[1], render.skyboxRotation[2]);
    }
    this.clusteredLightingEnabled = render.clusteredLightingEnabled;
    this.lighting.applySettings(render);

    ['lightmapFilterEnabled', 'lightmapFilterRange', 'lightmapFilterSmoothness', 'ambientBake', 'ambientBakeNumSamples', 'ambientBakeSpherePart', 'ambientBakeOcclusionBrightness', 'ambientBakeOcclusionContrast'].forEach(setting => {
      if (render.hasOwnProperty(setting)) {
        this[setting] = render[setting];
      }
    });
    this._resetSky();
  }

  _getSkyboxTex() {
    const cubemaps = this._prefilteredCubemaps;
    if (this._skyboxMip) {
      const skyboxMapping = [0, 1, 3, 4, 5, 6];

      return cubemaps[skyboxMapping[this._skyboxMip]] || this._envAtlas || cubemaps[0] || this._skyboxCubeMap;
    }
    return this._skyboxCubeMap || cubemaps[0] || this._envAtlas;
  }
  _updateSky(device) {
    if (!this.sky) {
      const texture = this._getSkyboxTex();
      if (texture) {
        this.sky = new Sky(device, this, texture);
        this.fire('set:skybox', texture);
      }
    }
  }
  _resetSky() {
    var _this$sky;
    (_this$sky = this.sky) == null ? void 0 : _this$sky.destroy();
    this.sky = null;
    this.updateShaders = true;
  }

  setSkybox(cubemaps) {
    if (!cubemaps) {
      this.skybox = null;
      this.prefilteredCubemaps = [null, null, null, null, null, null];
    } else {
      this.skybox = cubemaps[0] || null;
      this.prefilteredCubemaps = cubemaps.slice(1);
    }
  }
}

export { Scene };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NlbmUuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zY2VuZS9zY2VuZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWJ1ZyB9IGZyb20gJy4uL2NvcmUvZGVidWcuanMnO1xuaW1wb3J0IHsgRXZlbnRIYW5kbGVyIH0gZnJvbSAnLi4vY29yZS9ldmVudC1oYW5kbGVyLmpzJztcblxuaW1wb3J0IHsgQ29sb3IgfSBmcm9tICcuLi9jb3JlL21hdGgvY29sb3IuanMnO1xuaW1wb3J0IHsgVmVjMyB9IGZyb20gJy4uL2NvcmUvbWF0aC92ZWMzLmpzJztcbmltcG9ydCB7IFF1YXQgfSBmcm9tICcuLi9jb3JlL21hdGgvcXVhdC5qcyc7XG5pbXBvcnQgeyBtYXRoIH0gZnJvbSAnLi4vY29yZS9tYXRoL21hdGguanMnO1xuaW1wb3J0IHsgTWF0MyB9IGZyb20gJy4uL2NvcmUvbWF0aC9tYXQzLmpzJztcbmltcG9ydCB7IE1hdDQgfSBmcm9tICcuLi9jb3JlL21hdGgvbWF0NC5qcyc7XG5cbmltcG9ydCB7IEdyYXBoaWNzRGV2aWNlQWNjZXNzIH0gZnJvbSAnLi4vcGxhdGZvcm0vZ3JhcGhpY3MvZ3JhcGhpY3MtZGV2aWNlLWFjY2Vzcy5qcyc7XG5cbmltcG9ydCB7IEJBS0VfQ09MT1JESVIsIEZPR19OT05FLCBHQU1NQV9TUkdCLCBMQVlFUklEX0lNTUVESUFURSB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IFNreSB9IGZyb20gJy4vc2t5LmpzJztcbmltcG9ydCB7IExpZ2h0aW5nUGFyYW1zIH0gZnJvbSAnLi9saWdodGluZy9saWdodGluZy1wYXJhbXMuanMnO1xuaW1wb3J0IHsgSW1tZWRpYXRlIH0gZnJvbSAnLi9pbW1lZGlhdGUvaW1tZWRpYXRlLmpzJztcblxuaW1wb3J0IHsgRW52TGlnaHRpbmcgfSBmcm9tICcuL2dyYXBoaWNzL2Vudi1saWdodGluZy5qcyc7XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9mcmFtZXdvcmsvZW50aXR5LmpzJykuRW50aXR5fSBFbnRpdHkgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9wbGF0Zm9ybS9ncmFwaGljcy9ncmFwaGljcy1kZXZpY2UuanMnKS5HcmFwaGljc0RldmljZX0gR3JhcGhpY3NEZXZpY2UgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9wbGF0Zm9ybS9ncmFwaGljcy90ZXh0dXJlLmpzJykuVGV4dHVyZX0gVGV4dHVyZSAqL1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vY29tcG9zaXRpb24vbGF5ZXItY29tcG9zaXRpb24uanMnKS5MYXllckNvbXBvc2l0aW9ufSBMYXllckNvbXBvc2l0aW9uICovXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9sYXllci5qcycpLkxheWVyfSBMYXllciAqL1xuXG4vKipcbiAqIEEgc2NlbmUgaXMgZ3JhcGhpY2FsIHJlcHJlc2VudGF0aW9uIG9mIGFuIGVudmlyb25tZW50LiBJdCBtYW5hZ2VzIHRoZSBzY2VuZSBoaWVyYXJjaHksIGFsbFxuICogZ3JhcGhpY2FsIG9iamVjdHMsIGxpZ2h0cywgYW5kIHNjZW5lLXdpZGUgcHJvcGVydGllcy5cbiAqXG4gKiBAYXVnbWVudHMgRXZlbnRIYW5kbGVyXG4gKi9cbmNsYXNzIFNjZW5lIGV4dGVuZHMgRXZlbnRIYW5kbGVyIHtcbiAgICAvKipcbiAgICAgKiBJZiBlbmFibGVkLCB0aGUgYW1iaWVudCBsaWdodGluZyB3aWxsIGJlIGJha2VkIGludG8gbGlnaHRtYXBzLiBUaGlzIHdpbGwgYmUgZWl0aGVyIHRoZVxuICAgICAqIHtAbGluayBTY2VuZSNza3lib3h9IGlmIHNldCB1cCwgb3RoZXJ3aXNlIHtAbGluayBTY2VuZSNhbWJpZW50TGlnaHR9LiBEZWZhdWx0cyB0byBmYWxzZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGFtYmllbnRCYWtlID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBJZiB7QGxpbmsgU2NlbmUjYW1iaWVudEJha2V9IGlzIHRydWUsIHRoaXMgc3BlY2lmaWVzIHRoZSBicmlnaHRuZXNzIG9mIGFtYmllbnQgb2NjbHVzaW9uLlxuICAgICAqIFR5cGljYWwgcmFuZ2UgaXMgLTEgdG8gMS4gRGVmYXVsdHMgdG8gMCwgcmVwcmVzZW50aW5nIG5vIGNoYW5nZSB0byBicmlnaHRuZXNzLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBhbWJpZW50QmFrZU9jY2x1c2lvbkJyaWdodG5lc3MgPSAwO1xuXG4gICAgIC8qKlxuICAgICAgKiBJZiB7QGxpbmsgU2NlbmUjYW1iaWVudEJha2V9IGlzIHRydWUsIHRoaXMgc3BlY2lmaWVzIHRoZSBjb250cmFzdCBvZiBhbWJpZW50IG9jY2x1c2lvbi5cbiAgICAgICogVHlwaWNhbCByYW5nZSBpcyAtMSB0byAxLiBEZWZhdWx0cyB0byAwLCByZXByZXNlbnRpbmcgbm8gY2hhbmdlIHRvIGNvbnRyYXN0LlxuICAgICAgKlxuICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgKi9cbiAgICBhbWJpZW50QmFrZU9jY2x1c2lvbkNvbnRyYXN0ID0gMDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBjb2xvciBvZiB0aGUgc2NlbmUncyBhbWJpZW50IGxpZ2h0LiBEZWZhdWx0cyB0byBibGFjayAoMCwgMCwgMCkuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Q29sb3J9XG4gICAgICovXG4gICAgYW1iaWVudExpZ2h0ID0gbmV3IENvbG9yKDAsIDAsIDApO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGx1bWlub3NpdHkgb2YgdGhlIHNjZW5lJ3MgYW1iaWVudCBsaWdodCBpbiBsdXggKGxtL21eMikuIFVzZWQgaWYgcGh5c2ljYWxVbml0cyBpcyB0cnVlLiBEZWZhdWx0cyB0byAwLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBhbWJpZW50THVtaW5hbmNlID0gMDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBleHBvc3VyZSB2YWx1ZSB0d2Vha3MgdGhlIG92ZXJhbGwgYnJpZ2h0bmVzcyBvZiB0aGUgc2NlbmUuIElnbm9yZWQgaWYgcGh5c2ljYWxVbml0cyBpcyB0cnVlLiBEZWZhdWx0cyB0byAxLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBleHBvc3VyZSA9IDE7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29sb3Igb2YgdGhlIGZvZyAoaWYgZW5hYmxlZCkuIERlZmF1bHRzIHRvIGJsYWNrICgwLCAwLCAwKS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtDb2xvcn1cbiAgICAgKi9cbiAgICBmb2dDb2xvciA9IG5ldyBDb2xvcigwLCAwLCAwKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBkZW5zaXR5IG9mIHRoZSBmb2cgKGlmIGVuYWJsZWQpLiBUaGlzIHByb3BlcnR5IGlzIG9ubHkgdmFsaWQgaWYgdGhlIGZvZyBwcm9wZXJ0eSBpcyBzZXRcbiAgICAgKiB0byB7QGxpbmsgRk9HX0VYUH0gb3Ige0BsaW5rIEZPR19FWFAyfS4gRGVmYXVsdHMgdG8gMC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZm9nRGVuc2l0eSA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZGlzdGFuY2UgZnJvbSB0aGUgdmlld3BvaW50IHdoZXJlIGxpbmVhciBmb2cgcmVhY2hlcyBpdHMgbWF4aW11bS4gVGhpcyBwcm9wZXJ0eSBpcyBvbmx5XG4gICAgICogdmFsaWQgaWYgdGhlIGZvZyBwcm9wZXJ0eSBpcyBzZXQgdG8ge0BsaW5rIEZPR19MSU5FQVJ9LiBEZWZhdWx0cyB0byAxMDAwLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBmb2dFbmQgPSAxMDAwO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGRpc3RhbmNlIGZyb20gdGhlIHZpZXdwb2ludCB3aGVyZSBsaW5lYXIgZm9nIGJlZ2lucy4gVGhpcyBwcm9wZXJ0eSBpcyBvbmx5IHZhbGlkIGlmIHRoZVxuICAgICAqIGZvZyBwcm9wZXJ0eSBpcyBzZXQgdG8ge0BsaW5rIEZPR19MSU5FQVJ9LiBEZWZhdWx0cyB0byAxLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBmb2dTdGFydCA9IDE7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbGlnaHRtYXAgcmVzb2x1dGlvbiBtdWx0aXBsaWVyLiBEZWZhdWx0cyB0byAxLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBsaWdodG1hcFNpemVNdWx0aXBsaWVyID0gMTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIGxpZ2h0bWFwIHJlc29sdXRpb24uIERlZmF1bHRzIHRvIDIwNDguXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGxpZ2h0bWFwTWF4UmVzb2x1dGlvbiA9IDIwNDg7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbGlnaHRtYXAgYmFraW5nIG1vZGUuIENhbiBiZTpcbiAgICAgKlxuICAgICAqIC0ge0BsaW5rIEJBS0VfQ09MT1J9OiBzaW5nbGUgY29sb3IgbGlnaHRtYXBcbiAgICAgKiAtIHtAbGluayBCQUtFX0NPTE9SRElSfTogc2luZ2xlIGNvbG9yIGxpZ2h0bWFwICsgZG9taW5hbnQgbGlnaHQgZGlyZWN0aW9uICh1c2VkIGZvciBidW1wIG9yXG4gICAgICogc3BlY3VsYXIpLiBPbmx5IGxpZ2h0cyB3aXRoIGJha2VEaXI9dHJ1ZSB3aWxsIGJlIHVzZWQgZm9yIGdlbmVyYXRpbmcgdGhlIGRvbWluYW50IGxpZ2h0XG4gICAgICogZGlyZWN0aW9uLlxuICAgICAqXG4gICAgICogRGVmYXVsdHMgdG8ge0BsaW5rIEJBS0VfQ09MT1JESVJ9LlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBsaWdodG1hcE1vZGUgPSBCQUtFX0NPTE9SRElSO1xuXG4gICAgLyoqXG4gICAgICogRW5hYmxlcyBiaWxhdGVyYWwgZmlsdGVyIG9uIHJ1bnRpbWUgYmFrZWQgY29sb3IgbGlnaHRtYXBzLCB3aGljaCByZW1vdmVzIHRoZSBub2lzZSBhbmRcbiAgICAgKiBiYW5kaW5nIHdoaWxlIHByZXNlcnZpbmcgdGhlIGVkZ2VzLiBEZWZhdWx0cyB0byBmYWxzZS4gTm90ZSB0aGF0IHRoZSBmaWx0ZXJpbmcgdGFrZXMgcGxhY2VcbiAgICAgKiBpbiB0aGUgaW1hZ2Ugc3BhY2Ugb2YgdGhlIGxpZ2h0bWFwLCBhbmQgaXQgZG9lcyBub3QgZmlsdGVyIGFjcm9zcyBsaWdodG1hcCBVViBzcGFjZSBzZWFtcyxcbiAgICAgKiBvZnRlbiBtYWtpbmcgdGhlIHNlYW1zIG1vcmUgdmlzaWJsZS4gSXQncyBpbXBvcnRhbnQgdG8gYmFsYW5jZSB0aGUgc3RyZW5ndGggb2YgdGhlIGZpbHRlclxuICAgICAqIHdpdGggbnVtYmVyIG9mIHNhbXBsZXMgdXNlZCBmb3IgbGlnaHRtYXAgYmFraW5nIHRvIGxpbWl0IHRoZSB2aXNpYmxlIGFydGlmYWN0cy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGxpZ2h0bWFwRmlsdGVyRW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHJvb3QgZW50aXR5IG9mIHRoZSBzY2VuZSwgd2hpY2ggaXMgdXN1YWxseSB0aGUgb25seSBjaGlsZCB0byB0aGUge0BsaW5rIEFwcGxpY2F0aW9ufVxuICAgICAqIHJvb3QgZW50aXR5LlxuICAgICAqXG4gICAgICogQHR5cGUge0VudGl0eX1cbiAgICAgKi9cbiAgICByb290ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBza3kgb2YgdGhlIHNjZW5lLlxuICAgICAqXG4gICAgICogQHR5cGUge1NreX1cbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgc2t5ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFVzZSBwaHlzaWNhbGx5IGJhc2VkIHVuaXRzIGZvciBjYW1lcmFzIGFuZCBsaWdodHMuIFdoZW4gdXNlZCwgdGhlIGV4cG9zdXJlIHZhbHVlIGlzIGlnbm9yZWQuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBwaHlzaWNhbFVuaXRzID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgU2NlbmUgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0dyYXBoaWNzRGV2aWNlfSBncmFwaGljc0RldmljZSAtIFRoZSBncmFwaGljcyBkZXZpY2UgdXNlZCB0byBtYW5hZ2UgdGhpcyBzY2VuZS5cbiAgICAgKiBAaGlkZWNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZ3JhcGhpY3NEZXZpY2UpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICBEZWJ1Zy5hc3NlcnREZXByZWNhdGVkKGdyYXBoaWNzRGV2aWNlLCBcIlNjZW5lIGNvbnN0cnVjdG9yIHRha2VzIGEgR3JhcGhpY3NEZXZpY2UgYXMgYSBwYXJhbWV0ZXIsIGFuZCBpdCB3YXMgbm90IHByb3ZpZGVkLlwiKTtcbiAgICAgICAgdGhpcy5kZXZpY2UgPSBncmFwaGljc0RldmljZSB8fCBHcmFwaGljc0RldmljZUFjY2Vzcy5nZXQoKTtcblxuICAgICAgICB0aGlzLl9ncmF2aXR5ID0gbmV3IFZlYzMoMCwgLTkuOCwgMCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtMYXllckNvbXBvc2l0aW9ufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fbGF5ZXJzID0gbnVsbDtcblxuICAgICAgICB0aGlzLl9mb2cgPSBGT0dfTk9ORTtcblxuICAgICAgICB0aGlzLl9nYW1tYUNvcnJlY3Rpb24gPSBHQU1NQV9TUkdCO1xuICAgICAgICB0aGlzLl90b25lTWFwcGluZyA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBza3lib3ggY3ViZW1hcCBhcyBzZXQgYnkgdXNlciAoZ2V0cyB1c2VkIHdoZW4gc2t5Ym94TWlwID09PSAwKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7VGV4dHVyZX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3NreWJveEN1YmVNYXAgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBcnJheSBvZiA2IHByZWZpbHRlcmVkIGxpZ2h0aW5nIGRhdGEgY3ViZW1hcHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtUZXh0dXJlW119XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9wcmVmaWx0ZXJlZEN1YmVtYXBzID0gW251bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGxdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbnZpcm9ubWVudCBsaWdodGluZyBhdGxhc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7VGV4dHVyZX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2VudkF0bGFzID0gbnVsbDtcblxuICAgICAgICAvLyBpbnRlcm5hbGx5IGdlbmVyYXRlZCBlbnZBdGxhcyBvd25lZCBieSB0aGUgc2NlbmVcbiAgICAgICAgdGhpcy5faW50ZXJuYWxFbnZBdGxhcyA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fc2t5Ym94SW50ZW5zaXR5ID0gMTtcbiAgICAgICAgdGhpcy5fc2t5Ym94THVtaW5hbmNlID0gMDtcbiAgICAgICAgdGhpcy5fc2t5Ym94TWlwID0gMDtcblxuICAgICAgICB0aGlzLl9za3lib3hSb3RhdGlvbiA9IG5ldyBRdWF0KCk7XG4gICAgICAgIHRoaXMuX3NreWJveFJvdGF0aW9uTWF0MyA9IG5ldyBNYXQzKCk7XG4gICAgICAgIHRoaXMuX3NreWJveFJvdGF0aW9uTWF0NCA9IG5ldyBNYXQ0KCk7XG5cbiAgICAgICAgLy8gYW1iaWVudCBsaWdodCBsaWdodG1hcHBpbmcgcHJvcGVydGllc1xuICAgICAgICB0aGlzLl9hbWJpZW50QmFrZU51bVNhbXBsZXMgPSAxO1xuICAgICAgICB0aGlzLl9hbWJpZW50QmFrZVNwaGVyZVBhcnQgPSAwLjQ7XG5cbiAgICAgICAgdGhpcy5fbGlnaHRtYXBGaWx0ZXJSYW5nZSA9IDEwO1xuICAgICAgICB0aGlzLl9saWdodG1hcEZpbHRlclNtb290aG5lc3MgPSAwLjI7XG5cbiAgICAgICAgLy8gY2x1c3RlcmVkIGxpZ2h0aW5nXG4gICAgICAgIHRoaXMuX2NsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX2xpZ2h0aW5nUGFyYW1zID0gbmV3IExpZ2h0aW5nUGFyYW1zKHRoaXMuZGV2aWNlLnN1cHBvcnRzQXJlYUxpZ2h0cywgdGhpcy5kZXZpY2UubWF4VGV4dHVyZVNpemUsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2xheWVycy5fZGlydHlMaWdodHMgPSB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9zdGF0cyA9IHtcbiAgICAgICAgICAgIG1lc2hJbnN0YW5jZXM6IDAsXG4gICAgICAgICAgICBsaWdodHM6IDAsXG4gICAgICAgICAgICBkeW5hbWljTGlnaHRzOiAwLFxuICAgICAgICAgICAgYmFrZWRMaWdodHM6IDAsXG4gICAgICAgICAgICBsYXN0U3RhdGljUHJlcGFyZUZ1bGxUaW1lOiAwLFxuICAgICAgICAgICAgbGFzdFN0YXRpY1ByZXBhcmVTZWFyY2hUaW1lOiAwLFxuICAgICAgICAgICAgbGFzdFN0YXRpY1ByZXBhcmVXcml0ZVRpbWU6IDAsXG4gICAgICAgICAgICBsYXN0U3RhdGljUHJlcGFyZVRyaUFhYmJUaW1lOiAwLFxuICAgICAgICAgICAgbGFzdFN0YXRpY1ByZXBhcmVDb21iaW5lVGltZTogMCxcbiAgICAgICAgICAgIHVwZGF0ZVNoYWRlcnNUaW1lOiAwIC8vIGRlcHJlY2F0ZWRcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBmbGFnIGluZGljYXRlcyBjaGFuZ2VzIHdlcmUgbWFkZSB0byB0aGUgc2NlbmUgd2hpY2ggbWF5IHJlcXVpcmUgcmVjb21waWxhdGlvbiBvZlxuICAgICAgICAgKiBzaGFkZXJzIHRoYXQgcmVmZXJlbmNlIGdsb2JhbCBzZXR0aW5ncy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBpZ25vcmVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXBkYXRlU2hhZGVycyA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5fc2hhZGVyVmVyc2lvbiA9IDA7XG4gICAgICAgIHRoaXMuX3N0YXRzVXBkYXRlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIGltbWVkaWF0ZSByZW5kZXJpbmdcbiAgICAgICAgdGhpcy5pbW1lZGlhdGUgPSBuZXcgSW1tZWRpYXRlKHRoaXMuZGV2aWNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHRoZSBza3lib3ggaXMgc2V0LlxuICAgICAqXG4gICAgICogQGV2ZW50IFNjZW5lI3NldDpza3lib3hcbiAgICAgKiBAcGFyYW0ge1RleHR1cmV9IHVzZWRUZXggLSBQcmV2aW91c2x5IHVzZWQgY3ViZW1hcCB0ZXh0dXJlLiBOZXcgaXMgaW4gdGhlIHtAbGluayBTY2VuZSNza3lib3h9LlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogRmlyZWQgd2hlbiB0aGUgbGF5ZXIgY29tcG9zaXRpb24gaXMgc2V0LiBVc2UgdGhpcyBldmVudCB0byBhZGQgY2FsbGJhY2tzIG9yIGFkdmFuY2VkXG4gICAgICogcHJvcGVydGllcyB0byB5b3VyIGxheWVycy5cbiAgICAgKlxuICAgICAqIEBldmVudCBTY2VuZSNzZXQ6bGF5ZXJzXG4gICAgICogQHBhcmFtIHtMYXllckNvbXBvc2l0aW9ufSBvbGRDb21wIC0gUHJldmlvdXNseSB1c2VkIHtAbGluayBMYXllckNvbXBvc2l0aW9ufS5cbiAgICAgKiBAcGFyYW0ge0xheWVyQ29tcG9zaXRpb259IG5ld0NvbXAgLSBOZXdseSBzZXQge0BsaW5rIExheWVyQ29tcG9zaXRpb259LlxuICAgICAqIEBleGFtcGxlXG4gICAgICogdGhpcy5hcHAuc2NlbmUub24oJ3NldDpsYXllcnMnLCBmdW5jdGlvbiAob2xkQ29tcCwgbmV3Q29tcCkge1xuICAgICAqICAgICB2YXIgbGlzdCA9IG5ld0NvbXAubGF5ZXJMaXN0O1xuICAgICAqICAgICB2YXIgbGF5ZXI7XG4gICAgICogICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAqICAgICAgICAgbGF5ZXIgPSBsaXN0W2ldO1xuICAgICAqICAgICAgICAgc3dpdGNoIChsYXllci5uYW1lKSB7XG4gICAgICogICAgICAgICAgICAgY2FzZSAnTXlMYXllcic6XG4gICAgICogICAgICAgICAgICAgICAgIGxheWVyLm9uRW5hYmxlID0gbXlPbkVuYWJsZUZ1bmN0aW9uO1xuICAgICAqICAgICAgICAgICAgICAgICBsYXllci5vbkRpc2FibGUgPSBteU9uRGlzYWJsZUZ1bmN0aW9uO1xuICAgICAqICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgKiAgICAgICAgICAgICBjYXNlICdNeU90aGVyTGF5ZXInOlxuICAgICAqICAgICAgICAgICAgICAgICBsYXllci5zaGFkZXJQYXNzID0gbXlTaGFkZXJQYXNzO1xuICAgICAqICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgfVxuICAgICAqIH0pO1xuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZGVmYXVsdCBsYXllciB1c2VkIGJ5IHRoZSBpbW1lZGlhdGUgZHJhd2luZyBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7TGF5ZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBnZXQgZGVmYXVsdERyYXdMYXllcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJzLmdldExheWVyQnlJZChMQVlFUklEX0lNTUVESUFURSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWYge0BsaW5rIFNjZW5lI2FtYmllbnRCYWtlfSBpcyB0cnVlLCB0aGlzIHNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIHNhbXBsZXMgdXNlZCB0byBiYWtlIHRoZVxuICAgICAqIGFtYmllbnQgbGlnaHQgaW50byB0aGUgbGlnaHRtYXAuIERlZmF1bHRzIHRvIDEuIE1heGltdW0gdmFsdWUgaXMgMjU1LlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBzZXQgYW1iaWVudEJha2VOdW1TYW1wbGVzKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2FtYmllbnRCYWtlTnVtU2FtcGxlcyA9IG1hdGguY2xhbXAoTWF0aC5mbG9vcih2YWx1ZSksIDEsIDI1NSk7XG4gICAgfVxuXG4gICAgZ2V0IGFtYmllbnRCYWtlTnVtU2FtcGxlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FtYmllbnRCYWtlTnVtU2FtcGxlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZiB7QGxpbmsgU2NlbmUjYW1iaWVudEJha2V9IGlzIHRydWUsIHRoaXMgc3BlY2lmaWVzIGEgcGFydCBvZiB0aGUgc3BoZXJlIHdoaWNoIHJlcHJlc2VudHNcbiAgICAgKiB0aGUgc291cmNlIG9mIGFtYmllbnQgbGlnaHQuIFRoZSB2YWxpZCByYW5nZSBpcyAwLi4xLCByZXByZXNlbnRpbmcgYSBwYXJ0IG9mIHRoZSBzcGhlcmUgZnJvbVxuICAgICAqIHRvcCB0byB0aGUgYm90dG9tLiBBIHZhbHVlIG9mIDAuNSByZXByZXNlbnRzIHRoZSB1cHBlciBoZW1pc3BoZXJlLiBBIHZhbHVlIG9mIDEgcmVwcmVzZW50cyBhXG4gICAgICogZnVsbCBzcGhlcmUuIERlZmF1bHRzIHRvIDAuNCwgd2hpY2ggaXMgYSBzbWFsbGVyIHVwcGVyIGhlbWlzcGhlcmUgYXMgdGhpcyByZXF1aXJlcyBmZXdlclxuICAgICAqIHNhbXBsZXMgdG8gYmFrZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IGFtYmllbnRCYWtlU3BoZXJlUGFydCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9hbWJpZW50QmFrZVNwaGVyZVBhcnQgPSBtYXRoLmNsYW1wKHZhbHVlLCAwLjAwMSwgMSk7XG4gICAgfVxuXG4gICAgZ2V0IGFtYmllbnRCYWtlU3BoZXJlUGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FtYmllbnRCYWtlU3BoZXJlUGFydDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcnVlIGlmIHRoZSBjbHVzdGVyZWQgbGlnaHRpbmcgaXMgZW5hYmxlZC4gU2V0IHRvIGZhbHNlIGJlZm9yZSB0aGUgZmlyc3QgZnJhbWUgaXMgcmVuZGVyZWRcbiAgICAgKiB0byB1c2Ugbm9uLWNsdXN0ZXJlZCBsaWdodGluZy4gRGVmYXVsdHMgdG8gdHJ1ZS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHNldCBjbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQodmFsdWUpIHtcblxuICAgICAgICBpZiAoIXRoaXMuX2NsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVHVybmluZyBvbiBkaXNhYmxlZCBjbHVzdGVyZWQgbGlnaHRpbmcgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2NsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBjbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdCBvZiBhbGwgYWN0aXZlIGNvbXBvc2l0aW9uIG1lc2ggaW5zdGFuY2VzLiBPbmx5IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbiAgICAgKiBUT0RPOiBCYXRjaE1hbmFnZXIgaXMgdXNpbmcgaXQgLSBwZXJoYXBzIHRoYXQgY291bGQgYmUgcmVmYWN0b3JlZFxuICAgICAqXG4gICAgICogQHR5cGUge01lc2hJbnN0YW5jZVtdfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgc2V0IGRyYXdDYWxscyh2YWx1ZSkge1xuICAgIH1cblxuICAgIGdldCBkcmF3Q2FsbHMoKSB7XG4gICAgICAgIGxldCBkcmF3Q2FsbHMgPSB0aGlzLmxheWVycy5fbWVzaEluc3RhbmNlcztcbiAgICAgICAgaWYgKCFkcmF3Q2FsbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmxheWVycy5fdXBkYXRlKHRoaXMuZGV2aWNlLCB0aGlzLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCk7XG4gICAgICAgICAgICBkcmF3Q2FsbHMgPSB0aGlzLmxheWVycy5fbWVzaEluc3RhbmNlcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZHJhd0NhbGxzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBlbnZpcm9ubWVudCBsaWdodGluZyBhdGxhcy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtUZXh0dXJlfVxuICAgICAqL1xuICAgIHNldCBlbnZBdGxhcyh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMuX2VudkF0bGFzKSB7XG4gICAgICAgICAgICB0aGlzLl9lbnZBdGxhcyA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTaGFkZXJzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBlbnZBdGxhcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VudkF0bGFzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIGZvZyB1c2VkIGJ5IHRoZSBzY2VuZS4gQ2FuIGJlOlxuICAgICAqXG4gICAgICogLSB7QGxpbmsgRk9HX05PTkV9XG4gICAgICogLSB7QGxpbmsgRk9HX0xJTkVBUn1cbiAgICAgKiAtIHtAbGluayBGT0dfRVhQfVxuICAgICAqIC0ge0BsaW5rIEZPR19FWFAyfVxuICAgICAqXG4gICAgICogRGVmYXVsdHMgdG8ge0BsaW5rIEZPR19OT05FfS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgc2V0IGZvZyh0eXBlKSB7XG4gICAgICAgIGlmICh0eXBlICE9PSB0aGlzLl9mb2cpIHtcbiAgICAgICAgICAgIHRoaXMuX2ZvZyA9IHR5cGU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNoYWRlcnMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGZvZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZvZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZ2FtbWEgY29ycmVjdGlvbiB0byBhcHBseSB3aGVuIHJlbmRlcmluZyB0aGUgc2NlbmUuIENhbiBiZTpcbiAgICAgKlxuICAgICAqIC0ge0BsaW5rIEdBTU1BX05PTkV9XG4gICAgICogLSB7QGxpbmsgR0FNTUFfU1JHQn1cbiAgICAgKlxuICAgICAqIERlZmF1bHRzIHRvIHtAbGluayBHQU1NQV9TUkdCfS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IGdhbW1hQ29ycmVjdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMuX2dhbW1hQ29ycmVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5fZ2FtbWFDb3JyZWN0aW9uID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNoYWRlcnMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGdhbW1hQ29ycmVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dhbW1hQ29ycmVjdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHtAbGluayBMYXllckNvbXBvc2l0aW9ufSB0aGF0IGRlZmluZXMgcmVuZGVyaW5nIG9yZGVyIG9mIHRoaXMgc2NlbmUuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7TGF5ZXJDb21wb3NpdGlvbn1cbiAgICAgKi9cbiAgICBzZXQgbGF5ZXJzKGxheWVycykge1xuICAgICAgICBjb25zdCBwcmV2ID0gdGhpcy5fbGF5ZXJzO1xuICAgICAgICB0aGlzLl9sYXllcnMgPSBsYXllcnM7XG4gICAgICAgIHRoaXMuZmlyZSgnc2V0OmxheWVycycsIHByZXYsIGxheWVycyk7XG4gICAgfVxuXG4gICAgZ2V0IGxheWVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xheWVycztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHtAbGluayBMaWdodGluZ1BhcmFtc30gdGhhdCBkZWZpbmVzIGxpZ2h0aW5nIHBhcmFtZXRlcnMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7TGlnaHRpbmdQYXJhbXN9XG4gICAgICovXG4gICAgZ2V0IGxpZ2h0aW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlnaHRpbmdQYXJhbXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSByYW5nZSBwYXJhbWV0ZXIgb2YgdGhlIGJpbGF0ZXJhbCBmaWx0ZXIuIEl0J3MgdXNlZCB3aGVuIHtAbGluayBTY2VuZSNsaWdodG1hcEZpbHRlckVuYWJsZWR9XG4gICAgICogaXMgZW5hYmxlZC4gTGFyZ2VyIHZhbHVlIGFwcGxpZXMgbW9yZSB3aWRlc3ByZWFkIGJsdXIuIFRoaXMgbmVlZHMgdG8gYmUgYSBwb3NpdGl2ZSBub24temVyb1xuICAgICAqIHZhbHVlLiBEZWZhdWx0cyB0byAxMC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IGxpZ2h0bWFwRmlsdGVyUmFuZ2UodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fbGlnaHRtYXBGaWx0ZXJSYW5nZSA9IE1hdGgubWF4KHZhbHVlLCAwLjAwMSk7XG4gICAgfVxuXG4gICAgZ2V0IGxpZ2h0bWFwRmlsdGVyUmFuZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saWdodG1hcEZpbHRlclJhbmdlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgc3BhdGlhbCBwYXJhbWV0ZXIgb2YgdGhlIGJpbGF0ZXJhbCBmaWx0ZXIuIEl0J3MgdXNlZCB3aGVuIHtAbGluayBTY2VuZSNsaWdodG1hcEZpbHRlckVuYWJsZWR9XG4gICAgICogaXMgZW5hYmxlZC4gTGFyZ2VyIHZhbHVlIGJsdXJzIGxlc3Mgc2ltaWxhciBjb2xvcnMuIFRoaXMgbmVlZHMgdG8gYmUgYSBwb3NpdGl2ZSBub24temVyb1xuICAgICAqIHZhbHVlLiBEZWZhdWx0cyB0byAwLjIuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNldCBsaWdodG1hcEZpbHRlclNtb290aG5lc3ModmFsdWUpIHtcbiAgICAgICAgdGhpcy5fbGlnaHRtYXBGaWx0ZXJTbW9vdGhuZXNzID0gTWF0aC5tYXgodmFsdWUsIDAuMDAxKTtcbiAgICB9XG5cbiAgICBnZXQgbGlnaHRtYXBGaWx0ZXJTbW9vdGhuZXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlnaHRtYXBGaWx0ZXJTbW9vdGhuZXNzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBvZiA2IHByZWZpbHRlcmVkIGN1YmVtYXBzLlxuICAgICAqXG4gICAgICogQHR5cGUge1RleHR1cmVbXX1cbiAgICAgKi9cbiAgICBzZXQgcHJlZmlsdGVyZWRDdWJlbWFwcyh2YWx1ZSkge1xuICAgICAgICBjb25zdCBjdWJlbWFwcyA9IHRoaXMuX3ByZWZpbHRlcmVkQ3ViZW1hcHM7XG5cbiAgICAgICAgdmFsdWUgPSB2YWx1ZSB8fCBbXTtcblxuICAgICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgY29tcGxldGUgPSB0cnVlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgdiA9IHZhbHVlW2ldIHx8IG51bGw7XG4gICAgICAgICAgICBpZiAoY3ViZW1hcHNbaV0gIT09IHYpIHtcbiAgICAgICAgICAgICAgICBjdWJlbWFwc1tpXSA9IHY7XG4gICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21wbGV0ZSA9IGNvbXBsZXRlICYmICghIWN1YmVtYXBzW2ldKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNldFNreSgpO1xuXG4gICAgICAgICAgICBpZiAoY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgZW52IGF0bGFzXG4gICAgICAgICAgICAgICAgdGhpcy5faW50ZXJuYWxFbnZBdGxhcyA9IEVudkxpZ2h0aW5nLmdlbmVyYXRlUHJlZmlsdGVyZWRBdGxhcyhjdWJlbWFwcywge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMuX2ludGVybmFsRW52QXRsYXNcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fZW52QXRsYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdXNlciBoYXNuJ3Qgc2V0IGFuIGVudkF0bGFzIGFscmVhZHksIHNldCBpdCB0byB0aGUgaW50ZXJuYWwgb25lXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW52QXRsYXMgPSB0aGlzLl9pbnRlcm5hbEVudkF0bGFzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5faW50ZXJuYWxFbnZBdGxhcykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lbnZBdGxhcyA9PT0gdGhpcy5faW50ZXJuYWxFbnZBdGxhcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVudkF0bGFzID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5faW50ZXJuYWxFbnZBdGxhcy5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5faW50ZXJuYWxFbnZBdGxhcyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgcHJlZmlsdGVyZWRDdWJlbWFwcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByZWZpbHRlcmVkQ3ViZW1hcHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgY3ViZW1hcCB0ZXh0dXJlIHVzZWQgYXMgdGhlIHNjZW5lJ3Mgc2t5Ym94LCBpZiBtaXAgbGV2ZWwgaXMgMC4gRGVmYXVsdHMgdG8gbnVsbC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtUZXh0dXJlfVxuICAgICAqL1xuICAgIHNldCBza3lib3godmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLl9za3lib3hDdWJlTWFwKSB7XG4gICAgICAgICAgICB0aGlzLl9za3lib3hDdWJlTWFwID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9yZXNldFNreSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHNreWJveCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NreWJveEN1YmVNYXA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbGllciBmb3Igc2t5Ym94IGludGVuc2l0eS4gRGVmYXVsdHMgdG8gMS4gVW51c2VkIGlmIHBoeXNpY2FsIHVuaXRzIGFyZSB1c2VkLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBzZXQgc2t5Ym94SW50ZW5zaXR5KHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5fc2t5Ym94SW50ZW5zaXR5KSB7XG4gICAgICAgICAgICB0aGlzLl9za3lib3hJbnRlbnNpdHkgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX3Jlc2V0U2t5KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgc2t5Ym94SW50ZW5zaXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2t5Ym94SW50ZW5zaXR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEx1bWluYW5jZSAoaW4gbG0vbV4yKSBvZiBza3lib3guIERlZmF1bHRzIHRvIDAuIE9ubHkgdXNlZCBpZiBwaHlzaWNhbCB1bml0cyBhcmUgdXNlZC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IHNreWJveEx1bWluYW5jZSh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMuX3NreWJveEx1bWluYW5jZSkge1xuICAgICAgICAgICAgdGhpcy5fc2t5Ym94THVtaW5hbmNlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9yZXNldFNreSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHNreWJveEx1bWluYW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NreWJveEx1bWluYW5jZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWlwIGxldmVsIG9mIHRoZSBza3lib3ggdG8gYmUgZGlzcGxheWVkLiBPbmx5IHZhbGlkIGZvciBwcmVmaWx0ZXJlZCBjdWJlbWFwIHNreWJveGVzLlxuICAgICAqIERlZmF1bHRzIHRvIDAgKGJhc2UgbGV2ZWwpLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBzZXQgc2t5Ym94TWlwKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5fc2t5Ym94TWlwKSB7XG4gICAgICAgICAgICB0aGlzLl9za3lib3hNaXAgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX3Jlc2V0U2t5KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgc2t5Ym94TWlwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2t5Ym94TWlwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSByb3RhdGlvbiBvZiB0aGUgc2t5Ym94IHRvIGJlIGRpc3BsYXllZC4gRGVmYXVsdHMgdG8ge0BsaW5rIFF1YXQuSURFTlRJVFl9LlxuICAgICAqXG4gICAgICogQHR5cGUge1F1YXR9XG4gICAgICovXG4gICAgc2V0IHNreWJveFJvdGF0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5fc2t5Ym94Um90YXRpb24uZXF1YWxzKHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5fc2t5Ym94Um90YXRpb24uY29weSh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAodmFsdWUuZXF1YWxzKFF1YXQuSURFTlRJVFkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2t5Ym94Um90YXRpb25NYXQzLnNldElkZW50aXR5KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NreWJveFJvdGF0aW9uTWF0NC5zZXRUUlMoVmVjMy5aRVJPLCB2YWx1ZSwgVmVjMy5PTkUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NreWJveFJvdGF0aW9uTWF0NC5pbnZlcnRUbzN4Myh0aGlzLl9za3lib3hSb3RhdGlvbk1hdDMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fcmVzZXRTa3koKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBza3lib3hSb3RhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NreWJveFJvdGF0aW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSB0b25lbWFwcGluZyB0cmFuc2Zvcm0gdG8gYXBwbHkgd2hlbiB3cml0aW5nIGZyYWdtZW50cyB0byB0aGUgZnJhbWUgYnVmZmVyLiBDYW4gYmU6XG4gICAgICpcbiAgICAgKiAtIHtAbGluayBUT05FTUFQX0xJTkVBUn1cbiAgICAgKiAtIHtAbGluayBUT05FTUFQX0ZJTE1JQ31cbiAgICAgKiAtIHtAbGluayBUT05FTUFQX0hFSkx9XG4gICAgICogLSB7QGxpbmsgVE9ORU1BUF9BQ0VTfVxuICAgICAqXG4gICAgICogRGVmYXVsdHMgdG8ge0BsaW5rIFRPTkVNQVBfTElORUFSfS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2V0IHRvbmVNYXBwaW5nKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5fdG9uZU1hcHBpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuX3RvbmVNYXBwaW5nID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNoYWRlcnMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHRvbmVNYXBwaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdG9uZU1hcHBpbmc7XG4gICAgfVxuXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVzZXRTa3koKTtcbiAgICAgICAgdGhpcy5yb290ID0gbnVsbDtcbiAgICAgICAgdGhpcy5vZmYoKTtcbiAgICB9XG5cbiAgICBkcmF3TGluZShzdGFydCwgZW5kLCBjb2xvciA9IENvbG9yLldISVRFLCBkZXB0aFRlc3QgPSB0cnVlLCBsYXllciA9IHRoaXMuZGVmYXVsdERyYXdMYXllcikge1xuICAgICAgICBjb25zdCBiYXRjaCA9IHRoaXMuaW1tZWRpYXRlLmdldEJhdGNoKGxheWVyLCBkZXB0aFRlc3QpO1xuICAgICAgICBiYXRjaC5hZGRMaW5lcyhbc3RhcnQsIGVuZF0sIFtjb2xvciwgY29sb3JdKTtcbiAgICB9XG5cbiAgICBkcmF3TGluZXMocG9zaXRpb25zLCBjb2xvcnMsIGRlcHRoVGVzdCA9IHRydWUsIGxheWVyID0gdGhpcy5kZWZhdWx0RHJhd0xheWVyKSB7XG4gICAgICAgIGNvbnN0IGJhdGNoID0gdGhpcy5pbW1lZGlhdGUuZ2V0QmF0Y2gobGF5ZXIsIGRlcHRoVGVzdCk7XG4gICAgICAgIGJhdGNoLmFkZExpbmVzKHBvc2l0aW9ucywgY29sb3JzKTtcbiAgICB9XG5cbiAgICBkcmF3TGluZUFycmF5cyhwb3NpdGlvbnMsIGNvbG9ycywgZGVwdGhUZXN0ID0gdHJ1ZSwgbGF5ZXIgPSB0aGlzLmRlZmF1bHREcmF3TGF5ZXIpIHtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSB0aGlzLmltbWVkaWF0ZS5nZXRCYXRjaChsYXllciwgZGVwdGhUZXN0KTtcbiAgICAgICAgYmF0Y2guYWRkTGluZXNBcnJheXMocG9zaXRpb25zLCBjb2xvcnMpO1xuICAgIH1cblxuICAgIGFwcGx5U2V0dGluZ3Moc2V0dGluZ3MpIHtcbiAgICAgICAgY29uc3QgcGh5c2ljcyA9IHNldHRpbmdzLnBoeXNpY3M7XG4gICAgICAgIGNvbnN0IHJlbmRlciA9IHNldHRpbmdzLnJlbmRlcjtcblxuICAgICAgICAvLyBzZXR0aW5nc1xuICAgICAgICB0aGlzLl9ncmF2aXR5LnNldChwaHlzaWNzLmdyYXZpdHlbMF0sIHBoeXNpY3MuZ3Jhdml0eVsxXSwgcGh5c2ljcy5ncmF2aXR5WzJdKTtcbiAgICAgICAgdGhpcy5hbWJpZW50TGlnaHQuc2V0KHJlbmRlci5nbG9iYWxfYW1iaWVudFswXSwgcmVuZGVyLmdsb2JhbF9hbWJpZW50WzFdLCByZW5kZXIuZ2xvYmFsX2FtYmllbnRbMl0pO1xuICAgICAgICB0aGlzLmFtYmllbnRMdW1pbmFuY2UgPSByZW5kZXIuYW1iaWVudEx1bWluYW5jZTtcbiAgICAgICAgdGhpcy5fZm9nID0gcmVuZGVyLmZvZztcbiAgICAgICAgdGhpcy5mb2dDb2xvci5zZXQocmVuZGVyLmZvZ19jb2xvclswXSwgcmVuZGVyLmZvZ19jb2xvclsxXSwgcmVuZGVyLmZvZ19jb2xvclsyXSk7XG4gICAgICAgIHRoaXMuZm9nU3RhcnQgPSByZW5kZXIuZm9nX3N0YXJ0O1xuICAgICAgICB0aGlzLmZvZ0VuZCA9IHJlbmRlci5mb2dfZW5kO1xuICAgICAgICB0aGlzLmZvZ0RlbnNpdHkgPSByZW5kZXIuZm9nX2RlbnNpdHk7XG4gICAgICAgIHRoaXMuX2dhbW1hQ29ycmVjdGlvbiA9IHJlbmRlci5nYW1tYV9jb3JyZWN0aW9uO1xuICAgICAgICB0aGlzLl90b25lTWFwcGluZyA9IHJlbmRlci50b25lbWFwcGluZztcbiAgICAgICAgdGhpcy5saWdodG1hcFNpemVNdWx0aXBsaWVyID0gcmVuZGVyLmxpZ2h0bWFwU2l6ZU11bHRpcGxpZXI7XG4gICAgICAgIHRoaXMubGlnaHRtYXBNYXhSZXNvbHV0aW9uID0gcmVuZGVyLmxpZ2h0bWFwTWF4UmVzb2x1dGlvbjtcbiAgICAgICAgdGhpcy5saWdodG1hcE1vZGUgPSByZW5kZXIubGlnaHRtYXBNb2RlO1xuICAgICAgICB0aGlzLmV4cG9zdXJlID0gcmVuZGVyLmV4cG9zdXJlO1xuICAgICAgICB0aGlzLl9za3lib3hJbnRlbnNpdHkgPSByZW5kZXIuc2t5Ym94SW50ZW5zaXR5ID09PSB1bmRlZmluZWQgPyAxIDogcmVuZGVyLnNreWJveEludGVuc2l0eTtcbiAgICAgICAgdGhpcy5fc2t5Ym94THVtaW5hbmNlID0gcmVuZGVyLnNreWJveEx1bWluYW5jZSA9PT0gdW5kZWZpbmVkID8gMjAwMDAgOiByZW5kZXIuc2t5Ym94THVtaW5hbmNlO1xuICAgICAgICB0aGlzLl9za3lib3hNaXAgPSByZW5kZXIuc2t5Ym94TWlwID09PSB1bmRlZmluZWQgPyAwIDogcmVuZGVyLnNreWJveE1pcDtcblxuICAgICAgICBpZiAocmVuZGVyLnNreWJveFJvdGF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLl9za3lib3hSb3RhdGlvbi5zZXRGcm9tRXVsZXJBbmdsZXMocmVuZGVyLnNreWJveFJvdGF0aW9uWzBdLCByZW5kZXIuc2t5Ym94Um90YXRpb25bMV0sIHJlbmRlci5za3lib3hSb3RhdGlvblsyXSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCA9IHJlbmRlci5jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQ7XG4gICAgICAgIHRoaXMubGlnaHRpbmcuYXBwbHlTZXR0aW5ncyhyZW5kZXIpO1xuXG4gICAgICAgIC8vIGJha2Ugc2V0dGluZ3NcbiAgICAgICAgW1xuICAgICAgICAgICAgJ2xpZ2h0bWFwRmlsdGVyRW5hYmxlZCcsXG4gICAgICAgICAgICAnbGlnaHRtYXBGaWx0ZXJSYW5nZScsXG4gICAgICAgICAgICAnbGlnaHRtYXBGaWx0ZXJTbW9vdGhuZXNzJyxcbiAgICAgICAgICAgICdhbWJpZW50QmFrZScsXG4gICAgICAgICAgICAnYW1iaWVudEJha2VOdW1TYW1wbGVzJyxcbiAgICAgICAgICAgICdhbWJpZW50QmFrZVNwaGVyZVBhcnQnLFxuICAgICAgICAgICAgJ2FtYmllbnRCYWtlT2NjbHVzaW9uQnJpZ2h0bmVzcycsXG4gICAgICAgICAgICAnYW1iaWVudEJha2VPY2NsdXNpb25Db250cmFzdCdcbiAgICAgICAgXS5mb3JFYWNoKChzZXR0aW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAocmVuZGVyLmhhc093blByb3BlcnR5KHNldHRpbmcpKSB7XG4gICAgICAgICAgICAgICAgdGhpc1tzZXR0aW5nXSA9IHJlbmRlcltzZXR0aW5nXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fcmVzZXRTa3koKTtcbiAgICB9XG5cbiAgICAvLyBnZXQgdGhlIGFjdHVhbCB0ZXh0dXJlIHRvIHVzZSBmb3Igc2t5Ym94IHJlbmRlcmluZ1xuICAgIF9nZXRTa3lib3hUZXgoKSB7XG4gICAgICAgIGNvbnN0IGN1YmVtYXBzID0gdGhpcy5fcHJlZmlsdGVyZWRDdWJlbWFwcztcblxuICAgICAgICBpZiAodGhpcy5fc2t5Ym94TWlwKSB7XG4gICAgICAgICAgICAvLyBza3lib3ggc2VsZWN0aW9uIGZvciBzb21lIHJlYXNvbiBoYXMgYWx3YXlzIHNraXBwZWQgdGhlIDMyeDMyIHByZWZpbHRlcmVkIG1pcG1hcCwgcHJlc3VtYWJseSBhIGJ1Zy5cbiAgICAgICAgICAgIC8vIHdlIGNhbid0IHNpbXBseSBmaXggdGhpcyBhbmQgbWFwIDMgdG8gdGhlIGNvcnJlY3QgbGV2ZWwsIHNpbmNlIGRvaW5nIHNvIGhhcyB0aGUgcG90ZW50aWFsXG4gICAgICAgICAgICAvLyB0byBjaGFuZ2UgdGhlIGxvb2sgb2YgZXhpc3Rpbmcgc2NlbmVzIGRyYW1hdGljYWxseS5cbiAgICAgICAgICAgIC8vIE5PVEU6IHRoZSB0YWJsZSBza2lwcyB0aGUgMzJ4MzIgbWlwbWFwXG4gICAgICAgICAgICBjb25zdCBza3lib3hNYXBwaW5nID0gWzAsIDEsIC8qIDIgKi8gMywgNCwgNSwgNl07XG5cbiAgICAgICAgICAgIC8vIHNlbGVjdCBibHVycnkgdGV4dHVyZSBmb3IgdXNlIG9uIHRoZSBza3lib3hcbiAgICAgICAgICAgIHJldHVybiBjdWJlbWFwc1tza3lib3hNYXBwaW5nW3RoaXMuX3NreWJveE1pcF1dIHx8IHRoaXMuX2VudkF0bGFzIHx8IGN1YmVtYXBzWzBdIHx8IHRoaXMuX3NreWJveEN1YmVNYXA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fc2t5Ym94Q3ViZU1hcCB8fCBjdWJlbWFwc1swXSB8fCB0aGlzLl9lbnZBdGxhcztcbiAgICB9XG5cbiAgICBfdXBkYXRlU2t5KGRldmljZSkge1xuICAgICAgICBpZiAoIXRoaXMuc2t5KSB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy5fZ2V0U2t5Ym94VGV4KCk7XG4gICAgICAgICAgICBpZiAodGV4dHVyZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2t5ID0gbmV3IFNreShkZXZpY2UsIHRoaXMsIHRleHR1cmUpO1xuICAgICAgICAgICAgICAgIHRoaXMuZmlyZSgnc2V0OnNreWJveCcsIHRleHR1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3Jlc2V0U2t5KCkge1xuICAgICAgICB0aGlzLnNreT8uZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnNreSA9IG51bGw7XG4gICAgICAgIHRoaXMudXBkYXRlU2hhZGVycyA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY3ViZW1hcCBmb3IgdGhlIHNjZW5lIHNreWJveC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGV4dHVyZVtdfSBbY3ViZW1hcHNdIC0gQW4gYXJyYXkgb2YgY3ViZW1hcHMgY29ycmVzcG9uZGluZyB0byB0aGUgc2t5Ym94IGF0XG4gICAgICogZGlmZmVyZW50IG1pcCBsZXZlbHMuIElmIHVuZGVmaW5lZCwgc2NlbmUgd2lsbCByZW1vdmUgc2t5Ym94LiBDdWJlbWFwIGFycmF5IHNob3VsZCBiZSBvZlxuICAgICAqIHNpemUgNywgd2l0aCB0aGUgZmlyc3QgZWxlbWVudCAoaW5kZXggMCkgY29ycmVzcG9uZGluZyB0byB0aGUgYmFzZSBjdWJlbWFwIChtaXAgbGV2ZWwgMClcbiAgICAgKiB3aXRoIG9yaWdpbmFsIHJlc29sdXRpb24uIEVhY2ggcmVtYWluaW5nIGVsZW1lbnQgKGluZGV4IDEtNikgY29ycmVzcG9uZHMgdG8gYSBmaXhlZFxuICAgICAqIHByZWZpbHRlcmVkIHJlc29sdXRpb24gKDEyOHgxMjgsIDY0eDY0LCAzMngzMiwgMTZ4MTYsIDh4OCwgNHg0KS5cbiAgICAgKi9cbiAgICBzZXRTa3lib3goY3ViZW1hcHMpIHtcbiAgICAgICAgaWYgKCFjdWJlbWFwcykge1xuICAgICAgICAgICAgdGhpcy5za3lib3ggPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5wcmVmaWx0ZXJlZEN1YmVtYXBzID0gW251bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGxdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5za3lib3ggPSBjdWJlbWFwc1swXSB8fCBudWxsO1xuICAgICAgICAgICAgdGhpcy5wcmVmaWx0ZXJlZEN1YmVtYXBzID0gY3ViZW1hcHMuc2xpY2UoMSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IFNjZW5lIH07XG4iXSwibmFtZXMiOlsiU2NlbmUiLCJFdmVudEhhbmRsZXIiLCJjb25zdHJ1Y3RvciIsImdyYXBoaWNzRGV2aWNlIiwiYW1iaWVudEJha2UiLCJhbWJpZW50QmFrZU9jY2x1c2lvbkJyaWdodG5lc3MiLCJhbWJpZW50QmFrZU9jY2x1c2lvbkNvbnRyYXN0IiwiYW1iaWVudExpZ2h0IiwiQ29sb3IiLCJhbWJpZW50THVtaW5hbmNlIiwiZXhwb3N1cmUiLCJmb2dDb2xvciIsImZvZ0RlbnNpdHkiLCJmb2dFbmQiLCJmb2dTdGFydCIsImxpZ2h0bWFwU2l6ZU11bHRpcGxpZXIiLCJsaWdodG1hcE1heFJlc29sdXRpb24iLCJsaWdodG1hcE1vZGUiLCJCQUtFX0NPTE9SRElSIiwibGlnaHRtYXBGaWx0ZXJFbmFibGVkIiwicm9vdCIsInNreSIsInBoeXNpY2FsVW5pdHMiLCJEZWJ1ZyIsImFzc2VydERlcHJlY2F0ZWQiLCJkZXZpY2UiLCJHcmFwaGljc0RldmljZUFjY2VzcyIsImdldCIsIl9ncmF2aXR5IiwiVmVjMyIsIl9sYXllcnMiLCJfZm9nIiwiRk9HX05PTkUiLCJfZ2FtbWFDb3JyZWN0aW9uIiwiR0FNTUFfU1JHQiIsIl90b25lTWFwcGluZyIsIl9za3lib3hDdWJlTWFwIiwiX3ByZWZpbHRlcmVkQ3ViZW1hcHMiLCJfZW52QXRsYXMiLCJfaW50ZXJuYWxFbnZBdGxhcyIsIl9za3lib3hJbnRlbnNpdHkiLCJfc2t5Ym94THVtaW5hbmNlIiwiX3NreWJveE1pcCIsIl9za3lib3hSb3RhdGlvbiIsIlF1YXQiLCJfc2t5Ym94Um90YXRpb25NYXQzIiwiTWF0MyIsIl9za3lib3hSb3RhdGlvbk1hdDQiLCJNYXQ0IiwiX2FtYmllbnRCYWtlTnVtU2FtcGxlcyIsIl9hbWJpZW50QmFrZVNwaGVyZVBhcnQiLCJfbGlnaHRtYXBGaWx0ZXJSYW5nZSIsIl9saWdodG1hcEZpbHRlclNtb290aG5lc3MiLCJfY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkIiwiX2xpZ2h0aW5nUGFyYW1zIiwiTGlnaHRpbmdQYXJhbXMiLCJzdXBwb3J0c0FyZWFMaWdodHMiLCJtYXhUZXh0dXJlU2l6ZSIsIl9kaXJ0eUxpZ2h0cyIsIl9zdGF0cyIsIm1lc2hJbnN0YW5jZXMiLCJsaWdodHMiLCJkeW5hbWljTGlnaHRzIiwiYmFrZWRMaWdodHMiLCJsYXN0U3RhdGljUHJlcGFyZUZ1bGxUaW1lIiwibGFzdFN0YXRpY1ByZXBhcmVTZWFyY2hUaW1lIiwibGFzdFN0YXRpY1ByZXBhcmVXcml0ZVRpbWUiLCJsYXN0U3RhdGljUHJlcGFyZVRyaUFhYmJUaW1lIiwibGFzdFN0YXRpY1ByZXBhcmVDb21iaW5lVGltZSIsInVwZGF0ZVNoYWRlcnNUaW1lIiwidXBkYXRlU2hhZGVycyIsIl9zaGFkZXJWZXJzaW9uIiwiX3N0YXRzVXBkYXRlZCIsImltbWVkaWF0ZSIsIkltbWVkaWF0ZSIsImRlZmF1bHREcmF3TGF5ZXIiLCJsYXllcnMiLCJnZXRMYXllckJ5SWQiLCJMQVlFUklEX0lNTUVESUFURSIsImFtYmllbnRCYWtlTnVtU2FtcGxlcyIsInZhbHVlIiwibWF0aCIsImNsYW1wIiwiTWF0aCIsImZsb29yIiwiYW1iaWVudEJha2VTcGhlcmVQYXJ0IiwiY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkIiwiY29uc29sZSIsImVycm9yIiwiZHJhd0NhbGxzIiwiX21lc2hJbnN0YW5jZXMiLCJsZW5ndGgiLCJfdXBkYXRlIiwiZW52QXRsYXMiLCJmb2ciLCJ0eXBlIiwiZ2FtbWFDb3JyZWN0aW9uIiwicHJldiIsImZpcmUiLCJsaWdodGluZyIsImxpZ2h0bWFwRmlsdGVyUmFuZ2UiLCJtYXgiLCJsaWdodG1hcEZpbHRlclNtb290aG5lc3MiLCJwcmVmaWx0ZXJlZEN1YmVtYXBzIiwiY3ViZW1hcHMiLCJjaGFuZ2VkIiwiY29tcGxldGUiLCJpIiwidiIsIl9yZXNldFNreSIsIkVudkxpZ2h0aW5nIiwiZ2VuZXJhdGVQcmVmaWx0ZXJlZEF0bGFzIiwidGFyZ2V0IiwiZGVzdHJveSIsInNreWJveCIsInNreWJveEludGVuc2l0eSIsInNreWJveEx1bWluYW5jZSIsInNreWJveE1pcCIsInNreWJveFJvdGF0aW9uIiwiZXF1YWxzIiwiY29weSIsIklERU5USVRZIiwic2V0SWRlbnRpdHkiLCJzZXRUUlMiLCJaRVJPIiwiT05FIiwiaW52ZXJ0VG8zeDMiLCJ0b25lTWFwcGluZyIsIm9mZiIsImRyYXdMaW5lIiwic3RhcnQiLCJlbmQiLCJjb2xvciIsIldISVRFIiwiZGVwdGhUZXN0IiwibGF5ZXIiLCJiYXRjaCIsImdldEJhdGNoIiwiYWRkTGluZXMiLCJkcmF3TGluZXMiLCJwb3NpdGlvbnMiLCJjb2xvcnMiLCJkcmF3TGluZUFycmF5cyIsImFkZExpbmVzQXJyYXlzIiwiYXBwbHlTZXR0aW5ncyIsInNldHRpbmdzIiwicGh5c2ljcyIsInJlbmRlciIsInNldCIsImdyYXZpdHkiLCJnbG9iYWxfYW1iaWVudCIsImZvZ19jb2xvciIsImZvZ19zdGFydCIsImZvZ19lbmQiLCJmb2dfZGVuc2l0eSIsImdhbW1hX2NvcnJlY3Rpb24iLCJ0b25lbWFwcGluZyIsInVuZGVmaW5lZCIsInNldEZyb21FdWxlckFuZ2xlcyIsImZvckVhY2giLCJzZXR0aW5nIiwiaGFzT3duUHJvcGVydHkiLCJfZ2V0U2t5Ym94VGV4Iiwic2t5Ym94TWFwcGluZyIsIl91cGRhdGVTa3kiLCJ0ZXh0dXJlIiwiU2t5Iiwic2V0U2t5Ym94Iiwic2xpY2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBK0JBLE1BQU1BLEtBQUssU0FBU0MsWUFBWSxDQUFDOztFQWlKN0JDLFdBQVcsQ0FBQ0MsY0FBYyxFQUFFO0FBQ3hCLElBQUEsS0FBSyxFQUFFLENBQUE7SUFBQyxJQTNJWkMsQ0FBQUEsV0FBVyxHQUFHLEtBQUssQ0FBQTtJQUFBLElBUW5CQyxDQUFBQSw4QkFBOEIsR0FBRyxDQUFDLENBQUE7SUFBQSxJQVFsQ0MsQ0FBQUEsNEJBQTRCLEdBQUcsQ0FBQyxDQUFBO0lBQUEsSUFPaENDLENBQUFBLFlBQVksR0FBRyxJQUFJQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUFBLElBT2pDQyxDQUFBQSxnQkFBZ0IsR0FBRyxDQUFDLENBQUE7SUFBQSxJQU9wQkMsQ0FBQUEsUUFBUSxHQUFHLENBQUMsQ0FBQTtJQUFBLElBT1pDLENBQUFBLFFBQVEsR0FBRyxJQUFJSCxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUFBLElBUTdCSSxDQUFBQSxVQUFVLEdBQUcsQ0FBQyxDQUFBO0lBQUEsSUFRZEMsQ0FBQUEsTUFBTSxHQUFHLElBQUksQ0FBQTtJQUFBLElBUWJDLENBQUFBLFFBQVEsR0FBRyxDQUFDLENBQUE7SUFBQSxJQU9aQyxDQUFBQSxzQkFBc0IsR0FBRyxDQUFDLENBQUE7SUFBQSxJQU8xQkMsQ0FBQUEscUJBQXFCLEdBQUcsSUFBSSxDQUFBO0lBQUEsSUFjNUJDLENBQUFBLFlBQVksR0FBR0MsYUFBYSxDQUFBO0lBQUEsSUFXNUJDLENBQUFBLHFCQUFxQixHQUFHLEtBQUssQ0FBQTtJQUFBLElBUTdCQyxDQUFBQSxJQUFJLEdBQUcsSUFBSSxDQUFBO0lBQUEsSUFRWEMsQ0FBQUEsR0FBRyxHQUFHLElBQUksQ0FBQTtJQUFBLElBT1ZDLENBQUFBLGFBQWEsR0FBRyxLQUFLLENBQUE7QUFXakJDLElBQUFBLEtBQUssQ0FBQ0MsZ0JBQWdCLENBQUNyQixjQUFjLEVBQUUsbUZBQW1GLENBQUMsQ0FBQTtJQUMzSCxJQUFJLENBQUNzQixNQUFNLEdBQUd0QixjQUFjLElBQUl1QixvQkFBb0IsQ0FBQ0MsR0FBRyxFQUFFLENBQUE7QUFFMUQsSUFBQSxJQUFJLENBQUNDLFFBQVEsR0FBRyxJQUFJQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFBOztJQU1wQyxJQUFJLENBQUNDLE9BQU8sR0FBRyxJQUFJLENBQUE7SUFFbkIsSUFBSSxDQUFDQyxJQUFJLEdBQUdDLFFBQVEsQ0FBQTtJQUVwQixJQUFJLENBQUNDLGdCQUFnQixHQUFHQyxVQUFVLENBQUE7SUFDbEMsSUFBSSxDQUFDQyxZQUFZLEdBQUcsQ0FBQyxDQUFBOztJQVFyQixJQUFJLENBQUNDLGNBQWMsR0FBRyxJQUFJLENBQUE7O0FBUTFCLElBQUEsSUFBSSxDQUFDQyxvQkFBb0IsR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUE7O0lBUWhFLElBQUksQ0FBQ0MsU0FBUyxHQUFHLElBQUksQ0FBQTs7SUFHckIsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRyxJQUFJLENBQUE7SUFFN0IsSUFBSSxDQUFDQyxnQkFBZ0IsR0FBRyxDQUFDLENBQUE7SUFDekIsSUFBSSxDQUFDQyxnQkFBZ0IsR0FBRyxDQUFDLENBQUE7SUFDekIsSUFBSSxDQUFDQyxVQUFVLEdBQUcsQ0FBQyxDQUFBO0FBRW5CLElBQUEsSUFBSSxDQUFDQyxlQUFlLEdBQUcsSUFBSUMsSUFBSSxFQUFFLENBQUE7QUFDakMsSUFBQSxJQUFJLENBQUNDLG1CQUFtQixHQUFHLElBQUlDLElBQUksRUFBRSxDQUFBO0FBQ3JDLElBQUEsSUFBSSxDQUFDQyxtQkFBbUIsR0FBRyxJQUFJQyxJQUFJLEVBQUUsQ0FBQTs7SUFHckMsSUFBSSxDQUFDQyxzQkFBc0IsR0FBRyxDQUFDLENBQUE7SUFDL0IsSUFBSSxDQUFDQyxzQkFBc0IsR0FBRyxHQUFHLENBQUE7SUFFakMsSUFBSSxDQUFDQyxvQkFBb0IsR0FBRyxFQUFFLENBQUE7SUFDOUIsSUFBSSxDQUFDQyx5QkFBeUIsR0FBRyxHQUFHLENBQUE7O0lBR3BDLElBQUksQ0FBQ0MseUJBQXlCLEdBQUcsSUFBSSxDQUFBO0FBQ3JDLElBQUEsSUFBSSxDQUFDQyxlQUFlLEdBQUcsSUFBSUMsY0FBYyxDQUFDLElBQUksQ0FBQzlCLE1BQU0sQ0FBQytCLGtCQUFrQixFQUFFLElBQUksQ0FBQy9CLE1BQU0sQ0FBQ2dDLGNBQWMsRUFBRSxNQUFNO0FBQ3hHLE1BQUEsSUFBSSxDQUFDM0IsT0FBTyxDQUFDNEIsWUFBWSxHQUFHLElBQUksQ0FBQTtBQUNwQyxLQUFDLENBQUMsQ0FBQTtJQUVGLElBQUksQ0FBQ0MsTUFBTSxHQUFHO0FBQ1ZDLE1BQUFBLGFBQWEsRUFBRSxDQUFDO0FBQ2hCQyxNQUFBQSxNQUFNLEVBQUUsQ0FBQztBQUNUQyxNQUFBQSxhQUFhLEVBQUUsQ0FBQztBQUNoQkMsTUFBQUEsV0FBVyxFQUFFLENBQUM7QUFDZEMsTUFBQUEseUJBQXlCLEVBQUUsQ0FBQztBQUM1QkMsTUFBQUEsMkJBQTJCLEVBQUUsQ0FBQztBQUM5QkMsTUFBQUEsMEJBQTBCLEVBQUUsQ0FBQztBQUM3QkMsTUFBQUEsNEJBQTRCLEVBQUUsQ0FBQztBQUMvQkMsTUFBQUEsNEJBQTRCLEVBQUUsQ0FBQztBQUMvQkMsTUFBQUEsaUJBQWlCLEVBQUUsQ0FBQTtLQUN0QixDQUFBOztJQVNELElBQUksQ0FBQ0MsYUFBYSxHQUFHLElBQUksQ0FBQTtJQUV6QixJQUFJLENBQUNDLGNBQWMsR0FBRyxDQUFDLENBQUE7SUFDdkIsSUFBSSxDQUFDQyxhQUFhLEdBQUcsS0FBSyxDQUFBOztJQUcxQixJQUFJLENBQUNDLFNBQVMsR0FBRyxJQUFJQyxTQUFTLENBQUMsSUFBSSxDQUFDakQsTUFBTSxDQUFDLENBQUE7QUFDL0MsR0FBQTs7QUF5Q0EsRUFBQSxJQUFJa0QsZ0JBQWdCLEdBQUc7QUFDbkIsSUFBQSxPQUFPLElBQUksQ0FBQ0MsTUFBTSxDQUFDQyxZQUFZLENBQUNDLGlCQUFpQixDQUFDLENBQUE7QUFDdEQsR0FBQTs7RUFRQSxJQUFJQyxxQkFBcUIsQ0FBQ0MsS0FBSyxFQUFFO0FBQzdCLElBQUEsSUFBSSxDQUFDL0Isc0JBQXNCLEdBQUdnQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNKLEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQTtBQUN2RSxHQUFBO0FBRUEsRUFBQSxJQUFJRCxxQkFBcUIsR0FBRztJQUN4QixPQUFPLElBQUksQ0FBQzlCLHNCQUFzQixDQUFBO0FBQ3RDLEdBQUE7O0VBV0EsSUFBSW9DLHFCQUFxQixDQUFDTCxLQUFLLEVBQUU7QUFDN0IsSUFBQSxJQUFJLENBQUM5QixzQkFBc0IsR0FBRytCLElBQUksQ0FBQ0MsS0FBSyxDQUFDRixLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFBO0FBQzdELEdBQUE7QUFFQSxFQUFBLElBQUlLLHFCQUFxQixHQUFHO0lBQ3hCLE9BQU8sSUFBSSxDQUFDbkMsc0JBQXNCLENBQUE7QUFDdEMsR0FBQTs7RUFRQSxJQUFJb0Msd0JBQXdCLENBQUNOLEtBQUssRUFBRTtBQUVoQyxJQUFBLElBQUksQ0FBQyxJQUFJLENBQUMzQix5QkFBeUIsSUFBSTJCLEtBQUssRUFBRTtBQUMxQ08sTUFBQUEsT0FBTyxDQUFDQyxLQUFLLENBQUMsbUVBQW1FLENBQUMsQ0FBQTtBQUNsRixNQUFBLE9BQUE7QUFDSixLQUFBO0lBRUEsSUFBSSxDQUFDbkMseUJBQXlCLEdBQUcyQixLQUFLLENBQUE7QUFDMUMsR0FBQTtBQUVBLEVBQUEsSUFBSU0sd0JBQXdCLEdBQUc7SUFDM0IsT0FBTyxJQUFJLENBQUNqQyx5QkFBeUIsQ0FBQTtBQUN6QyxHQUFBOztBQVNBLEVBQUEsSUFBSW9DLFNBQVMsQ0FBQ1QsS0FBSyxFQUFFLEVBQ3JCO0FBRUEsRUFBQSxJQUFJUyxTQUFTLEdBQUc7QUFDWixJQUFBLElBQUlBLFNBQVMsR0FBRyxJQUFJLENBQUNiLE1BQU0sQ0FBQ2MsY0FBYyxDQUFBO0FBQzFDLElBQUEsSUFBSSxDQUFDRCxTQUFTLENBQUNFLE1BQU0sRUFBRTtBQUNuQixNQUFBLElBQUksQ0FBQ2YsTUFBTSxDQUFDZ0IsT0FBTyxDQUFDLElBQUksQ0FBQ25FLE1BQU0sRUFBRSxJQUFJLENBQUM2RCx3QkFBd0IsQ0FBQyxDQUFBO0FBQy9ERyxNQUFBQSxTQUFTLEdBQUcsSUFBSSxDQUFDYixNQUFNLENBQUNjLGNBQWMsQ0FBQTtBQUMxQyxLQUFBO0FBQ0EsSUFBQSxPQUFPRCxTQUFTLENBQUE7QUFDcEIsR0FBQTs7RUFPQSxJQUFJSSxRQUFRLENBQUNiLEtBQUssRUFBRTtBQUNoQixJQUFBLElBQUlBLEtBQUssS0FBSyxJQUFJLENBQUMxQyxTQUFTLEVBQUU7TUFDMUIsSUFBSSxDQUFDQSxTQUFTLEdBQUcwQyxLQUFLLENBQUE7TUFDdEIsSUFBSSxDQUFDVixhQUFhLEdBQUcsSUFBSSxDQUFBO0FBQzdCLEtBQUE7QUFDSixHQUFBO0FBRUEsRUFBQSxJQUFJdUIsUUFBUSxHQUFHO0lBQ1gsT0FBTyxJQUFJLENBQUN2RCxTQUFTLENBQUE7QUFDekIsR0FBQTs7RUFjQSxJQUFJd0QsR0FBRyxDQUFDQyxJQUFJLEVBQUU7QUFDVixJQUFBLElBQUlBLElBQUksS0FBSyxJQUFJLENBQUNoRSxJQUFJLEVBQUU7TUFDcEIsSUFBSSxDQUFDQSxJQUFJLEdBQUdnRSxJQUFJLENBQUE7TUFDaEIsSUFBSSxDQUFDekIsYUFBYSxHQUFHLElBQUksQ0FBQTtBQUM3QixLQUFBO0FBQ0osR0FBQTtBQUVBLEVBQUEsSUFBSXdCLEdBQUcsR0FBRztJQUNOLE9BQU8sSUFBSSxDQUFDL0QsSUFBSSxDQUFBO0FBQ3BCLEdBQUE7O0VBWUEsSUFBSWlFLGVBQWUsQ0FBQ2hCLEtBQUssRUFBRTtBQUN2QixJQUFBLElBQUlBLEtBQUssS0FBSyxJQUFJLENBQUMvQyxnQkFBZ0IsRUFBRTtNQUNqQyxJQUFJLENBQUNBLGdCQUFnQixHQUFHK0MsS0FBSyxDQUFBO01BQzdCLElBQUksQ0FBQ1YsYUFBYSxHQUFHLElBQUksQ0FBQTtBQUM3QixLQUFBO0FBQ0osR0FBQTtBQUVBLEVBQUEsSUFBSTBCLGVBQWUsR0FBRztJQUNsQixPQUFPLElBQUksQ0FBQy9ELGdCQUFnQixDQUFBO0FBQ2hDLEdBQUE7O0VBT0EsSUFBSTJDLE1BQU0sQ0FBQ0EsTUFBTSxFQUFFO0FBQ2YsSUFBQSxNQUFNcUIsSUFBSSxHQUFHLElBQUksQ0FBQ25FLE9BQU8sQ0FBQTtJQUN6QixJQUFJLENBQUNBLE9BQU8sR0FBRzhDLE1BQU0sQ0FBQTtJQUNyQixJQUFJLENBQUNzQixJQUFJLENBQUMsWUFBWSxFQUFFRCxJQUFJLEVBQUVyQixNQUFNLENBQUMsQ0FBQTtBQUN6QyxHQUFBO0FBRUEsRUFBQSxJQUFJQSxNQUFNLEdBQUc7SUFDVCxPQUFPLElBQUksQ0FBQzlDLE9BQU8sQ0FBQTtBQUN2QixHQUFBOztBQU9BLEVBQUEsSUFBSXFFLFFBQVEsR0FBRztJQUNYLE9BQU8sSUFBSSxDQUFDN0MsZUFBZSxDQUFBO0FBQy9CLEdBQUE7O0VBU0EsSUFBSThDLG1CQUFtQixDQUFDcEIsS0FBSyxFQUFFO0lBQzNCLElBQUksQ0FBQzdCLG9CQUFvQixHQUFHZ0MsSUFBSSxDQUFDa0IsR0FBRyxDQUFDckIsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFBO0FBQ3RELEdBQUE7QUFFQSxFQUFBLElBQUlvQixtQkFBbUIsR0FBRztJQUN0QixPQUFPLElBQUksQ0FBQ2pELG9CQUFvQixDQUFBO0FBQ3BDLEdBQUE7O0VBU0EsSUFBSW1ELHdCQUF3QixDQUFDdEIsS0FBSyxFQUFFO0lBQ2hDLElBQUksQ0FBQzVCLHlCQUF5QixHQUFHK0IsSUFBSSxDQUFDa0IsR0FBRyxDQUFDckIsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFBO0FBQzNELEdBQUE7QUFFQSxFQUFBLElBQUlzQix3QkFBd0IsR0FBRztJQUMzQixPQUFPLElBQUksQ0FBQ2xELHlCQUF5QixDQUFBO0FBQ3pDLEdBQUE7O0VBT0EsSUFBSW1ELG1CQUFtQixDQUFDdkIsS0FBSyxFQUFFO0FBQzNCLElBQUEsTUFBTXdCLFFBQVEsR0FBRyxJQUFJLENBQUNuRSxvQkFBb0IsQ0FBQTtJQUUxQzJDLEtBQUssR0FBR0EsS0FBSyxJQUFJLEVBQUUsQ0FBQTtJQUVuQixJQUFJeUIsT0FBTyxHQUFHLEtBQUssQ0FBQTtJQUNuQixJQUFJQyxRQUFRLEdBQUcsSUFBSSxDQUFBO0lBQ25CLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFQSxDQUFDLEVBQUU7QUFDeEIsTUFBQSxNQUFNQyxDQUFDLEdBQUc1QixLQUFLLENBQUMyQixDQUFDLENBQUMsSUFBSSxJQUFJLENBQUE7QUFDMUIsTUFBQSxJQUFJSCxRQUFRLENBQUNHLENBQUMsQ0FBQyxLQUFLQyxDQUFDLEVBQUU7QUFDbkJKLFFBQUFBLFFBQVEsQ0FBQ0csQ0FBQyxDQUFDLEdBQUdDLENBQUMsQ0FBQTtBQUNmSCxRQUFBQSxPQUFPLEdBQUcsSUFBSSxDQUFBO0FBQ2xCLE9BQUE7TUFDQUMsUUFBUSxHQUFHQSxRQUFRLElBQUssQ0FBQyxDQUFDRixRQUFRLENBQUNHLENBQUMsQ0FBRSxDQUFBO0FBQzFDLEtBQUE7QUFFQSxJQUFBLElBQUlGLE9BQU8sRUFBRTtNQUNULElBQUksQ0FBQ0ksU0FBUyxFQUFFLENBQUE7QUFFaEIsTUFBQSxJQUFJSCxRQUFRLEVBQUU7UUFFVixJQUFJLENBQUNuRSxpQkFBaUIsR0FBR3VFLFdBQVcsQ0FBQ0Msd0JBQXdCLENBQUNQLFFBQVEsRUFBRTtVQUNwRVEsTUFBTSxFQUFFLElBQUksQ0FBQ3pFLGlCQUFBQTtBQUNqQixTQUFDLENBQUMsQ0FBQTtBQUVGLFFBQUEsSUFBSSxDQUFDLElBQUksQ0FBQ0QsU0FBUyxFQUFFO0FBRWpCLFVBQUEsSUFBSSxDQUFDdUQsUUFBUSxHQUFHLElBQUksQ0FBQ3RELGlCQUFpQixDQUFBO0FBQzFDLFNBQUE7QUFDSixPQUFDLE1BQU0sSUFBSSxJQUFJLENBQUNBLGlCQUFpQixFQUFFO0FBQy9CLFFBQUEsSUFBSSxJQUFJLENBQUNELFNBQVMsS0FBSyxJQUFJLENBQUNDLGlCQUFpQixFQUFFO1VBQzNDLElBQUksQ0FBQ3NELFFBQVEsR0FBRyxJQUFJLENBQUE7QUFDeEIsU0FBQTtBQUNBLFFBQUEsSUFBSSxDQUFDdEQsaUJBQWlCLENBQUMwRSxPQUFPLEVBQUUsQ0FBQTtRQUNoQyxJQUFJLENBQUMxRSxpQkFBaUIsR0FBRyxJQUFJLENBQUE7QUFDakMsT0FBQTtBQUNKLEtBQUE7QUFDSixHQUFBO0FBRUEsRUFBQSxJQUFJZ0UsbUJBQW1CLEdBQUc7SUFDdEIsT0FBTyxJQUFJLENBQUNsRSxvQkFBb0IsQ0FBQTtBQUNwQyxHQUFBOztFQU9BLElBQUk2RSxNQUFNLENBQUNsQyxLQUFLLEVBQUU7QUFDZCxJQUFBLElBQUlBLEtBQUssS0FBSyxJQUFJLENBQUM1QyxjQUFjLEVBQUU7TUFDL0IsSUFBSSxDQUFDQSxjQUFjLEdBQUc0QyxLQUFLLENBQUE7TUFDM0IsSUFBSSxDQUFDNkIsU0FBUyxFQUFFLENBQUE7QUFDcEIsS0FBQTtBQUNKLEdBQUE7QUFFQSxFQUFBLElBQUlLLE1BQU0sR0FBRztJQUNULE9BQU8sSUFBSSxDQUFDOUUsY0FBYyxDQUFBO0FBQzlCLEdBQUE7O0VBT0EsSUFBSStFLGVBQWUsQ0FBQ25DLEtBQUssRUFBRTtBQUN2QixJQUFBLElBQUlBLEtBQUssS0FBSyxJQUFJLENBQUN4QyxnQkFBZ0IsRUFBRTtNQUNqQyxJQUFJLENBQUNBLGdCQUFnQixHQUFHd0MsS0FBSyxDQUFBO01BQzdCLElBQUksQ0FBQzZCLFNBQVMsRUFBRSxDQUFBO0FBQ3BCLEtBQUE7QUFDSixHQUFBO0FBRUEsRUFBQSxJQUFJTSxlQUFlLEdBQUc7SUFDbEIsT0FBTyxJQUFJLENBQUMzRSxnQkFBZ0IsQ0FBQTtBQUNoQyxHQUFBOztFQU9BLElBQUk0RSxlQUFlLENBQUNwQyxLQUFLLEVBQUU7QUFDdkIsSUFBQSxJQUFJQSxLQUFLLEtBQUssSUFBSSxDQUFDdkMsZ0JBQWdCLEVBQUU7TUFDakMsSUFBSSxDQUFDQSxnQkFBZ0IsR0FBR3VDLEtBQUssQ0FBQTtNQUM3QixJQUFJLENBQUM2QixTQUFTLEVBQUUsQ0FBQTtBQUNwQixLQUFBO0FBQ0osR0FBQTtBQUVBLEVBQUEsSUFBSU8sZUFBZSxHQUFHO0lBQ2xCLE9BQU8sSUFBSSxDQUFDM0UsZ0JBQWdCLENBQUE7QUFDaEMsR0FBQTs7RUFRQSxJQUFJNEUsU0FBUyxDQUFDckMsS0FBSyxFQUFFO0FBQ2pCLElBQUEsSUFBSUEsS0FBSyxLQUFLLElBQUksQ0FBQ3RDLFVBQVUsRUFBRTtNQUMzQixJQUFJLENBQUNBLFVBQVUsR0FBR3NDLEtBQUssQ0FBQTtNQUN2QixJQUFJLENBQUM2QixTQUFTLEVBQUUsQ0FBQTtBQUNwQixLQUFBO0FBQ0osR0FBQTtBQUVBLEVBQUEsSUFBSVEsU0FBUyxHQUFHO0lBQ1osT0FBTyxJQUFJLENBQUMzRSxVQUFVLENBQUE7QUFDMUIsR0FBQTs7RUFPQSxJQUFJNEUsY0FBYyxDQUFDdEMsS0FBSyxFQUFFO0lBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUNyQyxlQUFlLENBQUM0RSxNQUFNLENBQUN2QyxLQUFLLENBQUMsRUFBRTtBQUNyQyxNQUFBLElBQUksQ0FBQ3JDLGVBQWUsQ0FBQzZFLElBQUksQ0FBQ3hDLEtBQUssQ0FBQyxDQUFBO01BQ2hDLElBQUlBLEtBQUssQ0FBQ3VDLE1BQU0sQ0FBQzNFLElBQUksQ0FBQzZFLFFBQVEsQ0FBQyxFQUFFO0FBQzdCLFFBQUEsSUFBSSxDQUFDNUUsbUJBQW1CLENBQUM2RSxXQUFXLEVBQUUsQ0FBQTtBQUMxQyxPQUFDLE1BQU07QUFDSCxRQUFBLElBQUksQ0FBQzNFLG1CQUFtQixDQUFDNEUsTUFBTSxDQUFDOUYsSUFBSSxDQUFDK0YsSUFBSSxFQUFFNUMsS0FBSyxFQUFFbkQsSUFBSSxDQUFDZ0csR0FBRyxDQUFDLENBQUE7UUFDM0QsSUFBSSxDQUFDOUUsbUJBQW1CLENBQUMrRSxXQUFXLENBQUMsSUFBSSxDQUFDakYsbUJBQW1CLENBQUMsQ0FBQTtBQUNsRSxPQUFBO01BQ0EsSUFBSSxDQUFDZ0UsU0FBUyxFQUFFLENBQUE7QUFDcEIsS0FBQTtBQUNKLEdBQUE7QUFFQSxFQUFBLElBQUlTLGNBQWMsR0FBRztJQUNqQixPQUFPLElBQUksQ0FBQzNFLGVBQWUsQ0FBQTtBQUMvQixHQUFBOztFQWNBLElBQUlvRixXQUFXLENBQUMvQyxLQUFLLEVBQUU7QUFDbkIsSUFBQSxJQUFJQSxLQUFLLEtBQUssSUFBSSxDQUFDN0MsWUFBWSxFQUFFO01BQzdCLElBQUksQ0FBQ0EsWUFBWSxHQUFHNkMsS0FBSyxDQUFBO01BQ3pCLElBQUksQ0FBQ1YsYUFBYSxHQUFHLElBQUksQ0FBQTtBQUM3QixLQUFBO0FBQ0osR0FBQTtBQUVBLEVBQUEsSUFBSXlELFdBQVcsR0FBRztJQUNkLE9BQU8sSUFBSSxDQUFDNUYsWUFBWSxDQUFBO0FBQzVCLEdBQUE7QUFFQThFLEVBQUFBLE9BQU8sR0FBRztJQUNOLElBQUksQ0FBQ0osU0FBUyxFQUFFLENBQUE7SUFDaEIsSUFBSSxDQUFDekYsSUFBSSxHQUFHLElBQUksQ0FBQTtJQUNoQixJQUFJLENBQUM0RyxHQUFHLEVBQUUsQ0FBQTtBQUNkLEdBQUE7RUFFQUMsUUFBUSxDQUFDQyxLQUFLLEVBQUVDLEdBQUcsRUFBRUMsS0FBSyxHQUFHNUgsS0FBSyxDQUFDNkgsS0FBSyxFQUFFQyxTQUFTLEdBQUcsSUFBSSxFQUFFQyxLQUFLLEdBQUcsSUFBSSxDQUFDNUQsZ0JBQWdCLEVBQUU7SUFDdkYsTUFBTTZELEtBQUssR0FBRyxJQUFJLENBQUMvRCxTQUFTLENBQUNnRSxRQUFRLENBQUNGLEtBQUssRUFBRUQsU0FBUyxDQUFDLENBQUE7QUFDdkRFLElBQUFBLEtBQUssQ0FBQ0UsUUFBUSxDQUFDLENBQUNSLEtBQUssRUFBRUMsR0FBRyxDQUFDLEVBQUUsQ0FBQ0MsS0FBSyxFQUFFQSxLQUFLLENBQUMsQ0FBQyxDQUFBO0FBQ2hELEdBQUE7QUFFQU8sRUFBQUEsU0FBUyxDQUFDQyxTQUFTLEVBQUVDLE1BQU0sRUFBRVAsU0FBUyxHQUFHLElBQUksRUFBRUMsS0FBSyxHQUFHLElBQUksQ0FBQzVELGdCQUFnQixFQUFFO0lBQzFFLE1BQU02RCxLQUFLLEdBQUcsSUFBSSxDQUFDL0QsU0FBUyxDQUFDZ0UsUUFBUSxDQUFDRixLQUFLLEVBQUVELFNBQVMsQ0FBQyxDQUFBO0FBQ3ZERSxJQUFBQSxLQUFLLENBQUNFLFFBQVEsQ0FBQ0UsU0FBUyxFQUFFQyxNQUFNLENBQUMsQ0FBQTtBQUNyQyxHQUFBO0FBRUFDLEVBQUFBLGNBQWMsQ0FBQ0YsU0FBUyxFQUFFQyxNQUFNLEVBQUVQLFNBQVMsR0FBRyxJQUFJLEVBQUVDLEtBQUssR0FBRyxJQUFJLENBQUM1RCxnQkFBZ0IsRUFBRTtJQUMvRSxNQUFNNkQsS0FBSyxHQUFHLElBQUksQ0FBQy9ELFNBQVMsQ0FBQ2dFLFFBQVEsQ0FBQ0YsS0FBSyxFQUFFRCxTQUFTLENBQUMsQ0FBQTtBQUN2REUsSUFBQUEsS0FBSyxDQUFDTyxjQUFjLENBQUNILFNBQVMsRUFBRUMsTUFBTSxDQUFDLENBQUE7QUFDM0MsR0FBQTtFQUVBRyxhQUFhLENBQUNDLFFBQVEsRUFBRTtBQUNwQixJQUFBLE1BQU1DLE9BQU8sR0FBR0QsUUFBUSxDQUFDQyxPQUFPLENBQUE7QUFDaEMsSUFBQSxNQUFNQyxNQUFNLEdBQUdGLFFBQVEsQ0FBQ0UsTUFBTSxDQUFBOztJQUc5QixJQUFJLENBQUN2SCxRQUFRLENBQUN3SCxHQUFHLENBQUNGLE9BQU8sQ0FBQ0csT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFSCxPQUFPLENBQUNHLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRUgsT0FBTyxDQUFDRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtJQUM3RSxJQUFJLENBQUM5SSxZQUFZLENBQUM2SSxHQUFHLENBQUNELE1BQU0sQ0FBQ0csY0FBYyxDQUFDLENBQUMsQ0FBQyxFQUFFSCxNQUFNLENBQUNHLGNBQWMsQ0FBQyxDQUFDLENBQUMsRUFBRUgsTUFBTSxDQUFDRyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNuRyxJQUFBLElBQUksQ0FBQzdJLGdCQUFnQixHQUFHMEksTUFBTSxDQUFDMUksZ0JBQWdCLENBQUE7QUFDL0MsSUFBQSxJQUFJLENBQUNzQixJQUFJLEdBQUdvSCxNQUFNLENBQUNyRCxHQUFHLENBQUE7SUFDdEIsSUFBSSxDQUFDbkYsUUFBUSxDQUFDeUksR0FBRyxDQUFDRCxNQUFNLENBQUNJLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRUosTUFBTSxDQUFDSSxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUVKLE1BQU0sQ0FBQ0ksU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDaEYsSUFBQSxJQUFJLENBQUN6SSxRQUFRLEdBQUdxSSxNQUFNLENBQUNLLFNBQVMsQ0FBQTtBQUNoQyxJQUFBLElBQUksQ0FBQzNJLE1BQU0sR0FBR3NJLE1BQU0sQ0FBQ00sT0FBTyxDQUFBO0FBQzVCLElBQUEsSUFBSSxDQUFDN0ksVUFBVSxHQUFHdUksTUFBTSxDQUFDTyxXQUFXLENBQUE7QUFDcEMsSUFBQSxJQUFJLENBQUN6SCxnQkFBZ0IsR0FBR2tILE1BQU0sQ0FBQ1EsZ0JBQWdCLENBQUE7QUFDL0MsSUFBQSxJQUFJLENBQUN4SCxZQUFZLEdBQUdnSCxNQUFNLENBQUNTLFdBQVcsQ0FBQTtBQUN0QyxJQUFBLElBQUksQ0FBQzdJLHNCQUFzQixHQUFHb0ksTUFBTSxDQUFDcEksc0JBQXNCLENBQUE7QUFDM0QsSUFBQSxJQUFJLENBQUNDLHFCQUFxQixHQUFHbUksTUFBTSxDQUFDbkkscUJBQXFCLENBQUE7QUFDekQsSUFBQSxJQUFJLENBQUNDLFlBQVksR0FBR2tJLE1BQU0sQ0FBQ2xJLFlBQVksQ0FBQTtBQUN2QyxJQUFBLElBQUksQ0FBQ1AsUUFBUSxHQUFHeUksTUFBTSxDQUFDekksUUFBUSxDQUFBO0FBQy9CLElBQUEsSUFBSSxDQUFDOEIsZ0JBQWdCLEdBQUcyRyxNQUFNLENBQUNoQyxlQUFlLEtBQUswQyxTQUFTLEdBQUcsQ0FBQyxHQUFHVixNQUFNLENBQUNoQyxlQUFlLENBQUE7QUFDekYsSUFBQSxJQUFJLENBQUMxRSxnQkFBZ0IsR0FBRzBHLE1BQU0sQ0FBQy9CLGVBQWUsS0FBS3lDLFNBQVMsR0FBRyxLQUFLLEdBQUdWLE1BQU0sQ0FBQy9CLGVBQWUsQ0FBQTtBQUM3RixJQUFBLElBQUksQ0FBQzFFLFVBQVUsR0FBR3lHLE1BQU0sQ0FBQzlCLFNBQVMsS0FBS3dDLFNBQVMsR0FBRyxDQUFDLEdBQUdWLE1BQU0sQ0FBQzlCLFNBQVMsQ0FBQTtJQUV2RSxJQUFJOEIsTUFBTSxDQUFDN0IsY0FBYyxFQUFFO01BQ3ZCLElBQUksQ0FBQzNFLGVBQWUsQ0FBQ21ILGtCQUFrQixDQUFDWCxNQUFNLENBQUM3QixjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUU2QixNQUFNLENBQUM3QixjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUU2QixNQUFNLENBQUM3QixjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUN6SCxLQUFBO0FBRUEsSUFBQSxJQUFJLENBQUNoQyx3QkFBd0IsR0FBRzZELE1BQU0sQ0FBQzdELHdCQUF3QixDQUFBO0FBQy9ELElBQUEsSUFBSSxDQUFDYSxRQUFRLENBQUM2QyxhQUFhLENBQUNHLE1BQU0sQ0FBQyxDQUFBOztJQUduQyxDQUNJLHVCQUF1QixFQUN2QixxQkFBcUIsRUFDckIsMEJBQTBCLEVBQzFCLGFBQWEsRUFDYix1QkFBdUIsRUFDdkIsdUJBQXVCLEVBQ3ZCLGdDQUFnQyxFQUNoQyw4QkFBOEIsQ0FDakMsQ0FBQ1ksT0FBTyxDQUFFQyxPQUFPLElBQUs7QUFDbkIsTUFBQSxJQUFJYixNQUFNLENBQUNjLGNBQWMsQ0FBQ0QsT0FBTyxDQUFDLEVBQUU7QUFDaEMsUUFBQSxJQUFJLENBQUNBLE9BQU8sQ0FBQyxHQUFHYixNQUFNLENBQUNhLE9BQU8sQ0FBQyxDQUFBO0FBQ25DLE9BQUE7QUFDSixLQUFDLENBQUMsQ0FBQTtJQUVGLElBQUksQ0FBQ25ELFNBQVMsRUFBRSxDQUFBO0FBQ3BCLEdBQUE7O0FBR0FxRCxFQUFBQSxhQUFhLEdBQUc7QUFDWixJQUFBLE1BQU0xRCxRQUFRLEdBQUcsSUFBSSxDQUFDbkUsb0JBQW9CLENBQUE7SUFFMUMsSUFBSSxJQUFJLENBQUNLLFVBQVUsRUFBRTtBQUtqQixNQUFBLE1BQU15SCxhQUFhLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFVLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBOztNQUdoRCxPQUFPM0QsUUFBUSxDQUFDMkQsYUFBYSxDQUFDLElBQUksQ0FBQ3pILFVBQVUsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDSixTQUFTLElBQUlrRSxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDcEUsY0FBYyxDQUFBO0FBQzNHLEtBQUE7SUFFQSxPQUFPLElBQUksQ0FBQ0EsY0FBYyxJQUFJb0UsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQ2xFLFNBQVMsQ0FBQTtBQUMvRCxHQUFBO0VBRUE4SCxVQUFVLENBQUMzSSxNQUFNLEVBQUU7QUFDZixJQUFBLElBQUksQ0FBQyxJQUFJLENBQUNKLEdBQUcsRUFBRTtBQUNYLE1BQUEsTUFBTWdKLE9BQU8sR0FBRyxJQUFJLENBQUNILGFBQWEsRUFBRSxDQUFBO0FBQ3BDLE1BQUEsSUFBSUcsT0FBTyxFQUFFO1FBQ1QsSUFBSSxDQUFDaEosR0FBRyxHQUFHLElBQUlpSixHQUFHLENBQUM3SSxNQUFNLEVBQUUsSUFBSSxFQUFFNEksT0FBTyxDQUFDLENBQUE7QUFDekMsUUFBQSxJQUFJLENBQUNuRSxJQUFJLENBQUMsWUFBWSxFQUFFbUUsT0FBTyxDQUFDLENBQUE7QUFDcEMsT0FBQTtBQUNKLEtBQUE7QUFDSixHQUFBO0FBRUF4RCxFQUFBQSxTQUFTLEdBQUc7QUFBQSxJQUFBLElBQUEsU0FBQSxDQUFBO0FBQ1IsSUFBQSxDQUFBLFNBQUEsR0FBQSxJQUFJLENBQUN4RixHQUFHLEtBQVIsSUFBQSxHQUFBLEtBQUEsQ0FBQSxHQUFBLFNBQUEsQ0FBVTRGLE9BQU8sRUFBRSxDQUFBO0lBQ25CLElBQUksQ0FBQzVGLEdBQUcsR0FBRyxJQUFJLENBQUE7SUFDZixJQUFJLENBQUNpRCxhQUFhLEdBQUcsSUFBSSxDQUFBO0FBQzdCLEdBQUE7O0VBV0FpRyxTQUFTLENBQUMvRCxRQUFRLEVBQUU7SUFDaEIsSUFBSSxDQUFDQSxRQUFRLEVBQUU7TUFDWCxJQUFJLENBQUNVLE1BQU0sR0FBRyxJQUFJLENBQUE7QUFDbEIsTUFBQSxJQUFJLENBQUNYLG1CQUFtQixHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUNuRSxLQUFDLE1BQU07TUFDSCxJQUFJLENBQUNXLE1BQU0sR0FBR1YsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQTtNQUNqQyxJQUFJLENBQUNELG1CQUFtQixHQUFHQyxRQUFRLENBQUNnRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDaEQsS0FBQTtBQUNKLEdBQUE7QUFDSjs7OzsifQ==
