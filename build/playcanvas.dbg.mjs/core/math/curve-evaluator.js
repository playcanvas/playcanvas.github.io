import { CURVE_STEP, CURVE_LINEAR, CURVE_SMOOTHSTEP, CURVE_CATMULL, CURVE_CARDINAL, CURVE_SPLINE } from './constants.js';
import { math } from './math.js';

/**
 * A class for evaluating a curve at a specific time.
 *
 * @ignore
 */
class CurveEvaluator {
  /**
   * Create a new CurveEvaluator instance.
   *
   * @param {import('./curve.js').Curve} curve - The curve to evaluate.
   * @param {number} time - The initial time to evaluate the curve at. Defaults to 0.
   */
  constructor(curve, time = 0) {
    /** @private */
    this._curve = void 0;
    /** @private */
    this._left = -Infinity;
    /** @private */
    this._right = Infinity;
    /** @private */
    this._recip = 0;
    /** @private */
    this._p0 = 0;
    /** @private */
    this._p1 = 0;
    /** @private */
    this._m0 = 0;
    /** @private */
    this._m1 = 0;
    this._curve = curve;
    this._reset(time);
  }

  /**
   * Evaluate the curve at the given time. Specify forceReset if the underlying curve keys have
   * changed since the last evaluation.
   *
   * @param {number} time - Time to evaluate the curve at.
   * @param {boolean} [forceReset=false] - Force reset of the curve.
   * @returns {number} The evaluated value.
   */
  evaluate(time, forceReset = false) {
    if (forceReset || time < this._left || time >= this._right) {
      this._reset(time);
    }
    let result;
    const type = this._curve.type;
    if (type === CURVE_STEP) {
      // step
      result = this._p0;
    } else {
      // calculate normalized t
      const t = this._recip === 0 ? 0 : (time - this._left) * this._recip;
      if (type === CURVE_LINEAR) {
        // linear
        result = math.lerp(this._p0, this._p1, t);
      } else if (type === CURVE_SMOOTHSTEP) {
        // smoothstep
        result = math.lerp(this._p0, this._p1, t * t * (3 - 2 * t));
      } else {
        // curve
        result = this._evaluateHermite(this._p0, this._p1, this._m0, this._m1, t);
      }
    }
    return result;
  }

  /**
   * Calculate weights for the curve interval at the given time.
   *
   * @param {number} time - Time to evaluate the curve at.
   * @private
   */
  _reset(time) {
    const keys = this._curve.keys;
    const len = keys.length;
    if (!len) {
      // curve is empty
      this._left = -Infinity;
      this._right = Infinity;
      this._recip = 0;
      this._p0 = this._p1 = this._m0 = this._m1 = 0;
    } else {
      if (time < keys[0][0]) {
        // iterator falls to the left of the start of the curve
        this._left = -Infinity;
        this._right = keys[0][0];
        this._recip = 0;
        this._p0 = this._p1 = keys[0][1];
        this._m0 = this._m1 = 0;
      } else if (time >= keys[len - 1][0]) {
        // iterator falls to the right of the end of the curve
        this._left = keys[len - 1][0];
        this._right = Infinity;
        this._recip = 0;
        this._p0 = this._p1 = keys[len - 1][1];
        this._m0 = this._m1 = 0;
      } else {
        // iterator falls within the bounds of the curve
        // perform a linear search for the key just left of the current time.
        // (TODO: for cases where the curve has more than 'n' keys it will
        // be more efficient to perform a binary search here instead. Which is
        // straight forward thanks to the sorted list of knots).
        let index = 0;
        while (time >= keys[index + 1][0]) {
          index++;
        }
        this._left = keys[index][0];
        this._right = keys[index + 1][0];
        const diff = 1.0 / (this._right - this._left);
        this._recip = isFinite(diff) ? diff : 0;
        this._p0 = keys[index][1];
        this._p1 = keys[index + 1][1];
        if (this._isHermite()) {
          this._calcTangents(keys, index);
        }
      }
    }
  }

  /**
   * Returns whether the curve is a hermite.
   *
   * @returns {boolean} True if the curve is a hermite and false otherwise.
   * @private
   */
  _isHermite() {
    return this._curve.type === CURVE_CATMULL || this._curve.type === CURVE_CARDINAL || this._curve.type === CURVE_SPLINE;
  }

  /**
   * Calculate tangents for the hermite curve.
   *
   * @param {number[][]} keys - The keys of the curve.
   * @param {number} index - The key index of the key to calculate the tangents for.
   * @private
   */
  _calcTangents(keys, index) {
    let a;
    const b = keys[index];
    const c = keys[index + 1];
    let d;
    if (index === 0) {
      a = [keys[0][0] + (keys[0][0] - keys[1][0]), keys[0][1] + (keys[0][1] - keys[1][1])];
    } else {
      a = keys[index - 1];
    }
    if (index === keys.length - 2) {
      d = [keys[index + 1][0] + (keys[index + 1][0] - keys[index][0]), keys[index + 1][1] + (keys[index + 1][1] - keys[index][1])];
    } else {
      d = keys[index + 2];
    }
    if (this._curve.type === CURVE_SPLINE) {
      // calculate tangent scale (due to non-uniform knot spacing)
      const s1_ = 2 * (c[0] - b[0]) / (c[0] - a[0]);
      const s2_ = 2 * (c[0] - b[0]) / (d[0] - b[0]);
      this._m0 = this._curve.tension * (isFinite(s1_) ? s1_ : 0) * (c[1] - a[1]);
      this._m1 = this._curve.tension * (isFinite(s2_) ? s2_ : 0) * (d[1] - b[1]);
    } else {
      // original tangent scale calc
      const s1 = (c[0] - b[0]) / (b[0] - a[0]);
      const s2 = (c[0] - b[0]) / (d[0] - c[0]);
      const a_ = b[1] + (a[1] - b[1]) * (isFinite(s1) ? s1 : 0);
      const d_ = c[1] + (d[1] - c[1]) * (isFinite(s2) ? s2 : 0);
      const tension = this._curve.type === CURVE_CATMULL ? 0.5 : this._curve.tension;
      this._m0 = tension * (c[1] - a_);
      this._m1 = tension * (d_ - b[1]);
    }
  }

  /**
   * Evaluate the hermite curve at the given time.
   *
   * @param {number} p0 - The first key.
   * @param {number} p1 - The second key.
   * @param {number} m0 - The first tangent.
   * @param {number} m1 - The second tangent.
   * @param {number} t - Time to evaluate the curve at.
   * @returns {number} The value of the hermite curve at the given time.
   * @private
   */
  _evaluateHermite(p0, p1, m0, m1, t) {
    const t2 = t * t;
    const twot = t + t;
    const omt = 1 - t;
    const omt2 = omt * omt;
    return p0 * ((1 + twot) * omt2) + m0 * (t * omt2) + p1 * (t2 * (3 - twot)) + m1 * (t2 * (t - 1));
  }
}

export { CurveEvaluator };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VydmUtZXZhbHVhdG9yLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29yZS9tYXRoL2N1cnZlLWV2YWx1YXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDVVJWRV9DQVJESU5BTCwgQ1VSVkVfQ0FUTVVMTCwgQ1VSVkVfTElORUFSLCBDVVJWRV9TTU9PVEhTVEVQLCBDVVJWRV9TUExJTkUsIENVUlZFX1NURVAgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBtYXRoIH0gZnJvbSAnLi9tYXRoLmpzJztcblxuLyoqXG4gKiBBIGNsYXNzIGZvciBldmFsdWF0aW5nIGEgY3VydmUgYXQgYSBzcGVjaWZpYyB0aW1lLlxuICpcbiAqIEBpZ25vcmVcbiAqL1xuY2xhc3MgQ3VydmVFdmFsdWF0b3Ige1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9jdXJ2ZTtcblxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9sZWZ0ID0gLUluZmluaXR5O1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX3JpZ2h0ID0gSW5maW5pdHk7XG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfcmVjaXAgPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX3AwID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9wMSA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfbTAgPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX20xID0gMDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBDdXJ2ZUV2YWx1YXRvciBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuL2N1cnZlLmpzJykuQ3VydmV9IGN1cnZlIC0gVGhlIGN1cnZlIHRvIGV2YWx1YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIC0gVGhlIGluaXRpYWwgdGltZSB0byBldmFsdWF0ZSB0aGUgY3VydmUgYXQuIERlZmF1bHRzIHRvIDAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY3VydmUsIHRpbWUgPSAwKSB7XG4gICAgICAgIHRoaXMuX2N1cnZlID0gY3VydmU7XG4gICAgICAgIHRoaXMuX3Jlc2V0KHRpbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV2YWx1YXRlIHRoZSBjdXJ2ZSBhdCB0aGUgZ2l2ZW4gdGltZS4gU3BlY2lmeSBmb3JjZVJlc2V0IGlmIHRoZSB1bmRlcmx5aW5nIGN1cnZlIGtleXMgaGF2ZVxuICAgICAqIGNoYW5nZWQgc2luY2UgdGhlIGxhc3QgZXZhbHVhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIC0gVGltZSB0byBldmFsdWF0ZSB0aGUgY3VydmUgYXQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZm9yY2VSZXNldD1mYWxzZV0gLSBGb3JjZSByZXNldCBvZiB0aGUgY3VydmUuXG4gICAgICogQHJldHVybnMge251bWJlcn0gVGhlIGV2YWx1YXRlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBldmFsdWF0ZSh0aW1lLCBmb3JjZVJlc2V0ID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGZvcmNlUmVzZXQgfHwgdGltZSA8IHRoaXMuX2xlZnQgfHwgdGltZSA+PSB0aGlzLl9yaWdodCkge1xuICAgICAgICAgICAgdGhpcy5fcmVzZXQodGltZSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzdWx0O1xuXG4gICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLl9jdXJ2ZS50eXBlO1xuICAgICAgICBpZiAodHlwZSA9PT0gQ1VSVkVfU1RFUCkge1xuICAgICAgICAgICAgLy8gc3RlcFxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fcDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBjYWxjdWxhdGUgbm9ybWFsaXplZCB0XG4gICAgICAgICAgICBjb25zdCB0ID0gKHRoaXMuX3JlY2lwID09PSAwKSA/IDAgOiAodGltZSAtIHRoaXMuX2xlZnQpICogdGhpcy5fcmVjaXA7XG5cbiAgICAgICAgICAgIGlmICh0eXBlID09PSBDVVJWRV9MSU5FQVIpIHtcbiAgICAgICAgICAgICAgICAvLyBsaW5lYXJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBtYXRoLmxlcnAodGhpcy5fcDAsIHRoaXMuX3AxLCB0KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gQ1VSVkVfU01PT1RIU1RFUCkge1xuICAgICAgICAgICAgICAgIC8vIHNtb290aHN0ZXBcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBtYXRoLmxlcnAodGhpcy5fcDAsIHRoaXMuX3AxLCB0ICogdCAqICgzIC0gMiAqIHQpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY3VydmVcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9ldmFsdWF0ZUhlcm1pdGUodGhpcy5fcDAsIHRoaXMuX3AxLCB0aGlzLl9tMCwgdGhpcy5fbTEsIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHdlaWdodHMgZm9yIHRoZSBjdXJ2ZSBpbnRlcnZhbCBhdCB0aGUgZ2l2ZW4gdGltZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIC0gVGltZSB0byBldmFsdWF0ZSB0aGUgY3VydmUgYXQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfcmVzZXQodGltZSkge1xuICAgICAgICBjb25zdCBrZXlzID0gdGhpcy5fY3VydmUua2V5cztcbiAgICAgICAgY29uc3QgbGVuID0ga2V5cy5sZW5ndGg7XG5cbiAgICAgICAgaWYgKCFsZW4pIHtcbiAgICAgICAgICAgIC8vIGN1cnZlIGlzIGVtcHR5XG4gICAgICAgICAgICB0aGlzLl9sZWZ0ID0gLUluZmluaXR5O1xuICAgICAgICAgICAgdGhpcy5fcmlnaHQgPSBJbmZpbml0eTtcbiAgICAgICAgICAgIHRoaXMuX3JlY2lwID0gMDtcbiAgICAgICAgICAgIHRoaXMuX3AwID0gdGhpcy5fcDEgPSB0aGlzLl9tMCA9IHRoaXMuX20xID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aW1lIDwga2V5c1swXVswXSkge1xuICAgICAgICAgICAgICAgIC8vIGl0ZXJhdG9yIGZhbGxzIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBvZiB0aGUgY3VydmVcbiAgICAgICAgICAgICAgICB0aGlzLl9sZWZ0ID0gLUluZmluaXR5O1xuICAgICAgICAgICAgICAgIHRoaXMuX3JpZ2h0ID0ga2V5c1swXVswXTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWNpcCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5fcDAgPSB0aGlzLl9wMSA9IGtleXNbMF1bMV07XG4gICAgICAgICAgICAgICAgdGhpcy5fbTAgPSB0aGlzLl9tMSA9IDA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRpbWUgPj0ga2V5c1tsZW4gLSAxXVswXSkge1xuICAgICAgICAgICAgICAgIC8vIGl0ZXJhdG9yIGZhbGxzIHRvIHRoZSByaWdodCBvZiB0aGUgZW5kIG9mIHRoZSBjdXJ2ZVxuICAgICAgICAgICAgICAgIHRoaXMuX2xlZnQgPSBrZXlzW2xlbiAtIDFdWzBdO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JpZ2h0ID0gSW5maW5pdHk7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVjaXAgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuX3AwID0gdGhpcy5fcDEgPSBrZXlzW2xlbiAtIDFdWzFdO1xuICAgICAgICAgICAgICAgIHRoaXMuX20wID0gdGhpcy5fbTEgPSAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBpdGVyYXRvciBmYWxscyB3aXRoaW4gdGhlIGJvdW5kcyBvZiB0aGUgY3VydmVcbiAgICAgICAgICAgICAgICAvLyBwZXJmb3JtIGEgbGluZWFyIHNlYXJjaCBmb3IgdGhlIGtleSBqdXN0IGxlZnQgb2YgdGhlIGN1cnJlbnQgdGltZS5cbiAgICAgICAgICAgICAgICAvLyAoVE9ETzogZm9yIGNhc2VzIHdoZXJlIHRoZSBjdXJ2ZSBoYXMgbW9yZSB0aGFuICduJyBrZXlzIGl0IHdpbGxcbiAgICAgICAgICAgICAgICAvLyBiZSBtb3JlIGVmZmljaWVudCB0byBwZXJmb3JtIGEgYmluYXJ5IHNlYXJjaCBoZXJlIGluc3RlYWQuIFdoaWNoIGlzXG4gICAgICAgICAgICAgICAgLy8gc3RyYWlnaHQgZm9yd2FyZCB0aGFua3MgdG8gdGhlIHNvcnRlZCBsaXN0IG9mIGtub3RzKS5cbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlICh0aW1lID49IGtleXNbaW5kZXggKyAxXVswXSkge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9sZWZ0ID0ga2V5c1tpbmRleF1bMF07XG4gICAgICAgICAgICAgICAgdGhpcy5fcmlnaHQgPSBrZXlzW2luZGV4ICsgMV1bMF07XG4gICAgICAgICAgICAgICAgY29uc3QgZGlmZiA9IDEuMCAvICh0aGlzLl9yaWdodCAtIHRoaXMuX2xlZnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlY2lwID0gKGlzRmluaXRlKGRpZmYpID8gZGlmZiA6IDApO1xuICAgICAgICAgICAgICAgIHRoaXMuX3AwID0ga2V5c1tpbmRleF1bMV07XG4gICAgICAgICAgICAgICAgdGhpcy5fcDEgPSBrZXlzW2luZGV4ICsgMV1bMV07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzSGVybWl0ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGNUYW5nZW50cyhrZXlzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBjdXJ2ZSBpcyBhIGhlcm1pdGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgY3VydmUgaXMgYSBoZXJtaXRlIGFuZCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfaXNIZXJtaXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY3VydmUudHlwZSA9PT0gQ1VSVkVfQ0FUTVVMTCB8fFxuICAgICAgICAgICAgICAgdGhpcy5fY3VydmUudHlwZSA9PT0gQ1VSVkVfQ0FSRElOQUwgfHxcbiAgICAgICAgICAgICAgIHRoaXMuX2N1cnZlLnR5cGUgPT09IENVUlZFX1NQTElORTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGFuZ2VudHMgZm9yIHRoZSBoZXJtaXRlIGN1cnZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJbXVtdfSBrZXlzIC0gVGhlIGtleXMgb2YgdGhlIGN1cnZlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIFRoZSBrZXkgaW5kZXggb2YgdGhlIGtleSB0byBjYWxjdWxhdGUgdGhlIHRhbmdlbnRzIGZvci5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jYWxjVGFuZ2VudHMoa2V5cywgaW5kZXgpIHtcbiAgICAgICAgbGV0IGE7XG4gICAgICAgIGNvbnN0IGIgPSBrZXlzW2luZGV4XTtcbiAgICAgICAgY29uc3QgYyA9IGtleXNbaW5kZXggKyAxXTtcbiAgICAgICAgbGV0IGQ7XG5cbiAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICBhID0gW2tleXNbMF1bMF0gKyAoa2V5c1swXVswXSAtIGtleXNbMV1bMF0pLFxuICAgICAgICAgICAgICAgIGtleXNbMF1bMV0gKyAoa2V5c1swXVsxXSAtIGtleXNbMV1bMV0pXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGEgPSBrZXlzW2luZGV4IC0gMV07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5kZXggPT09IGtleXMubGVuZ3RoIC0gMikge1xuICAgICAgICAgICAgZCA9IFtrZXlzW2luZGV4ICsgMV1bMF0gKyAoa2V5c1tpbmRleCArIDFdWzBdIC0ga2V5c1tpbmRleF1bMF0pLFxuICAgICAgICAgICAgICAgIGtleXNbaW5kZXggKyAxXVsxXSArIChrZXlzW2luZGV4ICsgMV1bMV0gLSBrZXlzW2luZGV4XVsxXSldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZCA9IGtleXNbaW5kZXggKyAyXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9jdXJ2ZS50eXBlID09PSBDVVJWRV9TUExJTkUpIHtcbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0YW5nZW50IHNjYWxlIChkdWUgdG8gbm9uLXVuaWZvcm0ga25vdCBzcGFjaW5nKVxuICAgICAgICAgICAgY29uc3QgczFfID0gMiAqIChjWzBdIC0gYlswXSkgLyAoY1swXSAtIGFbMF0pO1xuICAgICAgICAgICAgY29uc3QgczJfID0gMiAqIChjWzBdIC0gYlswXSkgLyAoZFswXSAtIGJbMF0pO1xuXG4gICAgICAgICAgICB0aGlzLl9tMCA9IHRoaXMuX2N1cnZlLnRlbnNpb24gKiAoaXNGaW5pdGUoczFfKSA/IHMxXyA6IDApICogKGNbMV0gLSBhWzFdKTtcbiAgICAgICAgICAgIHRoaXMuX20xID0gdGhpcy5fY3VydmUudGVuc2lvbiAqIChpc0Zpbml0ZShzMl8pID8gczJfIDogMCkgKiAoZFsxXSAtIGJbMV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gb3JpZ2luYWwgdGFuZ2VudCBzY2FsZSBjYWxjXG4gICAgICAgICAgICBjb25zdCBzMSA9IChjWzBdIC0gYlswXSkgLyAoYlswXSAtIGFbMF0pO1xuICAgICAgICAgICAgY29uc3QgczIgPSAoY1swXSAtIGJbMF0pIC8gKGRbMF0gLSBjWzBdKTtcblxuICAgICAgICAgICAgY29uc3QgYV8gPSBiWzFdICsgKGFbMV0gLSBiWzFdKSAqIChpc0Zpbml0ZShzMSkgPyBzMSA6IDApO1xuICAgICAgICAgICAgY29uc3QgZF8gPSBjWzFdICsgKGRbMV0gLSBjWzFdKSAqIChpc0Zpbml0ZShzMikgPyBzMiA6IDApO1xuXG4gICAgICAgICAgICBjb25zdCB0ZW5zaW9uID0gKHRoaXMuX2N1cnZlLnR5cGUgPT09IENVUlZFX0NBVE1VTEwpID8gMC41IDogdGhpcy5fY3VydmUudGVuc2lvbjtcblxuICAgICAgICAgICAgdGhpcy5fbTAgPSB0ZW5zaW9uICogKGNbMV0gLSBhXyk7XG4gICAgICAgICAgICB0aGlzLl9tMSA9IHRlbnNpb24gKiAoZF8gLSBiWzFdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV2YWx1YXRlIHRoZSBoZXJtaXRlIGN1cnZlIGF0IHRoZSBnaXZlbiB0aW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHAwIC0gVGhlIGZpcnN0IGtleS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcDEgLSBUaGUgc2Vjb25kIGtleS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbTAgLSBUaGUgZmlyc3QgdGFuZ2VudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbTEgLSBUaGUgc2Vjb25kIHRhbmdlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHQgLSBUaW1lIHRvIGV2YWx1YXRlIHRoZSBjdXJ2ZSBhdC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBUaGUgdmFsdWUgb2YgdGhlIGhlcm1pdGUgY3VydmUgYXQgdGhlIGdpdmVuIHRpbWUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZXZhbHVhdGVIZXJtaXRlKHAwLCBwMSwgbTAsIG0xLCB0KSB7XG4gICAgICAgIGNvbnN0IHQyID0gdCAqIHQ7XG4gICAgICAgIGNvbnN0IHR3b3QgPSB0ICsgdDtcbiAgICAgICAgY29uc3Qgb210ID0gMSAtIHQ7XG4gICAgICAgIGNvbnN0IG9tdDIgPSBvbXQgKiBvbXQ7XG4gICAgICAgIHJldHVybiBwMCAqICgoMSArIHR3b3QpICogb210MikgK1xuICAgICAgICAgICAgICAgbTAgKiAodCAqIG9tdDIpICtcbiAgICAgICAgICAgICAgIHAxICogKHQyICogKDMgLSB0d290KSkgK1xuICAgICAgICAgICAgICAgbTEgKiAodDIgKiAodCAtIDEpKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IEN1cnZlRXZhbHVhdG9yIH07XG4iXSwibmFtZXMiOlsiQ3VydmVFdmFsdWF0b3IiLCJjb25zdHJ1Y3RvciIsImN1cnZlIiwidGltZSIsIl9jdXJ2ZSIsIl9sZWZ0IiwiSW5maW5pdHkiLCJfcmlnaHQiLCJfcmVjaXAiLCJfcDAiLCJfcDEiLCJfbTAiLCJfbTEiLCJfcmVzZXQiLCJldmFsdWF0ZSIsImZvcmNlUmVzZXQiLCJyZXN1bHQiLCJ0eXBlIiwiQ1VSVkVfU1RFUCIsInQiLCJDVVJWRV9MSU5FQVIiLCJtYXRoIiwibGVycCIsIkNVUlZFX1NNT09USFNURVAiLCJfZXZhbHVhdGVIZXJtaXRlIiwia2V5cyIsImxlbiIsImxlbmd0aCIsImluZGV4IiwiZGlmZiIsImlzRmluaXRlIiwiX2lzSGVybWl0ZSIsIl9jYWxjVGFuZ2VudHMiLCJDVVJWRV9DQVRNVUxMIiwiQ1VSVkVfQ0FSRElOQUwiLCJDVVJWRV9TUExJTkUiLCJhIiwiYiIsImMiLCJkIiwiczFfIiwiczJfIiwidGVuc2lvbiIsInMxIiwiczIiLCJhXyIsImRfIiwicDAiLCJwMSIsIm0wIiwibTEiLCJ0MiIsInR3b3QiLCJvbXQiLCJvbXQyIl0sIm1hcHBpbmdzIjoiOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsY0FBYyxDQUFDO0FBeUJqQjtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSUMsRUFBQUEsV0FBV0EsQ0FBQ0MsS0FBSyxFQUFFQyxJQUFJLEdBQUcsQ0FBQyxFQUFFO0FBOUI3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
